var rS=Object.defineProperty;var sS=(e,t,n)=>t in e?rS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var tc=(e,t,n)=>sS(e,typeof t!="symbol"?t+"":t,n);function aS(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in e)){const h=Object.getOwnPropertyDescriptor(s,l);h&&Object.defineProperty(e,l,h.get?h:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function n(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(l){if(l.ep)return;l.ep=!0;const h=n(l);fetch(l.href,h)}})();var tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function GA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var e1={exports:{}},ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V2;function oS(){if(V2)return ec;V2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,h){var p=null;if(h!==void 0&&(p=""+h),l.key!==void 0&&(p=""+l.key),"key"in l){h={};for(var A in l)A!=="key"&&(h[A]=l[A])}else h=l;return l=h.ref,{$$typeof:e,type:s,key:p,ref:l!==void 0?l:null,props:h}}return ec.Fragment=t,ec.jsx=n,ec.jsxs=n,ec}var k2;function lS(){return k2||(k2=1,e1.exports=oS()),e1.exports}var lt=lS(),n1={exports:{}},me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U2;function uS(){if(U2)return me;U2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),p=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.iterator;function L($){return $===null||typeof $!="object"?null:($=I&&$[I]||$["@@iterator"],typeof $=="function"?$:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,W={};function Y($,It,Bt){this.props=$,this.context=It,this.refs=W,this.updater=Bt||k}Y.prototype.isReactComponent={},Y.prototype.setState=function($,It){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,It,"setState")},Y.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function Q(){}Q.prototype=Y.prototype;function rt($,It,Bt){this.props=$,this.context=It,this.refs=W,this.updater=Bt||k}var nt=rt.prototype=new Q;nt.constructor=rt,G(nt,Y.prototype),nt.isPureReactComponent=!0;var _t=Array.isArray,St={H:null,A:null,T:null,S:null,V:null},Lt=Object.prototype.hasOwnProperty;function z($,It,Bt,Ot,zt,fe){return Bt=fe.ref,{$$typeof:e,type:$,key:It,ref:Bt!==void 0?Bt:null,props:fe}}function F($,It){return z($.type,It,void 0,void 0,void 0,$.props)}function V($){return typeof $=="object"&&$!==null&&$.$$typeof===e}function J($){var It={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(Bt){return It[Bt]})}var tt=/\/+/g;function K($,It){return typeof $=="object"&&$!==null&&$.key!=null?J(""+$.key):It.toString(36)}function q(){}function Ee($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(q,q):($.status="pending",$.then(function(It){$.status==="pending"&&($.status="fulfilled",$.value=It)},function(It){$.status==="pending"&&($.status="rejected",$.reason=It)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function mt($,It,Bt,Ot,zt){var fe=typeof $;(fe==="undefined"||fe==="boolean")&&($=null);var Mt=!1;if($===null)Mt=!0;else switch(fe){case"bigint":case"string":case"number":Mt=!0;break;case"object":switch($.$$typeof){case e:case t:Mt=!0;break;case S:return Mt=$._init,mt(Mt($._payload),It,Bt,Ot,zt)}}if(Mt)return zt=zt($),Mt=Ot===""?"."+K($,0):Ot,_t(zt)?(Bt="",Mt!=null&&(Bt=Mt.replace(tt,"$&/")+"/"),mt(zt,It,Bt,"",function(Oi){return Oi})):zt!=null&&(V(zt)&&(zt=F(zt,Bt+(zt.key==null||$&&$.key===zt.key?"":(""+zt.key).replace(tt,"$&/")+"/")+Mt)),It.push(zt)),1;Mt=0;var kn=Ot===""?".":Ot+":";if(_t($))for(var ae=0;ae<$.length;ae++)Ot=$[ae],fe=kn+K(Ot,ae),Mt+=mt(Ot,It,Bt,fe,zt);else if(ae=L($),typeof ae=="function")for($=ae.call($),ae=0;!(Ot=$.next()).done;)Ot=Ot.value,fe=kn+K(Ot,ae++),Mt+=mt(Ot,It,Bt,fe,zt);else if(fe==="object"){if(typeof $.then=="function")return mt(Ee($),It,Bt,Ot,zt);throw It=String($),Error("Objects are not valid as a React child (found: "+(It==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":It)+"). If you meant to render a collection of children, use an array instead.")}return Mt}function Et($,It,Bt){if($==null)return $;var Ot=[],zt=0;return mt($,Ot,"","",function(fe){return It.call(Bt,fe,zt++)}),Ot}function At($){if($._status===-1){var It=$._result;It=It(),It.then(function(Bt){($._status===0||$._status===-1)&&($._status=1,$._result=Bt)},function(Bt){($._status===0||$._status===-1)&&($._status=2,$._result=Bt)}),$._status===-1&&($._status=0,$._result=It)}if($._status===1)return $._result.default;throw $._result}var jt=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var It=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(It))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)};function ue(){}return me.Children={map:Et,forEach:function($,It,Bt){Et($,function(){It.apply(this,arguments)},Bt)},count:function($){var It=0;return Et($,function(){It++}),It},toArray:function($){return Et($,function(It){return It})||[]},only:function($){if(!V($))throw Error("React.Children.only expected to receive a single React element child.");return $}},me.Component=Y,me.Fragment=n,me.Profiler=l,me.PureComponent=rt,me.StrictMode=s,me.Suspense=T,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=St,me.__COMPILER_RUNTIME={__proto__:null,c:function($){return St.H.useMemoCache($)}},me.cache=function($){return function(){return $.apply(null,arguments)}},me.cloneElement=function($,It,Bt){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var Ot=G({},$.props),zt=$.key,fe=void 0;if(It!=null)for(Mt in It.ref!==void 0&&(fe=void 0),It.key!==void 0&&(zt=""+It.key),It)!Lt.call(It,Mt)||Mt==="key"||Mt==="__self"||Mt==="__source"||Mt==="ref"&&It.ref===void 0||(Ot[Mt]=It[Mt]);var Mt=arguments.length-2;if(Mt===1)Ot.children=Bt;else if(1<Mt){for(var kn=Array(Mt),ae=0;ae<Mt;ae++)kn[ae]=arguments[ae+2];Ot.children=kn}return z($.type,zt,void 0,void 0,fe,Ot)},me.createContext=function($){return $={$$typeof:p,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:h,_context:$},$},me.createElement=function($,It,Bt){var Ot,zt={},fe=null;if(It!=null)for(Ot in It.key!==void 0&&(fe=""+It.key),It)Lt.call(It,Ot)&&Ot!=="key"&&Ot!=="__self"&&Ot!=="__source"&&(zt[Ot]=It[Ot]);var Mt=arguments.length-2;if(Mt===1)zt.children=Bt;else if(1<Mt){for(var kn=Array(Mt),ae=0;ae<Mt;ae++)kn[ae]=arguments[ae+2];zt.children=kn}if($&&$.defaultProps)for(Ot in Mt=$.defaultProps,Mt)zt[Ot]===void 0&&(zt[Ot]=Mt[Ot]);return z($,fe,void 0,void 0,null,zt)},me.createRef=function(){return{current:null}},me.forwardRef=function($){return{$$typeof:A,render:$}},me.isValidElement=V,me.lazy=function($){return{$$typeof:S,_payload:{_status:-1,_result:$},_init:At}},me.memo=function($,It){return{$$typeof:E,type:$,compare:It===void 0?null:It}},me.startTransition=function($){var It=St.T,Bt={};St.T=Bt;try{var Ot=$(),zt=St.S;zt!==null&&zt(Bt,Ot),typeof Ot=="object"&&Ot!==null&&typeof Ot.then=="function"&&Ot.then(ue,jt)}catch(fe){jt(fe)}finally{St.T=It}},me.unstable_useCacheRefresh=function(){return St.H.useCacheRefresh()},me.use=function($){return St.H.use($)},me.useActionState=function($,It,Bt){return St.H.useActionState($,It,Bt)},me.useCallback=function($,It){return St.H.useCallback($,It)},me.useContext=function($){return St.H.useContext($)},me.useDebugValue=function(){},me.useDeferredValue=function($,It){return St.H.useDeferredValue($,It)},me.useEffect=function($,It,Bt){var Ot=St.H;if(typeof Bt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ot.useEffect($,It)},me.useId=function(){return St.H.useId()},me.useImperativeHandle=function($,It,Bt){return St.H.useImperativeHandle($,It,Bt)},me.useInsertionEffect=function($,It){return St.H.useInsertionEffect($,It)},me.useLayoutEffect=function($,It){return St.H.useLayoutEffect($,It)},me.useMemo=function($,It){return St.H.useMemo($,It)},me.useOptimistic=function($,It){return St.H.useOptimistic($,It)},me.useReducer=function($,It,Bt){return St.H.useReducer($,It,Bt)},me.useRef=function($){return St.H.useRef($)},me.useState=function($){return St.H.useState($)},me.useSyncExternalStore=function($,It,Bt){return St.H.useSyncExternalStore($,It,Bt)},me.useTransition=function(){return St.H.useTransition()},me.version="19.1.0",me}var F2;function wg(){return F2||(F2=1,n1.exports=uS()),n1.exports}var ct=wg();const fa=GA(ct);var i1={exports:{}},nc={},r1={exports:{}},s1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j2;function cS(){return j2||(j2=1,function(e){function t(Et,At){var jt=Et.length;Et.push(At);t:for(;0<jt;){var ue=jt-1>>>1,$=Et[ue];if(0<l($,At))Et[ue]=At,Et[jt]=$,jt=ue;else break t}}function n(Et){return Et.length===0?null:Et[0]}function s(Et){if(Et.length===0)return null;var At=Et[0],jt=Et.pop();if(jt!==At){Et[0]=jt;t:for(var ue=0,$=Et.length,It=$>>>1;ue<It;){var Bt=2*(ue+1)-1,Ot=Et[Bt],zt=Bt+1,fe=Et[zt];if(0>l(Ot,jt))zt<$&&0>l(fe,Ot)?(Et[ue]=fe,Et[zt]=jt,ue=zt):(Et[ue]=Ot,Et[Bt]=jt,ue=Bt);else if(zt<$&&0>l(fe,jt))Et[ue]=fe,Et[zt]=jt,ue=zt;else break t}}return At}function l(Et,At){var jt=Et.sortIndex-At.sortIndex;return jt!==0?jt:Et.id-At.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var p=Date,A=p.now();e.unstable_now=function(){return p.now()-A}}var T=[],E=[],S=1,I=null,L=3,k=!1,G=!1,W=!1,Y=!1,Q=typeof setTimeout=="function"?setTimeout:null,rt=typeof clearTimeout=="function"?clearTimeout:null,nt=typeof setImmediate<"u"?setImmediate:null;function _t(Et){for(var At=n(E);At!==null;){if(At.callback===null)s(E);else if(At.startTime<=Et)s(E),At.sortIndex=At.expirationTime,t(T,At);else break;At=n(E)}}function St(Et){if(W=!1,_t(Et),!G)if(n(T)!==null)G=!0,Lt||(Lt=!0,K());else{var At=n(E);At!==null&&mt(St,At.startTime-Et)}}var Lt=!1,z=-1,F=5,V=-1;function J(){return Y?!0:!(e.unstable_now()-V<F)}function tt(){if(Y=!1,Lt){var Et=e.unstable_now();V=Et;var At=!0;try{t:{G=!1,W&&(W=!1,rt(z),z=-1),k=!0;var jt=L;try{e:{for(_t(Et),I=n(T);I!==null&&!(I.expirationTime>Et&&J());){var ue=I.callback;if(typeof ue=="function"){I.callback=null,L=I.priorityLevel;var $=ue(I.expirationTime<=Et);if(Et=e.unstable_now(),typeof $=="function"){I.callback=$,_t(Et),At=!0;break e}I===n(T)&&s(T),_t(Et)}else s(T);I=n(T)}if(I!==null)At=!0;else{var It=n(E);It!==null&&mt(St,It.startTime-Et),At=!1}}break t}finally{I=null,L=jt,k=!1}At=void 0}}finally{At?K():Lt=!1}}}var K;if(typeof nt=="function")K=function(){nt(tt)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,Ee=q.port2;q.port1.onmessage=tt,K=function(){Ee.postMessage(null)}}else K=function(){Q(tt,0)};function mt(Et,At){z=Q(function(){Et(e.unstable_now())},At)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Et){Et.callback=null},e.unstable_forceFrameRate=function(Et){0>Et||125<Et?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<Et?Math.floor(1e3/Et):5},e.unstable_getCurrentPriorityLevel=function(){return L},e.unstable_next=function(Et){switch(L){case 1:case 2:case 3:var At=3;break;default:At=L}var jt=L;L=At;try{return Et()}finally{L=jt}},e.unstable_requestPaint=function(){Y=!0},e.unstable_runWithPriority=function(Et,At){switch(Et){case 1:case 2:case 3:case 4:case 5:break;default:Et=3}var jt=L;L=Et;try{return At()}finally{L=jt}},e.unstable_scheduleCallback=function(Et,At,jt){var ue=e.unstable_now();switch(typeof jt=="object"&&jt!==null?(jt=jt.delay,jt=typeof jt=="number"&&0<jt?ue+jt:ue):jt=ue,Et){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=jt+$,Et={id:S++,callback:At,priorityLevel:Et,startTime:jt,expirationTime:$,sortIndex:-1},jt>ue?(Et.sortIndex=jt,t(E,Et),n(T)===null&&Et===n(E)&&(W?(rt(z),z=-1):W=!0,mt(St,jt-ue))):(Et.sortIndex=$,t(T,Et),G||k||(G=!0,Lt||(Lt=!0,K()))),Et},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(Et){var At=L;return function(){var jt=L;L=At;try{return Et.apply(this,arguments)}finally{L=jt}}}}(s1)),s1}var z2;function hS(){return z2||(z2=1,r1.exports=cS()),r1.exports}var a1={exports:{}},Hi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H2;function fS(){if(H2)return Hi;H2=1;var e=wg();function t(T){var E="https://react.dev/errors/"+T;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)E+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+T+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(T,E,S){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:I==null?null:""+I,children:T,containerInfo:E,implementation:S}}var p=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function A(T,E){if(T==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return Hi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Hi.createPortal=function(T,E){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(t(299));return h(T,E,null,S)},Hi.flushSync=function(T){var E=p.T,S=s.p;try{if(p.T=null,s.p=2,T)return T()}finally{p.T=E,s.p=S,s.d.f()}},Hi.preconnect=function(T,E){typeof T=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,s.d.C(T,E))},Hi.prefetchDNS=function(T){typeof T=="string"&&s.d.D(T)},Hi.preinit=function(T,E){if(typeof T=="string"&&E&&typeof E.as=="string"){var S=E.as,I=A(S,E.crossOrigin),L=typeof E.integrity=="string"?E.integrity:void 0,k=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;S==="style"?s.d.S(T,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:I,integrity:L,fetchPriority:k}):S==="script"&&s.d.X(T,{crossOrigin:I,integrity:L,fetchPriority:k,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},Hi.preinitModule=function(T,E){if(typeof T=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var S=A(E.as,E.crossOrigin);s.d.M(T,{crossOrigin:S,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&s.d.M(T)},Hi.preload=function(T,E){if(typeof T=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var S=E.as,I=A(S,E.crossOrigin);s.d.L(T,S,{crossOrigin:I,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},Hi.preloadModule=function(T,E){if(typeof T=="string")if(E){var S=A(E.as,E.crossOrigin);s.d.m(T,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:S,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else s.d.m(T)},Hi.requestFormReset=function(T){s.d.r(T)},Hi.unstable_batchedUpdates=function(T,E){return T(E)},Hi.useFormState=function(T,E,S){return p.H.useFormState(T,E,S)},Hi.useFormStatus=function(){return p.H.useHostTransitionStatus()},Hi.version="19.1.0",Hi}var G2;function dS(){if(G2)return a1.exports;G2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),a1.exports=fS(),a1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y2;function gS(){if(Y2)return nc;Y2=1;var e=hS(),t=wg(),n=dS();function s(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function h(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function p(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function A(i){if(h(i)!==i)throw Error(s(188))}function T(i){var a=i.alternate;if(!a){if(a=h(i),a===null)throw Error(s(188));return a!==i?null:i}for(var c=i,g=a;;){var w=c.return;if(w===null)break;var _=w.alternate;if(_===null){if(g=w.return,g!==null){c=g;continue}break}if(w.child===_.child){for(_=w.child;_;){if(_===c)return A(w),i;if(_===g)return A(w),a;_=_.sibling}throw Error(s(188))}if(c.return!==g.return)c=w,g=_;else{for(var N=!1,B=w.child;B;){if(B===c){N=!0,c=w,g=_;break}if(B===g){N=!0,g=w,c=_;break}B=B.sibling}if(!N){for(B=_.child;B;){if(B===c){N=!0,c=_,g=w;break}if(B===g){N=!0,g=_,c=w;break}B=B.sibling}if(!N)throw Error(s(189))}}if(c.alternate!==g)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:a}function E(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=E(i),a!==null)return a;i=i.sibling}return null}var S=Object.assign,I=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),rt=Symbol.for("react.consumer"),nt=Symbol.for("react.context"),_t=Symbol.for("react.forward_ref"),St=Symbol.for("react.suspense"),Lt=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),tt=Symbol.iterator;function K(i){return i===null||typeof i!="object"?null:(i=tt&&i[tt]||i["@@iterator"],typeof i=="function"?i:null)}var q=Symbol.for("react.client.reference");function Ee(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===q?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case G:return"Fragment";case Y:return"Profiler";case W:return"StrictMode";case St:return"Suspense";case Lt:return"SuspenseList";case V:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case k:return"Portal";case nt:return(i.displayName||"Context")+".Provider";case rt:return(i._context.displayName||"Context")+".Consumer";case _t:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case z:return a=i.displayName||null,a!==null?a:Ee(i.type)||"Memo";case F:a=i._payload,i=i._init;try{return Ee(i(a))}catch{}}return null}var mt=Array.isArray,Et=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,At=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,jt={pending:!1,data:null,method:null,action:null},ue=[],$=-1;function It(i){return{current:i}}function Bt(i){0>$||(i.current=ue[$],ue[$]=null,$--)}function Ot(i,a){$++,ue[$]=i.current,i.current=a}var zt=It(null),fe=It(null),Mt=It(null),kn=It(null);function ae(i,a){switch(Ot(Mt,a),Ot(fe,i),Ot(zt,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?h2(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=h2(a),i=f2(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Bt(zt),Ot(zt,i)}function Oi(){Bt(zt),Bt(fe),Bt(Mt)}function er(i){i.memoizedState!==null&&Ot(kn,i);var a=zt.current,c=f2(a,i.type);a!==c&&(Ot(fe,i),Ot(zt,c))}function _n(i){fe.current===i&&(Bt(zt),Bt(fe)),kn.current===i&&(Bt(kn),Qu._currentValue=jt)}var Lr=Object.prototype.hasOwnProperty,Ae=e.unstable_scheduleCallback,nr=e.unstable_cancelCallback,Li=e.unstable_shouldYield,ps=e.unstable_requestPaint,Xe=e.unstable_now,We=e.unstable_getCurrentPriorityLevel,we=e.unstable_ImmediatePriority,ns=e.unstable_UserBlockingPriority,Ht=e.unstable_NormalPriority,Ta=e.unstable_LowPriority,js=e.unstable_IdlePriority,Qi=e.log,va=e.unstable_setDisableYieldValue,Oe=null,Ue=null;function Un(i){if(typeof Qi=="function"&&va(i),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(Oe,i)}catch{}}var Fe=Math.clz32?Math.clz32:zs,Ao=Math.log,_a=Math.LN2;function zs(i){return i>>>=0,i===0?32:31-(Ao(i)/_a|0)|0}var rn=256,Vt=4194304;function Ye(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Le(i,a,c){var g=i.pendingLanes;if(g===0)return 0;var w=0,_=i.suspendedLanes,N=i.pingedLanes;i=i.warmLanes;var B=g&134217727;return B!==0?(g=B&~_,g!==0?w=Ye(g):(N&=B,N!==0?w=Ye(N):c||(c=B&~i,c!==0&&(w=Ye(c))))):(B=g&~_,B!==0?w=Ye(B):N!==0?w=Ye(N):c||(c=g&~i,c!==0&&(w=Ye(c)))),w===0?0:a!==0&&a!==w&&(a&_)===0&&(_=w&-w,c=a&-a,_>=c||_===32&&(c&4194048)!==0)?a:w}function Qe(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function is(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hs(){var i=rn;return rn<<=1,(rn&4194048)===0&&(rn=256),i}function Ca(){var i=Vt;return Vt<<=1,(Vt&62914560)===0&&(Vt=4194304),i}function ge(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Ai(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Sa(i,a,c,g,w,_){var N=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var B=i.entanglements,X=i.expirationTimes,ft=i.hiddenUpdates;for(c=N&~c;0<c;){var wt=31-Fe(c),Ct=1<<wt;B[wt]=0,X[wt]=-1;var dt=ft[wt];if(dt!==null)for(ft[wt]=null,wt=0;wt<dt.length;wt++){var yt=dt[wt];yt!==null&&(yt.lane&=-536870913)}c&=~Ct}g!==0&&mr(i,g,0),_!==0&&w===0&&i.tag!==0&&(i.suspendedLanes|=_&~(N&~a))}function mr(i,a,c){i.pendingLanes|=a,i.suspendedLanes&=~a;var g=31-Fe(a);i.entangledLanes|=a,i.entanglements[g]=i.entanglements[g]|1073741824|c&4194090}function wi(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var g=31-Fe(c),w=1<<g;w&a|i[g]&a&&(i[g]|=a),c&=~w}}function Pr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function On(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ki(){var i=At.p;return i!==0?i:(i=window.event,i===void 0?32:N2(i.type))}function Gs(i,a){var c=At.p;try{return At.p=i,a()}finally{At.p=c}}var Me=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Me,sn="__reactProps$"+Me,Pi="__reactContainer$"+Me,ei="__reactEvents$"+Me,rs="__reactListeners$"+Me,Wn="__reactHandles$"+Me,Ft="__reactResources$"+Me,ir="__reactMarker$"+Me;function Br(i){delete i[Xn],delete i[sn],delete i[ei],delete i[rs],delete i[Wn]}function Cn(i){var a=i[Xn];if(a)return a;for(var c=i.parentNode;c;){if(a=c[Pi]||c[Xn]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=p2(i);i!==null;){if(c=i[Xn])return c;i=p2(i)}return a}i=c,c=i.parentNode}return null}function Ti(i){if(i=i[Xn]||i[Pi]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Zi(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(s(33))}function ni(i){var a=i[Ft];return a||(a=i[Ft]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function je(i){i[ir]=!0}var wo=new Set,ba={};function Fn(i,a){xn(i,a),xn(i+"Capture",a)}function xn(i,a){for(ba[i]=a,i=0;i<a.length;i++)wo.add(a[i])}var Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),To={},Bi={};function Ia(i){return Lr.call(Bi,i)?!0:Lr.call(To,i)?!1:Je.test(i)?Bi[i]=!0:(To[i]=!0,!1)}function vt(i,a,c){if(Ia(a))if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var g=a.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+c)}}function Vr(i,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+c)}}function pe(i,a,c,g){if(g===null)i.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(a,c,""+g)}}var rr,$o;function ye(i){if(rr===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);rr=a&&a[1]||"",$o=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rr+i+$o}var _e=!1;function de(i,a){if(!i||_e)return"";_e=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(a){var Ct=function(){throw Error()};if(Object.defineProperty(Ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ct,[])}catch(yt){var dt=yt}Reflect.construct(i,[],Ct)}else{try{Ct.call()}catch(yt){dt=yt}i.call(Ct.prototype)}}else{try{throw Error()}catch(yt){dt=yt}(Ct=i())&&typeof Ct.catch=="function"&&Ct.catch(function(){})}}catch(yt){if(yt&&dt&&typeof yt.stack=="string")return[yt.stack,dt.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=g.DetermineComponentFrameRoot(),N=_[0],B=_[1];if(N&&B){var X=N.split(`
`),ft=B.split(`
`);for(w=g=0;g<X.length&&!X[g].includes("DetermineComponentFrameRoot");)g++;for(;w<ft.length&&!ft[w].includes("DetermineComponentFrameRoot");)w++;if(g===X.length||w===ft.length)for(g=X.length-1,w=ft.length-1;1<=g&&0<=w&&X[g]!==ft[w];)w--;for(;1<=g&&0<=w;g--,w--)if(X[g]!==ft[w]){if(g!==1||w!==1)do if(g--,w--,0>w||X[g]!==ft[w]){var wt=`
`+X[g].replace(" at new "," at ");return i.displayName&&wt.includes("<anonymous>")&&(wt=wt.replace("<anonymous>",i.displayName)),wt}while(1<=g&&0<=w);break}}}finally{_e=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?ye(c):""}function Ys(i){switch(i.tag){case 26:case 27:case 5:return ye(i.type);case 16:return ye("Lazy");case 13:return ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return de(i.type,!1);case 11:return de(i.type.render,!1);case 1:return de(i.type,!0);case 31:return ye("Activity");default:return""}}function ys(i){try{var a="";do a+=Ys(i),i=i.return;while(i);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function oi(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function En(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function kr(i){var a=En(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),g=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var w=c.get,_=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return w.call(this)},set:function(N){g=""+N,_.call(this,N)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return g},setValue:function(N){g=""+N},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Ra(i){i._valueTracker||(i._valueTracker=kr(i))}function un(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),g="";return i&&(g=En(i)?i.checked?"true":"false":i.value),i=g,i!==c?(a.setValue(i),!0):!1}function Vi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var gu=/[\n"\\]/g;function cn(i){return i.replace(gu,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function xe(i,a,c,g,w,_,N,B){i.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?i.type=N:i.removeAttribute("type"),a!=null?N==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+oi(a)):i.value!==""+oi(a)&&(i.value=""+oi(a)):N!=="submit"&&N!=="reset"||i.removeAttribute("value"),a!=null?at(i,N,oi(a)):c!=null?at(i,N,oi(c)):g!=null&&i.removeAttribute("value"),w==null&&_!=null&&(i.defaultChecked=!!_),w!=null&&(i.checked=w&&typeof w!="function"&&typeof w!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?i.name=""+oi(B):i.removeAttribute("name")}function Sn(i,a,c,g,w,_,N,B){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),a!=null||c!=null){if(!(_!=="submit"&&_!=="reset"||a!=null))return;c=c!=null?""+oi(c):"",a=a!=null?""+oi(a):c,B||a===i.value||(i.value=a),i.defaultValue=a}g=g??w,g=typeof g!="function"&&typeof g!="symbol"&&!!g,i.checked=B?i.checked:!!g,i.defaultChecked=!!g,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(i.name=N)}function at(i,a,c){a==="number"&&Vi(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function j(i,a,c,g){if(i=i.options,a){a={};for(var w=0;w<c.length;w++)a["$"+c[w]]=!0;for(c=0;c<i.length;c++)w=a.hasOwnProperty("$"+i[c].value),i[c].selected!==w&&(i[c].selected=w),w&&g&&(i[c].defaultSelected=!0)}else{for(c=""+oi(c),a=null,w=0;w<i.length;w++){if(i[w].value===c){i[w].selected=!0,g&&(i[w].defaultSelected=!0);return}a!==null||i[w].disabled||(a=i[w])}a!==null&&(a.selected=!0)}}function Ut(i,a,c){if(a!=null&&(a=""+oi(a),a!==i.value&&(i.value=a),c==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=c!=null?""+oi(c):""}function mn(i,a,c,g){if(a==null){if(g!=null){if(c!=null)throw Error(s(92));if(mt(g)){if(1<g.length)throw Error(s(93));g=g[0]}c=g}c==null&&(c=""),a=c}c=oi(a),i.defaultValue=c,g=i.textContent,g===c&&g!==""&&g!==null&&(i.value=g)}function An(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var qs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Da(i,a,c){var g=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?g?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":g?i.setProperty(a,c):typeof c!="number"||c===0||qs.has(a)?a==="float"?i.cssFloat=c:i[a]=(""+c).trim():i[a]=c+"px"}function mi(i,a,c){if(a!=null&&typeof a!="object")throw Error(s(62));if(i=i.style,c!=null){for(var g in c)!c.hasOwnProperty(g)||a!=null&&a.hasOwnProperty(g)||(g.indexOf("--")===0?i.setProperty(g,""):g==="float"?i.cssFloat="":i[g]="");for(var w in a)g=a[w],a.hasOwnProperty(w)&&c[w]!==g&&Da(i,w,g)}else for(var _ in a)a.hasOwnProperty(_)&&Da(i,_,a[_])}function Xt(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(i){return tl.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var pr=null;function vi(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yr=null,ss=null;function bn(i){var a=Ti(i);if(a&&(i=a.stateNode)){var c=i[sn]||null;t:switch(i=a.stateNode,a.type){case"input":if(xe(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+cn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var g=c[a];if(g!==i&&g.form===i.form){var w=g[sn]||null;if(!w)throw Error(s(90));xe(g,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(a=0;a<c.length;a++)g=c[a],g.form===i.form&&un(g)}break t;case"textarea":Ut(i,c.value,c.defaultValue);break t;case"select":a=c.value,a!=null&&j(i,!!c.multiple,a,!1)}}}var ki=!1;function xr(i,a,c){if(ki)return i(a,c);ki=!0;try{var g=i(a);return g}finally{if(ki=!1,(yr!==null||ss!==null)&&(Oh(),yr&&(a=yr,i=ss,ss=yr=null,bn(a),i)))for(a=0;a<i.length;a++)bn(i[a])}}function Wt(i,a){var c=i.stateNode;if(c===null)return null;var g=c[sn]||null;if(g===null)return null;c=g[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break t;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,a,typeof c));return c}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jt=!1;if(Er)try{var wn={};Object.defineProperty(wn,"passive",{get:function(){Jt=!0}}),window.addEventListener("test",wn,wn),window.removeEventListener("test",wn,wn)}catch{Jt=!1}var Ur=null,Fr=null,jr=null;function Ar(){if(jr)return jr;var i,a=Fr,c=a.length,g,w="value"in Ur?Ur.value:Ur.textContent,_=w.length;for(i=0;i<c&&a[i]===w[i];i++);var N=c-i;for(g=1;g<=N&&a[c-g]===w[_-g];g++);return jr=w.slice(i,1<g?1-g:void 0)}function zr(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Ui(){return!0}function as(){return!1}function In(i){function a(c,g,w,_,N){this._reactName=c,this._targetInst=w,this.type=g,this.nativeEvent=_,this.target=N,this.currentTarget=null;for(var B in i)i.hasOwnProperty(B)&&(c=i[B],this[B]=c?c(_):_[B]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ui:as,this.isPropagationStopped=as,this}return S(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),a}var ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hr=In(ke),wr=S({},ke,{view:0,detail:0}),li=In(wr),Xs,Ws,Tr,Qs=S({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ls,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Tr&&(Tr&&i.type==="mousemove"?(Xs=i.screenX-Tr.screenX,Ws=i.screenY-Tr.screenY):Ws=Xs=0,Tr=i),Xs)},movementY:function(i){return"movementY"in i?i.movementY:Ws}}),sr=In(Qs),el=S({},Qs,{dataTransfer:0}),ze=In(el),xs=S({},wr,{relatedTarget:0}),os=In(xs),ar=S({},ke,{animationName:0,elapsedTime:0,pseudoElement:0}),Ma=In(ar),pt=S({},ke,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),se=In(pt),Qn=S({},ke,{data:0}),Es=In(Qn),As={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},il={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vo(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=il[i])?!!a[i]:!1}function ls(){return vo}var Rn=S({},wr,{key:function(i){if(i.key){var a=As[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=zr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?nl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ls,charCode:function(i){return i.type==="keypress"?zr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?zr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ws=In(Rn),fn=S({},Qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ts=In(fn),_i=S({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ls}),He=In(_i),Kt=S({},ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),rl=In(Kt),Ke=S({},Qs,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),or=In(Ke),jn=S({},ke,{newState:0,oldState:0}),sl=In(jn),Ji=[9,13,27,32],lr=Er&&"CompositionEvent"in window,x=null;Er&&"documentMode"in document&&(x=document.documentMode);var b=Er&&"TextEvent"in window&&!x,D=Er&&(!lr||x&&8<x&&11>=x),U=" ",ot=!1;function xt(i,a){switch(i){case"keyup":return Ji.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ie=!1;function Tn(i,a){switch(i){case"compositionend":return kt(a);case"keypress":return a.which!==32?null:(ot=!0,U);case"textInput":return i=a.data,i===U&&ot?null:i;default:return null}}function Re(i,a){if(Ie)return i==="compositionend"||!lr&&xt(i,a)?(i=Ar(),jr=Fr=Ur=null,Ie=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return D&&a.locale!=="ko"?null:a.data;default:return null}}var dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!dn[i.type]:a==="textarea"}function zn(i,a,c,g){yr?ss?ss.push(g):ss=[g]:yr=g,a=Uh(a,"onChange"),0<a.length&&(c=new Hr("onChange","change",null,c,g),i.push({event:c,listeners:a}))}var ii=null,Kn=null;function _o(i){a2(i,0)}function Oa(i){var a=Zi(i);if(un(a))return i}function $c(i,a){if(i==="change")return a}var mu=!1;if(Er){var ur;if(Er){var pu="oninput"in document;if(!pu){var al=document.createElement("div");al.setAttribute("oninput","return;"),pu=typeof al.oninput=="function"}ur=pu}else ur=!1;mu=ur&&(!document.documentMode||9<document.documentMode)}function La(){ii&&(ii.detachEvent("onpropertychange",De),Kn=ii=null)}function De(i){if(i.propertyName==="value"&&Oa(Kn)){var a=[];zn(a,Kn,i,vi(i)),xr(_o,a)}}function ol(i,a,c){i==="focusin"?(La(),ii=a,Kn=c,ii.attachEvent("onpropertychange",De)):i==="focusout"&&La()}function M(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Oa(Kn)}function r(i,a){if(i==="click")return Oa(a)}function o(i,a){if(i==="input"||i==="change")return Oa(a)}function u(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var f=typeof Object.is=="function"?Object.is:u;function d(i,a){if(f(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),g=Object.keys(a);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var w=c[g];if(!Lr.call(a,w)||!f(i[w],a[w]))return!1}return!0}function m(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function y(i,a){var c=m(i);i=0;for(var g;c;){if(c.nodeType===3){if(g=i+c.textContent.length,i<=a&&g>=a)return{node:c,offset:a-i};i=g}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=m(c)}}function v(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?v(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function C(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Vi(i.document);a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=Vi(i.document)}return a}function R(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var O=Er&&"documentMode"in document&&11>=document.documentMode,P=null,H=null,Z=null,et=!1;function ut(i,a,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;et||P==null||P!==Vi(g)||(g=P,"selectionStart"in g&&R(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Z&&d(Z,g)||(Z=g,g=Uh(H,"onSelect"),0<g.length&&(a=new Hr("onSelect","select",null,a,c),i.push({event:a,listeners:g}),a.target=P)))}function gt(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var Nt={animationend:gt("Animation","AnimationEnd"),animationiteration:gt("Animation","AnimationIteration"),animationstart:gt("Animation","AnimationStart"),transitionrun:gt("Transition","TransitionRun"),transitionstart:gt("Transition","TransitionStart"),transitioncancel:gt("Transition","TransitionCancel"),transitionend:gt("Transition","TransitionEnd")},Pt={},Rt={};Er&&(Rt=document.createElement("div").style,"AnimationEvent"in window||(delete Nt.animationend.animation,delete Nt.animationiteration.animation,delete Nt.animationstart.animation),"TransitionEvent"in window||delete Nt.transitionend.transition);function ce(i){if(Pt[i])return Pt[i];if(!Nt[i])return i;var a=Nt[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in Rt)return Pt[i]=a[c];return i}var oe=ce("animationend"),Ci=ce("animationiteration"),cr=ce("animationstart"),Fi=ce("transitionrun"),$e=ce("transitionstart"),ui=ce("transitioncancel"),ji=ce("transitionend"),Ks=new Map,vs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vs.push("scrollEnd");function vr(i,a){Ks.set(i,a),Fn(a,[i])}var th=new WeakMap;function Gr(i,a){if(typeof i=="object"&&i!==null){var c=th.get(i);return c!==void 0?c:(a={value:i,source:a,stack:ys(a)},th.set(i,a),a)}return{value:i,source:a,stack:ys(a)}}var Yr=[],ll=0,xd=0;function eh(){for(var i=ll,a=xd=ll=0;a<i;){var c=Yr[a];Yr[a++]=null;var g=Yr[a];Yr[a++]=null;var w=Yr[a];Yr[a++]=null;var _=Yr[a];if(Yr[a++]=null,g!==null&&w!==null){var N=g.pending;N===null?w.next=w:(w.next=N.next,N.next=w),g.pending=w}_!==0&&Gm(c,w,_)}}function nh(i,a,c,g){Yr[ll++]=i,Yr[ll++]=a,Yr[ll++]=c,Yr[ll++]=g,xd|=g,i.lanes|=g,i=i.alternate,i!==null&&(i.lanes|=g)}function Ed(i,a,c,g){return nh(i,a,c,g),ih(i)}function ul(i,a){return nh(i,null,null,a),ih(i)}function Gm(i,a,c){i.lanes|=c;var g=i.alternate;g!==null&&(g.lanes|=c);for(var w=!1,_=i.return;_!==null;)_.childLanes|=c,g=_.alternate,g!==null&&(g.childLanes|=c),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(w=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,w&&a!==null&&(w=31-Fe(c),i=_.hiddenUpdates,g=i[w],g===null?i[w]=[a]:g.push(a),a.lane=c|536870912),_):null}function ih(i){if(50<ju)throw ju=0,C0=null,Error(s(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var cl={};function H_(i,a,c,g){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(i,a,c,g){return new H_(i,a,c,g)}function Ad(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zs(i,a){var c=i.alternate;return c===null?(c=_r(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Ym(i,a){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,a=c.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function rh(i,a,c,g,w,_){var N=0;if(g=i,typeof i=="function")Ad(i)&&(N=1);else if(typeof i=="string")N=YC(i,c,zt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case V:return i=_r(31,c,a,w),i.elementType=V,i.lanes=_,i;case G:return Co(c.children,w,_,a);case W:N=8,w|=24;break;case Y:return i=_r(12,c,a,w|2),i.elementType=Y,i.lanes=_,i;case St:return i=_r(13,c,a,w),i.elementType=St,i.lanes=_,i;case Lt:return i=_r(19,c,a,w),i.elementType=Lt,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Q:case nt:N=10;break t;case rt:N=9;break t;case _t:N=11;break t;case z:N=14;break t;case F:N=16,g=null;break t}N=29,c=Error(s(130,i===null?"null":typeof i,"")),g=null}return a=_r(N,c,a,w),a.elementType=i,a.type=g,a.lanes=_,a}function Co(i,a,c,g){return i=_r(7,i,g,a),i.lanes=c,i}function wd(i,a,c){return i=_r(6,i,null,a),i.lanes=c,i}function Td(i,a,c){return a=_r(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var hl=[],fl=0,sh=null,ah=0,qr=[],Xr=0,So=null,Js=1,$s="";function bo(i,a){hl[fl++]=ah,hl[fl++]=sh,sh=i,ah=a}function qm(i,a,c){qr[Xr++]=Js,qr[Xr++]=$s,qr[Xr++]=So,So=i;var g=Js;i=$s;var w=32-Fe(g)-1;g&=~(1<<w),c+=1;var _=32-Fe(a)+w;if(30<_){var N=w-w%5;_=(g&(1<<N)-1).toString(32),g>>=N,w-=N,Js=1<<32-Fe(a)+w|c<<w|g,$s=_+i}else Js=1<<_|c<<w|g,$s=i}function vd(i){i.return!==null&&(bo(i,1),qm(i,1,0))}function _d(i){for(;i===sh;)sh=hl[--fl],hl[fl]=null,ah=hl[--fl],hl[fl]=null;for(;i===So;)So=qr[--Xr],qr[Xr]=null,$s=qr[--Xr],qr[Xr]=null,Js=qr[--Xr],qr[Xr]=null}var $i=null,Hn=null,qe=!1,Io=null,_s=!1,Cd=Error(s(519));function Ro(i){var a=Error(s(418,""));throw Eu(Gr(a,i)),Cd}function Xm(i){var a=i.stateNode,c=i.type,g=i.memoizedProps;switch(a[Xn]=i,a[sn]=g,c){case"dialog":be("cancel",a),be("close",a);break;case"iframe":case"object":case"embed":be("load",a);break;case"video":case"audio":for(c=0;c<Hu.length;c++)be(Hu[c],a);break;case"source":be("error",a);break;case"img":case"image":case"link":be("error",a),be("load",a);break;case"details":be("toggle",a);break;case"input":be("invalid",a),Sn(a,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Ra(a);break;case"select":be("invalid",a);break;case"textarea":be("invalid",a),mn(a,g.value,g.defaultValue,g.children),Ra(a)}c=g.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||g.suppressHydrationWarning===!0||c2(a.textContent,c)?(g.popover!=null&&(be("beforetoggle",a),be("toggle",a)),g.onScroll!=null&&be("scroll",a),g.onScrollEnd!=null&&be("scrollend",a),g.onClick!=null&&(a.onclick=Fh),a=!0):a=!1,a||Ro(i)}function Wm(i){for($i=i.return;$i;)switch($i.tag){case 5:case 13:_s=!1;return;case 27:case 3:_s=!0;return;default:$i=$i.return}}function yu(i){if(i!==$i)return!1;if(!qe)return Wm(i),qe=!0,!1;var a=i.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||j0(i.type,i.memoizedProps)),c=!c),c&&Hn&&Ro(i),Wm(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));t:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(c=i.data,c==="/$"){if(a===0){Hn=cs(i.nextSibling);break t}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;i=i.nextSibling}Hn=null}}else a===27?(a=Hn,Ka(i.type)?(i=Y0,Y0=null,Hn=i):Hn=a):Hn=$i?cs(i.stateNode.nextSibling):null;return!0}function xu(){Hn=$i=null,qe=!1}function Qm(){var i=Io;return i!==null&&(dr===null?dr=i:dr.push.apply(dr,i),Io=null),i}function Eu(i){Io===null?Io=[i]:Io.push(i)}var Sd=It(null),Do=null,ta=null;function Pa(i,a,c){Ot(Sd,a._currentValue),a._currentValue=c}function ea(i){i._currentValue=Sd.current,Bt(Sd)}function bd(i,a,c){for(;i!==null;){var g=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),i===c)break;i=i.return}}function Id(i,a,c,g){var w=i.child;for(w!==null&&(w.return=i);w!==null;){var _=w.dependencies;if(_!==null){var N=w.child;_=_.firstContext;t:for(;_!==null;){var B=_;_=w;for(var X=0;X<a.length;X++)if(B.context===a[X]){_.lanes|=c,B=_.alternate,B!==null&&(B.lanes|=c),bd(_.return,c,i),g||(N=null);break t}_=B.next}}else if(w.tag===18){if(N=w.return,N===null)throw Error(s(341));N.lanes|=c,_=N.alternate,_!==null&&(_.lanes|=c),bd(N,c,i),N=null}else N=w.child;if(N!==null)N.return=w;else for(N=w;N!==null;){if(N===i){N=null;break}if(w=N.sibling,w!==null){w.return=N.return,N=w;break}N=N.return}w=N}}function Au(i,a,c,g){i=null;for(var w=a,_=!1;w!==null;){if(!_){if((w.flags&524288)!==0)_=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var N=w.alternate;if(N===null)throw Error(s(387));if(N=N.memoizedProps,N!==null){var B=w.type;f(w.pendingProps.value,N.value)||(i!==null?i.push(B):i=[B])}}else if(w===kn.current){if(N=w.alternate,N===null)throw Error(s(387));N.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(i!==null?i.push(Qu):i=[Qu])}w=w.return}i!==null&&Id(a,i,c,g),a.flags|=262144}function oh(i){for(i=i.firstContext;i!==null;){if(!f(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function No(i){Do=i,ta=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function zi(i){return Km(Do,i)}function lh(i,a){return Do===null&&No(i),Km(i,a)}function Km(i,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},ta===null){if(i===null)throw Error(s(308));ta=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else ta=ta.next=a;return c}var G_=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(c,g){i.push(g)}};this.abort=function(){a.aborted=!0,i.forEach(function(c){return c()})}},Y_=e.unstable_scheduleCallback,q_=e.unstable_NormalPriority,ci={$$typeof:nt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rd(){return{controller:new G_,data:new Map,refCount:0}}function wu(i){i.refCount--,i.refCount===0&&Y_(q_,function(){i.controller.abort()})}var Tu=null,Dd=0,dl=0,gl=null;function X_(i,a){if(Tu===null){var c=Tu=[];Dd=0,dl=M0(),gl={status:"pending",value:void 0,then:function(g){c.push(g)}}}return Dd++,a.then(Zm,Zm),a}function Zm(){if(--Dd===0&&Tu!==null){gl!==null&&(gl.status="fulfilled");var i=Tu;Tu=null,dl=0,gl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function W_(i,a){var c=[],g={status:"pending",value:null,reason:null,then:function(w){c.push(w)}};return i.then(function(){g.status="fulfilled",g.value=a;for(var w=0;w<c.length;w++)(0,c[w])(a)},function(w){for(g.status="rejected",g.reason=w,w=0;w<c.length;w++)(0,c[w])(void 0)}),g}var Jm=Et.S;Et.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&X_(i,a),Jm!==null&&Jm(i,a)};var Mo=It(null);function Nd(){var i=Mo.current;return i!==null?i:pn.pooledCache}function uh(i,a){a===null?Ot(Mo,Mo.current):Ot(Mo,a.pool)}function $m(){var i=Nd();return i===null?null:{parent:ci._currentValue,pool:i}}var vu=Error(s(460)),tp=Error(s(474)),ch=Error(s(542)),Md={then:function(){}};function ep(i){return i=i.status,i==="fulfilled"||i==="rejected"}function hh(){}function np(i,a,c){switch(c=i[c],c===void 0?i.push(a):c!==a&&(a.then(hh,hh),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,rp(i),i;default:if(typeof a.status=="string")a.then(hh,hh);else{if(i=pn,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=a,i.status="pending",i.then(function(g){if(a.status==="pending"){var w=a;w.status="fulfilled",w.value=g}},function(g){if(a.status==="pending"){var w=a;w.status="rejected",w.reason=g}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,rp(i),i}throw _u=a,vu}}var _u=null;function ip(){if(_u===null)throw Error(s(459));var i=_u;return _u=null,i}function rp(i){if(i===vu||i===ch)throw Error(s(483))}var Ba=!1;function Od(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ld(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Va(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ka(i,a,c){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(tn&2)!==0){var w=g.pending;return w===null?a.next=a:(a.next=w.next,w.next=a),g.pending=a,a=ih(i),Gm(i,null,c),a}return nh(i,g,a,c),ih(i)}function Cu(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var g=a.lanes;g&=i.pendingLanes,c|=g,a.lanes=c,wi(i,c)}}function Pd(i,a){var c=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var w=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var N={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};_===null?w=_=N:_=_.next=N,c=c.next}while(c!==null);_===null?w=_=a:_=_.next=a}else w=_=a;c={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:_,shared:g.shared,callbacks:g.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}var Bd=!1;function Su(){if(Bd){var i=gl;if(i!==null)throw i}}function bu(i,a,c,g){Bd=!1;var w=i.updateQueue;Ba=!1;var _=w.firstBaseUpdate,N=w.lastBaseUpdate,B=w.shared.pending;if(B!==null){w.shared.pending=null;var X=B,ft=X.next;X.next=null,N===null?_=ft:N.next=ft,N=X;var wt=i.alternate;wt!==null&&(wt=wt.updateQueue,B=wt.lastBaseUpdate,B!==N&&(B===null?wt.firstBaseUpdate=ft:B.next=ft,wt.lastBaseUpdate=X))}if(_!==null){var Ct=w.baseState;N=0,wt=ft=X=null,B=_;do{var dt=B.lane&-536870913,yt=dt!==B.lane;if(yt?(Pe&dt)===dt:(g&dt)===dt){dt!==0&&dt===dl&&(Bd=!0),wt!==null&&(wt=wt.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});t:{var ie=i,te=B;dt=a;var ln=c;switch(te.tag){case 1:if(ie=te.payload,typeof ie=="function"){Ct=ie.call(ln,Ct,dt);break t}Ct=ie;break t;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=te.payload,dt=typeof ie=="function"?ie.call(ln,Ct,dt):ie,dt==null)break t;Ct=S({},Ct,dt);break t;case 2:Ba=!0}}dt=B.callback,dt!==null&&(i.flags|=64,yt&&(i.flags|=8192),yt=w.callbacks,yt===null?w.callbacks=[dt]:yt.push(dt))}else yt={lane:dt,tag:B.tag,payload:B.payload,callback:B.callback,next:null},wt===null?(ft=wt=yt,X=Ct):wt=wt.next=yt,N|=dt;if(B=B.next,B===null){if(B=w.shared.pending,B===null)break;yt=B,B=yt.next,yt.next=null,w.lastBaseUpdate=yt,w.shared.pending=null}}while(!0);wt===null&&(X=Ct),w.baseState=X,w.firstBaseUpdate=ft,w.lastBaseUpdate=wt,_===null&&(w.shared.lanes=0),qa|=N,i.lanes=N,i.memoizedState=Ct}}function sp(i,a){if(typeof i!="function")throw Error(s(191,i));i.call(a)}function ap(i,a){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)sp(c[i],a)}var ml=It(null),fh=It(0);function op(i,a){i=la,Ot(fh,i),Ot(ml,a),la=i|a.baseLanes}function Vd(){Ot(fh,la),Ot(ml,ml.current)}function kd(){la=fh.current,Bt(ml),Bt(fh)}var Ua=0,Te=null,an=null,ri=null,dh=!1,pl=!1,Oo=!1,gh=0,Iu=0,yl=null,Q_=0;function Zn(){throw Error(s(321))}function Ud(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!f(i[c],a[c]))return!1;return!0}function Fd(i,a,c,g,w,_){return Ua=_,Te=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Et.H=i===null||i.memoizedState===null?Gp:Yp,Oo=!1,_=c(g,w),Oo=!1,pl&&(_=up(a,c,g,w)),lp(i),_}function lp(i){Et.H=Ah;var a=an!==null&&an.next!==null;if(Ua=0,ri=an=Te=null,dh=!1,Iu=0,yl=null,a)throw Error(s(300));i===null||pi||(i=i.dependencies,i!==null&&oh(i)&&(pi=!0))}function up(i,a,c,g){Te=i;var w=0;do{if(pl&&(yl=null),Iu=0,pl=!1,25<=w)throw Error(s(301));if(w+=1,ri=an=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Et.H=nC,_=a(c,g)}while(pl);return _}function K_(){var i=Et.H,a=i.useState()[0];return a=typeof a.then=="function"?Ru(a):a,i=i.useState()[0],(an!==null?an.memoizedState:null)!==i&&(Te.flags|=1024),a}function jd(){var i=gh!==0;return gh=0,i}function zd(i,a,c){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~c}function Hd(i){if(dh){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}dh=!1}Ua=0,ri=an=Te=null,pl=!1,Iu=gh=0,yl=null}function hr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ri===null?Te.memoizedState=ri=i:ri=ri.next=i,ri}function si(){if(an===null){var i=Te.alternate;i=i!==null?i.memoizedState:null}else i=an.next;var a=ri===null?Te.memoizedState:ri.next;if(a!==null)ri=a,an=i;else{if(i===null)throw Te.alternate===null?Error(s(467)):Error(s(310));an=i,i={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},ri===null?Te.memoizedState=ri=i:ri=ri.next=i}return ri}function Gd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ru(i){var a=Iu;return Iu+=1,yl===null&&(yl=[]),i=np(yl,i,a),a=Te,(ri===null?a.memoizedState:ri.next)===null&&(a=a.alternate,Et.H=a===null||a.memoizedState===null?Gp:Yp),i}function mh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ru(i);if(i.$$typeof===nt)return zi(i)}throw Error(s(438,String(i)))}function Yd(i){var a=null,c=Te.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var g=Te.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(a={data:g.data.map(function(w){return w.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Gd(),Te.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(i),g=0;g<i;g++)c[g]=J;return a.index++,c}function na(i,a){return typeof a=="function"?a(i):a}function ph(i){var a=si();return qd(a,an,i)}function qd(i,a,c){var g=i.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=c;var w=i.baseQueue,_=g.pending;if(_!==null){if(w!==null){var N=w.next;w.next=_.next,_.next=N}a.baseQueue=w=_,g.pending=null}if(_=i.baseState,w===null)i.memoizedState=_;else{a=w.next;var B=N=null,X=null,ft=a,wt=!1;do{var Ct=ft.lane&-536870913;if(Ct!==ft.lane?(Pe&Ct)===Ct:(Ua&Ct)===Ct){var dt=ft.revertLane;if(dt===0)X!==null&&(X=X.next={lane:0,revertLane:0,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),Ct===dl&&(wt=!0);else if((Ua&dt)===dt){ft=ft.next,dt===dl&&(wt=!0);continue}else Ct={lane:0,revertLane:ft.revertLane,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},X===null?(B=X=Ct,N=_):X=X.next=Ct,Te.lanes|=dt,qa|=dt;Ct=ft.action,Oo&&c(_,Ct),_=ft.hasEagerState?ft.eagerState:c(_,Ct)}else dt={lane:Ct,revertLane:ft.revertLane,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},X===null?(B=X=dt,N=_):X=X.next=dt,Te.lanes|=Ct,qa|=Ct;ft=ft.next}while(ft!==null&&ft!==a);if(X===null?N=_:X.next=B,!f(_,i.memoizedState)&&(pi=!0,wt&&(c=gl,c!==null)))throw c;i.memoizedState=_,i.baseState=N,i.baseQueue=X,g.lastRenderedState=_}return w===null&&(g.lanes=0),[i.memoizedState,g.dispatch]}function Xd(i){var a=si(),c=a.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var g=c.dispatch,w=c.pending,_=a.memoizedState;if(w!==null){c.pending=null;var N=w=w.next;do _=i(_,N.action),N=N.next;while(N!==w);f(_,a.memoizedState)||(pi=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),c.lastRenderedState=_}return[_,g]}function cp(i,a,c){var g=Te,w=si(),_=qe;if(_){if(c===void 0)throw Error(s(407));c=c()}else c=a();var N=!f((an||w).memoizedState,c);N&&(w.memoizedState=c,pi=!0),w=w.queue;var B=dp.bind(null,g,w,i);if(Du(2048,8,B,[i]),w.getSnapshot!==a||N||ri!==null&&ri.memoizedState.tag&1){if(g.flags|=2048,xl(9,yh(),fp.bind(null,g,w,c,a),null),pn===null)throw Error(s(349));_||(Ua&124)!==0||hp(g,a,c)}return c}function hp(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=Te.updateQueue,a===null?(a=Gd(),Te.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function fp(i,a,c,g){a.value=c,a.getSnapshot=g,gp(a)&&mp(i)}function dp(i,a,c){return c(function(){gp(a)&&mp(i)})}function gp(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!f(i,c)}catch{return!0}}function mp(i){var a=ul(i,2);a!==null&&Rr(a,i,2)}function Wd(i){var a=hr();if(typeof i=="function"){var c=i;if(i=c(),Oo){Un(!0);try{c()}finally{Un(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:i},a}function pp(i,a,c,g){return i.baseState=c,qd(i,an,typeof g=="function"?g:na)}function Z_(i,a,c,g,w){if(Eh(i))throw Error(s(485));if(i=a.action,i!==null){var _={payload:w,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){_.listeners.push(N)}};Et.T!==null?c(!0):_.isTransition=!1,g(_),c=a.pending,c===null?(_.next=a.pending=_,yp(a,_)):(_.next=c.next,a.pending=c.next=_)}}function yp(i,a){var c=a.action,g=a.payload,w=i.state;if(a.isTransition){var _=Et.T,N={};Et.T=N;try{var B=c(w,g),X=Et.S;X!==null&&X(N,B),xp(i,a,B)}catch(ft){Qd(i,a,ft)}finally{Et.T=_}}else try{_=c(w,g),xp(i,a,_)}catch(ft){Qd(i,a,ft)}}function xp(i,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(g){Ep(i,a,g)},function(g){return Qd(i,a,g)}):Ep(i,a,c)}function Ep(i,a,c){a.status="fulfilled",a.value=c,Ap(a),i.state=c,a=i.pending,a!==null&&(c=a.next,c===a?i.pending=null:(c=c.next,a.next=c,yp(i,c)))}function Qd(i,a,c){var g=i.pending;if(i.pending=null,g!==null){g=g.next;do a.status="rejected",a.reason=c,Ap(a),a=a.next;while(a!==g)}i.action=null}function Ap(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function wp(i,a){return a}function Tp(i,a){if(qe){var c=pn.formState;if(c!==null){t:{var g=Te;if(qe){if(Hn){e:{for(var w=Hn,_=_s;w.nodeType!==8;){if(!_){w=null;break e}if(w=cs(w.nextSibling),w===null){w=null;break e}}_=w.data,w=_==="F!"||_==="F"?w:null}if(w){Hn=cs(w.nextSibling),g=w.data==="F!";break t}}Ro(g)}g=!1}g&&(a=c[0])}}return c=hr(),c.memoizedState=c.baseState=a,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wp,lastRenderedState:a},c.queue=g,c=jp.bind(null,Te,g),g.dispatch=c,g=Wd(!1),_=t0.bind(null,Te,!1,g.queue),g=hr(),w={state:a,dispatch:null,action:i,pending:null},g.queue=w,c=Z_.bind(null,Te,w,_,c),w.dispatch=c,g.memoizedState=i,[a,c,!1]}function vp(i){var a=si();return _p(a,an,i)}function _p(i,a,c){if(a=qd(i,a,wp)[0],i=ph(na)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var g=Ru(a)}catch(N){throw N===vu?ch:N}else g=a;a=si();var w=a.queue,_=w.dispatch;return c!==a.memoizedState&&(Te.flags|=2048,xl(9,yh(),J_.bind(null,w,c),null)),[g,_,i]}function J_(i,a){i.action=a}function Cp(i){var a=si(),c=an;if(c!==null)return _p(a,c,i);si(),a=a.memoizedState,c=si();var g=c.queue.dispatch;return c.memoizedState=i,[a,g,!1]}function xl(i,a,c,g){return i={tag:i,create:c,deps:g,inst:a,next:null},a=Te.updateQueue,a===null&&(a=Gd(),Te.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=i.next=i:(g=c.next,c.next=i,i.next=g,a.lastEffect=i),i}function yh(){return{destroy:void 0,resource:void 0}}function Sp(){return si().memoizedState}function xh(i,a,c,g){var w=hr();g=g===void 0?null:g,Te.flags|=i,w.memoizedState=xl(1|a,yh(),c,g)}function Du(i,a,c,g){var w=si();g=g===void 0?null:g;var _=w.memoizedState.inst;an!==null&&g!==null&&Ud(g,an.memoizedState.deps)?w.memoizedState=xl(a,_,c,g):(Te.flags|=i,w.memoizedState=xl(1|a,_,c,g))}function bp(i,a){xh(8390656,8,i,a)}function Ip(i,a){Du(2048,8,i,a)}function Rp(i,a){return Du(4,2,i,a)}function Dp(i,a){return Du(4,4,i,a)}function Np(i,a){if(typeof a=="function"){i=i();var c=a(i);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Mp(i,a,c){c=c!=null?c.concat([i]):null,Du(4,4,Np.bind(null,a,i),c)}function Kd(){}function Op(i,a){var c=si();a=a===void 0?null:a;var g=c.memoizedState;return a!==null&&Ud(a,g[1])?g[0]:(c.memoizedState=[i,a],i)}function Lp(i,a){var c=si();a=a===void 0?null:a;var g=c.memoizedState;if(a!==null&&Ud(a,g[1]))return g[0];if(g=i(),Oo){Un(!0);try{i()}finally{Un(!1)}}return c.memoizedState=[g,a],g}function Zd(i,a,c){return c===void 0||(Ua&1073741824)!==0?i.memoizedState=a:(i.memoizedState=c,i=Vy(),Te.lanes|=i,qa|=i,c)}function Pp(i,a,c,g){return f(c,a)?c:ml.current!==null?(i=Zd(i,c,g),f(i,a)||(pi=!0),i):(Ua&42)===0?(pi=!0,i.memoizedState=c):(i=Vy(),Te.lanes|=i,qa|=i,a)}function Bp(i,a,c,g,w){var _=At.p;At.p=_!==0&&8>_?_:8;var N=Et.T,B={};Et.T=B,t0(i,!1,a,c);try{var X=w(),ft=Et.S;if(ft!==null&&ft(B,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var wt=W_(X,g);Nu(i,a,wt,Ir(i))}else Nu(i,a,g,Ir(i))}catch(Ct){Nu(i,a,{then:function(){},status:"rejected",reason:Ct},Ir())}finally{At.p=_,Et.T=N}}function $_(){}function Jd(i,a,c,g){if(i.tag!==5)throw Error(s(476));var w=Vp(i).queue;Bp(i,w,a,jt,c===null?$_:function(){return kp(i),c(g)})}function Vp(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:jt,baseState:jt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:jt},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:c},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function kp(i){var a=Vp(i).next.queue;Nu(i,a,{},Ir())}function $d(){return zi(Qu)}function Up(){return si().memoizedState}function Fp(){return si().memoizedState}function tC(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var c=Ir();i=Va(c);var g=ka(a,i,c);g!==null&&(Rr(g,a,c),Cu(g,a,c)),a={cache:Rd()},i.payload=a;return}a=a.return}}function eC(i,a,c){var g=Ir();c={lane:g,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Eh(i)?zp(a,c):(c=Ed(i,a,c,g),c!==null&&(Rr(c,i,g),Hp(c,a,g)))}function jp(i,a,c){var g=Ir();Nu(i,a,c,g)}function Nu(i,a,c,g){var w={lane:g,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Eh(i))zp(a,w);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var N=a.lastRenderedState,B=_(N,c);if(w.hasEagerState=!0,w.eagerState=B,f(B,N))return nh(i,a,w,0),pn===null&&eh(),!1}catch{}finally{}if(c=Ed(i,a,w,g),c!==null)return Rr(c,i,g),Hp(c,a,g),!0}return!1}function t0(i,a,c,g){if(g={lane:2,revertLane:M0(),action:g,hasEagerState:!1,eagerState:null,next:null},Eh(i)){if(a)throw Error(s(479))}else a=Ed(i,c,g,2),a!==null&&Rr(a,i,2)}function Eh(i){var a=i.alternate;return i===Te||a!==null&&a===Te}function zp(i,a){pl=dh=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function Hp(i,a,c){if((c&4194048)!==0){var g=a.lanes;g&=i.pendingLanes,c|=g,a.lanes=c,wi(i,c)}}var Ah={readContext:zi,use:mh,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useLayoutEffect:Zn,useInsertionEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useSyncExternalStore:Zn,useId:Zn,useHostTransitionStatus:Zn,useFormState:Zn,useActionState:Zn,useOptimistic:Zn,useMemoCache:Zn,useCacheRefresh:Zn},Gp={readContext:zi,use:mh,useCallback:function(i,a){return hr().memoizedState=[i,a===void 0?null:a],i},useContext:zi,useEffect:bp,useImperativeHandle:function(i,a,c){c=c!=null?c.concat([i]):null,xh(4194308,4,Np.bind(null,a,i),c)},useLayoutEffect:function(i,a){return xh(4194308,4,i,a)},useInsertionEffect:function(i,a){xh(4,2,i,a)},useMemo:function(i,a){var c=hr();a=a===void 0?null:a;var g=i();if(Oo){Un(!0);try{i()}finally{Un(!1)}}return c.memoizedState=[g,a],g},useReducer:function(i,a,c){var g=hr();if(c!==void 0){var w=c(a);if(Oo){Un(!0);try{c(a)}finally{Un(!1)}}}else w=a;return g.memoizedState=g.baseState=w,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:w},g.queue=i,i=i.dispatch=eC.bind(null,Te,i),[g.memoizedState,i]},useRef:function(i){var a=hr();return i={current:i},a.memoizedState=i},useState:function(i){i=Wd(i);var a=i.queue,c=jp.bind(null,Te,a);return a.dispatch=c,[i.memoizedState,c]},useDebugValue:Kd,useDeferredValue:function(i,a){var c=hr();return Zd(c,i,a)},useTransition:function(){var i=Wd(!1);return i=Bp.bind(null,Te,i.queue,!0,!1),hr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,c){var g=Te,w=hr();if(qe){if(c===void 0)throw Error(s(407));c=c()}else{if(c=a(),pn===null)throw Error(s(349));(Pe&124)!==0||hp(g,a,c)}w.memoizedState=c;var _={value:c,getSnapshot:a};return w.queue=_,bp(dp.bind(null,g,_,i),[i]),g.flags|=2048,xl(9,yh(),fp.bind(null,g,_,c,a),null),c},useId:function(){var i=hr(),a=pn.identifierPrefix;if(qe){var c=$s,g=Js;c=(g&~(1<<32-Fe(g)-1)).toString(32)+c,a="«"+a+"R"+c,c=gh++,0<c&&(a+="H"+c.toString(32)),a+="»"}else c=Q_++,a="«"+a+"r"+c.toString(32)+"»";return i.memoizedState=a},useHostTransitionStatus:$d,useFormState:Tp,useActionState:Tp,useOptimistic:function(i){var a=hr();a.memoizedState=a.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=t0.bind(null,Te,!0,c),c.dispatch=a,[i,a]},useMemoCache:Yd,useCacheRefresh:function(){return hr().memoizedState=tC.bind(null,Te)}},Yp={readContext:zi,use:mh,useCallback:Op,useContext:zi,useEffect:Ip,useImperativeHandle:Mp,useInsertionEffect:Rp,useLayoutEffect:Dp,useMemo:Lp,useReducer:ph,useRef:Sp,useState:function(){return ph(na)},useDebugValue:Kd,useDeferredValue:function(i,a){var c=si();return Pp(c,an.memoizedState,i,a)},useTransition:function(){var i=ph(na)[0],a=si().memoizedState;return[typeof i=="boolean"?i:Ru(i),a]},useSyncExternalStore:cp,useId:Up,useHostTransitionStatus:$d,useFormState:vp,useActionState:vp,useOptimistic:function(i,a){var c=si();return pp(c,an,i,a)},useMemoCache:Yd,useCacheRefresh:Fp},nC={readContext:zi,use:mh,useCallback:Op,useContext:zi,useEffect:Ip,useImperativeHandle:Mp,useInsertionEffect:Rp,useLayoutEffect:Dp,useMemo:Lp,useReducer:Xd,useRef:Sp,useState:function(){return Xd(na)},useDebugValue:Kd,useDeferredValue:function(i,a){var c=si();return an===null?Zd(c,i,a):Pp(c,an.memoizedState,i,a)},useTransition:function(){var i=Xd(na)[0],a=si().memoizedState;return[typeof i=="boolean"?i:Ru(i),a]},useSyncExternalStore:cp,useId:Up,useHostTransitionStatus:$d,useFormState:Cp,useActionState:Cp,useOptimistic:function(i,a){var c=si();return an!==null?pp(c,an,i,a):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Yd,useCacheRefresh:Fp},El=null,Mu=0;function wh(i){var a=Mu;return Mu+=1,El===null&&(El=[]),np(El,i,a)}function Ou(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Th(i,a){throw a.$$typeof===I?Error(s(525)):(i=Object.prototype.toString.call(a),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function qp(i){var a=i._init;return a(i._payload)}function Xp(i){function a(st,it){if(i){var ht=st.deletions;ht===null?(st.deletions=[it],st.flags|=16):ht.push(it)}}function c(st,it){if(!i)return null;for(;it!==null;)a(st,it),it=it.sibling;return null}function g(st){for(var it=new Map;st!==null;)st.key!==null?it.set(st.key,st):it.set(st.index,st),st=st.sibling;return it}function w(st,it){return st=Zs(st,it),st.index=0,st.sibling=null,st}function _(st,it,ht){return st.index=ht,i?(ht=st.alternate,ht!==null?(ht=ht.index,ht<it?(st.flags|=67108866,it):ht):(st.flags|=67108866,it)):(st.flags|=1048576,it)}function N(st){return i&&st.alternate===null&&(st.flags|=67108866),st}function B(st,it,ht,Tt){return it===null||it.tag!==6?(it=wd(ht,st.mode,Tt),it.return=st,it):(it=w(it,ht),it.return=st,it)}function X(st,it,ht,Tt){var qt=ht.type;return qt===G?wt(st,it,ht.props.children,Tt,ht.key):it!==null&&(it.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===F&&qp(qt)===it.type)?(it=w(it,ht.props),Ou(it,ht),it.return=st,it):(it=rh(ht.type,ht.key,ht.props,null,st.mode,Tt),Ou(it,ht),it.return=st,it)}function ft(st,it,ht,Tt){return it===null||it.tag!==4||it.stateNode.containerInfo!==ht.containerInfo||it.stateNode.implementation!==ht.implementation?(it=Td(ht,st.mode,Tt),it.return=st,it):(it=w(it,ht.children||[]),it.return=st,it)}function wt(st,it,ht,Tt,qt){return it===null||it.tag!==7?(it=Co(ht,st.mode,Tt,qt),it.return=st,it):(it=w(it,ht),it.return=st,it)}function Ct(st,it,ht){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return it=wd(""+it,st.mode,ht),it.return=st,it;if(typeof it=="object"&&it!==null){switch(it.$$typeof){case L:return ht=rh(it.type,it.key,it.props,null,st.mode,ht),Ou(ht,it),ht.return=st,ht;case k:return it=Td(it,st.mode,ht),it.return=st,it;case F:var Tt=it._init;return it=Tt(it._payload),Ct(st,it,ht)}if(mt(it)||K(it))return it=Co(it,st.mode,ht,null),it.return=st,it;if(typeof it.then=="function")return Ct(st,wh(it),ht);if(it.$$typeof===nt)return Ct(st,lh(st,it),ht);Th(st,it)}return null}function dt(st,it,ht,Tt){var qt=it!==null?it.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return qt!==null?null:B(st,it,""+ht,Tt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case L:return ht.key===qt?X(st,it,ht,Tt):null;case k:return ht.key===qt?ft(st,it,ht,Tt):null;case F:return qt=ht._init,ht=qt(ht._payload),dt(st,it,ht,Tt)}if(mt(ht)||K(ht))return qt!==null?null:wt(st,it,ht,Tt,null);if(typeof ht.then=="function")return dt(st,it,wh(ht),Tt);if(ht.$$typeof===nt)return dt(st,it,lh(st,ht),Tt);Th(st,ht)}return null}function yt(st,it,ht,Tt,qt){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number"||typeof Tt=="bigint")return st=st.get(ht)||null,B(it,st,""+Tt,qt);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case L:return st=st.get(Tt.key===null?ht:Tt.key)||null,X(it,st,Tt,qt);case k:return st=st.get(Tt.key===null?ht:Tt.key)||null,ft(it,st,Tt,qt);case F:var Ce=Tt._init;return Tt=Ce(Tt._payload),yt(st,it,ht,Tt,qt)}if(mt(Tt)||K(Tt))return st=st.get(ht)||null,wt(it,st,Tt,qt,null);if(typeof Tt.then=="function")return yt(st,it,ht,wh(Tt),qt);if(Tt.$$typeof===nt)return yt(st,it,ht,lh(it,Tt),qt);Th(it,Tt)}return null}function ie(st,it,ht,Tt){for(var qt=null,Ce=null,Qt=it,ee=it=0,xi=null;Qt!==null&&ee<ht.length;ee++){Qt.index>ee?(xi=Qt,Qt=null):xi=Qt.sibling;var Ge=dt(st,Qt,ht[ee],Tt);if(Ge===null){Qt===null&&(Qt=xi);break}i&&Qt&&Ge.alternate===null&&a(st,Qt),it=_(Ge,it,ee),Ce===null?qt=Ge:Ce.sibling=Ge,Ce=Ge,Qt=xi}if(ee===ht.length)return c(st,Qt),qe&&bo(st,ee),qt;if(Qt===null){for(;ee<ht.length;ee++)Qt=Ct(st,ht[ee],Tt),Qt!==null&&(it=_(Qt,it,ee),Ce===null?qt=Qt:Ce.sibling=Qt,Ce=Qt);return qe&&bo(st,ee),qt}for(Qt=g(Qt);ee<ht.length;ee++)xi=yt(Qt,st,ee,ht[ee],Tt),xi!==null&&(i&&xi.alternate!==null&&Qt.delete(xi.key===null?ee:xi.key),it=_(xi,it,ee),Ce===null?qt=xi:Ce.sibling=xi,Ce=xi);return i&&Qt.forEach(function(eo){return a(st,eo)}),qe&&bo(st,ee),qt}function te(st,it,ht,Tt){if(ht==null)throw Error(s(151));for(var qt=null,Ce=null,Qt=it,ee=it=0,xi=null,Ge=ht.next();Qt!==null&&!Ge.done;ee++,Ge=ht.next()){Qt.index>ee?(xi=Qt,Qt=null):xi=Qt.sibling;var eo=dt(st,Qt,Ge.value,Tt);if(eo===null){Qt===null&&(Qt=xi);break}i&&Qt&&eo.alternate===null&&a(st,Qt),it=_(eo,it,ee),Ce===null?qt=eo:Ce.sibling=eo,Ce=eo,Qt=xi}if(Ge.done)return c(st,Qt),qe&&bo(st,ee),qt;if(Qt===null){for(;!Ge.done;ee++,Ge=ht.next())Ge=Ct(st,Ge.value,Tt),Ge!==null&&(it=_(Ge,it,ee),Ce===null?qt=Ge:Ce.sibling=Ge,Ce=Ge);return qe&&bo(st,ee),qt}for(Qt=g(Qt);!Ge.done;ee++,Ge=ht.next())Ge=yt(Qt,st,ee,Ge.value,Tt),Ge!==null&&(i&&Ge.alternate!==null&&Qt.delete(Ge.key===null?ee:Ge.key),it=_(Ge,it,ee),Ce===null?qt=Ge:Ce.sibling=Ge,Ce=Ge);return i&&Qt.forEach(function(iS){return a(st,iS)}),qe&&bo(st,ee),qt}function ln(st,it,ht,Tt){if(typeof ht=="object"&&ht!==null&&ht.type===G&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case L:t:{for(var qt=ht.key;it!==null;){if(it.key===qt){if(qt=ht.type,qt===G){if(it.tag===7){c(st,it.sibling),Tt=w(it,ht.props.children),Tt.return=st,st=Tt;break t}}else if(it.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===F&&qp(qt)===it.type){c(st,it.sibling),Tt=w(it,ht.props),Ou(Tt,ht),Tt.return=st,st=Tt;break t}c(st,it);break}else a(st,it);it=it.sibling}ht.type===G?(Tt=Co(ht.props.children,st.mode,Tt,ht.key),Tt.return=st,st=Tt):(Tt=rh(ht.type,ht.key,ht.props,null,st.mode,Tt),Ou(Tt,ht),Tt.return=st,st=Tt)}return N(st);case k:t:{for(qt=ht.key;it!==null;){if(it.key===qt)if(it.tag===4&&it.stateNode.containerInfo===ht.containerInfo&&it.stateNode.implementation===ht.implementation){c(st,it.sibling),Tt=w(it,ht.children||[]),Tt.return=st,st=Tt;break t}else{c(st,it);break}else a(st,it);it=it.sibling}Tt=Td(ht,st.mode,Tt),Tt.return=st,st=Tt}return N(st);case F:return qt=ht._init,ht=qt(ht._payload),ln(st,it,ht,Tt)}if(mt(ht))return ie(st,it,ht,Tt);if(K(ht)){if(qt=K(ht),typeof qt!="function")throw Error(s(150));return ht=qt.call(ht),te(st,it,ht,Tt)}if(typeof ht.then=="function")return ln(st,it,wh(ht),Tt);if(ht.$$typeof===nt)return ln(st,it,lh(st,ht),Tt);Th(st,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint"?(ht=""+ht,it!==null&&it.tag===6?(c(st,it.sibling),Tt=w(it,ht),Tt.return=st,st=Tt):(c(st,it),Tt=wd(ht,st.mode,Tt),Tt.return=st,st=Tt),N(st)):c(st,it)}return function(st,it,ht,Tt){try{Mu=0;var qt=ln(st,it,ht,Tt);return El=null,qt}catch(Qt){if(Qt===vu||Qt===ch)throw Qt;var Ce=_r(29,Qt,null,st.mode);return Ce.lanes=Tt,Ce.return=st,Ce}finally{}}}var Al=Xp(!0),Wp=Xp(!1),Wr=It(null),Cs=null;function Fa(i){var a=i.alternate;Ot(hi,hi.current&1),Ot(Wr,i),Cs===null&&(a===null||ml.current!==null||a.memoizedState!==null)&&(Cs=i)}function Qp(i){if(i.tag===22){if(Ot(hi,hi.current),Ot(Wr,i),Cs===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Cs=i)}}else ja()}function ja(){Ot(hi,hi.current),Ot(Wr,Wr.current)}function ia(i){Bt(Wr),Cs===i&&(Cs=null),Bt(hi)}var hi=It(0);function vh(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||G0(c)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function e0(i,a,c,g){a=i.memoizedState,c=c(g,a),c=c==null?a:S({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var n0={enqueueSetState:function(i,a,c){i=i._reactInternals;var g=Ir(),w=Va(g);w.payload=a,c!=null&&(w.callback=c),a=ka(i,w,g),a!==null&&(Rr(a,i,g),Cu(a,i,g))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var g=Ir(),w=Va(g);w.tag=1,w.payload=a,c!=null&&(w.callback=c),a=ka(i,w,g),a!==null&&(Rr(a,i,g),Cu(a,i,g))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=Ir(),g=Va(c);g.tag=2,a!=null&&(g.callback=a),a=ka(i,g,c),a!==null&&(Rr(a,i,c),Cu(a,i,c))}};function Kp(i,a,c,g,w,_,N){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,_,N):a.prototype&&a.prototype.isPureReactComponent?!d(c,g)||!d(w,_):!0}function Zp(i,a,c,g){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,g),a.state!==i&&n0.enqueueReplaceState(a,a.state,null)}function Lo(i,a){var c=a;if("ref"in a){c={};for(var g in a)g!=="ref"&&(c[g]=a[g])}if(i=i.defaultProps){c===a&&(c=S({},c));for(var w in i)c[w]===void 0&&(c[w]=i[w])}return c}var _h=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Jp(i){_h(i)}function $p(i){console.error(i)}function ty(i){_h(i)}function Ch(i,a){try{var c=i.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(g){setTimeout(function(){throw g})}}function ey(i,a,c){try{var g=i.onCaughtError;g(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function i0(i,a,c){return c=Va(c),c.tag=3,c.payload={element:null},c.callback=function(){Ch(i,a)},c}function ny(i){return i=Va(i),i.tag=3,i}function iy(i,a,c,g){var w=c.type.getDerivedStateFromError;if(typeof w=="function"){var _=g.value;i.payload=function(){return w(_)},i.callback=function(){ey(a,c,g)}}var N=c.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(i.callback=function(){ey(a,c,g),typeof w!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var B=g.stack;this.componentDidCatch(g.value,{componentStack:B!==null?B:""})})}function iC(i,a,c,g,w){if(c.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(a=c.alternate,a!==null&&Au(a,c,w,!0),c=Wr.current,c!==null){switch(c.tag){case 13:return Cs===null?b0():c.alternate===null&&Gn===0&&(Gn=3),c.flags&=-257,c.flags|=65536,c.lanes=w,g===Md?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([g]):a.add(g),R0(i,g,w)),!1;case 22:return c.flags|=65536,g===Md?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([g])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([g]):c.add(g)),R0(i,g,w)),!1}throw Error(s(435,c.tag))}return R0(i,g,w),b0(),!1}if(qe)return a=Wr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=w,g!==Cd&&(i=Error(s(422),{cause:g}),Eu(Gr(i,c)))):(g!==Cd&&(a=Error(s(423),{cause:g}),Eu(Gr(a,c))),i=i.current.alternate,i.flags|=65536,w&=-w,i.lanes|=w,g=Gr(g,c),w=i0(i.stateNode,g,w),Pd(i,w),Gn!==4&&(Gn=2)),!1;var _=Error(s(520),{cause:g});if(_=Gr(_,c),Fu===null?Fu=[_]:Fu.push(_),Gn!==4&&(Gn=2),a===null)return!0;g=Gr(g,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,i=w&-w,c.lanes|=i,i=i0(c.stateNode,g,i),Pd(c,i),!1;case 1:if(a=c.type,_=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Xa===null||!Xa.has(_))))return c.flags|=65536,w&=-w,c.lanes|=w,w=ny(w),iy(w,i,c,g),Pd(c,w),!1}c=c.return}while(c!==null);return!1}var ry=Error(s(461)),pi=!1;function Si(i,a,c,g){a.child=i===null?Wp(a,null,c,g):Al(a,i.child,c,g)}function sy(i,a,c,g,w){c=c.render;var _=a.ref;if("ref"in g){var N={};for(var B in g)B!=="ref"&&(N[B]=g[B])}else N=g;return No(a),g=Fd(i,a,c,N,_,w),B=jd(),i!==null&&!pi?(zd(i,a,w),ra(i,a,w)):(qe&&B&&vd(a),a.flags|=1,Si(i,a,g,w),a.child)}function ay(i,a,c,g,w){if(i===null){var _=c.type;return typeof _=="function"&&!Ad(_)&&_.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=_,oy(i,a,_,g,w)):(i=rh(c.type,null,g,a,a.mode,w),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!h0(i,w)){var N=_.memoizedProps;if(c=c.compare,c=c!==null?c:d,c(N,g)&&i.ref===a.ref)return ra(i,a,w)}return a.flags|=1,i=Zs(_,g),i.ref=a.ref,i.return=a,a.child=i}function oy(i,a,c,g,w){if(i!==null){var _=i.memoizedProps;if(d(_,g)&&i.ref===a.ref)if(pi=!1,a.pendingProps=g=_,h0(i,w))(i.flags&131072)!==0&&(pi=!0);else return a.lanes=i.lanes,ra(i,a,w)}return r0(i,a,c,g,w)}function ly(i,a,c){var g=a.pendingProps,w=g.children,_=i!==null?i.memoizedState:null;if(g.mode==="hidden"){if((a.flags&128)!==0){if(g=_!==null?_.baseLanes|c:c,i!==null){for(w=a.child=i.child,_=0;w!==null;)_=_|w.lanes|w.childLanes,w=w.sibling;a.childLanes=_&~g}else a.childLanes=0,a.child=null;return uy(i,a,g,c)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&uh(a,_!==null?_.cachePool:null),_!==null?op(a,_):Vd(),Qp(a);else return a.lanes=a.childLanes=536870912,uy(i,a,_!==null?_.baseLanes|c:c,c)}else _!==null?(uh(a,_.cachePool),op(a,_),ja(),a.memoizedState=null):(i!==null&&uh(a,null),Vd(),ja());return Si(i,a,w,c),a.child}function uy(i,a,c,g){var w=Nd();return w=w===null?null:{parent:ci._currentValue,pool:w},a.memoizedState={baseLanes:c,cachePool:w},i!==null&&uh(a,null),Vd(),Qp(a),i!==null&&Au(i,a,g,!0),null}function Sh(i,a){var c=a.ref;if(c===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(a.flags|=4194816)}}function r0(i,a,c,g,w){return No(a),c=Fd(i,a,c,g,void 0,w),g=jd(),i!==null&&!pi?(zd(i,a,w),ra(i,a,w)):(qe&&g&&vd(a),a.flags|=1,Si(i,a,c,w),a.child)}function cy(i,a,c,g,w,_){return No(a),a.updateQueue=null,c=up(a,g,c,w),lp(i),g=jd(),i!==null&&!pi?(zd(i,a,_),ra(i,a,_)):(qe&&g&&vd(a),a.flags|=1,Si(i,a,c,_),a.child)}function hy(i,a,c,g,w){if(No(a),a.stateNode===null){var _=cl,N=c.contextType;typeof N=="object"&&N!==null&&(_=zi(N)),_=new c(g,_),a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=n0,a.stateNode=_,_._reactInternals=a,_=a.stateNode,_.props=g,_.state=a.memoizedState,_.refs={},Od(a),N=c.contextType,_.context=typeof N=="object"&&N!==null?zi(N):cl,_.state=a.memoizedState,N=c.getDerivedStateFromProps,typeof N=="function"&&(e0(a,c,N,g),_.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(N=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),N!==_.state&&n0.enqueueReplaceState(_,_.state,null),bu(a,g,_,w),Su(),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308),g=!0}else if(i===null){_=a.stateNode;var B=a.memoizedProps,X=Lo(c,B);_.props=X;var ft=_.context,wt=c.contextType;N=cl,typeof wt=="object"&&wt!==null&&(N=zi(wt));var Ct=c.getDerivedStateFromProps;wt=typeof Ct=="function"||typeof _.getSnapshotBeforeUpdate=="function",B=a.pendingProps!==B,wt||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(B||ft!==N)&&Zp(a,_,g,N),Ba=!1;var dt=a.memoizedState;_.state=dt,bu(a,g,_,w),Su(),ft=a.memoizedState,B||dt!==ft||Ba?(typeof Ct=="function"&&(e0(a,c,Ct,g),ft=a.memoizedState),(X=Ba||Kp(a,c,X,g,dt,ft,N))?(wt||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=ft),_.props=g,_.state=ft,_.context=N,g=X):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{_=a.stateNode,Ld(i,a),N=a.memoizedProps,wt=Lo(c,N),_.props=wt,Ct=a.pendingProps,dt=_.context,ft=c.contextType,X=cl,typeof ft=="object"&&ft!==null&&(X=zi(ft)),B=c.getDerivedStateFromProps,(ft=typeof B=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(N!==Ct||dt!==X)&&Zp(a,_,g,X),Ba=!1,dt=a.memoizedState,_.state=dt,bu(a,g,_,w),Su();var yt=a.memoizedState;N!==Ct||dt!==yt||Ba||i!==null&&i.dependencies!==null&&oh(i.dependencies)?(typeof B=="function"&&(e0(a,c,B,g),yt=a.memoizedState),(wt=Ba||Kp(a,c,wt,g,dt,yt,X)||i!==null&&i.dependencies!==null&&oh(i.dependencies))?(ft||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,yt,X),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,yt,X)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||N===i.memoizedProps&&dt===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&dt===i.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=yt),_.props=g,_.state=yt,_.context=X,g=wt):(typeof _.componentDidUpdate!="function"||N===i.memoizedProps&&dt===i.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&dt===i.memoizedState||(a.flags|=1024),g=!1)}return _=g,Sh(i,a),g=(a.flags&128)!==0,_||g?(_=a.stateNode,c=g&&typeof c.getDerivedStateFromError!="function"?null:_.render(),a.flags|=1,i!==null&&g?(a.child=Al(a,i.child,null,w),a.child=Al(a,null,c,w)):Si(i,a,c,w),a.memoizedState=_.state,i=a.child):i=ra(i,a,w),i}function fy(i,a,c,g){return xu(),a.flags|=256,Si(i,a,c,g),a.child}var s0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function a0(i){return{baseLanes:i,cachePool:$m()}}function o0(i,a,c){return i=i!==null?i.childLanes&~c:0,a&&(i|=Qr),i}function dy(i,a,c){var g=a.pendingProps,w=!1,_=(a.flags&128)!==0,N;if((N=_)||(N=i!==null&&i.memoizedState===null?!1:(hi.current&2)!==0),N&&(w=!0,a.flags&=-129),N=(a.flags&32)!==0,a.flags&=-33,i===null){if(qe){if(w?Fa(a):ja(),qe){var B=Hn,X;if(X=B){t:{for(X=B,B=_s;X.nodeType!==8;){if(!B){B=null;break t}if(X=cs(X.nextSibling),X===null){B=null;break t}}B=X}B!==null?(a.memoizedState={dehydrated:B,treeContext:So!==null?{id:Js,overflow:$s}:null,retryLane:536870912,hydrationErrors:null},X=_r(18,null,null,0),X.stateNode=B,X.return=a,a.child=X,$i=a,Hn=null,X=!0):X=!1}X||Ro(a)}if(B=a.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return G0(B)?a.lanes=32:a.lanes=536870912,null;ia(a)}return B=g.children,g=g.fallback,w?(ja(),w=a.mode,B=bh({mode:"hidden",children:B},w),g=Co(g,w,c,null),B.return=a,g.return=a,B.sibling=g,a.child=B,w=a.child,w.memoizedState=a0(c),w.childLanes=o0(i,N,c),a.memoizedState=s0,g):(Fa(a),l0(a,B))}if(X=i.memoizedState,X!==null&&(B=X.dehydrated,B!==null)){if(_)a.flags&256?(Fa(a),a.flags&=-257,a=u0(i,a,c)):a.memoizedState!==null?(ja(),a.child=i.child,a.flags|=128,a=null):(ja(),w=g.fallback,B=a.mode,g=bh({mode:"visible",children:g.children},B),w=Co(w,B,c,null),w.flags|=2,g.return=a,w.return=a,g.sibling=w,a.child=g,Al(a,i.child,null,c),g=a.child,g.memoizedState=a0(c),g.childLanes=o0(i,N,c),a.memoizedState=s0,a=w);else if(Fa(a),G0(B)){if(N=B.nextSibling&&B.nextSibling.dataset,N)var ft=N.dgst;N=ft,g=Error(s(419)),g.stack="",g.digest=N,Eu({value:g,source:null,stack:null}),a=u0(i,a,c)}else if(pi||Au(i,a,c,!1),N=(c&i.childLanes)!==0,pi||N){if(N=pn,N!==null&&(g=c&-c,g=(g&42)!==0?1:Pr(g),g=(g&(N.suspendedLanes|c))!==0?0:g,g!==0&&g!==X.retryLane))throw X.retryLane=g,ul(i,g),Rr(N,i,g),ry;B.data==="$?"||b0(),a=u0(i,a,c)}else B.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=X.treeContext,Hn=cs(B.nextSibling),$i=a,qe=!0,Io=null,_s=!1,i!==null&&(qr[Xr++]=Js,qr[Xr++]=$s,qr[Xr++]=So,Js=i.id,$s=i.overflow,So=a),a=l0(a,g.children),a.flags|=4096);return a}return w?(ja(),w=g.fallback,B=a.mode,X=i.child,ft=X.sibling,g=Zs(X,{mode:"hidden",children:g.children}),g.subtreeFlags=X.subtreeFlags&65011712,ft!==null?w=Zs(ft,w):(w=Co(w,B,c,null),w.flags|=2),w.return=a,g.return=a,g.sibling=w,a.child=g,g=w,w=a.child,B=i.child.memoizedState,B===null?B=a0(c):(X=B.cachePool,X!==null?(ft=ci._currentValue,X=X.parent!==ft?{parent:ft,pool:ft}:X):X=$m(),B={baseLanes:B.baseLanes|c,cachePool:X}),w.memoizedState=B,w.childLanes=o0(i,N,c),a.memoizedState=s0,g):(Fa(a),c=i.child,i=c.sibling,c=Zs(c,{mode:"visible",children:g.children}),c.return=a,c.sibling=null,i!==null&&(N=a.deletions,N===null?(a.deletions=[i],a.flags|=16):N.push(i)),a.child=c,a.memoizedState=null,c)}function l0(i,a){return a=bh({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function bh(i,a){return i=_r(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function u0(i,a,c){return Al(a,i.child,null,c),i=l0(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function gy(i,a,c){i.lanes|=a;var g=i.alternate;g!==null&&(g.lanes|=a),bd(i.return,a,c)}function c0(i,a,c,g,w){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:w}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=g,_.tail=c,_.tailMode=w)}function my(i,a,c){var g=a.pendingProps,w=g.revealOrder,_=g.tail;if(Si(i,a,g.children,c),g=hi.current,(g&2)!==0)g=g&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&gy(i,c,a);else if(i.tag===19)gy(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break t;for(;i.sibling===null;){if(i.return===null||i.return===a)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}switch(Ot(hi,g),w){case"forwards":for(c=a.child,w=null;c!==null;)i=c.alternate,i!==null&&vh(i)===null&&(w=c),c=c.sibling;c=w,c===null?(w=a.child,a.child=null):(w=c.sibling,c.sibling=null),c0(a,!1,w,c,_);break;case"backwards":for(c=null,w=a.child,a.child=null;w!==null;){if(i=w.alternate,i!==null&&vh(i)===null){a.child=w;break}i=w.sibling,w.sibling=c,c=w,w=i}c0(a,!0,c,null,_);break;case"together":c0(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ra(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),qa|=a.lanes,(c&a.childLanes)===0)if(i!==null){if(Au(i,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(s(153));if(a.child!==null){for(i=a.child,c=Zs(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=Zs(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function h0(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&oh(i)))}function rC(i,a,c){switch(a.tag){case 3:ae(a,a.stateNode.containerInfo),Pa(a,ci,i.memoizedState.cache),xu();break;case 27:case 5:er(a);break;case 4:ae(a,a.stateNode.containerInfo);break;case 10:Pa(a,a.type,a.memoizedProps.value);break;case 13:var g=a.memoizedState;if(g!==null)return g.dehydrated!==null?(Fa(a),a.flags|=128,null):(c&a.child.childLanes)!==0?dy(i,a,c):(Fa(a),i=ra(i,a,c),i!==null?i.sibling:null);Fa(a);break;case 19:var w=(i.flags&128)!==0;if(g=(c&a.childLanes)!==0,g||(Au(i,a,c,!1),g=(c&a.childLanes)!==0),w){if(g)return my(i,a,c);a.flags|=128}if(w=a.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Ot(hi,hi.current),g)break;return null;case 22:case 23:return a.lanes=0,ly(i,a,c);case 24:Pa(a,ci,i.memoizedState.cache)}return ra(i,a,c)}function py(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps)pi=!0;else{if(!h0(i,c)&&(a.flags&128)===0)return pi=!1,rC(i,a,c);pi=(i.flags&131072)!==0}else pi=!1,qe&&(a.flags&1048576)!==0&&qm(a,ah,a.index);switch(a.lanes=0,a.tag){case 16:t:{i=a.pendingProps;var g=a.elementType,w=g._init;if(g=w(g._payload),a.type=g,typeof g=="function")Ad(g)?(i=Lo(g,i),a.tag=1,a=hy(null,a,g,i,c)):(a.tag=0,a=r0(null,a,g,i,c));else{if(g!=null){if(w=g.$$typeof,w===_t){a.tag=11,a=sy(null,a,g,i,c);break t}else if(w===z){a.tag=14,a=ay(null,a,g,i,c);break t}}throw a=Ee(g)||g,Error(s(306,a,""))}}return a;case 0:return r0(i,a,a.type,a.pendingProps,c);case 1:return g=a.type,w=Lo(g,a.pendingProps),hy(i,a,g,w,c);case 3:t:{if(ae(a,a.stateNode.containerInfo),i===null)throw Error(s(387));g=a.pendingProps;var _=a.memoizedState;w=_.element,Ld(i,a),bu(a,g,null,c);var N=a.memoizedState;if(g=N.cache,Pa(a,ci,g),g!==_.cache&&Id(a,[ci],c,!0),Su(),g=N.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:N.cache},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){a=fy(i,a,g,c);break t}else if(g!==w){w=Gr(Error(s(424)),a),Eu(w),a=fy(i,a,g,c);break t}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Hn=cs(i.firstChild),$i=a,qe=!0,Io=null,_s=!0,c=Wp(a,null,g,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(xu(),g===w){a=ra(i,a,c);break t}Si(i,a,g,c)}a=a.child}return a;case 26:return Sh(i,a),i===null?(c=A2(a.type,null,a.pendingProps,null))?a.memoizedState=c:qe||(c=a.type,i=a.pendingProps,g=jh(Mt.current).createElement(c),g[Xn]=a,g[sn]=i,Ii(g,c,i),je(g),a.stateNode=g):a.memoizedState=A2(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return er(a),i===null&&qe&&(g=a.stateNode=y2(a.type,a.pendingProps,Mt.current),$i=a,_s=!0,w=Hn,Ka(a.type)?(Y0=w,Hn=cs(g.firstChild)):Hn=w),Si(i,a,a.pendingProps.children,c),Sh(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&qe&&((w=g=Hn)&&(g=MC(g,a.type,a.pendingProps,_s),g!==null?(a.stateNode=g,$i=a,Hn=cs(g.firstChild),_s=!1,w=!0):w=!1),w||Ro(a)),er(a),w=a.type,_=a.pendingProps,N=i!==null?i.memoizedProps:null,g=_.children,j0(w,_)?g=null:N!==null&&j0(w,N)&&(a.flags|=32),a.memoizedState!==null&&(w=Fd(i,a,K_,null,null,c),Qu._currentValue=w),Sh(i,a),Si(i,a,g,c),a.child;case 6:return i===null&&qe&&((i=c=Hn)&&(c=OC(c,a.pendingProps,_s),c!==null?(a.stateNode=c,$i=a,Hn=null,i=!0):i=!1),i||Ro(a)),null;case 13:return dy(i,a,c);case 4:return ae(a,a.stateNode.containerInfo),g=a.pendingProps,i===null?a.child=Al(a,null,g,c):Si(i,a,g,c),a.child;case 11:return sy(i,a,a.type,a.pendingProps,c);case 7:return Si(i,a,a.pendingProps,c),a.child;case 8:return Si(i,a,a.pendingProps.children,c),a.child;case 12:return Si(i,a,a.pendingProps.children,c),a.child;case 10:return g=a.pendingProps,Pa(a,a.type,g.value),Si(i,a,g.children,c),a.child;case 9:return w=a.type._context,g=a.pendingProps.children,No(a),w=zi(w),g=g(w),a.flags|=1,Si(i,a,g,c),a.child;case 14:return ay(i,a,a.type,a.pendingProps,c);case 15:return oy(i,a,a.type,a.pendingProps,c);case 19:return my(i,a,c);case 31:return g=a.pendingProps,c=a.mode,g={mode:g.mode,children:g.children},i===null?(c=bh(g,c),c.ref=a.ref,a.child=c,c.return=a,a=c):(c=Zs(i.child,g),c.ref=a.ref,a.child=c,c.return=a,a=c),a;case 22:return ly(i,a,c);case 24:return No(a),g=zi(ci),i===null?(w=Nd(),w===null&&(w=pn,_=Rd(),w.pooledCache=_,_.refCount++,_!==null&&(w.pooledCacheLanes|=c),w=_),a.memoizedState={parent:g,cache:w},Od(a),Pa(a,ci,w)):((i.lanes&c)!==0&&(Ld(i,a),bu(a,null,null,c),Su()),w=i.memoizedState,_=a.memoizedState,w.parent!==g?(w={parent:g,cache:g},a.memoizedState=w,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=w),Pa(a,ci,g)):(g=_.cache,Pa(a,ci,g),g!==w.cache&&Id(a,[ci],c,!0))),Si(i,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function sa(i){i.flags|=4}function yy(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!C2(a)){if(a=Wr.current,a!==null&&((Pe&4194048)===Pe?Cs!==null:(Pe&62914560)!==Pe&&(Pe&536870912)===0||a!==Cs))throw _u=Md,tp;i.flags|=8192}}function Ih(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Ca():536870912,i.lanes|=a,_l|=a)}function Lu(i,a){if(!qe)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function Ln(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,g=0;if(a)for(var w=i.child;w!==null;)c|=w.lanes|w.childLanes,g|=w.subtreeFlags&65011712,g|=w.flags&65011712,w.return=i,w=w.sibling;else for(w=i.child;w!==null;)c|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=i,w=w.sibling;return i.subtreeFlags|=g,i.childLanes=c,a}function sC(i,a,c){var g=a.pendingProps;switch(_d(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(a),null;case 1:return Ln(a),null;case 3:return c=a.stateNode,g=null,i!==null&&(g=i.memoizedState.cache),a.memoizedState.cache!==g&&(a.flags|=2048),ea(ci),Oi(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(yu(a)?sa(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Qm())),Ln(a),null;case 26:return c=a.memoizedState,i===null?(sa(a),c!==null?(Ln(a),yy(a,c)):(Ln(a),a.flags&=-16777217)):c?c!==i.memoizedState?(sa(a),Ln(a),yy(a,c)):(Ln(a),a.flags&=-16777217):(i.memoizedProps!==g&&sa(a),Ln(a),a.flags&=-16777217),null;case 27:_n(a),c=Mt.current;var w=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==g&&sa(a);else{if(!g){if(a.stateNode===null)throw Error(s(166));return Ln(a),null}i=zt.current,yu(a)?Xm(a):(i=y2(w,g,c),a.stateNode=i,sa(a))}return Ln(a),null;case 5:if(_n(a),c=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==g&&sa(a);else{if(!g){if(a.stateNode===null)throw Error(s(166));return Ln(a),null}if(i=zt.current,yu(a))Xm(a);else{switch(w=jh(Mt.current),i){case 1:i=w.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:i=w.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":i=w.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":i=w.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":i=w.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof g.is=="string"?w.createElement("select",{is:g.is}):w.createElement("select"),g.multiple?i.multiple=!0:g.size&&(i.size=g.size);break;default:i=typeof g.is=="string"?w.createElement(c,{is:g.is}):w.createElement(c)}}i[Xn]=a,i[sn]=g;t:for(w=a.child;w!==null;){if(w.tag===5||w.tag===6)i.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===a)break t;for(;w.sibling===null;){if(w.return===null||w.return===a)break t;w=w.return}w.sibling.return=w.return,w=w.sibling}a.stateNode=i;t:switch(Ii(i,c,g),c){case"button":case"input":case"select":case"textarea":i=!!g.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&sa(a)}}return Ln(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==g&&sa(a);else{if(typeof g!="string"&&a.stateNode===null)throw Error(s(166));if(i=Mt.current,yu(a)){if(i=a.stateNode,c=a.memoizedProps,g=null,w=$i,w!==null)switch(w.tag){case 27:case 5:g=w.memoizedProps}i[Xn]=a,i=!!(i.nodeValue===c||g!==null&&g.suppressHydrationWarning===!0||c2(i.nodeValue,c)),i||Ro(a)}else i=jh(i).createTextNode(g),i[Xn]=a,a.stateNode=i}return Ln(a),null;case 13:if(g=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(w=yu(a),g!==null&&g.dehydrated!==null){if(i===null){if(!w)throw Error(s(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(s(317));w[Xn]=a}else xu(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ln(a),w=!1}else w=Qm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=w),w=!0;if(!w)return a.flags&256?(ia(a),a):(ia(a),null)}if(ia(a),(a.flags&128)!==0)return a.lanes=c,a;if(c=g!==null,i=i!==null&&i.memoizedState!==null,c){g=a.child,w=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(w=g.alternate.memoizedState.cachePool.pool);var _=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),_!==w&&(g.flags|=2048)}return c!==i&&c&&(a.child.flags|=8192),Ih(a,a.updateQueue),Ln(a),null;case 4:return Oi(),i===null&&B0(a.stateNode.containerInfo),Ln(a),null;case 10:return ea(a.type),Ln(a),null;case 19:if(Bt(hi),w=a.memoizedState,w===null)return Ln(a),null;if(g=(a.flags&128)!==0,_=w.rendering,_===null)if(g)Lu(w,!1);else{if(Gn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(_=vh(i),_!==null){for(a.flags|=128,Lu(w,!1),i=_.updateQueue,a.updateQueue=i,Ih(a,i),a.subtreeFlags=0,i=c,c=a.child;c!==null;)Ym(c,i),c=c.sibling;return Ot(hi,hi.current&1|2),a.child}i=i.sibling}w.tail!==null&&Xe()>Nh&&(a.flags|=128,g=!0,Lu(w,!1),a.lanes=4194304)}else{if(!g)if(i=vh(_),i!==null){if(a.flags|=128,g=!0,i=i.updateQueue,a.updateQueue=i,Ih(a,i),Lu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!_.alternate&&!qe)return Ln(a),null}else 2*Xe()-w.renderingStartTime>Nh&&c!==536870912&&(a.flags|=128,g=!0,Lu(w,!1),a.lanes=4194304);w.isBackwards?(_.sibling=a.child,a.child=_):(i=w.last,i!==null?i.sibling=_:a.child=_,w.last=_)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=Xe(),a.sibling=null,i=hi.current,Ot(hi,g?i&1|2:i&1),a):(Ln(a),null);case 22:case 23:return ia(a),kd(),g=a.memoizedState!==null,i!==null?i.memoizedState!==null!==g&&(a.flags|=8192):g&&(a.flags|=8192),g?(c&536870912)!==0&&(a.flags&128)===0&&(Ln(a),a.subtreeFlags&6&&(a.flags|=8192)):Ln(a),c=a.updateQueue,c!==null&&Ih(a,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==c&&(a.flags|=2048),i!==null&&Bt(Mo),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),ea(ci),Ln(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function aC(i,a){switch(_d(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ea(ci),Oi(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return _n(a),null;case 13:if(ia(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(s(340));xu()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Bt(hi),null;case 4:return Oi(),null;case 10:return ea(a.type),null;case 22:case 23:return ia(a),kd(),i!==null&&Bt(Mo),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return ea(ci),null;case 25:return null;default:return null}}function xy(i,a){switch(_d(a),a.tag){case 3:ea(ci),Oi();break;case 26:case 27:case 5:_n(a);break;case 4:Oi();break;case 13:ia(a);break;case 19:Bt(hi);break;case 10:ea(a.type);break;case 22:case 23:ia(a),kd(),i!==null&&Bt(Mo);break;case 24:ea(ci)}}function Pu(i,a){try{var c=a.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var w=g.next;c=w;do{if((c.tag&i)===i){g=void 0;var _=c.create,N=c.inst;g=_(),N.destroy=g}c=c.next}while(c!==w)}}catch(B){gn(a,a.return,B)}}function za(i,a,c){try{var g=a.updateQueue,w=g!==null?g.lastEffect:null;if(w!==null){var _=w.next;g=_;do{if((g.tag&i)===i){var N=g.inst,B=N.destroy;if(B!==void 0){N.destroy=void 0,w=a;var X=c,ft=B;try{ft()}catch(wt){gn(w,X,wt)}}}g=g.next}while(g!==_)}}catch(wt){gn(a,a.return,wt)}}function Ey(i){var a=i.updateQueue;if(a!==null){var c=i.stateNode;try{ap(a,c)}catch(g){gn(i,i.return,g)}}}function Ay(i,a,c){c.props=Lo(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(g){gn(i,a,g)}}function Bu(i,a){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var g=i.stateNode;break;case 30:g=i.stateNode;break;default:g=i.stateNode}typeof c=="function"?i.refCleanup=c(g):c.current=g}}catch(w){gn(i,a,w)}}function Ss(i,a){var c=i.ref,g=i.refCleanup;if(c!==null)if(typeof g=="function")try{g()}catch(w){gn(i,a,w)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(w){gn(i,a,w)}else c.current=null}function wy(i){var a=i.type,c=i.memoizedProps,g=i.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&g.focus();break t;case"img":c.src?g.src=c.src:c.srcSet&&(g.srcset=c.srcSet)}}catch(w){gn(i,i.return,w)}}function f0(i,a,c){try{var g=i.stateNode;bC(g,i.type,c,a),g[sn]=a}catch(w){gn(i,i.return,w)}}function Ty(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ka(i.type)||i.tag===4}function d0(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Ty(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ka(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function g0(i,a,c){var g=i.tag;if(g===5||g===6)i=i.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(i),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Fh));else if(g!==4&&(g===27&&Ka(i.type)&&(c=i.stateNode,a=null),i=i.child,i!==null))for(g0(i,a,c),i=i.sibling;i!==null;)g0(i,a,c),i=i.sibling}function Rh(i,a,c){var g=i.tag;if(g===5||g===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(g!==4&&(g===27&&Ka(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Rh(i,a,c),i=i.sibling;i!==null;)Rh(i,a,c),i=i.sibling}function vy(i){var a=i.stateNode,c=i.memoizedProps;try{for(var g=i.type,w=a.attributes;w.length;)a.removeAttributeNode(w[0]);Ii(a,g,c),a[Xn]=i,a[sn]=c}catch(_){gn(i,i.return,_)}}var aa=!1,Jn=!1,m0=!1,_y=typeof WeakSet=="function"?WeakSet:Set,yi=null;function oC(i,a){if(i=i.containerInfo,U0=Xh,i=C(i),R(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else t:{c=(c=i.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var w=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break t}var N=0,B=-1,X=-1,ft=0,wt=0,Ct=i,dt=null;e:for(;;){for(var yt;Ct!==c||w!==0&&Ct.nodeType!==3||(B=N+w),Ct!==_||g!==0&&Ct.nodeType!==3||(X=N+g),Ct.nodeType===3&&(N+=Ct.nodeValue.length),(yt=Ct.firstChild)!==null;)dt=Ct,Ct=yt;for(;;){if(Ct===i)break e;if(dt===c&&++ft===w&&(B=N),dt===_&&++wt===g&&(X=N),(yt=Ct.nextSibling)!==null)break;Ct=dt,dt=Ct.parentNode}Ct=yt}c=B===-1||X===-1?null:{start:B,end:X}}else c=null}c=c||{start:0,end:0}}else c=null;for(F0={focusedElem:i,selectionRange:c},Xh=!1,yi=a;yi!==null;)if(a=yi,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,yi=i;else for(;yi!==null;){switch(a=yi,_=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,c=a,w=_.memoizedProps,_=_.memoizedState,g=c.stateNode;try{var ie=Lo(c.type,w,c.elementType===c.type);i=g.getSnapshotBeforeUpdate(ie,_),g.__reactInternalSnapshotBeforeUpdate=i}catch(te){gn(c,c.return,te)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,c=i.nodeType,c===9)H0(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":H0(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=a.sibling,i!==null){i.return=a.return,yi=i;break}yi=a.return}}function Cy(i,a,c){var g=c.flags;switch(c.tag){case 0:case 11:case 15:Ha(i,c),g&4&&Pu(5,c);break;case 1:if(Ha(i,c),g&4)if(i=c.stateNode,a===null)try{i.componentDidMount()}catch(N){gn(c,c.return,N)}else{var w=Lo(c.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(w,a,i.__reactInternalSnapshotBeforeUpdate)}catch(N){gn(c,c.return,N)}}g&64&&Ey(c),g&512&&Bu(c,c.return);break;case 3:if(Ha(i,c),g&64&&(i=c.updateQueue,i!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{ap(i,a)}catch(N){gn(c,c.return,N)}}break;case 27:a===null&&g&4&&vy(c);case 26:case 5:Ha(i,c),a===null&&g&4&&wy(c),g&512&&Bu(c,c.return);break;case 12:Ha(i,c);break;case 13:Ha(i,c),g&4&&Iy(i,c),g&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=pC.bind(null,c),LC(i,c))));break;case 22:if(g=c.memoizedState!==null||aa,!g){a=a!==null&&a.memoizedState!==null||Jn,w=aa;var _=Jn;aa=g,(Jn=a)&&!_?Ga(i,c,(c.subtreeFlags&8772)!==0):Ha(i,c),aa=w,Jn=_}break;case 30:break;default:Ha(i,c)}}function Sy(i){var a=i.alternate;a!==null&&(i.alternate=null,Sy(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Br(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Nn=null,fr=!1;function oa(i,a,c){for(c=c.child;c!==null;)by(i,a,c),c=c.sibling}function by(i,a,c){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(Oe,c)}catch{}switch(c.tag){case 26:Jn||Ss(c,a),oa(i,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Jn||Ss(c,a);var g=Nn,w=fr;Ka(c.type)&&(Nn=c.stateNode,fr=!1),oa(i,a,c),Yu(c.stateNode),Nn=g,fr=w;break;case 5:Jn||Ss(c,a);case 6:if(g=Nn,w=fr,Nn=null,oa(i,a,c),Nn=g,fr=w,Nn!==null)if(fr)try{(Nn.nodeType===9?Nn.body:Nn.nodeName==="HTML"?Nn.ownerDocument.body:Nn).removeChild(c.stateNode)}catch(_){gn(c,a,_)}else try{Nn.removeChild(c.stateNode)}catch(_){gn(c,a,_)}break;case 18:Nn!==null&&(fr?(i=Nn,m2(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),$u(i)):m2(Nn,c.stateNode));break;case 4:g=Nn,w=fr,Nn=c.stateNode.containerInfo,fr=!0,oa(i,a,c),Nn=g,fr=w;break;case 0:case 11:case 14:case 15:Jn||za(2,c,a),Jn||za(4,c,a),oa(i,a,c);break;case 1:Jn||(Ss(c,a),g=c.stateNode,typeof g.componentWillUnmount=="function"&&Ay(c,a,g)),oa(i,a,c);break;case 21:oa(i,a,c);break;case 22:Jn=(g=Jn)||c.memoizedState!==null,oa(i,a,c),Jn=g;break;default:oa(i,a,c)}}function Iy(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{$u(i)}catch(c){gn(a,a.return,c)}}function lC(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new _y),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new _y),a;default:throw Error(s(435,i.tag))}}function p0(i,a){var c=lC(i);a.forEach(function(g){var w=yC.bind(null,i,g);c.has(g)||(c.add(g),g.then(w,w))})}function Cr(i,a){var c=a.deletions;if(c!==null)for(var g=0;g<c.length;g++){var w=c[g],_=i,N=a,B=N;t:for(;B!==null;){switch(B.tag){case 27:if(Ka(B.type)){Nn=B.stateNode,fr=!1;break t}break;case 5:Nn=B.stateNode,fr=!1;break t;case 3:case 4:Nn=B.stateNode.containerInfo,fr=!0;break t}B=B.return}if(Nn===null)throw Error(s(160));by(_,N,w),Nn=null,fr=!1,_=w.alternate,_!==null&&(_.return=null),w.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Ry(a,i),a=a.sibling}var us=null;function Ry(i,a){var c=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Cr(a,i),Sr(i),g&4&&(za(3,i,i.return),Pu(3,i),za(5,i,i.return));break;case 1:Cr(a,i),Sr(i),g&512&&(Jn||c===null||Ss(c,c.return)),g&64&&aa&&(i=i.updateQueue,i!==null&&(g=i.callbacks,g!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?g:c.concat(g))));break;case 26:var w=us;if(Cr(a,i),Sr(i),g&512&&(Jn||c===null||Ss(c,c.return)),g&4){var _=c!==null?c.memoizedState:null;if(g=i.memoizedState,c===null)if(g===null)if(i.stateNode===null){t:{g=i.type,c=i.memoizedProps,w=w.ownerDocument||w;e:switch(g){case"title":_=w.getElementsByTagName("title")[0],(!_||_[ir]||_[Xn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=w.createElement(g),w.head.insertBefore(_,w.querySelector("head > title"))),Ii(_,g,c),_[Xn]=i,je(_),g=_;break t;case"link":var N=v2("link","href",w).get(g+(c.href||""));if(N){for(var B=0;B<N.length;B++)if(_=N[B],_.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&_.getAttribute("rel")===(c.rel==null?null:c.rel)&&_.getAttribute("title")===(c.title==null?null:c.title)&&_.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){N.splice(B,1);break e}}_=w.createElement(g),Ii(_,g,c),w.head.appendChild(_);break;case"meta":if(N=v2("meta","content",w).get(g+(c.content||""))){for(B=0;B<N.length;B++)if(_=N[B],_.getAttribute("content")===(c.content==null?null:""+c.content)&&_.getAttribute("name")===(c.name==null?null:c.name)&&_.getAttribute("property")===(c.property==null?null:c.property)&&_.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&_.getAttribute("charset")===(c.charSet==null?null:c.charSet)){N.splice(B,1);break e}}_=w.createElement(g),Ii(_,g,c),w.head.appendChild(_);break;default:throw Error(s(468,g))}_[Xn]=i,je(_),g=_}i.stateNode=g}else _2(w,i.type,i.stateNode);else i.stateNode=T2(w,g,i.memoizedProps);else _!==g?(_===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):_.count--,g===null?_2(w,i.type,i.stateNode):T2(w,g,i.memoizedProps)):g===null&&i.stateNode!==null&&f0(i,i.memoizedProps,c.memoizedProps)}break;case 27:Cr(a,i),Sr(i),g&512&&(Jn||c===null||Ss(c,c.return)),c!==null&&g&4&&f0(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Cr(a,i),Sr(i),g&512&&(Jn||c===null||Ss(c,c.return)),i.flags&32){w=i.stateNode;try{An(w,"")}catch(yt){gn(i,i.return,yt)}}g&4&&i.stateNode!=null&&(w=i.memoizedProps,f0(i,w,c!==null?c.memoizedProps:w)),g&1024&&(m0=!0);break;case 6:if(Cr(a,i),Sr(i),g&4){if(i.stateNode===null)throw Error(s(162));g=i.memoizedProps,c=i.stateNode;try{c.nodeValue=g}catch(yt){gn(i,i.return,yt)}}break;case 3:if(Gh=null,w=us,us=zh(a.containerInfo),Cr(a,i),us=w,Sr(i),g&4&&c!==null&&c.memoizedState.isDehydrated)try{$u(a.containerInfo)}catch(yt){gn(i,i.return,yt)}m0&&(m0=!1,Dy(i));break;case 4:g=us,us=zh(i.stateNode.containerInfo),Cr(a,i),Sr(i),us=g;break;case 12:Cr(a,i),Sr(i);break;case 13:Cr(a,i),Sr(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(T0=Xe()),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,p0(i,g)));break;case 22:w=i.memoizedState!==null;var X=c!==null&&c.memoizedState!==null,ft=aa,wt=Jn;if(aa=ft||w,Jn=wt||X,Cr(a,i),Jn=wt,aa=ft,Sr(i),g&8192)t:for(a=i.stateNode,a._visibility=w?a._visibility&-2:a._visibility|1,w&&(c===null||X||aa||Jn||Po(i)),c=null,a=i;;){if(a.tag===5||a.tag===26){if(c===null){X=c=a;try{if(_=X.stateNode,w)N=_.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{B=X.stateNode;var Ct=X.memoizedProps.style,dt=Ct!=null&&Ct.hasOwnProperty("display")?Ct.display:null;B.style.display=dt==null||typeof dt=="boolean"?"":(""+dt).trim()}}catch(yt){gn(X,X.return,yt)}}}else if(a.tag===6){if(c===null){X=a;try{X.stateNode.nodeValue=w?"":X.memoizedProps}catch(yt){gn(X,X.return,yt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break t;for(;a.sibling===null;){if(a.return===null||a.return===i)break t;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}g&4&&(g=i.updateQueue,g!==null&&(c=g.retryQueue,c!==null&&(g.retryQueue=null,p0(i,c))));break;case 19:Cr(a,i),Sr(i),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,p0(i,g)));break;case 30:break;case 21:break;default:Cr(a,i),Sr(i)}}function Sr(i){var a=i.flags;if(a&2){try{for(var c,g=i.return;g!==null;){if(Ty(g)){c=g;break}g=g.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var w=c.stateNode,_=d0(i);Rh(i,_,w);break;case 5:var N=c.stateNode;c.flags&32&&(An(N,""),c.flags&=-33);var B=d0(i);Rh(i,B,N);break;case 3:case 4:var X=c.stateNode.containerInfo,ft=d0(i);g0(i,ft,X);break;default:throw Error(s(161))}}catch(wt){gn(i,i.return,wt)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Dy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;Dy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Ha(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Cy(i,a.alternate,a),a=a.sibling}function Po(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:za(4,a,a.return),Po(a);break;case 1:Ss(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&Ay(a,a.return,c),Po(a);break;case 27:Yu(a.stateNode);case 26:case 5:Ss(a,a.return),Po(a);break;case 22:a.memoizedState===null&&Po(a);break;case 30:Po(a);break;default:Po(a)}i=i.sibling}}function Ga(i,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var g=a.alternate,w=i,_=a,N=_.flags;switch(_.tag){case 0:case 11:case 15:Ga(w,_,c),Pu(4,_);break;case 1:if(Ga(w,_,c),g=_,w=g.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(ft){gn(g,g.return,ft)}if(g=_,w=g.updateQueue,w!==null){var B=g.stateNode;try{var X=w.shared.hiddenCallbacks;if(X!==null)for(w.shared.hiddenCallbacks=null,w=0;w<X.length;w++)sp(X[w],B)}catch(ft){gn(g,g.return,ft)}}c&&N&64&&Ey(_),Bu(_,_.return);break;case 27:vy(_);case 26:case 5:Ga(w,_,c),c&&g===null&&N&4&&wy(_),Bu(_,_.return);break;case 12:Ga(w,_,c);break;case 13:Ga(w,_,c),c&&N&4&&Iy(w,_);break;case 22:_.memoizedState===null&&Ga(w,_,c),Bu(_,_.return);break;case 30:break;default:Ga(w,_,c)}a=a.sibling}}function y0(i,a){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&wu(c))}function x0(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&wu(i))}function bs(i,a,c,g){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ny(i,a,c,g),a=a.sibling}function Ny(i,a,c,g){var w=a.flags;switch(a.tag){case 0:case 11:case 15:bs(i,a,c,g),w&2048&&Pu(9,a);break;case 1:bs(i,a,c,g);break;case 3:bs(i,a,c,g),w&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&wu(i)));break;case 12:if(w&2048){bs(i,a,c,g),i=a.stateNode;try{var _=a.memoizedProps,N=_.id,B=_.onPostCommit;typeof B=="function"&&B(N,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(X){gn(a,a.return,X)}}else bs(i,a,c,g);break;case 13:bs(i,a,c,g);break;case 23:break;case 22:_=a.stateNode,N=a.alternate,a.memoizedState!==null?_._visibility&2?bs(i,a,c,g):Vu(i,a):_._visibility&2?bs(i,a,c,g):(_._visibility|=2,wl(i,a,c,g,(a.subtreeFlags&10256)!==0)),w&2048&&y0(N,a);break;case 24:bs(i,a,c,g),w&2048&&x0(a.alternate,a);break;default:bs(i,a,c,g)}}function wl(i,a,c,g,w){for(w=w&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var _=i,N=a,B=c,X=g,ft=N.flags;switch(N.tag){case 0:case 11:case 15:wl(_,N,B,X,w),Pu(8,N);break;case 23:break;case 22:var wt=N.stateNode;N.memoizedState!==null?wt._visibility&2?wl(_,N,B,X,w):Vu(_,N):(wt._visibility|=2,wl(_,N,B,X,w)),w&&ft&2048&&y0(N.alternate,N);break;case 24:wl(_,N,B,X,w),w&&ft&2048&&x0(N.alternate,N);break;default:wl(_,N,B,X,w)}a=a.sibling}}function Vu(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=i,g=a,w=g.flags;switch(g.tag){case 22:Vu(c,g),w&2048&&y0(g.alternate,g);break;case 24:Vu(c,g),w&2048&&x0(g.alternate,g);break;default:Vu(c,g)}a=a.sibling}}var ku=8192;function Tl(i){if(i.subtreeFlags&ku)for(i=i.child;i!==null;)My(i),i=i.sibling}function My(i){switch(i.tag){case 26:Tl(i),i.flags&ku&&i.memoizedState!==null&&XC(us,i.memoizedState,i.memoizedProps);break;case 5:Tl(i);break;case 3:case 4:var a=us;us=zh(i.stateNode.containerInfo),Tl(i),us=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=ku,ku=16777216,Tl(i),ku=a):Tl(i));break;default:Tl(i)}}function Oy(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Uu(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var g=a[c];yi=g,Py(g,i)}Oy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ly(i),i=i.sibling}function Ly(i){switch(i.tag){case 0:case 11:case 15:Uu(i),i.flags&2048&&za(9,i,i.return);break;case 3:Uu(i);break;case 12:Uu(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Dh(i)):Uu(i);break;default:Uu(i)}}function Dh(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var g=a[c];yi=g,Py(g,i)}Oy(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:za(8,a,a.return),Dh(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,Dh(a));break;default:Dh(a)}i=i.sibling}}function Py(i,a){for(;yi!==null;){var c=yi;switch(c.tag){case 0:case 11:case 15:za(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var g=c.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:wu(c.memoizedState.cache)}if(g=c.child,g!==null)g.return=c,yi=g;else t:for(c=i;yi!==null;){g=yi;var w=g.sibling,_=g.return;if(Sy(g),g===c){yi=null;break t}if(w!==null){w.return=_,yi=w;break t}yi=_}}}var uC={getCacheForType:function(i){var a=zi(ci),c=a.data.get(i);return c===void 0&&(c=i(),a.data.set(i,c)),c}},cC=typeof WeakMap=="function"?WeakMap:Map,tn=0,pn=null,Se=null,Pe=0,en=0,br=null,Ya=!1,vl=!1,E0=!1,la=0,Gn=0,qa=0,Bo=0,A0=0,Qr=0,_l=0,Fu=null,dr=null,w0=!1,T0=0,Nh=1/0,Mh=null,Xa=null,bi=0,Wa=null,Cl=null,Sl=0,v0=0,_0=null,By=null,ju=0,C0=null;function Ir(){if((tn&2)!==0&&Pe!==0)return Pe&-Pe;if(Et.T!==null){var i=dl;return i!==0?i:M0()}return Ki()}function Vy(){Qr===0&&(Qr=(Pe&536870912)===0||qe?Hs():536870912);var i=Wr.current;return i!==null&&(i.flags|=32),Qr}function Rr(i,a,c){(i===pn&&(en===2||en===9)||i.cancelPendingCommit!==null)&&(bl(i,0),Qa(i,Pe,Qr,!1)),Ai(i,c),((tn&2)===0||i!==pn)&&(i===pn&&((tn&2)===0&&(Bo|=c),Gn===4&&Qa(i,Pe,Qr,!1)),Is(i))}function ky(i,a,c){if((tn&6)!==0)throw Error(s(327));var g=!c&&(a&124)===0&&(a&i.expiredLanes)===0||Qe(i,a),w=g?dC(i,a):I0(i,a,!0),_=g;do{if(w===0){vl&&!g&&Qa(i,a,0,!1);break}else{if(c=i.current.alternate,_&&!hC(c)){w=I0(i,a,!1),_=!1;continue}if(w===2){if(_=a,i.errorRecoveryDisabledLanes&_)var N=0;else N=i.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){a=N;t:{var B=i;w=Fu;var X=B.current.memoizedState.isDehydrated;if(X&&(bl(B,N).flags|=256),N=I0(B,N,!1),N!==2){if(E0&&!X){B.errorRecoveryDisabledLanes|=_,Bo|=_,w=4;break t}_=dr,dr=w,_!==null&&(dr===null?dr=_:dr.push.apply(dr,_))}w=N}if(_=!1,w!==2)continue}}if(w===1){bl(i,0),Qa(i,a,0,!0);break}t:{switch(g=i,_=w,_){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Qa(g,a,Qr,!Ya);break t;case 2:dr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(w=T0+300-Xe(),10<w)){if(Qa(g,a,Qr,!Ya),Le(g,0,!0)!==0)break t;g.timeoutHandle=d2(Uy.bind(null,g,c,dr,Mh,w0,a,Qr,Bo,_l,Ya,_,2,-0,0),w);break t}Uy(g,c,dr,Mh,w0,a,Qr,Bo,_l,Ya,_,0,-0,0)}}break}while(!0);Is(i)}function Uy(i,a,c,g,w,_,N,B,X,ft,wt,Ct,dt,yt){if(i.timeoutHandle=-1,Ct=a.subtreeFlags,(Ct&8192||(Ct&16785408)===16785408)&&(Wu={stylesheets:null,count:0,unsuspend:qC},My(a),Ct=WC(),Ct!==null)){i.cancelPendingCommit=Ct(qy.bind(null,i,a,_,c,g,w,N,B,X,wt,1,dt,yt)),Qa(i,_,N,!ft);return}qy(i,a,_,c,g,w,N,B,X)}function hC(i){for(var a=i;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var g=0;g<c.length;g++){var w=c[g],_=w.getSnapshot;w=w.value;try{if(!f(_(),w))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Qa(i,a,c,g){a&=~A0,a&=~Bo,i.suspendedLanes|=a,i.pingedLanes&=~a,g&&(i.warmLanes|=a),g=i.expirationTimes;for(var w=a;0<w;){var _=31-Fe(w),N=1<<_;g[_]=-1,w&=~N}c!==0&&mr(i,c,a)}function Oh(){return(tn&6)===0?(zu(0),!1):!0}function S0(){if(Se!==null){if(en===0)var i=Se.return;else i=Se,ta=Do=null,Hd(i),El=null,Mu=0,i=Se;for(;i!==null;)xy(i.alternate,i),i=i.return;Se=null}}function bl(i,a){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,RC(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),S0(),pn=i,Se=c=Zs(i.current,null),Pe=a,en=0,br=null,Ya=!1,vl=Qe(i,a),E0=!1,_l=Qr=A0=Bo=qa=Gn=0,dr=Fu=null,w0=!1,(a&8)!==0&&(a|=a&32);var g=i.entangledLanes;if(g!==0)for(i=i.entanglements,g&=a;0<g;){var w=31-Fe(g),_=1<<w;a|=i[w],g&=~_}return la=a,eh(),c}function Fy(i,a){Te=null,Et.H=Ah,a===vu||a===ch?(a=ip(),en=3):a===tp?(a=ip(),en=4):en=a===ry?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,br=a,Se===null&&(Gn=1,Ch(i,Gr(a,i.current)))}function jy(){var i=Et.H;return Et.H=Ah,i===null?Ah:i}function zy(){var i=Et.A;return Et.A=uC,i}function b0(){Gn=4,Ya||(Pe&4194048)!==Pe&&Wr.current!==null||(vl=!0),(qa&134217727)===0&&(Bo&134217727)===0||pn===null||Qa(pn,Pe,Qr,!1)}function I0(i,a,c){var g=tn;tn|=2;var w=jy(),_=zy();(pn!==i||Pe!==a)&&(Mh=null,bl(i,a)),a=!1;var N=Gn;t:do try{if(en!==0&&Se!==null){var B=Se,X=br;switch(en){case 8:S0(),N=6;break t;case 3:case 2:case 9:case 6:Wr.current===null&&(a=!0);var ft=en;if(en=0,br=null,Il(i,B,X,ft),c&&vl){N=0;break t}break;default:ft=en,en=0,br=null,Il(i,B,X,ft)}}fC(),N=Gn;break}catch(wt){Fy(i,wt)}while(!0);return a&&i.shellSuspendCounter++,ta=Do=null,tn=g,Et.H=w,Et.A=_,Se===null&&(pn=null,Pe=0,eh()),N}function fC(){for(;Se!==null;)Hy(Se)}function dC(i,a){var c=tn;tn|=2;var g=jy(),w=zy();pn!==i||Pe!==a?(Mh=null,Nh=Xe()+500,bl(i,a)):vl=Qe(i,a);t:do try{if(en!==0&&Se!==null){a=Se;var _=br;e:switch(en){case 1:en=0,br=null,Il(i,a,_,1);break;case 2:case 9:if(ep(_)){en=0,br=null,Gy(a);break}a=function(){en!==2&&en!==9||pn!==i||(en=7),Is(i)},_.then(a,a);break t;case 3:en=7;break t;case 4:en=5;break t;case 7:ep(_)?(en=0,br=null,Gy(a)):(en=0,br=null,Il(i,a,_,7));break;case 5:var N=null;switch(Se.tag){case 26:N=Se.memoizedState;case 5:case 27:var B=Se;if(!N||C2(N)){en=0,br=null;var X=B.sibling;if(X!==null)Se=X;else{var ft=B.return;ft!==null?(Se=ft,Lh(ft)):Se=null}break e}}en=0,br=null,Il(i,a,_,5);break;case 6:en=0,br=null,Il(i,a,_,6);break;case 8:S0(),Gn=6;break t;default:throw Error(s(462))}}gC();break}catch(wt){Fy(i,wt)}while(!0);return ta=Do=null,Et.H=g,Et.A=w,tn=c,Se!==null?0:(pn=null,Pe=0,eh(),Gn)}function gC(){for(;Se!==null&&!Li();)Hy(Se)}function Hy(i){var a=py(i.alternate,i,la);i.memoizedProps=i.pendingProps,a===null?Lh(i):Se=a}function Gy(i){var a=i,c=a.alternate;switch(a.tag){case 15:case 0:a=cy(c,a,a.pendingProps,a.type,void 0,Pe);break;case 11:a=cy(c,a,a.pendingProps,a.type.render,a.ref,Pe);break;case 5:Hd(a);default:xy(c,a),a=Se=Ym(a,la),a=py(c,a,la)}i.memoizedProps=i.pendingProps,a===null?Lh(i):Se=a}function Il(i,a,c,g){ta=Do=null,Hd(a),El=null,Mu=0;var w=a.return;try{if(iC(i,w,a,c,Pe)){Gn=1,Ch(i,Gr(c,i.current)),Se=null;return}}catch(_){if(w!==null)throw Se=w,_;Gn=1,Ch(i,Gr(c,i.current)),Se=null;return}a.flags&32768?(qe||g===1?i=!0:vl||(Pe&536870912)!==0?i=!1:(Ya=i=!0,(g===2||g===9||g===3||g===6)&&(g=Wr.current,g!==null&&g.tag===13&&(g.flags|=16384))),Yy(a,i)):Lh(a)}function Lh(i){var a=i;do{if((a.flags&32768)!==0){Yy(a,Ya);return}i=a.return;var c=sC(a.alternate,a,la);if(c!==null){Se=c;return}if(a=a.sibling,a!==null){Se=a;return}Se=a=i}while(a!==null);Gn===0&&(Gn=5)}function Yy(i,a){do{var c=aC(i.alternate,i);if(c!==null){c.flags&=32767,Se=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(i=i.sibling,i!==null)){Se=i;return}Se=i=c}while(i!==null);Gn=6,Se=null}function qy(i,a,c,g,w,_,N,B,X){i.cancelPendingCommit=null;do Ph();while(bi!==0);if((tn&6)!==0)throw Error(s(327));if(a!==null){if(a===i.current)throw Error(s(177));if(_=a.lanes|a.childLanes,_|=xd,Sa(i,c,_,N,B,X),i===pn&&(Se=pn=null,Pe=0),Cl=a,Wa=i,Sl=c,v0=_,_0=w,By=g,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,xC(Ht,function(){return Zy(),null})):(i.callbackNode=null,i.callbackPriority=0),g=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||g){g=Et.T,Et.T=null,w=At.p,At.p=2,N=tn,tn|=4;try{oC(i,a,c)}finally{tn=N,At.p=w,Et.T=g}}bi=1,Xy(),Wy(),Qy()}}function Xy(){if(bi===1){bi=0;var i=Wa,a=Cl,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=Et.T,Et.T=null;var g=At.p;At.p=2;var w=tn;tn|=4;try{Ry(a,i);var _=F0,N=C(i.containerInfo),B=_.focusedElem,X=_.selectionRange;if(N!==B&&B&&B.ownerDocument&&v(B.ownerDocument.documentElement,B)){if(X!==null&&R(B)){var ft=X.start,wt=X.end;if(wt===void 0&&(wt=ft),"selectionStart"in B)B.selectionStart=ft,B.selectionEnd=Math.min(wt,B.value.length);else{var Ct=B.ownerDocument||document,dt=Ct&&Ct.defaultView||window;if(dt.getSelection){var yt=dt.getSelection(),ie=B.textContent.length,te=Math.min(X.start,ie),ln=X.end===void 0?te:Math.min(X.end,ie);!yt.extend&&te>ln&&(N=ln,ln=te,te=N);var st=y(B,te),it=y(B,ln);if(st&&it&&(yt.rangeCount!==1||yt.anchorNode!==st.node||yt.anchorOffset!==st.offset||yt.focusNode!==it.node||yt.focusOffset!==it.offset)){var ht=Ct.createRange();ht.setStart(st.node,st.offset),yt.removeAllRanges(),te>ln?(yt.addRange(ht),yt.extend(it.node,it.offset)):(ht.setEnd(it.node,it.offset),yt.addRange(ht))}}}}for(Ct=[],yt=B;yt=yt.parentNode;)yt.nodeType===1&&Ct.push({element:yt,left:yt.scrollLeft,top:yt.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<Ct.length;B++){var Tt=Ct[B];Tt.element.scrollLeft=Tt.left,Tt.element.scrollTop=Tt.top}}Xh=!!U0,F0=U0=null}finally{tn=w,At.p=g,Et.T=c}}i.current=a,bi=2}}function Wy(){if(bi===2){bi=0;var i=Wa,a=Cl,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=Et.T,Et.T=null;var g=At.p;At.p=2;var w=tn;tn|=4;try{Cy(i,a.alternate,a)}finally{tn=w,At.p=g,Et.T=c}}bi=3}}function Qy(){if(bi===4||bi===3){bi=0,ps();var i=Wa,a=Cl,c=Sl,g=By;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?bi=5:(bi=0,Cl=Wa=null,Ky(i,i.pendingLanes));var w=i.pendingLanes;if(w===0&&(Xa=null),On(c),a=a.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(Oe,a,void 0,(a.current.flags&128)===128)}catch{}if(g!==null){a=Et.T,w=At.p,At.p=2,Et.T=null;try{for(var _=i.onRecoverableError,N=0;N<g.length;N++){var B=g[N];_(B.value,{componentStack:B.stack})}}finally{Et.T=a,At.p=w}}(Sl&3)!==0&&Ph(),Is(i),w=i.pendingLanes,(c&4194090)!==0&&(w&42)!==0?i===C0?ju++:(ju=0,C0=i):ju=0,zu(0)}}function Ky(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,wu(a)))}function Ph(i){return Xy(),Wy(),Qy(),Zy()}function Zy(){if(bi!==5)return!1;var i=Wa,a=v0;v0=0;var c=On(Sl),g=Et.T,w=At.p;try{At.p=32>c?32:c,Et.T=null,c=_0,_0=null;var _=Wa,N=Sl;if(bi=0,Cl=Wa=null,Sl=0,(tn&6)!==0)throw Error(s(331));var B=tn;if(tn|=4,Ly(_.current),Ny(_,_.current,N,c),tn=B,zu(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(Oe,_)}catch{}return!0}finally{At.p=w,Et.T=g,Ky(i,a)}}function Jy(i,a,c){a=Gr(c,a),a=i0(i.stateNode,a,2),i=ka(i,a,2),i!==null&&(Ai(i,2),Is(i))}function gn(i,a,c){if(i.tag===3)Jy(i,i,c);else for(;a!==null;){if(a.tag===3){Jy(a,i,c);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Xa===null||!Xa.has(g))){i=Gr(c,i),c=ny(2),g=ka(a,c,2),g!==null&&(iy(c,g,a,i),Ai(g,2),Is(g));break}}a=a.return}}function R0(i,a,c){var g=i.pingCache;if(g===null){g=i.pingCache=new cC;var w=new Set;g.set(a,w)}else w=g.get(a),w===void 0&&(w=new Set,g.set(a,w));w.has(c)||(E0=!0,w.add(c),i=mC.bind(null,i,a,c),a.then(i,i))}function mC(i,a,c){var g=i.pingCache;g!==null&&g.delete(a),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,pn===i&&(Pe&c)===c&&(Gn===4||Gn===3&&(Pe&62914560)===Pe&&300>Xe()-T0?(tn&2)===0&&bl(i,0):A0|=c,_l===Pe&&(_l=0)),Is(i)}function $y(i,a){a===0&&(a=Ca()),i=ul(i,a),i!==null&&(Ai(i,a),Is(i))}function pC(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),$y(i,c)}function yC(i,a){var c=0;switch(i.tag){case 13:var g=i.stateNode,w=i.memoizedState;w!==null&&(c=w.retryLane);break;case 19:g=i.stateNode;break;case 22:g=i.stateNode._retryCache;break;default:throw Error(s(314))}g!==null&&g.delete(a),$y(i,c)}function xC(i,a){return Ae(i,a)}var Bh=null,Rl=null,D0=!1,Vh=!1,N0=!1,Vo=0;function Is(i){i!==Rl&&i.next===null&&(Rl===null?Bh=Rl=i:Rl=Rl.next=i),Vh=!0,D0||(D0=!0,AC())}function zu(i,a){if(!N0&&Vh){N0=!0;do for(var c=!1,g=Bh;g!==null;){if(i!==0){var w=g.pendingLanes;if(w===0)var _=0;else{var N=g.suspendedLanes,B=g.pingedLanes;_=(1<<31-Fe(42|i)+1)-1,_&=w&~(N&~B),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(c=!0,i2(g,_))}else _=Pe,_=Le(g,g===pn?_:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(_&3)===0||Qe(g,_)||(c=!0,i2(g,_));g=g.next}while(c);N0=!1}}function EC(){t2()}function t2(){Vh=D0=!1;var i=0;Vo!==0&&(IC()&&(i=Vo),Vo=0);for(var a=Xe(),c=null,g=Bh;g!==null;){var w=g.next,_=e2(g,a);_===0?(g.next=null,c===null?Bh=w:c.next=w,w===null&&(Rl=c)):(c=g,(i!==0||(_&3)!==0)&&(Vh=!0)),g=w}zu(i)}function e2(i,a){for(var c=i.suspendedLanes,g=i.pingedLanes,w=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var N=31-Fe(_),B=1<<N,X=w[N];X===-1?((B&c)===0||(B&g)!==0)&&(w[N]=is(B,a)):X<=a&&(i.expiredLanes|=B),_&=~B}if(a=pn,c=Pe,c=Le(i,i===a?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g=i.callbackNode,c===0||i===a&&(en===2||en===9)||i.cancelPendingCommit!==null)return g!==null&&g!==null&&nr(g),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Qe(i,c)){if(a=c&-c,a===i.callbackPriority)return a;switch(g!==null&&nr(g),On(c)){case 2:case 8:c=ns;break;case 32:c=Ht;break;case 268435456:c=js;break;default:c=Ht}return g=n2.bind(null,i),c=Ae(c,g),i.callbackPriority=a,i.callbackNode=c,a}return g!==null&&g!==null&&nr(g),i.callbackPriority=2,i.callbackNode=null,2}function n2(i,a){if(bi!==0&&bi!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Ph()&&i.callbackNode!==c)return null;var g=Pe;return g=Le(i,i===pn?g:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g===0?null:(ky(i,g,a),e2(i,Xe()),i.callbackNode!=null&&i.callbackNode===c?n2.bind(null,i):null)}function i2(i,a){if(Ph())return null;ky(i,a,!0)}function AC(){DC(function(){(tn&6)!==0?Ae(we,EC):t2()})}function M0(){return Vo===0&&(Vo=Hs()),Vo}function r2(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Na(""+i)}function s2(i,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,i.id&&c.setAttribute("form",i.id),a.parentNode.insertBefore(c,a),i=new FormData(i),c.parentNode.removeChild(c),i}function wC(i,a,c,g,w){if(a==="submit"&&c&&c.stateNode===w){var _=r2((w[sn]||null).action),N=g.submitter;N&&(a=(a=N[sn]||null)?r2(a.formAction):N.getAttribute("formAction"),a!==null&&(_=a,N=null));var B=new Hr("action","action",null,g,w);i.push({event:B,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Vo!==0){var X=N?s2(w,N):new FormData(w);Jd(c,{pending:!0,data:X,method:w.method,action:_},null,X)}}else typeof _=="function"&&(B.preventDefault(),X=N?s2(w,N):new FormData(w),Jd(c,{pending:!0,data:X,method:w.method,action:_},_,X))},currentTarget:w}]})}}for(var O0=0;O0<vs.length;O0++){var L0=vs[O0],TC=L0.toLowerCase(),vC=L0[0].toUpperCase()+L0.slice(1);vr(TC,"on"+vC)}vr(oe,"onAnimationEnd"),vr(Ci,"onAnimationIteration"),vr(cr,"onAnimationStart"),vr("dblclick","onDoubleClick"),vr("focusin","onFocus"),vr("focusout","onBlur"),vr(Fi,"onTransitionRun"),vr($e,"onTransitionStart"),vr(ui,"onTransitionCancel"),vr(ji,"onTransitionEnd"),xn("onMouseEnter",["mouseout","mouseover"]),xn("onMouseLeave",["mouseout","mouseover"]),xn("onPointerEnter",["pointerout","pointerover"]),xn("onPointerLeave",["pointerout","pointerover"]),Fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_C=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hu));function a2(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var g=i[c],w=g.event;g=g.listeners;t:{var _=void 0;if(a)for(var N=g.length-1;0<=N;N--){var B=g[N],X=B.instance,ft=B.currentTarget;if(B=B.listener,X!==_&&w.isPropagationStopped())break t;_=B,w.currentTarget=ft;try{_(w)}catch(wt){_h(wt)}w.currentTarget=null,_=X}else for(N=0;N<g.length;N++){if(B=g[N],X=B.instance,ft=B.currentTarget,B=B.listener,X!==_&&w.isPropagationStopped())break t;_=B,w.currentTarget=ft;try{_(w)}catch(wt){_h(wt)}w.currentTarget=null,_=X}}}}function be(i,a){var c=a[ei];c===void 0&&(c=a[ei]=new Set);var g=i+"__bubble";c.has(g)||(o2(a,i,2,!1),c.add(g))}function P0(i,a,c){var g=0;a&&(g|=4),o2(c,i,g,a)}var kh="_reactListening"+Math.random().toString(36).slice(2);function B0(i){if(!i[kh]){i[kh]=!0,wo.forEach(function(c){c!=="selectionchange"&&(_C.has(c)||P0(c,!1,i),P0(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[kh]||(a[kh]=!0,P0("selectionchange",!1,a))}}function o2(i,a,c,g){switch(N2(a)){case 2:var w=ZC;break;case 8:w=JC;break;default:w=K0}c=w.bind(null,a,c,i),w=void 0,!Jt||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(w=!0),g?w!==void 0?i.addEventListener(a,c,{capture:!0,passive:w}):i.addEventListener(a,c,!0):w!==void 0?i.addEventListener(a,c,{passive:w}):i.addEventListener(a,c,!1)}function V0(i,a,c,g,w){var _=g;if((a&1)===0&&(a&2)===0&&g!==null)t:for(;;){if(g===null)return;var N=g.tag;if(N===3||N===4){var B=g.stateNode.containerInfo;if(B===w)break;if(N===4)for(N=g.return;N!==null;){var X=N.tag;if((X===3||X===4)&&N.stateNode.containerInfo===w)return;N=N.return}for(;B!==null;){if(N=Cn(B),N===null)return;if(X=N.tag,X===5||X===6||X===26||X===27){g=_=N;continue t}B=B.parentNode}}g=g.return}xr(function(){var ft=_,wt=vi(c),Ct=[];t:{var dt=Ks.get(i);if(dt!==void 0){var yt=Hr,ie=i;switch(i){case"keypress":if(zr(c)===0)break t;case"keydown":case"keyup":yt=ws;break;case"focusin":ie="focus",yt=os;break;case"focusout":ie="blur",yt=os;break;case"beforeblur":case"afterblur":yt=os;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=sr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=ze;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=He;break;case oe:case Ci:case cr:yt=Ma;break;case ji:yt=rl;break;case"scroll":case"scrollend":yt=li;break;case"wheel":yt=or;break;case"copy":case"cut":case"paste":yt=se;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=Ts;break;case"toggle":case"beforetoggle":yt=sl}var te=(a&4)!==0,ln=!te&&(i==="scroll"||i==="scrollend"),st=te?dt!==null?dt+"Capture":null:dt;te=[];for(var it=ft,ht;it!==null;){var Tt=it;if(ht=Tt.stateNode,Tt=Tt.tag,Tt!==5&&Tt!==26&&Tt!==27||ht===null||st===null||(Tt=Wt(it,st),Tt!=null&&te.push(Gu(it,Tt,ht))),ln)break;it=it.return}0<te.length&&(dt=new yt(dt,ie,null,c,wt),Ct.push({event:dt,listeners:te}))}}if((a&7)===0){t:{if(dt=i==="mouseover"||i==="pointerover",yt=i==="mouseout"||i==="pointerout",dt&&c!==pr&&(ie=c.relatedTarget||c.fromElement)&&(Cn(ie)||ie[Pi]))break t;if((yt||dt)&&(dt=wt.window===wt?wt:(dt=wt.ownerDocument)?dt.defaultView||dt.parentWindow:window,yt?(ie=c.relatedTarget||c.toElement,yt=ft,ie=ie?Cn(ie):null,ie!==null&&(ln=h(ie),te=ie.tag,ie!==ln||te!==5&&te!==27&&te!==6)&&(ie=null)):(yt=null,ie=ft),yt!==ie)){if(te=sr,Tt="onMouseLeave",st="onMouseEnter",it="mouse",(i==="pointerout"||i==="pointerover")&&(te=Ts,Tt="onPointerLeave",st="onPointerEnter",it="pointer"),ln=yt==null?dt:Zi(yt),ht=ie==null?dt:Zi(ie),dt=new te(Tt,it+"leave",yt,c,wt),dt.target=ln,dt.relatedTarget=ht,Tt=null,Cn(wt)===ft&&(te=new te(st,it+"enter",ie,c,wt),te.target=ht,te.relatedTarget=ln,Tt=te),ln=Tt,yt&&ie)e:{for(te=yt,st=ie,it=0,ht=te;ht;ht=Dl(ht))it++;for(ht=0,Tt=st;Tt;Tt=Dl(Tt))ht++;for(;0<it-ht;)te=Dl(te),it--;for(;0<ht-it;)st=Dl(st),ht--;for(;it--;){if(te===st||st!==null&&te===st.alternate)break e;te=Dl(te),st=Dl(st)}te=null}else te=null;yt!==null&&l2(Ct,dt,yt,te,!1),ie!==null&&ln!==null&&l2(Ct,ln,ie,te,!0)}}t:{if(dt=ft?Zi(ft):window,yt=dt.nodeName&&dt.nodeName.toLowerCase(),yt==="select"||yt==="input"&&dt.type==="file")var qt=$c;else if(Dn(dt))if(mu)qt=o;else{qt=M;var Ce=ol}else yt=dt.nodeName,!yt||yt.toLowerCase()!=="input"||dt.type!=="checkbox"&&dt.type!=="radio"?ft&&Xt(ft.elementType)&&(qt=$c):qt=r;if(qt&&(qt=qt(i,ft))){zn(Ct,qt,c,wt);break t}Ce&&Ce(i,dt,ft),i==="focusout"&&ft&&dt.type==="number"&&ft.memoizedProps.value!=null&&at(dt,"number",dt.value)}switch(Ce=ft?Zi(ft):window,i){case"focusin":(Dn(Ce)||Ce.contentEditable==="true")&&(P=Ce,H=ft,Z=null);break;case"focusout":Z=H=P=null;break;case"mousedown":et=!0;break;case"contextmenu":case"mouseup":case"dragend":et=!1,ut(Ct,c,wt);break;case"selectionchange":if(O)break;case"keydown":case"keyup":ut(Ct,c,wt)}var Qt;if(lr)t:{switch(i){case"compositionstart":var ee="onCompositionStart";break t;case"compositionend":ee="onCompositionEnd";break t;case"compositionupdate":ee="onCompositionUpdate";break t}ee=void 0}else Ie?xt(i,c)&&(ee="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(ee="onCompositionStart");ee&&(D&&c.locale!=="ko"&&(Ie||ee!=="onCompositionStart"?ee==="onCompositionEnd"&&Ie&&(Qt=Ar()):(Ur=wt,Fr="value"in Ur?Ur.value:Ur.textContent,Ie=!0)),Ce=Uh(ft,ee),0<Ce.length&&(ee=new Es(ee,i,null,c,wt),Ct.push({event:ee,listeners:Ce}),Qt?ee.data=Qt:(Qt=kt(c),Qt!==null&&(ee.data=Qt)))),(Qt=b?Tn(i,c):Re(i,c))&&(ee=Uh(ft,"onBeforeInput"),0<ee.length&&(Ce=new Es("onBeforeInput","beforeinput",null,c,wt),Ct.push({event:Ce,listeners:ee}),Ce.data=Qt)),wC(Ct,i,ft,c,wt)}a2(Ct,a)})}function Gu(i,a,c){return{instance:i,listener:a,currentTarget:c}}function Uh(i,a){for(var c=a+"Capture",g=[];i!==null;){var w=i,_=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||_===null||(w=Wt(i,c),w!=null&&g.unshift(Gu(i,w,_)),w=Wt(i,a),w!=null&&g.push(Gu(i,w,_))),i.tag===3)return g;i=i.return}return[]}function Dl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function l2(i,a,c,g,w){for(var _=a._reactName,N=[];c!==null&&c!==g;){var B=c,X=B.alternate,ft=B.stateNode;if(B=B.tag,X!==null&&X===g)break;B!==5&&B!==26&&B!==27||ft===null||(X=ft,w?(ft=Wt(c,_),ft!=null&&N.unshift(Gu(c,ft,X))):w||(ft=Wt(c,_),ft!=null&&N.push(Gu(c,ft,X)))),c=c.return}N.length!==0&&i.push({event:a,listeners:N})}var CC=/\r\n?/g,SC=/\u0000|\uFFFD/g;function u2(i){return(typeof i=="string"?i:""+i).replace(CC,`
`).replace(SC,"")}function c2(i,a){return a=u2(a),u2(i)===a}function Fh(){}function on(i,a,c,g,w,_){switch(c){case"children":typeof g=="string"?a==="body"||a==="textarea"&&g===""||An(i,g):(typeof g=="number"||typeof g=="bigint")&&a!=="body"&&An(i,""+g);break;case"className":Vr(i,"class",g);break;case"tabIndex":Vr(i,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Vr(i,c,g);break;case"style":mi(i,g,_);break;case"data":if(a!=="object"){Vr(i,"data",g);break}case"src":case"href":if(g===""&&(a!=="a"||c!=="href")){i.removeAttribute(c);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(c);break}g=Na(""+g),i.setAttribute(c,g);break;case"action":case"formAction":if(typeof g=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(c==="formAction"?(a!=="input"&&on(i,a,"name",w.name,w,null),on(i,a,"formEncType",w.formEncType,w,null),on(i,a,"formMethod",w.formMethod,w,null),on(i,a,"formTarget",w.formTarget,w,null)):(on(i,a,"encType",w.encType,w,null),on(i,a,"method",w.method,w,null),on(i,a,"target",w.target,w,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(c);break}g=Na(""+g),i.setAttribute(c,g);break;case"onClick":g!=null&&(i.onclick=Fh);break;case"onScroll":g!=null&&be("scroll",i);break;case"onScrollEnd":g!=null&&be("scrollend",i);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(c=g.__html,c!=null){if(w.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":i.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){i.removeAttribute("xlink:href");break}c=Na(""+g),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(c,""+g):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":g===!0?i.setAttribute(c,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(c,g):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?i.setAttribute(c,g):i.removeAttribute(c);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?i.removeAttribute(c):i.setAttribute(c,g);break;case"popover":be("beforetoggle",i),be("toggle",i),vt(i,"popover",g);break;case"xlinkActuate":pe(i,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":pe(i,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":pe(i,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":pe(i,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":pe(i,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":pe(i,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":pe(i,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":pe(i,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":pe(i,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":vt(i,"is",g);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=hn.get(c)||c,vt(i,c,g))}}function k0(i,a,c,g,w,_){switch(c){case"style":mi(i,g,_);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(c=g.__html,c!=null){if(w.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof g=="string"?An(i,g):(typeof g=="number"||typeof g=="bigint")&&An(i,""+g);break;case"onScroll":g!=null&&be("scroll",i);break;case"onScrollEnd":g!=null&&be("scrollend",i);break;case"onClick":g!=null&&(i.onclick=Fh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ba.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(w=c.endsWith("Capture"),a=c.slice(2,w?c.length-7:void 0),_=i[sn]||null,_=_!=null?_[c]:null,typeof _=="function"&&i.removeEventListener(a,_,w),typeof g=="function")){typeof _!="function"&&_!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(a,g,w);break t}c in i?i[c]=g:g===!0?i.setAttribute(c,""):vt(i,c,g)}}}function Ii(i,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",i),be("load",i);var g=!1,w=!1,_;for(_ in c)if(c.hasOwnProperty(_)){var N=c[_];if(N!=null)switch(_){case"src":g=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:on(i,a,_,N,c,null)}}w&&on(i,a,"srcSet",c.srcSet,c,null),g&&on(i,a,"src",c.src,c,null);return;case"input":be("invalid",i);var B=_=N=w=null,X=null,ft=null;for(g in c)if(c.hasOwnProperty(g)){var wt=c[g];if(wt!=null)switch(g){case"name":w=wt;break;case"type":N=wt;break;case"checked":X=wt;break;case"defaultChecked":ft=wt;break;case"value":_=wt;break;case"defaultValue":B=wt;break;case"children":case"dangerouslySetInnerHTML":if(wt!=null)throw Error(s(137,a));break;default:on(i,a,g,wt,c,null)}}Sn(i,_,B,X,ft,N,w,!1),Ra(i);return;case"select":be("invalid",i),g=N=_=null;for(w in c)if(c.hasOwnProperty(w)&&(B=c[w],B!=null))switch(w){case"value":_=B;break;case"defaultValue":N=B;break;case"multiple":g=B;default:on(i,a,w,B,c,null)}a=_,c=N,i.multiple=!!g,a!=null?j(i,!!g,a,!1):c!=null&&j(i,!!g,c,!0);return;case"textarea":be("invalid",i),_=w=g=null;for(N in c)if(c.hasOwnProperty(N)&&(B=c[N],B!=null))switch(N){case"value":g=B;break;case"defaultValue":w=B;break;case"children":_=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(91));break;default:on(i,a,N,B,c,null)}mn(i,g,w,_),Ra(i);return;case"option":for(X in c)if(c.hasOwnProperty(X)&&(g=c[X],g!=null))switch(X){case"selected":i.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:on(i,a,X,g,c,null)}return;case"dialog":be("beforetoggle",i),be("toggle",i),be("cancel",i),be("close",i);break;case"iframe":case"object":be("load",i);break;case"video":case"audio":for(g=0;g<Hu.length;g++)be(Hu[g],i);break;case"image":be("error",i),be("load",i);break;case"details":be("toggle",i);break;case"embed":case"source":case"link":be("error",i),be("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ft in c)if(c.hasOwnProperty(ft)&&(g=c[ft],g!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:on(i,a,ft,g,c,null)}return;default:if(Xt(a)){for(wt in c)c.hasOwnProperty(wt)&&(g=c[wt],g!==void 0&&k0(i,a,wt,g,c,void 0));return}}for(B in c)c.hasOwnProperty(B)&&(g=c[B],g!=null&&on(i,a,B,g,c,null))}function bC(i,a,c,g){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,_=null,N=null,B=null,X=null,ft=null,wt=null;for(yt in c){var Ct=c[yt];if(c.hasOwnProperty(yt)&&Ct!=null)switch(yt){case"checked":break;case"value":break;case"defaultValue":X=Ct;default:g.hasOwnProperty(yt)||on(i,a,yt,null,g,Ct)}}for(var dt in g){var yt=g[dt];if(Ct=c[dt],g.hasOwnProperty(dt)&&(yt!=null||Ct!=null))switch(dt){case"type":_=yt;break;case"name":w=yt;break;case"checked":ft=yt;break;case"defaultChecked":wt=yt;break;case"value":N=yt;break;case"defaultValue":B=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(s(137,a));break;default:yt!==Ct&&on(i,a,dt,yt,g,Ct)}}xe(i,N,B,X,ft,wt,_,w);return;case"select":yt=N=B=dt=null;for(_ in c)if(X=c[_],c.hasOwnProperty(_)&&X!=null)switch(_){case"value":break;case"multiple":yt=X;default:g.hasOwnProperty(_)||on(i,a,_,null,g,X)}for(w in g)if(_=g[w],X=c[w],g.hasOwnProperty(w)&&(_!=null||X!=null))switch(w){case"value":dt=_;break;case"defaultValue":B=_;break;case"multiple":N=_;default:_!==X&&on(i,a,w,_,g,X)}a=B,c=N,g=yt,dt!=null?j(i,!!c,dt,!1):!!g!=!!c&&(a!=null?j(i,!!c,a,!0):j(i,!!c,c?[]:"",!1));return;case"textarea":yt=dt=null;for(B in c)if(w=c[B],c.hasOwnProperty(B)&&w!=null&&!g.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:on(i,a,B,null,g,w)}for(N in g)if(w=g[N],_=c[N],g.hasOwnProperty(N)&&(w!=null||_!=null))switch(N){case"value":dt=w;break;case"defaultValue":yt=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:w!==_&&on(i,a,N,w,g,_)}Ut(i,dt,yt);return;case"option":for(var ie in c)if(dt=c[ie],c.hasOwnProperty(ie)&&dt!=null&&!g.hasOwnProperty(ie))switch(ie){case"selected":i.selected=!1;break;default:on(i,a,ie,null,g,dt)}for(X in g)if(dt=g[X],yt=c[X],g.hasOwnProperty(X)&&dt!==yt&&(dt!=null||yt!=null))switch(X){case"selected":i.selected=dt&&typeof dt!="function"&&typeof dt!="symbol";break;default:on(i,a,X,dt,g,yt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var te in c)dt=c[te],c.hasOwnProperty(te)&&dt!=null&&!g.hasOwnProperty(te)&&on(i,a,te,null,g,dt);for(ft in g)if(dt=g[ft],yt=c[ft],g.hasOwnProperty(ft)&&dt!==yt&&(dt!=null||yt!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(s(137,a));break;default:on(i,a,ft,dt,g,yt)}return;default:if(Xt(a)){for(var ln in c)dt=c[ln],c.hasOwnProperty(ln)&&dt!==void 0&&!g.hasOwnProperty(ln)&&k0(i,a,ln,void 0,g,dt);for(wt in g)dt=g[wt],yt=c[wt],!g.hasOwnProperty(wt)||dt===yt||dt===void 0&&yt===void 0||k0(i,a,wt,dt,g,yt);return}}for(var st in c)dt=c[st],c.hasOwnProperty(st)&&dt!=null&&!g.hasOwnProperty(st)&&on(i,a,st,null,g,dt);for(Ct in g)dt=g[Ct],yt=c[Ct],!g.hasOwnProperty(Ct)||dt===yt||dt==null&&yt==null||on(i,a,Ct,dt,g,yt)}var U0=null,F0=null;function jh(i){return i.nodeType===9?i:i.ownerDocument}function h2(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function f2(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function j0(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var z0=null;function IC(){var i=window.event;return i&&i.type==="popstate"?i===z0?!1:(z0=i,!0):(z0=null,!1)}var d2=typeof setTimeout=="function"?setTimeout:void 0,RC=typeof clearTimeout=="function"?clearTimeout:void 0,g2=typeof Promise=="function"?Promise:void 0,DC=typeof queueMicrotask=="function"?queueMicrotask:typeof g2<"u"?function(i){return g2.resolve(null).then(i).catch(NC)}:d2;function NC(i){setTimeout(function(){throw i})}function Ka(i){return i==="head"}function m2(i,a){var c=a,g=0,w=0;do{var _=c.nextSibling;if(i.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"){if(0<g&&8>g){c=g;var N=i.ownerDocument;if(c&1&&Yu(N.documentElement),c&2&&Yu(N.body),c&4)for(c=N.head,Yu(c),N=c.firstChild;N;){var B=N.nextSibling,X=N.nodeName;N[ir]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&N.rel.toLowerCase()==="stylesheet"||c.removeChild(N),N=B}}if(w===0){i.removeChild(_),$u(a);return}w--}else c==="$"||c==="$?"||c==="$!"?w++:g=c.charCodeAt(0)-48;else g=0;c=_}while(c);$u(a)}function H0(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":H0(c),Br(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function MC(i,a,c,g){for(;i.nodeType===1;){var w=c;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!g&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(g){if(!i[ir])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==w.rel||i.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||i.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||i.getAttribute("title")!==(w.title==null?null:w.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(w.src==null?null:w.src)||i.getAttribute("type")!==(w.type==null?null:w.type)||i.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var _=w.name==null?null:""+w.name;if(w.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=cs(i.nextSibling),i===null)break}return null}function OC(i,a,c){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=cs(i.nextSibling),i===null))return null;return i}function G0(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function LC(i,a){var c=i.ownerDocument;if(i.data!=="$?"||c.readyState==="complete")a();else{var g=function(){a(),c.removeEventListener("DOMContentLoaded",g)};c.addEventListener("DOMContentLoaded",g),i._reactRetry=g}}function cs(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var Y0=null;function p2(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}function y2(i,a,c){switch(a=jh(c),i){case"html":if(i=a.documentElement,!i)throw Error(s(452));return i;case"head":if(i=a.head,!i)throw Error(s(453));return i;case"body":if(i=a.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Yu(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Br(i)}var Kr=new Map,x2=new Set;function zh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ua=At.d;At.d={f:PC,r:BC,D:VC,C:kC,L:UC,m:FC,X:zC,S:jC,M:HC};function PC(){var i=ua.f(),a=Oh();return i||a}function BC(i){var a=Ti(i);a!==null&&a.tag===5&&a.type==="form"?kp(a):ua.r(i)}var Nl=typeof document>"u"?null:document;function E2(i,a,c){var g=Nl;if(g&&typeof a=="string"&&a){var w=cn(a);w='link[rel="'+i+'"][href="'+w+'"]',typeof c=="string"&&(w+='[crossorigin="'+c+'"]'),x2.has(w)||(x2.add(w),i={rel:i,crossOrigin:c,href:a},g.querySelector(w)===null&&(a=g.createElement("link"),Ii(a,"link",i),je(a),g.head.appendChild(a)))}}function VC(i){ua.D(i),E2("dns-prefetch",i,null)}function kC(i,a){ua.C(i,a),E2("preconnect",i,a)}function UC(i,a,c){ua.L(i,a,c);var g=Nl;if(g&&i&&a){var w='link[rel="preload"][as="'+cn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(w+='[imagesrcset="'+cn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(w+='[imagesizes="'+cn(c.imageSizes)+'"]')):w+='[href="'+cn(i)+'"]';var _=w;switch(a){case"style":_=Ml(i);break;case"script":_=Ol(i)}Kr.has(_)||(i=S({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:i,as:a},c),Kr.set(_,i),g.querySelector(w)!==null||a==="style"&&g.querySelector(qu(_))||a==="script"&&g.querySelector(Xu(_))||(a=g.createElement("link"),Ii(a,"link",i),je(a),g.head.appendChild(a)))}}function FC(i,a){ua.m(i,a);var c=Nl;if(c&&i){var g=a&&typeof a.as=="string"?a.as:"script",w='link[rel="modulepreload"][as="'+cn(g)+'"][href="'+cn(i)+'"]',_=w;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ol(i)}if(!Kr.has(_)&&(i=S({rel:"modulepreload",href:i},a),Kr.set(_,i),c.querySelector(w)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Xu(_)))return}g=c.createElement("link"),Ii(g,"link",i),je(g),c.head.appendChild(g)}}}function jC(i,a,c){ua.S(i,a,c);var g=Nl;if(g&&i){var w=ni(g).hoistableStyles,_=Ml(i);a=a||"default";var N=w.get(_);if(!N){var B={loading:0,preload:null};if(N=g.querySelector(qu(_)))B.loading=5;else{i=S({rel:"stylesheet",href:i,"data-precedence":a},c),(c=Kr.get(_))&&q0(i,c);var X=N=g.createElement("link");je(X),Ii(X,"link",i),X._p=new Promise(function(ft,wt){X.onload=ft,X.onerror=wt}),X.addEventListener("load",function(){B.loading|=1}),X.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Hh(N,a,g)}N={type:"stylesheet",instance:N,count:1,state:B},w.set(_,N)}}}function zC(i,a){ua.X(i,a);var c=Nl;if(c&&i){var g=ni(c).hoistableScripts,w=Ol(i),_=g.get(w);_||(_=c.querySelector(Xu(w)),_||(i=S({src:i,async:!0},a),(a=Kr.get(w))&&X0(i,a),_=c.createElement("script"),je(_),Ii(_,"link",i),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(w,_))}}function HC(i,a){ua.M(i,a);var c=Nl;if(c&&i){var g=ni(c).hoistableScripts,w=Ol(i),_=g.get(w);_||(_=c.querySelector(Xu(w)),_||(i=S({src:i,async:!0,type:"module"},a),(a=Kr.get(w))&&X0(i,a),_=c.createElement("script"),je(_),Ii(_,"link",i),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(w,_))}}function A2(i,a,c,g){var w=(w=Mt.current)?zh(w):null;if(!w)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Ml(c.href),c=ni(w).hoistableStyles,g=c.get(a),g||(g={type:"style",instance:null,count:0,state:null},c.set(a,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Ml(c.href);var _=ni(w).hoistableStyles,N=_.get(i);if(N||(w=w.ownerDocument||w,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,N),(_=w.querySelector(qu(i)))&&!_._p&&(N.instance=_,N.state.loading=5),Kr.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Kr.set(i,c),_||GC(w,i,c,N.state))),a&&g===null)throw Error(s(528,""));return N}if(a&&g!==null)throw Error(s(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ol(c),c=ni(w).hoistableScripts,g=c.get(a),g||(g={type:"script",instance:null,count:0,state:null},c.set(a,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Ml(i){return'href="'+cn(i)+'"'}function qu(i){return'link[rel="stylesheet"]['+i+"]"}function w2(i){return S({},i,{"data-precedence":i.precedence,precedence:null})}function GC(i,a,c,g){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?g.loading=1:(a=i.createElement("link"),g.preload=a,a.addEventListener("load",function(){return g.loading|=1}),a.addEventListener("error",function(){return g.loading|=2}),Ii(a,"link",c),je(a),i.head.appendChild(a))}function Ol(i){return'[src="'+cn(i)+'"]'}function Xu(i){return"script[async]"+i}function T2(i,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var g=i.querySelector('style[data-href~="'+cn(c.href)+'"]');if(g)return a.instance=g,je(g),g;var w=S({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return g=(i.ownerDocument||i).createElement("style"),je(g),Ii(g,"style",w),Hh(g,c.precedence,i),a.instance=g;case"stylesheet":w=Ml(c.href);var _=i.querySelector(qu(w));if(_)return a.state.loading|=4,a.instance=_,je(_),_;g=w2(c),(w=Kr.get(w))&&q0(g,w),_=(i.ownerDocument||i).createElement("link"),je(_);var N=_;return N._p=new Promise(function(B,X){N.onload=B,N.onerror=X}),Ii(_,"link",g),a.state.loading|=4,Hh(_,c.precedence,i),a.instance=_;case"script":return _=Ol(c.src),(w=i.querySelector(Xu(_)))?(a.instance=w,je(w),w):(g=c,(w=Kr.get(_))&&(g=S({},c),X0(g,w)),i=i.ownerDocument||i,w=i.createElement("script"),je(w),Ii(w,"link",g),i.head.appendChild(w),a.instance=w);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(g=a.instance,a.state.loading|=4,Hh(g,c.precedence,i));return a.instance}function Hh(i,a,c){for(var g=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=g.length?g[g.length-1]:null,_=w,N=0;N<g.length;N++){var B=g[N];if(B.dataset.precedence===a)_=B;else if(_!==w)break}_?_.parentNode.insertBefore(i,_.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(i,a.firstChild))}function q0(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function X0(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Gh=null;function v2(i,a,c){if(Gh===null){var g=new Map,w=Gh=new Map;w.set(c,g)}else w=Gh,g=w.get(c),g||(g=new Map,w.set(c,g));if(g.has(i))return g;for(g.set(i,null),c=c.getElementsByTagName(i),w=0;w<c.length;w++){var _=c[w];if(!(_[ir]||_[Xn]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var N=_.getAttribute(a)||"";N=i+N;var B=g.get(N);B?B.push(_):g.set(N,[_])}}return g}function _2(i,a,c){i=i.ownerDocument||i,i.head.insertBefore(c,a==="title"?i.querySelector("head > title"):null)}function YC(i,a,c){if(c===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function C2(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Wu=null;function qC(){}function XC(i,a,c){if(Wu===null)throw Error(s(475));var g=Wu;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var w=Ml(c.href),_=i.querySelector(qu(w));if(_){i=_._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(g.count++,g=Yh.bind(g),i.then(g,g)),a.state.loading|=4,a.instance=_,je(_);return}_=i.ownerDocument||i,c=w2(c),(w=Kr.get(w))&&q0(c,w),_=_.createElement("link"),je(_);var N=_;N._p=new Promise(function(B,X){N.onload=B,N.onerror=X}),Ii(_,"link",c),a.instance=_}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(g.count++,a=Yh.bind(g),i.addEventListener("load",a),i.addEventListener("error",a))}}function WC(){if(Wu===null)throw Error(s(475));var i=Wu;return i.stylesheets&&i.count===0&&W0(i,i.stylesheets),0<i.count?function(a){var c=setTimeout(function(){if(i.stylesheets&&W0(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c)}}:null}function Yh(){if(this.count--,this.count===0){if(this.stylesheets)W0(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var qh=null;function W0(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,qh=new Map,a.forEach(QC,i),qh=null,Yh.call(i))}function QC(i,a){if(!(a.state.loading&4)){var c=qh.get(i);if(c)var g=c.get(null);else{c=new Map,qh.set(i,c);for(var w=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<w.length;_++){var N=w[_];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(c.set(N.dataset.precedence,N),g=N)}g&&c.set(null,g)}w=a.instance,N=w.getAttribute("data-precedence"),_=c.get(N)||g,_===g&&c.set(null,w),c.set(N,w),this.count++,g=Yh.bind(this),w.addEventListener("load",g),w.addEventListener("error",g),_?_.parentNode.insertBefore(w,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(w,i.firstChild)),a.state.loading|=4}}var Qu={$$typeof:nt,Provider:null,Consumer:null,_currentValue:jt,_currentValue2:jt,_threadCount:0};function KC(i,a,c,g,w,_,N,B){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ge(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.hiddenUpdates=ge(null),this.identifierPrefix=g,this.onUncaughtError=w,this.onCaughtError=_,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function S2(i,a,c,g,w,_,N,B,X,ft,wt,Ct){return i=new KC(i,a,c,N,B,X,ft,Ct),a=1,_===!0&&(a|=24),_=_r(3,null,null,a),i.current=_,_.stateNode=i,a=Rd(),a.refCount++,i.pooledCache=a,a.refCount++,_.memoizedState={element:g,isDehydrated:c,cache:a},Od(_),i}function b2(i){return i?(i=cl,i):cl}function I2(i,a,c,g,w,_){w=b2(w),g.context===null?g.context=w:g.pendingContext=w,g=Va(a),g.payload={element:c},_=_===void 0?null:_,_!==null&&(g.callback=_),c=ka(i,g,a),c!==null&&(Rr(c,i,a),Cu(c,i,a))}function R2(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function Q0(i,a){R2(i,a),(i=i.alternate)&&R2(i,a)}function D2(i){if(i.tag===13){var a=ul(i,67108864);a!==null&&Rr(a,i,67108864),Q0(i,67108864)}}var Xh=!0;function ZC(i,a,c,g){var w=Et.T;Et.T=null;var _=At.p;try{At.p=2,K0(i,a,c,g)}finally{At.p=_,Et.T=w}}function JC(i,a,c,g){var w=Et.T;Et.T=null;var _=At.p;try{At.p=8,K0(i,a,c,g)}finally{At.p=_,Et.T=w}}function K0(i,a,c,g){if(Xh){var w=Z0(g);if(w===null)V0(i,a,g,Wh,c),M2(i,g);else if(tS(w,i,a,c,g))g.stopPropagation();else if(M2(i,g),a&4&&-1<$C.indexOf(i)){for(;w!==null;){var _=Ti(w);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var N=Ye(_.pendingLanes);if(N!==0){var B=_;for(B.pendingLanes|=2,B.entangledLanes|=2;N;){var X=1<<31-Fe(N);B.entanglements[1]|=X,N&=~X}Is(_),(tn&6)===0&&(Nh=Xe()+500,zu(0))}}break;case 13:B=ul(_,2),B!==null&&Rr(B,_,2),Oh(),Q0(_,2)}if(_=Z0(g),_===null&&V0(i,a,g,Wh,c),_===w)break;w=_}w!==null&&g.stopPropagation()}else V0(i,a,g,null,c)}}function Z0(i){return i=vi(i),J0(i)}var Wh=null;function J0(i){if(Wh=null,i=Cn(i),i!==null){var a=h(i);if(a===null)i=null;else{var c=a.tag;if(c===13){if(i=p(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Wh=i,null}function N2(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(We()){case we:return 2;case ns:return 8;case Ht:case Ta:return 32;case js:return 268435456;default:return 32}default:return 32}}var $0=!1,Za=null,Ja=null,$a=null,Ku=new Map,Zu=new Map,to=[],$C="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M2(i,a){switch(i){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":$a=null;break;case"pointerover":case"pointerout":Ku.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zu.delete(a.pointerId)}}function Ju(i,a,c,g,w,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:c,eventSystemFlags:g,nativeEvent:_,targetContainers:[w]},a!==null&&(a=Ti(a),a!==null&&D2(a)),i):(i.eventSystemFlags|=g,a=i.targetContainers,w!==null&&a.indexOf(w)===-1&&a.push(w),i)}function tS(i,a,c,g,w){switch(a){case"focusin":return Za=Ju(Za,i,a,c,g,w),!0;case"dragenter":return Ja=Ju(Ja,i,a,c,g,w),!0;case"mouseover":return $a=Ju($a,i,a,c,g,w),!0;case"pointerover":var _=w.pointerId;return Ku.set(_,Ju(Ku.get(_)||null,i,a,c,g,w)),!0;case"gotpointercapture":return _=w.pointerId,Zu.set(_,Ju(Zu.get(_)||null,i,a,c,g,w)),!0}return!1}function O2(i){var a=Cn(i.target);if(a!==null){var c=h(a);if(c!==null){if(a=c.tag,a===13){if(a=p(c),a!==null){i.blockedOn=a,Gs(i.priority,function(){if(c.tag===13){var g=Ir();g=Pr(g);var w=ul(c,g);w!==null&&Rr(w,c,g),Q0(c,g)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Qh(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Z0(i.nativeEvent);if(c===null){c=i.nativeEvent;var g=new c.constructor(c.type,c);pr=g,c.target.dispatchEvent(g),pr=null}else return a=Ti(c),a!==null&&D2(a),i.blockedOn=c,!1;a.shift()}return!0}function L2(i,a,c){Qh(i)&&c.delete(a)}function eS(){$0=!1,Za!==null&&Qh(Za)&&(Za=null),Ja!==null&&Qh(Ja)&&(Ja=null),$a!==null&&Qh($a)&&($a=null),Ku.forEach(L2),Zu.forEach(L2)}function Kh(i,a){i.blockedOn===a&&(i.blockedOn=null,$0||($0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eS)))}var Zh=null;function P2(i){Zh!==i&&(Zh=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Zh===i&&(Zh=null);for(var a=0;a<i.length;a+=3){var c=i[a],g=i[a+1],w=i[a+2];if(typeof g!="function"){if(J0(g||c)===null)continue;break}var _=Ti(c);_!==null&&(i.splice(a,3),a-=3,Jd(_,{pending:!0,data:w,method:c.method,action:g},g,w))}}))}function $u(i){function a(X){return Kh(X,i)}Za!==null&&Kh(Za,i),Ja!==null&&Kh(Ja,i),$a!==null&&Kh($a,i),Ku.forEach(a),Zu.forEach(a);for(var c=0;c<to.length;c++){var g=to[c];g.blockedOn===i&&(g.blockedOn=null)}for(;0<to.length&&(c=to[0],c.blockedOn===null);)O2(c),c.blockedOn===null&&to.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(g=0;g<c.length;g+=3){var w=c[g],_=c[g+1],N=w[sn]||null;if(typeof _=="function")N||P2(c);else if(N){var B=null;if(_&&_.hasAttribute("formAction")){if(w=_,N=_[sn]||null)B=N.formAction;else if(J0(w)!==null)continue}else B=N.action;typeof B=="function"?c[g+1]=B:(c.splice(g,3),g-=3),P2(c)}}}function t1(i){this._internalRoot=i}Jh.prototype.render=t1.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(s(409));var c=a.current,g=Ir();I2(c,g,i,a,null,null)},Jh.prototype.unmount=t1.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;I2(i.current,2,null,i,null,null),Oh(),a[Pi]=null}};function Jh(i){this._internalRoot=i}Jh.prototype.unstable_scheduleHydration=function(i){if(i){var a=Ki();i={blockedOn:null,target:i,priority:a};for(var c=0;c<to.length&&a!==0&&a<to[c].priority;c++);to.splice(c,0,i),c===0&&O2(i)}};var B2=t.version;if(B2!=="19.1.0")throw Error(s(527,B2,"19.1.0"));At.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=T(a),i=i!==null?E(i):null,i=i===null?null:i.stateNode,i};var nS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Et,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{Oe=$h.inject(nS),Ue=$h}catch{}}return nc.createRoot=function(i,a){if(!l(i))throw Error(s(299));var c=!1,g="",w=Jp,_=$p,N=ty,B=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(w=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(N=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(B=a.unstable_transitionCallbacks)),a=S2(i,1,!1,null,null,c,g,w,_,N,B,null),i[Pi]=a.current,B0(i),new t1(a)},nc.hydrateRoot=function(i,a,c){if(!l(i))throw Error(s(299));var g=!1,w="",_=Jp,N=$p,B=ty,X=null,ft=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(N=c.onCaughtError),c.onRecoverableError!==void 0&&(B=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(X=c.unstable_transitionCallbacks),c.formState!==void 0&&(ft=c.formState)),a=S2(i,1,!0,a,c??null,g,w,_,N,B,X,ft),a.context=b2(null),c=a.current,g=Ir(),g=Pr(g),w=Va(g),w.callback=null,ka(c,w,g),c=g,a.current.lanes=c,Ai(a,c),Is(a),i[Pi]=a.current,B0(i),new Jh(a)},nc.version="19.1.0",nc}var q2;function mS(){if(q2)return i1.exports;q2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),i1.exports=gS(),i1.exports}var pS=mS(),ic={},X2;function yS(){if(X2)return ic;X2=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.parse=p,ic.serialize=E;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,h=(()=>{const L=function(){};return L.prototype=Object.create(null),L})();function p(L,k){const G=new h,W=L.length;if(W<2)return G;const Y=(k==null?void 0:k.decode)||S;let Q=0;do{const rt=L.indexOf("=",Q);if(rt===-1)break;const nt=L.indexOf(";",Q),_t=nt===-1?W:nt;if(rt>_t){Q=L.lastIndexOf(";",rt-1)+1;continue}const St=A(L,Q,rt),Lt=T(L,rt,St),z=L.slice(St,Lt);if(G[z]===void 0){let F=A(L,rt+1,_t),V=T(L,_t,F);const J=Y(L.slice(F,V));G[z]=J}Q=_t+1}while(Q<W);return G}function A(L,k,G){do{const W=L.charCodeAt(k);if(W!==32&&W!==9)return k}while(++k<G);return G}function T(L,k,G){for(;k>G;){const W=L.charCodeAt(--k);if(W!==32&&W!==9)return k+1}return G}function E(L,k,G){const W=(G==null?void 0:G.encode)||encodeURIComponent;if(!e.test(L))throw new TypeError(`argument name is invalid: ${L}`);const Y=W(k);if(!t.test(Y))throw new TypeError(`argument val is invalid: ${k}`);let Q=L+"="+Y;if(!G)return Q;if(G.maxAge!==void 0){if(!Number.isInteger(G.maxAge))throw new TypeError(`option maxAge is invalid: ${G.maxAge}`);Q+="; Max-Age="+G.maxAge}if(G.domain){if(!n.test(G.domain))throw new TypeError(`option domain is invalid: ${G.domain}`);Q+="; Domain="+G.domain}if(G.path){if(!s.test(G.path))throw new TypeError(`option path is invalid: ${G.path}`);Q+="; Path="+G.path}if(G.expires){if(!I(G.expires)||!Number.isFinite(G.expires.valueOf()))throw new TypeError(`option expires is invalid: ${G.expires}`);Q+="; Expires="+G.expires.toUTCString()}if(G.httpOnly&&(Q+="; HttpOnly"),G.secure&&(Q+="; Secure"),G.partitioned&&(Q+="; Partitioned"),G.priority)switch(typeof G.priority=="string"?G.priority.toLowerCase():void 0){case"low":Q+="; Priority=Low";break;case"medium":Q+="; Priority=Medium";break;case"high":Q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${G.priority}`)}if(G.sameSite)switch(typeof G.sameSite=="string"?G.sameSite.toLowerCase():G.sameSite){case!0:case"strict":Q+="; SameSite=Strict";break;case"lax":Q+="; SameSite=Lax";break;case"none":Q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${G.sameSite}`)}return Q}function S(L){if(L.indexOf("%")===-1)return L;try{return decodeURIComponent(L)}catch{return L}}function I(L){return l.call(L)==="[object Date]"}return ic}yS();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var W2="popstate";function xS(e={}){function t(s,l){let{pathname:h,search:p,hash:A}=s.location;return M1("",{pathname:h,search:p,hash:A},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){return typeof l=="string"?l:wc(l)}return AS(t,n,null,e)}function Bn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ES(){return Math.random().toString(36).substring(2,10)}function Q2(e,t){return{usr:e.state,key:e.key,idx:t}}function M1(e,t,n=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?iu(t):t,state:n,key:t&&t.key||s||ES()}}function wc({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function iu(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function AS(e,t,n,s={}){let{window:l=document.defaultView,v5Compat:h=!1}=s,p=l.history,A="POP",T=null,E=S();E==null&&(E=0,p.replaceState({...p.state,idx:E},""));function S(){return(p.state||{idx:null}).idx}function I(){A="POP";let Y=S(),Q=Y==null?null:Y-E;E=Y,T&&T({action:A,location:W.location,delta:Q})}function L(Y,Q){A="PUSH";let rt=M1(W.location,Y,Q);E=S()+1;let nt=Q2(rt,E),_t=W.createHref(rt);try{p.pushState(nt,"",_t)}catch(St){if(St instanceof DOMException&&St.name==="DataCloneError")throw St;l.location.assign(_t)}h&&T&&T({action:A,location:W.location,delta:1})}function k(Y,Q){A="REPLACE";let rt=M1(W.location,Y,Q);E=S();let nt=Q2(rt,E),_t=W.createHref(rt);p.replaceState(nt,"",_t),h&&T&&T({action:A,location:W.location,delta:0})}function G(Y){let Q=l.location.origin!=="null"?l.location.origin:l.location.href,rt=typeof Y=="string"?Y:wc(Y);return rt=rt.replace(/ $/,"%20"),Bn(Q,`No window.location.(origin|href) available to create URL for href: ${rt}`),new URL(rt,Q)}let W={get action(){return A},get location(){return e(l,p)},listen(Y){if(T)throw new Error("A history only accepts one active listener");return l.addEventListener(W2,I),T=Y,()=>{l.removeEventListener(W2,I),T=null}},createHref(Y){return t(l,Y)},createURL:G,encodeLocation(Y){let Q=G(Y);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:L,replace:k,go(Y){return p.go(Y)}};return W}function YA(e,t,n="/"){return wS(e,t,n,!1)}function wS(e,t,n,s){let l=typeof t=="string"?iu(t):t,h=ma(l.pathname||"/",n);if(h==null)return null;let p=qA(e);TS(p);let A=null;for(let T=0;A==null&&T<p.length;++T){let E=OS(h);A=NS(p[T],E,s)}return A}function qA(e,t=[],n=[],s=""){let l=(h,p,A)=>{let T={relativePath:A===void 0?h.path||"":A,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};T.relativePath.startsWith("/")&&(Bn(T.relativePath.startsWith(s),`Absolute route path "${T.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),T.relativePath=T.relativePath.slice(s.length));let E=da([s,T.relativePath]),S=n.concat(T);h.children&&h.children.length>0&&(Bn(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),qA(h.children,t,S,E)),!(h.path==null&&!h.index)&&t.push({path:E,score:RS(E,h.index),routesMeta:S})};return e.forEach((h,p)=>{var A;if(h.path===""||!((A=h.path)!=null&&A.includes("?")))l(h,p);else for(let T of XA(h.path))l(h,p,T)}),t}function XA(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,l=n.endsWith("?"),h=n.replace(/\?$/,"");if(s.length===0)return l?[h,""]:[h];let p=XA(s.join("/")),A=[];return A.push(...p.map(T=>T===""?h:[h,T].join("/"))),l&&A.push(...p),A.map(T=>e.startsWith("/")&&T===""?"/":T)}function TS(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:DS(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var vS=/^:[\w-]+$/,_S=3,CS=2,SS=1,bS=10,IS=-2,K2=e=>e==="*";function RS(e,t){let n=e.split("/"),s=n.length;return n.some(K2)&&(s+=IS),t&&(s+=CS),n.filter(l=>!K2(l)).reduce((l,h)=>l+(vS.test(h)?_S:h===""?SS:bS),s)}function DS(e,t){return e.length===t.length&&e.slice(0,-1).every((s,l)=>s===t[l])?e[e.length-1]-t[t.length-1]:0}function NS(e,t,n=!1){let{routesMeta:s}=e,l={},h="/",p=[];for(let A=0;A<s.length;++A){let T=s[A],E=A===s.length-1,S=h==="/"?t:t.slice(h.length)||"/",I=_f({path:T.relativePath,caseSensitive:T.caseSensitive,end:E},S),L=T.route;if(!I&&E&&n&&!s[s.length-1].route.index&&(I=_f({path:T.relativePath,caseSensitive:T.caseSensitive,end:!1},S)),!I)return null;Object.assign(l,I.params),p.push({params:l,pathname:da([h,I.pathname]),pathnameBase:VS(da([h,I.pathnameBase])),route:L}),I.pathnameBase!=="/"&&(h=da([h,I.pathnameBase]))}return p}function _f(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=MS(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let h=l[0],p=h.replace(/(.)\/+$/,"$1"),A=l.slice(1);return{params:s.reduce((E,{paramName:S,isOptional:I},L)=>{if(S==="*"){let G=A[L]||"";p=h.slice(0,h.length-G.length).replace(/(.)\/+$/,"$1")}const k=A[L];return I&&!k?E[S]=void 0:E[S]=(k||"").replace(/%2F/g,"/"),E},{}),pathname:h,pathnameBase:p,pattern:e}}function MS(e,t=!1,n=!0){Vs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,A,T)=>(s.push({paramName:A,isOptional:T!=null}),T?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),s]}function OS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ma(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function LS(e,t="/"){let{pathname:n,search:s="",hash:l=""}=typeof e=="string"?iu(e):e;return{pathname:n?n.startsWith("/")?n:PS(n,t):t,search:kS(s),hash:US(l)}}function PS(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function o1(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BS(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function WA(e){let t=BS(e);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function QA(e,t,n,s=!1){let l;typeof e=="string"?l=iu(e):(l={...e},Bn(!l.pathname||!l.pathname.includes("?"),o1("?","pathname","search",l)),Bn(!l.pathname||!l.pathname.includes("#"),o1("#","pathname","hash",l)),Bn(!l.search||!l.search.includes("#"),o1("#","search","hash",l)));let h=e===""||l.pathname==="",p=h?"/":l.pathname,A;if(p==null)A=n;else{let I=t.length-1;if(!s&&p.startsWith("..")){let L=p.split("/");for(;L[0]==="..";)L.shift(),I-=1;l.pathname=L.join("/")}A=I>=0?t[I]:"/"}let T=LS(l,A),E=p&&p!=="/"&&p.endsWith("/"),S=(h||p===".")&&n.endsWith("/");return!T.pathname.endsWith("/")&&(E||S)&&(T.pathname+="/"),T}var da=e=>e.join("/").replace(/\/\/+/g,"/"),VS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,US=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function FS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var KA=["POST","PUT","PATCH","DELETE"];new Set(KA);var jS=["GET",...KA];new Set(jS);var ru=ct.createContext(null);ru.displayName="DataRouter";var Jf=ct.createContext(null);Jf.displayName="DataRouterState";var ZA=ct.createContext({isTransitioning:!1});ZA.displayName="ViewTransition";var zS=ct.createContext(new Map);zS.displayName="Fetchers";var HS=ct.createContext(null);HS.displayName="Await";var Fs=ct.createContext(null);Fs.displayName="Navigation";var Fc=ct.createContext(null);Fc.displayName="Location";var wa=ct.createContext({outlet:null,matches:[],isDataRoute:!1});wa.displayName="Route";var Tg=ct.createContext(null);Tg.displayName="RouteError";function GS(e,{relative:t}={}){Bn(jc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=ct.useContext(Fs),{hash:l,pathname:h,search:p}=Hc(e,{relative:t}),A=h;return n!=="/"&&(A=h==="/"?n:da([n,h])),s.createHref({pathname:A,search:p,hash:l})}function jc(){return ct.useContext(Fc)!=null}function Xo(){return Bn(jc(),"useLocation() may be used only in the context of a <Router> component."),ct.useContext(Fc).location}var JA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $A(e){ct.useContext(Fs).static||ct.useLayoutEffect(e)}function zc(){let{isDataRoute:e}=ct.useContext(wa);return e?ib():YS()}function YS(){Bn(jc(),"useNavigate() may be used only in the context of a <Router> component.");let e=ct.useContext(ru),{basename:t,navigator:n}=ct.useContext(Fs),{matches:s}=ct.useContext(wa),{pathname:l}=Xo(),h=JSON.stringify(WA(s)),p=ct.useRef(!1);return $A(()=>{p.current=!0}),ct.useCallback((T,E={})=>{if(Vs(p.current,JA),!p.current)return;if(typeof T=="number"){n.go(T);return}let S=QA(T,JSON.parse(h),l,E.relative==="path");e==null&&t!=="/"&&(S.pathname=S.pathname==="/"?t:da([t,S.pathname])),(E.replace?n.replace:n.push)(S,E.state,E)},[t,n,h,l,e])}ct.createContext(null);function Hc(e,{relative:t}={}){let{matches:n}=ct.useContext(wa),{pathname:s}=Xo(),l=JSON.stringify(WA(n));return ct.useMemo(()=>QA(e,JSON.parse(l),s,t==="path"),[e,l,s,t])}function qS(e,t){return tw(e,t)}function tw(e,t,n,s){var rt;Bn(jc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l,static:h}=ct.useContext(Fs),{matches:p}=ct.useContext(wa),A=p[p.length-1],T=A?A.params:{},E=A?A.pathname:"/",S=A?A.pathnameBase:"/",I=A&&A.route;{let nt=I&&I.path||"";ew(E,!I||nt.endsWith("*")||nt.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${E}" (under <Route path="${nt}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${nt}"> to <Route path="${nt==="/"?"*":`${nt}/*`}">.`)}let L=Xo(),k;if(t){let nt=typeof t=="string"?iu(t):t;Bn(S==="/"||((rt=nt.pathname)==null?void 0:rt.startsWith(S)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${nt.pathname}" was given in the \`location\` prop.`),k=nt}else k=L;let G=k.pathname||"/",W=G;if(S!=="/"){let nt=S.replace(/^\//,"").split("/");W="/"+G.replace(/^\//,"").split("/").slice(nt.length).join("/")}let Y=!h&&n&&n.matches&&n.matches.length>0?n.matches:YA(e,{pathname:W});Vs(I||Y!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),Vs(Y==null||Y[Y.length-1].route.element!==void 0||Y[Y.length-1].route.Component!==void 0||Y[Y.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=ZS(Y&&Y.map(nt=>Object.assign({},nt,{params:Object.assign({},T,nt.params),pathname:da([S,l.encodeLocation?l.encodeLocation(nt.pathname).pathname:nt.pathname]),pathnameBase:nt.pathnameBase==="/"?S:da([S,l.encodeLocation?l.encodeLocation(nt.pathnameBase).pathname:nt.pathnameBase])})),p,n,s);return t&&Q?ct.createElement(Fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},Q):Q}function XS(){let e=nb(),t=FS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},h={padding:"2px 4px",backgroundColor:s},p=null;return console.error("Error handled by React Router default ErrorBoundary:",e),p=ct.createElement(ct.Fragment,null,ct.createElement("p",null,"💿 Hey developer 👋"),ct.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ct.createElement("code",{style:h},"ErrorBoundary")," or"," ",ct.createElement("code",{style:h},"errorElement")," prop on your route.")),ct.createElement(ct.Fragment,null,ct.createElement("h2",null,"Unexpected Application Error!"),ct.createElement("h3",{style:{fontStyle:"italic"}},t),n?ct.createElement("pre",{style:l},n):null,p)}var WS=ct.createElement(XS,null),QS=class extends ct.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?ct.createElement(wa.Provider,{value:this.props.routeContext},ct.createElement(Tg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KS({routeContext:e,match:t,children:n}){let s=ct.useContext(ru);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),ct.createElement(wa.Provider,{value:e},n)}function ZS(e,t=[],n=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,h=n==null?void 0:n.errors;if(h!=null){let T=l.findIndex(E=>E.route.id&&(h==null?void 0:h[E.route.id])!==void 0);Bn(T>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),l=l.slice(0,Math.min(l.length,T+1))}let p=!1,A=-1;if(n)for(let T=0;T<l.length;T++){let E=l[T];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(A=T),E.route.id){let{loaderData:S,errors:I}=n,L=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!I||I[E.route.id]===void 0);if(E.route.lazy||L){p=!0,A>=0?l=l.slice(0,A+1):l=[l[0]];break}}}return l.reduceRight((T,E,S)=>{let I,L=!1,k=null,G=null;n&&(I=h&&E.route.id?h[E.route.id]:void 0,k=E.route.errorElement||WS,p&&(A<0&&S===0?(ew("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,G=null):A===S&&(L=!0,G=E.route.hydrateFallbackElement||null)));let W=t.concat(l.slice(0,S+1)),Y=()=>{let Q;return I?Q=k:L?Q=G:E.route.Component?Q=ct.createElement(E.route.Component,null):E.route.element?Q=E.route.element:Q=T,ct.createElement(KS,{match:E,routeContext:{outlet:T,matches:W,isDataRoute:n!=null},children:Q})};return n&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?ct.createElement(QS,{location:n.location,revalidation:n.revalidation,component:k,error:I,children:Y(),routeContext:{outlet:null,matches:W,isDataRoute:!0}}):Y()},null)}function vg(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JS(e){let t=ct.useContext(ru);return Bn(t,vg(e)),t}function $S(e){let t=ct.useContext(Jf);return Bn(t,vg(e)),t}function tb(e){let t=ct.useContext(wa);return Bn(t,vg(e)),t}function _g(e){let t=tb(e),n=t.matches[t.matches.length-1];return Bn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function eb(){return _g("useRouteId")}function nb(){var s;let e=ct.useContext(Tg),t=$S("useRouteError"),n=_g("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[n]}function ib(){let{router:e}=JS("useNavigate"),t=_g("useNavigate"),n=ct.useRef(!1);return $A(()=>{n.current=!0}),ct.useCallback(async(l,h={})=>{Vs(n.current,JA),n.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...h}))},[e,t])}var Z2={};function ew(e,t,n){!t&&!Z2[e]&&(Z2[e]=!0,Vs(!1,n))}ct.memo(rb);function rb({routes:e,future:t,state:n}){return tw(e,void 0,n,t)}function ca(e){Bn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sb({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:l,static:h=!1}){Bn(!jc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=e.replace(/^\/*/,"/"),A=ct.useMemo(()=>({basename:p,navigator:l,static:h,future:{}}),[p,l,h]);typeof n=="string"&&(n=iu(n));let{pathname:T="/",search:E="",hash:S="",state:I=null,key:L="default"}=n,k=ct.useMemo(()=>{let G=ma(T,p);return G==null?null:{location:{pathname:G,search:E,hash:S,state:I,key:L},navigationType:s}},[p,T,E,S,I,L,s]);return Vs(k!=null,`<Router basename="${p}"> is not able to match the URL "${T}${E}${S}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:ct.createElement(Fs.Provider,{value:A},ct.createElement(Fc.Provider,{children:t,value:k}))}function ab({children:e,location:t}){return qS(O1(e),t)}function O1(e,t=[]){let n=[];return ct.Children.forEach(e,(s,l)=>{if(!ct.isValidElement(s))return;let h=[...t,l];if(s.type===ct.Fragment){n.push.apply(n,O1(s.props.children,h));return}Bn(s.type===ca,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let p={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(p.children=O1(s.props.children,h)),n.push(p)}),n}var ff="get",df="application/x-www-form-urlencoded";function $f(e){return e!=null&&typeof e.tagName=="string"}function ob(e){return $f(e)&&e.tagName.toLowerCase()==="button"}function lb(e){return $f(e)&&e.tagName.toLowerCase()==="form"}function ub(e){return $f(e)&&e.tagName.toLowerCase()==="input"}function cb(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function hb(e,t){return e.button===0&&(!t||t==="_self")&&!cb(e)}var ef=null;function fb(){if(ef===null)try{new FormData(document.createElement("form"),0),ef=!1}catch{ef=!0}return ef}var db=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function l1(e){return e!=null&&!db.has(e)?(Vs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${df}"`),null):e}function gb(e,t){let n,s,l,h,p;if(lb(e)){let A=e.getAttribute("action");s=A?ma(A,t):null,n=e.getAttribute("method")||ff,l=l1(e.getAttribute("enctype"))||df,h=new FormData(e)}else if(ob(e)||ub(e)&&(e.type==="submit"||e.type==="image")){let A=e.form;if(A==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let T=e.getAttribute("formaction")||A.getAttribute("action");if(s=T?ma(T,t):null,n=e.getAttribute("formmethod")||A.getAttribute("method")||ff,l=l1(e.getAttribute("formenctype"))||l1(A.getAttribute("enctype"))||df,h=new FormData(A,e),!fb()){let{name:E,type:S,value:I}=e;if(S==="image"){let L=E?`${E}.`:"";h.append(`${L}x`,"0"),h.append(`${L}y`,"0")}else E&&h.append(E,I)}}else{if($f(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ff,s=null,l=df,p=e}return h&&l==="text/plain"&&(p=h,h=void 0),{action:s,method:n.toLowerCase(),encType:l,formData:h,body:p}}function Cg(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function mb(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pb(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function yb(e,t,n){let s=await Promise.all(e.map(async l=>{let h=t.routes[l.route.id];if(h){let p=await mb(h,n);return p.links?p.links():[]}return[]}));return wb(s.flat(1).filter(pb).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function J2(e,t,n,s,l,h){let p=(T,E)=>n[E]?T.route.id!==n[E].route.id:!0,A=(T,E)=>{var S;return n[E].pathname!==T.pathname||((S=n[E].route.path)==null?void 0:S.endsWith("*"))&&n[E].params["*"]!==T.params["*"]};return h==="assets"?t.filter((T,E)=>p(T,E)||A(T,E)):h==="data"?t.filter((T,E)=>{var I;let S=s.routes[T.route.id];if(!S||!S.hasLoader)return!1;if(p(T,E)||A(T,E))return!0;if(T.route.shouldRevalidate){let L=T.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((I=n[0])==null?void 0:I.params)||{},nextUrl:new URL(e,window.origin),nextParams:T.params,defaultShouldRevalidate:!0});if(typeof L=="boolean")return L}return!0}):[]}function xb(e,t,{includeHydrateFallback:n}={}){return Eb(e.map(s=>{let l=t.routes[s.route.id];if(!l)return[];let h=[l.module];return l.clientActionModule&&(h=h.concat(l.clientActionModule)),l.clientLoaderModule&&(h=h.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(h=h.concat(l.hydrateFallbackModule)),l.imports&&(h=h.concat(l.imports)),h}).flat(1))}function Eb(e){return[...new Set(e)]}function Ab(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}function wb(e,t){let n=new Set;return new Set(t),e.reduce((s,l)=>{let h=JSON.stringify(Ab(l));return n.has(h)||(n.add(h),s.push({key:h,link:l})),s},[])}var Tb=new Set([100,101,204,205]);function vb(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&ma(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function nw(){let e=ct.useContext(ru);return Cg(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function _b(){let e=ct.useContext(Jf);return Cg(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Sg=ct.createContext(void 0);Sg.displayName="FrameworkContext";function iw(){let e=ct.useContext(Sg);return Cg(e,"You must render this element inside a <HydratedRouter> element"),e}function Cb(e,t){let n=ct.useContext(Sg),[s,l]=ct.useState(!1),[h,p]=ct.useState(!1),{onFocus:A,onBlur:T,onMouseEnter:E,onMouseLeave:S,onTouchStart:I}=t,L=ct.useRef(null);ct.useEffect(()=>{if(e==="render"&&p(!0),e==="viewport"){let W=Q=>{Q.forEach(rt=>{p(rt.isIntersecting)})},Y=new IntersectionObserver(W,{threshold:.5});return L.current&&Y.observe(L.current),()=>{Y.disconnect()}}},[e]),ct.useEffect(()=>{if(s){let W=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(W)}}},[s]);let k=()=>{l(!0)},G=()=>{l(!1),p(!1)};return n?e!=="intent"?[h,L,{}]:[h,L,{onFocus:rc(A,k),onBlur:rc(T,G),onMouseEnter:rc(E,k),onMouseLeave:rc(S,G),onTouchStart:rc(I,k)}]:[!1,L,{}]}function rc(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Sb({page:e,...t}){let{router:n}=nw(),s=ct.useMemo(()=>YA(n.routes,e,n.basename),[n.routes,e,n.basename]);return s?ct.createElement(Ib,{page:e,matches:s,...t}):null}function bb(e){let{manifest:t,routeModules:n}=iw(),[s,l]=ct.useState([]);return ct.useEffect(()=>{let h=!1;return yb(e,t,n).then(p=>{h||l(p)}),()=>{h=!0}},[e,t,n]),s}function Ib({page:e,matches:t,...n}){let s=Xo(),{manifest:l,routeModules:h}=iw(),{basename:p}=nw(),{loaderData:A,matches:T}=_b(),E=ct.useMemo(()=>J2(e,t,T,l,s,"data"),[e,t,T,l,s]),S=ct.useMemo(()=>J2(e,t,T,l,s,"assets"),[e,t,T,l,s]),I=ct.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let G=new Set,W=!1;if(t.forEach(Q=>{var nt;let rt=l.routes[Q.route.id];!rt||!rt.hasLoader||(!E.some(_t=>_t.route.id===Q.route.id)&&Q.route.id in A&&((nt=h[Q.route.id])!=null&&nt.shouldRevalidate)||rt.hasClientLoader?W=!0:G.add(Q.route.id))}),G.size===0)return[];let Y=vb(e,p);return W&&G.size>0&&Y.searchParams.set("_routes",t.filter(Q=>G.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[Y.pathname+Y.search]},[p,A,s,l,E,t,e,h]),L=ct.useMemo(()=>xb(S,l),[S,l]),k=bb(S);return ct.createElement(ct.Fragment,null,I.map(G=>ct.createElement("link",{key:G,rel:"prefetch",as:"fetch",href:G,...n})),L.map(G=>ct.createElement("link",{key:G,rel:"modulepreload",href:G,...n})),k.map(({key:G,link:W})=>ct.createElement("link",{key:G,...W})))}function Rb(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var rw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rw&&(window.__reactRouterVersion="7.5.1")}catch{}function Db({basename:e,children:t,window:n}){let s=ct.useRef();s.current==null&&(s.current=xS({window:n,v5Compat:!0}));let l=s.current,[h,p]=ct.useState({action:l.action,location:l.location}),A=ct.useCallback(T=>{ct.startTransition(()=>p(T))},[p]);return ct.useLayoutEffect(()=>l.listen(A),[l,A]),ct.createElement(sb,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:l})}var sw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kl=ct.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:l,reloadDocument:h,replace:p,state:A,target:T,to:E,preventScrollReset:S,viewTransition:I,...L},k){let{basename:G}=ct.useContext(Fs),W=typeof E=="string"&&sw.test(E),Y,Q=!1;if(typeof E=="string"&&W&&(Y=E,rw))try{let V=new URL(window.location.href),J=E.startsWith("//")?new URL(V.protocol+E):new URL(E),tt=ma(J.pathname,G);J.origin===V.origin&&tt!=null?E=tt+J.search+J.hash:Q=!0}catch{Vs(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let rt=GS(E,{relative:l}),[nt,_t,St]=Cb(s,L),Lt=Lb(E,{replace:p,state:A,target:T,preventScrollReset:S,relative:l,viewTransition:I});function z(V){t&&t(V),V.defaultPrevented||Lt(V)}let F=ct.createElement("a",{...L,...St,href:Y||rt,onClick:Q||h?t:z,ref:Rb(k,_t),target:T,"data-discover":!W&&n==="render"?"true":void 0});return nt&&!W?ct.createElement(ct.Fragment,null,F,ct.createElement(Sb,{page:rt})):F});kl.displayName="Link";var Nb=ct.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:l=!1,style:h,to:p,viewTransition:A,children:T,...E},S){let I=Hc(p,{relative:E.relative}),L=Xo(),k=ct.useContext(Jf),{navigator:G,basename:W}=ct.useContext(Fs),Y=k!=null&&Ub(I)&&A===!0,Q=G.encodeLocation?G.encodeLocation(I).pathname:I.pathname,rt=L.pathname,nt=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(rt=rt.toLowerCase(),nt=nt?nt.toLowerCase():null,Q=Q.toLowerCase()),nt&&W&&(nt=ma(nt,W)||nt);const _t=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let St=rt===Q||!l&&rt.startsWith(Q)&&rt.charAt(_t)==="/",Lt=nt!=null&&(nt===Q||!l&&nt.startsWith(Q)&&nt.charAt(Q.length)==="/"),z={isActive:St,isPending:Lt,isTransitioning:Y},F=St?t:void 0,V;typeof s=="function"?V=s(z):V=[s,St?"active":null,Lt?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let J=typeof h=="function"?h(z):h;return ct.createElement(kl,{...E,"aria-current":F,className:V,ref:S,style:J,to:p,viewTransition:A},typeof T=="function"?T(z):T)});Nb.displayName="NavLink";var Mb=ct.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:l,state:h,method:p=ff,action:A,onSubmit:T,relative:E,preventScrollReset:S,viewTransition:I,...L},k)=>{let G=Vb(),W=kb(A,{relative:E}),Y=p.toLowerCase()==="get"?"get":"post",Q=typeof A=="string"&&sw.test(A),rt=nt=>{if(T&&T(nt),nt.defaultPrevented)return;nt.preventDefault();let _t=nt.nativeEvent.submitter,St=(_t==null?void 0:_t.getAttribute("formmethod"))||p;G(_t||nt.currentTarget,{fetcherKey:t,method:St,navigate:n,replace:l,state:h,relative:E,preventScrollReset:S,viewTransition:I})};return ct.createElement("form",{ref:k,method:Y,action:W,onSubmit:s?T:rt,...L,"data-discover":!Q&&e==="render"?"true":void 0})});Mb.displayName="Form";function Ob(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aw(e){let t=ct.useContext(ru);return Bn(t,Ob(e)),t}function Lb(e,{target:t,replace:n,state:s,preventScrollReset:l,relative:h,viewTransition:p}={}){let A=zc(),T=Xo(),E=Hc(e,{relative:h});return ct.useCallback(S=>{if(hb(S,t)){S.preventDefault();let I=n!==void 0?n:wc(T)===wc(E);A(e,{replace:I,state:s,preventScrollReset:l,relative:h,viewTransition:p})}},[T,A,E,n,s,t,e,l,h,p])}var Pb=0,Bb=()=>`__${String(++Pb)}__`;function Vb(){let{router:e}=aw("useSubmit"),{basename:t}=ct.useContext(Fs),n=eb();return ct.useCallback(async(s,l={})=>{let{action:h,method:p,encType:A,formData:T,body:E}=gb(s,t);if(l.navigate===!1){let S=l.fetcherKey||Bb();await e.fetch(S,n,l.action||h,{preventScrollReset:l.preventScrollReset,formData:T,body:E,formMethod:l.method||p,formEncType:l.encType||A,flushSync:l.flushSync})}else await e.navigate(l.action||h,{preventScrollReset:l.preventScrollReset,formData:T,body:E,formMethod:l.method||p,formEncType:l.encType||A,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,n])}function kb(e,{relative:t}={}){let{basename:n}=ct.useContext(Fs),s=ct.useContext(wa);Bn(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),h={...Hc(e||".",{relative:t})},p=Xo();if(e==null){h.search=p.search;let A=new URLSearchParams(h.search),T=A.getAll("index");if(T.some(S=>S==="")){A.delete("index"),T.filter(I=>I).forEach(I=>A.append("index",I));let S=A.toString();h.search=S?`?${S}`:""}}return(!e||e===".")&&l.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(h.pathname=h.pathname==="/"?n:da([n,h.pathname])),wc(h)}function Ub(e,t={}){let n=ct.useContext(ZA);Bn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=aw("useViewTransitionState"),l=Hc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let h=ma(n.currentLocation.pathname,s)||n.currentLocation.pathname,p=ma(n.nextLocation.pathname,s)||n.nextLocation.pathname;return _f(l.pathname,p)!=null||_f(l.pathname,h)!=null}new TextEncoder;[...Tb];const Gc=()=>lt.jsxs("nav",{className:"flex justify-between items-center px-6 py-4 bg-white shadow-md",children:[lt.jsx(kl,{to:"/",className:"text-xl font-bold text-green-700",children:"🌍 EcoQuest"}),lt.jsxs("div",{className:"flex gap-4 items-center text-green-700 font-medium",children:[lt.jsx(kl,{to:"/leaderboard",className:"hover:text-green-900",children:"Leaderboard"}),lt.jsx(kl,{to:"/how-to-play",className:"hover:text-green-900",children:"How to Play"}),lt.jsx(kl,{to:"/admin-login",className:"bg-green-600 text-white px-4 py-2 rounded-xl hover:bg-green-700 transition",children:"Admin"})]})]}),su=()=>lt.jsxs("footer",{className:"bg-green-700 text-white text-center text-sm py-6 mt-10",children:["Made with 💚 CSE Department Students • ©  ",new Date().getFullYear()]}),ow=ct.createContext({});function Fb(e){const t=ct.useRef(null);return t.current===null&&(t.current=e()),t.current}const bg=typeof window<"u",jb=bg?ct.useLayoutEffect:ct.useEffect,Ig=ct.createContext(null),lw=ct.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function zb(e=!0){const t=ct.useContext(Ig);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:l}=t,h=ct.useId();ct.useEffect(()=>{if(e)return l(h)},[e]);const p=ct.useCallback(()=>e&&s&&s(h),[h,s,e]);return!n&&s?[!1,p]:[!0]}function Rg(e,t){e.indexOf(t)===-1&&e.push(t)}function Dg(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let uw=()=>{};const L1={useManualTiming:!1};function Ng(e){let t;return()=>(t===void 0&&(t=e()),t)}const es=e=>e,Tc=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s};class Mg{constructor(){this.subscriptions=[]}add(t){return Rg(this.subscriptions,t),()=>Dg(this.subscriptions,t)}notify(t,n,s){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](t,n,s);else for(let h=0;h<l;h++){const p=this.subscriptions[h];p&&p(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ns=e=>e*1e3,Ms=e=>e/1e3;function cw(e,t){return t?e*(1e3/t):0}const Hb=Ng(()=>window.ScrollTimeline!==void 0);class Gb{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t,n){const s=this.animations.map(l=>{if(Hb()&&l.attachTimeline)return l.attachTimeline(t);if(typeof n=="function")return n(l)});return()=>{s.forEach((l,h)=>{l&&l(),this.animations[h].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Yb extends Gb{then(t,n){return this.finished.finally(t).then(()=>{})}}const $2={value:null},Og=e=>Array.isArray(e)&&typeof e[0]=="number",qb={};function Xb(e,t){const n=Ng(e);return()=>qb[t]??n()}const vc=Xb(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hw=(e,t,n=10)=>{let s="";const l=Math.max(Math.round(t/n),2);for(let h=0;h<l;h++)s+=e(h/(l-1))+", ";return`linear(${s.substring(0,s.length-2)})`},ac=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,P1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ac([0,.65,.55,1]),circOut:ac([.55,0,1,.45]),backIn:ac([.31,.01,.66,-.59]),backOut:ac([.33,1.53,.69,.99])};function fw(e,t){if(e)return typeof e=="function"&&vc()?hw(e,t):Og(e)?ac(e):Array.isArray(e)?e.map(n=>fw(n,t)||P1.easeOut):P1[e]}function Wb(e,t,n,{delay:s=0,duration:l=300,repeat:h=0,repeatType:p="loop",ease:A="easeInOut",times:T}={},E=void 0){const S={[t]:n};T&&(S.offset=T);const I=fw(A,l);return Array.isArray(I)&&(S.easing=I),e.animate(S,{delay:s,duration:l,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:h+1,direction:p==="reverse"?"alternate":"normal",pseudoElement:E})}function Lg(e){return typeof e=="function"&&"applyToOptions"in e}function Pg(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Cf=2e4;function Bg(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<Cf;)t+=n,s=e.next(t);return t>=Cf?1/0:t}function Qb(e,t=100,n){const s=n({...e,keyframes:[0,t]}),l=Math.min(Bg(s),Cf);return{type:"keyframes",ease:h=>s.next(l*h).value/t,duration:Ms(l)}}function dw(e){return!!(typeof e=="function"&&vc()||!e||typeof e=="string"&&(e in P1||vc())||Og(e)||Array.isArray(e)&&e.every(dw))}function tx(e,t){e.timeline=t,e.onfinish=null}const nf=["read","resolveKeyframes","update","preRender","render","postRender"];function Kb(e,t){let n=new Set,s=new Set,l=!1,h=!1;const p=new WeakSet;let A={delta:0,timestamp:0,isProcessing:!1},T=0;function E(I){p.has(I)&&(S.schedule(I),e()),T++,I(A)}const S={schedule:(I,L=!1,k=!1)=>{const W=k&&l?n:s;return L&&p.add(I),W.has(I)||W.add(I),I},cancel:I=>{s.delete(I),p.delete(I)},process:I=>{if(A=I,l){h=!0;return}l=!0,[n,s]=[s,n],n.forEach(E),t&&$2.value&&$2.value.frameloop[t].push(T),T=0,n.clear(),l=!1,h&&(h=!1,S.process(I))}};return S}const Zb=40;function gw(e,t){let n=!1,s=!0;const l={delta:0,timestamp:0,isProcessing:!1},h=()=>n=!0,p=nf.reduce((Q,rt)=>(Q[rt]=Kb(h,t?rt:void 0),Q),{}),{read:A,resolveKeyframes:T,update:E,preRender:S,render:I,postRender:L}=p,k=()=>{const Q=performance.now();n=!1,l.delta=s?1e3/60:Math.max(Math.min(Q-l.timestamp,Zb),1),l.timestamp=Q,l.isProcessing=!0,A.process(l),T.process(l),E.process(l),S.process(l),I.process(l),L.process(l),l.isProcessing=!1,n&&t&&(s=!1,e(k))},G=()=>{n=!0,s=!0,l.isProcessing||e(k)};return{schedule:nf.reduce((Q,rt)=>{const nt=p[rt];return Q[rt]=(_t,St=!1,Lt=!1)=>(n||G(),nt.schedule(_t,St,Lt)),Q},{}),cancel:Q=>{for(let rt=0;rt<nf.length;rt++)p[nf[rt]].cancel(Q)},state:l,steps:p}}const{schedule:Vg}=gw(queueMicrotask,!1),{schedule:yn,cancel:uo,state:Ri,steps:u1}=gw(typeof requestAnimationFrame<"u"?requestAnimationFrame:es,!0);let gf;function Jb(){gf=void 0}const Os={now:()=>(gf===void 0&&Os.set(Ri.isProcessing||L1.useManualTiming?Ri.timestamp:performance.now()),gf),set:e=>{gf=e,queueMicrotask(Jb)}},hs={x:!1,y:!1};function mw(){return hs.x||hs.y}function $b(e){return e==="x"||e==="y"?hs[e]?null:(hs[e]=!0,()=>{hs[e]=!1}):hs.x||hs.y?null:(hs.x=hs.y=!0,()=>{hs.x=hs.y=!1})}function t3(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let s=document;const l=(n==null?void 0:n[e])??s.querySelectorAll(e);return l?Array.from(l):[]}return Array.from(e)}function pw(e,t){const n=t3(e),s=new AbortController,l={passive:!0,...t,signal:s.signal};return[n,l,()=>s.abort()]}function ex(e){return!(e.pointerType==="touch"||mw())}function e3(e,t,n={}){const[s,l,h]=pw(e,n),p=A=>{if(!ex(A))return;const{target:T}=A,E=t(T,A);if(typeof E!="function"||!T)return;const S=I=>{ex(I)&&(E(I),T.removeEventListener("pointerleave",S))};T.addEventListener("pointerleave",S,l)};return s.forEach(A=>{A.addEventListener("pointerenter",p,l)}),h}const yw=(e,t)=>t?e===t?!0:yw(e,t.parentElement):!1,kg=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,n3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function i3(e){return n3.has(e.tagName)||e.tabIndex!==-1}const oc=new WeakSet;function nx(e){return t=>{t.key==="Enter"&&e(t)}}function c1(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const r3=(e,t)=>{const n=e.currentTarget;if(!n)return;const s=nx(()=>{if(oc.has(n))return;c1(n,"down");const l=nx(()=>{c1(n,"up")}),h=()=>c1(n,"cancel");n.addEventListener("keyup",l,t),n.addEventListener("blur",h,t)});n.addEventListener("keydown",s,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),t)};function ix(e){return kg(e)&&!mw()}function s3(e,t,n={}){const[s,l,h]=pw(e,n),p=A=>{const T=A.currentTarget;if(!ix(A)||oc.has(T))return;oc.add(T);const E=t(T,A),S=(k,G)=>{window.removeEventListener("pointerup",I),window.removeEventListener("pointercancel",L),!(!ix(k)||!oc.has(T))&&(oc.delete(T),typeof E=="function"&&E(k,{success:G}))},I=k=>{S(k,T===window||T===document||n.useGlobalTarget||yw(T,k.target))},L=k=>{S(k,!1)};window.addEventListener("pointerup",I,l),window.addEventListener("pointercancel",L,l)};return s.forEach(A=>{(n.useGlobalTarget?window:A).addEventListener("pointerdown",p,l),A instanceof HTMLElement&&(A.addEventListener("focus",E=>r3(E,l)),!i3(A)&&!A.hasAttribute("tabindex")&&(A.tabIndex=0))}),h}const rx=30,a3=e=>!isNaN(parseFloat(e));class o3{constructor(t,n={}){this.version="12.7.4",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,l=!0)=>{const h=Os.now();this.updatedAt!==h&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),l&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Os.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=a3(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Mg);const s=this.events[t].add(n);return t==="change"?()=>{s(),yn.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Os.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>rx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,rx);return cw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _c(e,t){return new o3(e,t)}const xw=ct.createContext({strict:!1}),sx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wl={};for(const e in sx)Wl[e]={isEnabled:t=>sx[e].some(n=>!!t[n])};function l3(e){for(const t in e)Wl[t]={...Wl[t],...e[t]}}const u3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sf(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||u3.has(e)}let Ew=e=>!Sf(e);function c3(e){e&&(Ew=t=>t.startsWith("on")?!Sf(t):e(t))}try{c3(require("@emotion/is-prop-valid").default)}catch{}function h3(e,t,n){const s={};for(const l in e)l==="values"&&typeof e.values=="object"||(Ew(l)||n===!0&&Sf(l)||!t&&!Sf(l)||e.draggable&&l.startsWith("onDrag"))&&(s[l]=e[l]);return s}function f3(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...s)=>e(...s);return new Proxy(n,{get:(s,l)=>l==="create"?e:(t.has(l)||t.set(l,e(l)),t.get(l))})}const td=ct.createContext({});function ed(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Cc(e){return typeof e=="string"||Array.isArray(e)}const Ug=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Fg=["initial",...Ug];function nd(e){return ed(e.animate)||Fg.some(t=>Cc(e[t]))}function Aw(e){return!!(nd(e)||e.variants)}function d3(e,t){if(nd(e)){const{initial:n,animate:s}=e;return{initial:n===!1||Cc(n)?n:void 0,animate:Cc(s)?s:void 0}}return e.inherit!==!1?t:{}}function g3(e){const{initial:t,animate:n}=d3(e,ct.useContext(td));return ct.useMemo(()=>({initial:t,animate:n}),[ax(t),ax(n)])}function ax(e){return Array.isArray(e)?e.join(" "):e}const m3=Symbol.for("motionComponentSymbol");function Ul(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function p3(e,t,n){return ct.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):Ul(n)&&(n.current=s))},[t])}const jg=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),y3="framerAppearId",ww="data-"+jg(y3),Tw=ct.createContext({});function x3(e,t,n,s,l){var W,Y;const{visualElement:h}=ct.useContext(td),p=ct.useContext(xw),A=ct.useContext(Ig),T=ct.useContext(lw).reducedMotion,E=ct.useRef(null);s=s||p.renderer,!E.current&&s&&(E.current=s(e,{visualState:t,parent:h,props:n,presenceContext:A,blockInitialAnimation:A?A.initial===!1:!1,reducedMotionConfig:T}));const S=E.current,I=ct.useContext(Tw);S&&!S.projection&&l&&(S.type==="html"||S.type==="svg")&&E3(E.current,n,l,I);const L=ct.useRef(!1);ct.useInsertionEffect(()=>{S&&L.current&&S.update(n,A)});const k=n[ww],G=ct.useRef(!!k&&!((W=window.MotionHandoffIsComplete)!=null&&W.call(window,k))&&((Y=window.MotionHasOptimisedAnimation)==null?void 0:Y.call(window,k)));return jb(()=>{S&&(L.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),Vg.render(S.render),G.current&&S.animationState&&S.animationState.animateChanges())}),ct.useEffect(()=>{S&&(!G.current&&S.animationState&&S.animationState.animateChanges(),G.current&&(queueMicrotask(()=>{var Q;(Q=window.MotionHandoffMarkAsComplete)==null||Q.call(window,k)}),G.current=!1))}),S}function E3(e,t,n,s){const{layoutId:l,layout:h,drag:p,dragConstraints:A,layoutScroll:T,layoutRoot:E,layoutCrossfade:S}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:vw(e.parent)),e.projection.setOptions({layoutId:l,layout:h,alwaysMeasureLayout:!!p||A&&Ul(A),visualElement:e,animationType:typeof h=="string"?h:"both",initialPromotionConfig:s,crossfade:S,layoutScroll:T,layoutRoot:E})}function vw(e){if(e)return e.options.allowProjection!==!1?e.projection:vw(e.parent)}function A3({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:l}){e&&l3(e);function h(A,T){let E;const S={...ct.useContext(lw),...A,layoutId:w3(A)},{isStatic:I}=S,L=g3(A),k=s(A,I);if(!I&&bg){T3();const G=v3(S);E=G.MeasureLayout,L.visualElement=x3(l,k,S,t,G.ProjectionNode)}return lt.jsxs(td.Provider,{value:L,children:[E&&L.visualElement?lt.jsx(E,{visualElement:L.visualElement,...S}):null,n(l,A,p3(k,L.visualElement,T),k,I,L.visualElement)]})}h.displayName=`motion.${typeof l=="string"?l:`create(${l.displayName??l.name??""})`}`;const p=ct.forwardRef(h);return p[m3]=l,p}function w3({layoutId:e}){const t=ct.useContext(ow).id;return t&&e!==void 0?t+"-"+e:e}function T3(e,t){ct.useContext(xw).strict}function v3(e){const{drag:t,layout:n}=Wl;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const _w=e=>t=>typeof t=="string"&&t.startsWith(e),zg=_w("--"),_3=_w("var(--"),Hg=e=>_3(e)?C3.test(e.split("/*")[0].trim()):!1,C3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Sc={};function S3(e){for(const t in e)Sc[t]=e[t],zg(t)&&(Sc[t].isCSSVariable=!0)}const au=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wo=new Set(au);function Cw(e,{layout:t,layoutId:n}){return Wo.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Sc[e]||e==="opacity")}const Wi=e=>!!(e&&e.getVelocity),Sw=(e,t)=>t&&typeof e=="number"?t.transform(e):e,pa=(e,t,n)=>n>t?t:n<e?e:n,ou={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},bc={...ou,transform:e=>pa(0,1,e)},rf={...ou,default:1},Yc=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),io=Yc("deg"),Ls=Yc("%"),ne=Yc("px"),b3=Yc("vh"),I3=Yc("vw"),ox={...Ls,parse:e=>Ls.parse(e)/100,transform:e=>Ls.transform(e*100)},R3={borderWidth:ne,borderTopWidth:ne,borderRightWidth:ne,borderBottomWidth:ne,borderLeftWidth:ne,borderRadius:ne,radius:ne,borderTopLeftRadius:ne,borderTopRightRadius:ne,borderBottomRightRadius:ne,borderBottomLeftRadius:ne,width:ne,maxWidth:ne,height:ne,maxHeight:ne,top:ne,right:ne,bottom:ne,left:ne,padding:ne,paddingTop:ne,paddingRight:ne,paddingBottom:ne,paddingLeft:ne,margin:ne,marginTop:ne,marginRight:ne,marginBottom:ne,marginLeft:ne,backgroundPositionX:ne,backgroundPositionY:ne},D3={rotate:io,rotateX:io,rotateY:io,rotateZ:io,scale:rf,scaleX:rf,scaleY:rf,scaleZ:rf,skew:io,skewX:io,skewY:io,distance:ne,translateX:ne,translateY:ne,translateZ:ne,x:ne,y:ne,z:ne,perspective:ne,transformPerspective:ne,opacity:bc,originX:ox,originY:ox,originZ:ne},lx={...ou,transform:Math.round},Gg={...R3,...D3,zIndex:lx,size:ne,fillOpacity:bc,strokeOpacity:bc,numOctaves:lx},N3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},M3=au.length;function O3(e,t,n){let s="",l=!0;for(let h=0;h<M3;h++){const p=au[h],A=e[p];if(A===void 0)continue;let T=!0;if(typeof A=="number"?T=A===(p.startsWith("scale")?1:0):T=parseFloat(A)===0,!T||n){const E=Sw(A,Gg[p]);if(!T){l=!1;const S=N3[p]||p;s+=`${S}(${E}) `}n&&(t[p]=E)}}return s=s.trim(),n?s=n(t,l?"":s):l&&(s="none"),s}function Yg(e,t,n){const{style:s,vars:l,transformOrigin:h}=e;let p=!1,A=!1;for(const T in t){const E=t[T];if(Wo.has(T)){p=!0;continue}else if(zg(T)){l[T]=E;continue}else{const S=Sw(E,Gg[T]);T.startsWith("origin")?(A=!0,h[T]=S):s[T]=S}}if(t.transform||(p||n?s.transform=O3(t,e.transform,n):s.transform&&(s.transform="none")),A){const{originX:T="50%",originY:E="50%",originZ:S=0}=h;s.transformOrigin=`${T} ${E} ${S}`}}const qg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bw(e,t,n){for(const s in t)!Wi(t[s])&&!Cw(s,n)&&(e[s]=t[s])}function L3({transformTemplate:e},t){return ct.useMemo(()=>{const n=qg();return Yg(n,t,e),Object.assign({},n.vars,n.style)},[t])}function P3(e,t){const n=e.style||{},s={};return bw(s,n,e),Object.assign(s,L3(e,t)),s}function B3(e,t){const n={},s=P3(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const V3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Xg(e){return typeof e!="string"||e.includes("-")?!1:!!(V3.indexOf(e)>-1||/[A-Z]/u.test(e))}const k3={offset:"stroke-dashoffset",array:"stroke-dasharray"},U3={offset:"strokeDashoffset",array:"strokeDasharray"};function F3(e,t,n=1,s=0,l=!0){e.pathLength=1;const h=l?k3:U3;e[h.offset]=ne.transform(-s);const p=ne.transform(t),A=ne.transform(n);e[h.array]=`${p} ${A}`}function ux(e,t,n){return typeof e=="string"?e:ne.transform(t+n*e)}function j3(e,t,n){const s=ux(t,e.x,e.width),l=ux(n,e.y,e.height);return`${s} ${l}`}function Wg(e,{attrX:t,attrY:n,attrScale:s,originX:l,originY:h,pathLength:p,pathSpacing:A=1,pathOffset:T=0,...E},S,I){if(Yg(e,E,I),S){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:L,style:k,dimensions:G}=e;L.transform&&(G&&(k.transform=L.transform),delete L.transform),G&&(l!==void 0||h!==void 0||k.transform)&&(k.transformOrigin=j3(G,l!==void 0?l:.5,h!==void 0?h:.5)),t!==void 0&&(L.x=t),n!==void 0&&(L.y=n),s!==void 0&&(L.scale=s),p!==void 0&&F3(L,p,A,T,!1)}const Iw=()=>({...qg(),attrs:{}}),Qg=e=>typeof e=="string"&&e.toLowerCase()==="svg";function z3(e,t,n,s){const l=ct.useMemo(()=>{const h=Iw();return Wg(h,t,Qg(s),e.transformTemplate),{...h.attrs,style:{...h.style}}},[t]);if(e.style){const h={};bw(h,e.style,e),l.style={...h,...l.style}}return l}function H3(e=!1){return(n,s,l,{latestValues:h},p)=>{const T=(Xg(n)?z3:B3)(s,h,p,n),E=h3(s,typeof n=="string",e),S=n!==ct.Fragment?{...E,...T,ref:l}:{},{children:I}=s,L=ct.useMemo(()=>Wi(I)?I.get():I,[I]);return ct.createElement(n,{...S,children:L})}}function cx(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function Kg(e,t,n,s){if(typeof t=="function"){const[l,h]=cx(s);t=t(n!==void 0?n:e.custom,l,h)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[l,h]=cx(s);t=t(n!==void 0?n:e.custom,l,h)}return t}const B1=e=>Array.isArray(e),G3=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Y3=e=>B1(e)?e[e.length-1]||0:e;function mf(e){const t=Wi(e)?e.get():e;return G3(t)?t.toValue():t}function q3({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},s,l,h){const p={latestValues:X3(s,l,h,e),renderState:t()};return n&&(p.onMount=A=>n({props:s,current:A,...p}),p.onUpdate=A=>n(A)),p}const Rw=e=>(t,n)=>{const s=ct.useContext(td),l=ct.useContext(Ig),h=()=>q3(e,t,s,l);return n?h():Fb(h)};function X3(e,t,n,s){const l={},h=s(e,{});for(const L in h)l[L]=mf(h[L]);let{initial:p,animate:A}=e;const T=nd(e),E=Aw(e);t&&E&&!T&&e.inherit!==!1&&(p===void 0&&(p=t.initial),A===void 0&&(A=t.animate));let S=n?n.initial===!1:!1;S=S||p===!1;const I=S?A:p;if(I&&typeof I!="boolean"&&!ed(I)){const L=Array.isArray(I)?I:[I];for(let k=0;k<L.length;k++){const G=Kg(e,L[k]);if(G){const{transitionEnd:W,transition:Y,...Q}=G;for(const rt in Q){let nt=Q[rt];if(Array.isArray(nt)){const _t=S?nt.length-1:0;nt=nt[_t]}nt!==null&&(l[rt]=nt)}for(const rt in W)l[rt]=W[rt]}}}return l}function Zg(e,t,n){var h;const{style:s}=e,l={};for(const p in s)(Wi(s[p])||t.style&&Wi(t.style[p])||Cw(p,e)||((h=n==null?void 0:n.getValue(p))==null?void 0:h.liveStyle)!==void 0)&&(l[p]=s[p]);return l}const W3={useVisualState:Rw({scrapeMotionValuesFromProps:Zg,createRenderState:qg})};function Dw(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}function Nw(e,{style:t,vars:n},s,l){Object.assign(e.style,t,l&&l.getProjectionStyles(s));for(const h in n)e.style.setProperty(h,n[h])}const Mw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ow(e,t,n,s){Nw(e,t,void 0,s);for(const l in t.attrs)e.setAttribute(Mw.has(l)?l:jg(l),t.attrs[l])}function Lw(e,t,n){const s=Zg(e,t,n);for(const l in e)if(Wi(e[l])||Wi(t[l])){const h=au.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;s[h]=e[l]}return s}const hx=["x","y","width","height","cx","cy","r"],Q3={useVisualState:Rw({scrapeMotionValuesFromProps:Lw,createRenderState:Iw,onUpdate:({props:e,prevProps:t,current:n,renderState:s,latestValues:l})=>{if(!n)return;let h=!!e.drag;if(!h){for(const A in l)if(Wo.has(A)){h=!0;break}}if(!h)return;let p=!t;if(t)for(let A=0;A<hx.length;A++){const T=hx[A];e[T]!==t[T]&&(p=!0)}p&&yn.read(()=>{Dw(n,s),yn.render(()=>{Wg(s,l,Qg(n.tagName),e.transformTemplate),Ow(n,s)})})}})};function K3(e,t){return function(s,{forwardMotionProps:l}={forwardMotionProps:!1}){const p={...Xg(s)?Q3:W3,preloadedFeatures:e,useRender:H3(l),createVisualElement:t,Component:s};return A3(p)}}function Ic(e,t,n){const s=e.getProps();return Kg(s,t,n!==void 0?n:s.custom,e)}const Pw=new Set(["width","height","top","left","right","bottom",...au]);function Z3(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,_c(n))}function J3(e,t){const n=Ic(e,t);let{transitionEnd:s={},transition:l={},...h}=n||{};h={...h,...s};for(const p in h){const A=Y3(h[p]);Z3(e,p,A)}}function $3(e){return!!(Wi(e)&&e.add)}function V1(e,t){const n=e.getValue("willChange");if($3(n))return n.add(t);if(!n&&L1.WillChange){const s=new L1.WillChange("auto");e.addValue("willChange",s),s.add(t)}}function Bw(e){return e.props[ww]}const Vw=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,t4=1e-7,e4=12;function n4(e,t,n,s,l){let h,p,A=0;do p=t+(n-t)/2,h=Vw(p,s,l)-e,h>0?n=p:t=p;while(Math.abs(h)>t4&&++A<e4);return p}function qc(e,t,n,s){if(e===t&&n===s)return es;const l=h=>n4(h,0,1,e,n);return h=>h===0||h===1?h:Vw(l(h),t,s)}const kw=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Uw=e=>t=>1-e(1-t),Fw=qc(.33,1.53,.69,.99),Jg=Uw(Fw),jw=kw(Jg),zw=e=>(e*=2)<1?.5*Jg(e):.5*(2-Math.pow(2,-10*(e-1))),$g=e=>1-Math.sin(Math.acos(e)),Hw=Uw($g),Gw=kw($g),Yw=e=>/^0[^.\s]+$/u.test(e);function i4(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Yw(e):!0}const dc=e=>Math.round(e*1e5)/1e5,tm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function r4(e){return e==null}const s4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,em=(e,t)=>n=>!!(typeof n=="string"&&s4.test(n)&&n.startsWith(e)||t&&!r4(n)&&Object.prototype.hasOwnProperty.call(n,t)),qw=(e,t,n)=>s=>{if(typeof s!="string")return s;const[l,h,p,A]=s.match(tm);return{[e]:parseFloat(l),[t]:parseFloat(h),[n]:parseFloat(p),alpha:A!==void 0?parseFloat(A):1}},a4=e=>pa(0,255,e),h1={...ou,transform:e=>Math.round(a4(e))},jo={test:em("rgb","red"),parse:qw("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+h1.transform(e)+", "+h1.transform(t)+", "+h1.transform(n)+", "+dc(bc.transform(s))+")"};function o4(e){let t="",n="",s="",l="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),l=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),l=e.substring(4,5),t+=t,n+=n,s+=s,l+=l),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:l?parseInt(l,16)/255:1}}const k1={test:em("#"),parse:o4,transform:jo.transform},Fl={test:em("hsl","hue"),parse:qw("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+Ls.transform(dc(t))+", "+Ls.transform(dc(n))+", "+dc(bc.transform(s))+")"},Yi={test:e=>jo.test(e)||k1.test(e)||Fl.test(e),parse:e=>jo.test(e)?jo.parse(e):Fl.test(e)?Fl.parse(e):k1.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?jo.transform(e):Fl.transform(e)},l4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function u4(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(tm))==null?void 0:t.length)||0)+(((n=e.match(l4))==null?void 0:n.length)||0)>0}const Xw="number",Ww="color",c4="var",h4="var(",fx="${}",f4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Rc(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},l=[];let h=0;const A=t.replace(f4,T=>(Yi.test(T)?(s.color.push(h),l.push(Ww),n.push(Yi.parse(T))):T.startsWith(h4)?(s.var.push(h),l.push(c4),n.push(T)):(s.number.push(h),l.push(Xw),n.push(parseFloat(T))),++h,fx)).split(fx);return{values:n,split:A,indexes:s,types:l}}function Qw(e){return Rc(e).values}function Kw(e){const{split:t,types:n}=Rc(e),s=t.length;return l=>{let h="";for(let p=0;p<s;p++)if(h+=t[p],l[p]!==void 0){const A=n[p];A===Xw?h+=dc(l[p]):A===Ww?h+=Yi.transform(l[p]):h+=l[p]}return h}}const d4=e=>typeof e=="number"?0:e;function g4(e){const t=Qw(e);return Kw(e)(t.map(d4))}const co={test:u4,parse:Qw,createTransformer:Kw,getAnimatableNone:g4},m4=new Set(["brightness","contrast","saturate","opacity"]);function p4(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(tm)||[];if(!s)return e;const l=n.replace(s,"");let h=m4.has(t)?1:0;return s!==n&&(h*=100),t+"("+h+l+")"}const y4=/\b([a-z-]*)\(.*?\)/gu,U1={...co,getAnimatableNone:e=>{const t=e.match(y4);return t?t.map(p4).join(" "):e}},x4={...Gg,color:Yi,backgroundColor:Yi,outlineColor:Yi,fill:Yi,stroke:Yi,borderColor:Yi,borderTopColor:Yi,borderRightColor:Yi,borderBottomColor:Yi,borderLeftColor:Yi,filter:U1,WebkitFilter:U1},Zw=e=>x4[e];function Jw(e,t){let n=Zw(e);return n!==U1&&(n=co),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const E4=new Set(["auto","none","0"]);function A4(e,t,n){let s=0,l;for(;s<e.length&&!l;){const h=e[s];typeof h=="string"&&!E4.has(h)&&Rc(h).values.length&&(l=e[s]),s++}if(l&&n)for(const h of t)e[h]=Jw(n,l)}const zo=e=>e*180/Math.PI,F1=e=>{const t=zo(Math.atan2(e[1],e[0]));return j1(t)},w4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:F1,rotateZ:F1,skewX:e=>zo(Math.atan(e[1])),skewY:e=>zo(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},j1=e=>(e=e%360,e<0&&(e+=360),e),dx=F1,gx=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),mx=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),T4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:gx,scaleY:mx,scale:e=>(gx(e)+mx(e))/2,rotateX:e=>j1(zo(Math.atan2(e[6],e[5]))),rotateY:e=>j1(zo(Math.atan2(-e[2],e[0]))),rotateZ:dx,rotate:dx,skewX:e=>zo(Math.atan(e[4])),skewY:e=>zo(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function px(e){return e.includes("scale")?1:0}function z1(e,t){if(!e||e==="none")return px(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,l;if(n)s=T4,l=n;else{const A=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=w4,l=A}if(!l)return px(t);const h=s[t],p=l[1].split(",").map(_4);return typeof h=="function"?h(p):p[h]}const v4=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return z1(n,t)};function _4(e){return parseFloat(e.trim())}const yx=e=>e===ou||e===ne,C4=new Set(["x","y","z"]),S4=au.filter(e=>!C4.has(e));function b4(e){const t=[];return S4.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const Ql={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>z1(t,"x"),y:(e,{transform:t})=>z1(t,"y")};Ql.translateX=Ql.x;Ql.translateY=Ql.y;const Go=new Set;let H1=!1,G1=!1;function $w(){if(G1){const e=Array.from(Go).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const l=b4(s);l.length&&(n.set(s,l),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const l=n.get(s);l&&l.forEach(([h,p])=>{var A;(A=s.getValue(h))==null||A.set(p)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}G1=!1,H1=!1,Go.forEach(e=>e.complete()),Go.clear()}function tT(){Go.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(G1=!0)})}function I4(){tT(),$w()}class nm{constructor(t,n,s,l,h,p=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=l,this.element=h,this.isAsync=p}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Go.add(this),H1||(H1=!0,yn.read(tT),yn.resolveKeyframes($w))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:l}=this;for(let h=0;h<t.length;h++)if(t[h]===null)if(h===0){const p=l==null?void 0:l.get(),A=t[t.length-1];if(p!==void 0)t[0]=p;else if(s&&n){const T=s.readValue(n,A);T!=null&&(t[0]=T)}t[0]===void 0&&(t[0]=A),l&&p===void 0&&l.set(t[0])}else t[h]=t[h-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Go.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Go.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const eT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),R4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function D4(e){const t=R4.exec(e);if(!t)return[,];const[,n,s,l]=t;return[`--${n??s}`,l]}function nT(e,t,n=1){const[s,l]=D4(e);if(!s)return;const h=window.getComputedStyle(t).getPropertyValue(s);if(h){const p=h.trim();return eT(p)?parseFloat(p):p}return Hg(l)?nT(l,t,n+1):l}const iT=e=>t=>t.test(e),N4={test:e=>e==="auto",parse:e=>e},rT=[ou,ne,Ls,io,I3,b3,N4],xx=e=>rT.find(iT(e));class sT extends nm{constructor(t,n,s,l,h){super(t,n,s,l,h,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let T=0;T<t.length;T++){let E=t[T];if(typeof E=="string"&&(E=E.trim(),Hg(E))){const S=nT(E,n.current);S!==void 0&&(t[T]=S),T===t.length-1&&(this.finalKeyframe=E)}}if(this.resolveNoneKeyframes(),!Pw.has(s)||t.length!==2)return;const[l,h]=t,p=xx(l),A=xx(h);if(p!==A)if(yx(p)&&yx(A))for(let T=0;T<t.length;T++){const E=t[T];typeof E=="string"&&(t[T]=parseFloat(E))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let l=0;l<t.length;l++)i4(t[l])&&s.push(l);s.length&&A4(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ql[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const l=n[n.length-1];l!==void 0&&t.getValue(s,l).jump(l,!1)}measureEndState(){var A;const{element:t,name:n,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const l=t.getValue(n);l&&l.jump(this.measuredOrigin,!1);const h=s.length-1,p=s[h];s[h]=Ql[n](t.measureViewportBox(),window.getComputedStyle(t.current)),p!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=p),(A=this.removedTransforms)!=null&&A.length&&this.removedTransforms.forEach(([T,E])=>{t.getValue(T).set(E)}),this.resolveNoneKeyframes()}}const Ex=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(co.test(e)||e==="0")&&!e.startsWith("url("));function M4(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function O4(e,t,n,s){const l=e[0];if(l===null)return!1;if(t==="display"||t==="visibility")return!0;const h=e[e.length-1],p=Ex(l,t),A=Ex(h,t);return!p||!A?!1:M4(e)||(n==="spring"||Lg(n))&&s}const L4=e=>e!==null;function id(e,{repeat:t,repeatType:n="loop"},s){const l=e.filter(L4),h=t&&n!=="loop"&&t%2===1?0:l.length-1;return!h||s===void 0?l[h]:s}const P4=40;class aT{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:l=0,repeatDelay:h=0,repeatType:p="loop",...A}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Os.now(),this.options={autoplay:t,delay:n,type:s,repeat:l,repeatDelay:h,repeatType:p,...A},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>P4?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&I4(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Os.now(),this.hasAttemptedResolve=!0;const{name:s,type:l,velocity:h,delay:p,onComplete:A,onUpdate:T,isGenerator:E}=this.options;if(!E&&!O4(t,s,l,h))if(p)this.options.duration=0;else{T&&T(id(t,this.options,n)),A&&A(),this.resolveFinishedPromise();return}const S=this.initPlayback(t,n);S!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...S},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Pn=(e,t,n)=>e+(t-e)*n;function f1(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function B4({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let l=0,h=0,p=0;if(!t)l=h=p=n;else{const A=n<.5?n*(1+t):n+t-n*t,T=2*n-A;l=f1(T,A,e+1/3),h=f1(T,A,e),p=f1(T,A,e-1/3)}return{red:Math.round(l*255),green:Math.round(h*255),blue:Math.round(p*255),alpha:s}}function bf(e,t){return n=>n>0?t:e}const d1=(e,t,n)=>{const s=e*e,l=n*(t*t-s)+s;return l<0?0:Math.sqrt(l)},V4=[k1,jo,Fl],k4=e=>V4.find(t=>t.test(e));function Ax(e){const t=k4(e);if(!t)return!1;let n=t.parse(e);return t===Fl&&(n=B4(n)),n}const wx=(e,t)=>{const n=Ax(e),s=Ax(t);if(!n||!s)return bf(e,t);const l={...n};return h=>(l.red=d1(n.red,s.red,h),l.green=d1(n.green,s.green,h),l.blue=d1(n.blue,s.blue,h),l.alpha=Pn(n.alpha,s.alpha,h),jo.transform(l))},U4=(e,t)=>n=>t(e(n)),Xc=(...e)=>e.reduce(U4),Y1=new Set(["none","hidden"]);function F4(e,t){return Y1.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function j4(e,t){return n=>Pn(e,t,n)}function im(e){return typeof e=="number"?j4:typeof e=="string"?Hg(e)?bf:Yi.test(e)?wx:G4:Array.isArray(e)?oT:typeof e=="object"?Yi.test(e)?wx:z4:bf}function oT(e,t){const n=[...e],s=n.length,l=e.map((h,p)=>im(h)(h,t[p]));return h=>{for(let p=0;p<s;p++)n[p]=l[p](h);return n}}function z4(e,t){const n={...e,...t},s={};for(const l in n)e[l]!==void 0&&t[l]!==void 0&&(s[l]=im(e[l])(e[l],t[l]));return l=>{for(const h in s)n[h]=s[h](l);return n}}function H4(e,t){const n=[],s={color:0,var:0,number:0};for(let l=0;l<t.values.length;l++){const h=t.types[l],p=e.indexes[h][s[h]],A=e.values[p]??0;n[l]=A,s[h]++}return n}const G4=(e,t)=>{const n=co.createTransformer(t),s=Rc(e),l=Rc(t);return s.indexes.var.length===l.indexes.var.length&&s.indexes.color.length===l.indexes.color.length&&s.indexes.number.length>=l.indexes.number.length?Y1.has(e)&&!l.values.length||Y1.has(t)&&!s.values.length?F4(e,t):Xc(oT(H4(s,l),l.values),n):bf(e,t)};function lT(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Pn(e,t,n):im(e)(e,t)}const Y4=5;function uT(e,t,n){const s=Math.max(t-Y4,0);return cw(n-e(s),t-s)}const qn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Tx=.001;function q4({duration:e=qn.duration,bounce:t=qn.bounce,velocity:n=qn.velocity,mass:s=qn.mass}){let l,h,p=1-t;p=pa(qn.minDamping,qn.maxDamping,p),e=pa(qn.minDuration,qn.maxDuration,Ms(e)),p<1?(l=E=>{const S=E*p,I=S*e,L=S-n,k=q1(E,p),G=Math.exp(-I);return Tx-L/k*G},h=E=>{const I=E*p*e,L=I*n+n,k=Math.pow(p,2)*Math.pow(E,2)*e,G=Math.exp(-I),W=q1(Math.pow(E,2),p);return(-l(E)+Tx>0?-1:1)*((L-k)*G)/W}):(l=E=>{const S=Math.exp(-E*e),I=(E-n)*e+1;return-.001+S*I},h=E=>{const S=Math.exp(-E*e),I=(n-E)*(e*e);return S*I});const A=5/e,T=W4(l,h,A);if(e=Ns(e),isNaN(T))return{stiffness:qn.stiffness,damping:qn.damping,duration:e};{const E=Math.pow(T,2)*s;return{stiffness:E,damping:p*2*Math.sqrt(s*E),duration:e}}}const X4=12;function W4(e,t,n){let s=n;for(let l=1;l<X4;l++)s=s-e(s)/t(s);return s}function q1(e,t){return e*Math.sqrt(1-t*t)}const Q4=["duration","bounce"],K4=["stiffness","damping","mass"];function vx(e,t){return t.some(n=>e[n]!==void 0)}function Z4(e){let t={velocity:qn.velocity,stiffness:qn.stiffness,damping:qn.damping,mass:qn.mass,isResolvedFromDuration:!1,...e};if(!vx(e,K4)&&vx(e,Q4))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),l=s*s,h=2*pa(.05,1,1-(e.bounce||0))*Math.sqrt(l);t={...t,mass:qn.mass,stiffness:l,damping:h}}else{const n=q4(e);t={...t,...n,mass:qn.mass},t.isResolvedFromDuration=!0}return t}function If(e=qn.visualDuration,t=qn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:l}=n;const h=n.keyframes[0],p=n.keyframes[n.keyframes.length-1],A={done:!1,value:h},{stiffness:T,damping:E,mass:S,duration:I,velocity:L,isResolvedFromDuration:k}=Z4({...n,velocity:-Ms(n.velocity||0)}),G=L||0,W=E/(2*Math.sqrt(T*S)),Y=p-h,Q=Ms(Math.sqrt(T/S)),rt=Math.abs(Y)<5;s||(s=rt?qn.restSpeed.granular:qn.restSpeed.default),l||(l=rt?qn.restDelta.granular:qn.restDelta.default);let nt;if(W<1){const St=q1(Q,W);nt=Lt=>{const z=Math.exp(-W*Q*Lt);return p-z*((G+W*Q*Y)/St*Math.sin(St*Lt)+Y*Math.cos(St*Lt))}}else if(W===1)nt=St=>p-Math.exp(-Q*St)*(Y+(G+Q*Y)*St);else{const St=Q*Math.sqrt(W*W-1);nt=Lt=>{const z=Math.exp(-W*Q*Lt),F=Math.min(St*Lt,300);return p-z*((G+W*Q*Y)*Math.sinh(F)+St*Y*Math.cosh(F))/St}}const _t={calculatedDuration:k&&I||null,next:St=>{const Lt=nt(St);if(k)A.done=St>=I;else{let z=0;W<1&&(z=St===0?Ns(G):uT(nt,St,Lt));const F=Math.abs(z)<=s,V=Math.abs(p-Lt)<=l;A.done=F&&V}return A.value=A.done?p:Lt,A},toString:()=>{const St=Math.min(Bg(_t),Cf),Lt=hw(z=>_t.next(St*z).value,St,30);return St+"ms "+Lt},toTransition:()=>{}};return _t}If.applyToOptions=e=>{const t=Qb(e,100,If);return e.ease=vc()?t.ease:"easeOut",e.duration=Ns(t.duration),e.type="keyframes",e};function _x({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:l=10,bounceStiffness:h=500,modifyTarget:p,min:A,max:T,restDelta:E=.5,restSpeed:S}){const I=e[0],L={done:!1,value:I},k=F=>A!==void 0&&F<A||T!==void 0&&F>T,G=F=>A===void 0?T:T===void 0||Math.abs(A-F)<Math.abs(T-F)?A:T;let W=n*t;const Y=I+W,Q=p===void 0?Y:p(Y);Q!==Y&&(W=Q-I);const rt=F=>-W*Math.exp(-F/s),nt=F=>Q+rt(F),_t=F=>{const V=rt(F),J=nt(F);L.done=Math.abs(V)<=E,L.value=L.done?Q:J};let St,Lt;const z=F=>{k(L.value)&&(St=F,Lt=If({keyframes:[L.value,G(L.value)],velocity:uT(nt,F,L.value),damping:l,stiffness:h,restDelta:E,restSpeed:S}))};return z(0),{calculatedDuration:null,next:F=>{let V=!1;return!Lt&&St===void 0&&(V=!0,_t(F),z(F)),St!==void 0&&F>=St?Lt.next(F-St):(!V&&_t(F),L)}}}const J4=qc(.42,0,1,1),$4=qc(0,0,.58,1),cT=qc(.42,0,.58,1),tI=e=>Array.isArray(e)&&typeof e[0]!="number",eI={linear:es,easeIn:J4,easeInOut:cT,easeOut:$4,circIn:$g,circInOut:Gw,circOut:Hw,backIn:Jg,backInOut:jw,backOut:Fw,anticipate:zw},Cx=e=>{if(Og(e)){uw(e.length===4);const[t,n,s,l]=e;return qc(t,n,s,l)}else if(typeof e=="string")return eI[e];return e};function nI(e,t,n){const s=[],l=n||lT,h=e.length-1;for(let p=0;p<h;p++){let A=l(e[p],e[p+1]);if(t){const T=Array.isArray(t)?t[p]||es:t;A=Xc(T,A)}s.push(A)}return s}function iI(e,t,{clamp:n=!0,ease:s,mixer:l}={}){const h=e.length;if(uw(h===t.length),h===1)return()=>t[0];if(h===2&&t[0]===t[1])return()=>t[1];const p=e[0]===e[1];e[0]>e[h-1]&&(e=[...e].reverse(),t=[...t].reverse());const A=nI(t,s,l),T=A.length,E=S=>{if(p&&S<e[0])return t[0];let I=0;if(T>1)for(;I<e.length-2&&!(S<e[I+1]);I++);const L=Tc(e[I],e[I+1],S);return A[I](L)};return n?S=>E(pa(e[0],e[h-1],S)):E}function rI(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const l=Tc(0,t,s);e.push(Pn(n,1,l))}}function sI(e){const t=[0];return rI(t,e.length-1),t}function aI(e,t){return e.map(n=>n*t)}function oI(e,t){return e.map(()=>t||cT).splice(0,e.length-1)}function Rf({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const l=tI(s)?s.map(Cx):Cx(s),h={done:!1,value:t[0]},p=aI(n&&n.length===t.length?n:sI(t),e),A=iI(p,t,{ease:Array.isArray(l)?l:oI(t,l)});return{calculatedDuration:e,next:T=>(h.value=A(T),h.done=T>=e,h)}}const lI=e=>{const t=({timestamp:n})=>e(n);return{start:()=>yn.update(t,!0),stop:()=>uo(t),now:()=>Ri.isProcessing?Ri.timestamp:Os.now()}},uI={decay:_x,inertia:_x,tween:Rf,keyframes:Rf,spring:If},cI=e=>e/100;class rm extends aT{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:T}=this.options;T&&T()};const{name:n,motionValue:s,element:l,keyframes:h}=this.options,p=(l==null?void 0:l.KeyframeResolver)||nm,A=(T,E)=>this.onKeyframesResolved(T,E);this.resolver=new p(h,A,n,s,l),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:l=0,repeatType:h,velocity:p=0}=this.options,A=Lg(n)?n:uI[n]||Rf;let T,E;A!==Rf&&typeof t[0]!="number"&&(T=Xc(cI,lT(t[0],t[1])),t=[0,100]);const S=A({...this.options,keyframes:t});h==="mirror"&&(E=A({...this.options,keyframes:[...t].reverse(),velocity:-p})),S.calculatedDuration===null&&(S.calculatedDuration=Bg(S));const{calculatedDuration:I}=S,L=I+l,k=L*(s+1)-l;return{generator:S,mirroredGenerator:E,mapPercentToKeyframes:T,calculatedDuration:I,resolvedDuration:L,totalDuration:k}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:F}=this.options;return{done:!0,value:F[F.length-1]}}const{finalKeyframe:l,generator:h,mirroredGenerator:p,mapPercentToKeyframes:A,keyframes:T,calculatedDuration:E,totalDuration:S,resolvedDuration:I}=s;if(this.startTime===null)return h.next(0);const{delay:L,repeat:k,repeatType:G,repeatDelay:W,onUpdate:Y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-S/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const Q=this.currentTime-L*(this.speed>=0?1:-1),rt=this.speed>=0?Q<0:Q>S;this.currentTime=Math.max(Q,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=S);let nt=this.currentTime,_t=h;if(k){const F=Math.min(this.currentTime,S)/I;let V=Math.floor(F),J=F%1;!J&&F>=1&&(J=1),J===1&&V--,V=Math.min(V,k+1),!!(V%2)&&(G==="reverse"?(J=1-J,W&&(J-=W/I)):G==="mirror"&&(_t=p)),nt=pa(0,1,J)*I}const St=rt?{done:!1,value:T[0]}:_t.next(nt);A&&(St.value=A(St.value));let{done:Lt}=St;!rt&&E!==null&&(Lt=this.speed>=0?this.currentTime>=S:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Lt);return z&&l!==void 0&&(St.value=id(T,this.options,l)),Y&&Y(St.value),z&&this.finish(),St}get duration(){const{resolved:t}=this;return t?Ms(t.calculatedDuration):0}get time(){return Ms(this.currentTime)}set time(t){t=Ns(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Ms(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=lI,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(h=>this.tick(h))),n&&n();const l=this.driver.now();this.holdTime!==null?this.startTime=l-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=l):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}get finished(){return this.currentFinishedPromise}}const hI=new Set(["opacity","clipPath","filter","transform"]),fI=Ng(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Df=10,dI=2e4;function gI(e){return Lg(e.type)||e.type==="spring"||!dw(e.ease)}function mI(e,t){const n=new rm({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const l=[];let h=0;for(;!s.done&&h<dI;)s=n.sample(h),l.push(s.value),h+=Df;return{times:void 0,keyframes:l,duration:h-Df,ease:"linear"}}const hT={anticipate:zw,backInOut:jw,circInOut:Gw};function pI(e){return e in hT}class Sx extends aT{constructor(t){super(t);const{name:n,motionValue:s,element:l,keyframes:h}=this.options;this.resolver=new sT(h,(p,A)=>this.onKeyframesResolved(p,A),n,s,l),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:s=300,times:l,ease:h,type:p,motionValue:A,name:T,startTime:E}=this.options;if(!A.owner||!A.owner.current)return!1;if(typeof h=="string"&&vc()&&pI(h)&&(h=hT[h]),gI(this.options)){const{onComplete:I,onUpdate:L,motionValue:k,element:G,...W}=this.options,Y=mI(t,W);t=Y.keyframes,t.length===1&&(t[1]=t[0]),s=Y.duration,l=Y.times,h=Y.ease,p="keyframes"}const S=Wb(A.owner.current,T,t,{...this.options,duration:s,times:l,ease:h});return S.startTime=E??this.calcStartTime(),this.pendingTimeline?(tx(S,this.pendingTimeline),this.pendingTimeline=void 0):S.onfinish=()=>{const{onComplete:I}=this.options;A.set(id(t,this.options,n)),I&&I(),this.cancel(),this.resolveFinishedPromise()},{animation:S,duration:s,times:l,type:p,ease:h,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Ms(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Ms(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=Ns(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}get finished(){return this.resolved.animation.finished}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return es;const{animation:s}=n;tx(s,t)}return es}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:s,duration:l,type:h,ease:p,times:A}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:E,onUpdate:S,onComplete:I,element:L,...k}=this.options,G=new rm({...k,keyframes:s,duration:l,type:h,ease:p,times:A,isGenerator:!0}),W=Ns(this.time);E.setWithVelocity(G.sample(W-Df).value,G.sample(W).value,Df)}const{onStop:T}=this.options;T&&T(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:s,repeatDelay:l,repeatType:h,damping:p,type:A}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:T,transformTemplate:E}=n.owner.getProps();return fI()&&s&&hI.has(s)&&(s!=="transform"||!E)&&!T&&!l&&h!=="mirror"&&p!==0&&A!=="inertia"}}const yI={type:"spring",stiffness:500,damping:25,restSpeed:10},xI=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),EI={type:"keyframes",duration:.8},AI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wI=(e,{keyframes:t})=>t.length>2?EI:Wo.has(e)?e.startsWith("scale")?xI(t[1]):yI:AI;function TI({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:l,repeat:h,repeatType:p,repeatDelay:A,from:T,elapsed:E,...S}){return!!Object.keys(S).length}const sm=(e,t,n,s={},l,h)=>p=>{const A=Pg(s,e)||{},T=A.delay||s.delay||0;let{elapsed:E=0}=s;E=E-Ns(T);let S={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...A,delay:-E,onUpdate:L=>{t.set(L),A.onUpdate&&A.onUpdate(L)},onComplete:()=>{p(),A.onComplete&&A.onComplete()},name:e,motionValue:t,element:h?void 0:l};TI(A)||(S={...S,...wI(e,S)}),S.duration&&(S.duration=Ns(S.duration)),S.repeatDelay&&(S.repeatDelay=Ns(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let I=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(S.duration=0,S.delay===0&&(I=!0)),S.allowFlatten=!A.type&&!A.ease,I&&!h&&t.get()!==void 0){const L=id(S.keyframes,A);if(L!==void 0)return yn.update(()=>{S.onUpdate(L),S.onComplete()}),new Yb([])}return!h&&Sx.supports(S)?new Sx(S):new rm(S)};function vI({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function fT(e,t,{delay:n=0,transitionOverride:s,type:l}={}){let{transition:h=e.getDefaultTransition(),transitionEnd:p,...A}=t;s&&(h=s);const T=[],E=l&&e.animationState&&e.animationState.getState()[l];for(const S in A){const I=e.getValue(S,e.latestValues[S]??null),L=A[S];if(L===void 0||E&&vI(E,S))continue;const k={delay:n,...Pg(h||{},S)};let G=!1;if(window.MotionHandoffAnimation){const Y=Bw(e);if(Y){const Q=window.MotionHandoffAnimation(Y,S,yn);Q!==null&&(k.startTime=Q,G=!0)}}V1(e,S),I.start(sm(S,I,L,e.shouldReduceMotion&&Pw.has(S)?{type:!1}:k,e,G));const W=I.animation;W&&T.push(W)}return p&&Promise.all(T).then(()=>{yn.update(()=>{p&&J3(e,p)})}),T}function X1(e,t,n={}){var T;const s=Ic(e,t,n.type==="exit"?(T=e.presenceContext)==null?void 0:T.custom:void 0);let{transition:l=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(l=n.transitionOverride);const h=s?()=>Promise.all(fT(e,s,n)):()=>Promise.resolve(),p=e.variantChildren&&e.variantChildren.size?(E=0)=>{const{delayChildren:S=0,staggerChildren:I,staggerDirection:L}=l;return _I(e,t,S+E,I,L,n)}:()=>Promise.resolve(),{when:A}=l;if(A){const[E,S]=A==="beforeChildren"?[h,p]:[p,h];return E().then(()=>S())}else return Promise.all([h(),p(n.delay)])}function _I(e,t,n=0,s=0,l=1,h){const p=[],A=(e.variantChildren.size-1)*s,T=l===1?(E=0)=>E*s:(E=0)=>A-E*s;return Array.from(e.variantChildren).sort(CI).forEach((E,S)=>{E.notify("AnimationStart",t),p.push(X1(E,t,{...h,delay:n+T(S)}).then(()=>E.notify("AnimationComplete",t)))}),Promise.all(p)}function CI(e,t){return e.sortNodePosition(t)}function SI(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const l=t.map(h=>X1(e,h,n));s=Promise.all(l)}else if(typeof t=="string")s=X1(e,t,n);else{const l=typeof t=="function"?Ic(e,t,n.custom):t;s=Promise.all(fT(e,l,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}function dT(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}const bI=Fg.length;function gT(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?gT(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<bI;n++){const s=Fg[n],l=e.props[s];(Cc(l)||l===!1)&&(t[s]=l)}return t}const II=[...Ug].reverse(),RI=Ug.length;function DI(e){return t=>Promise.all(t.map(({animation:n,options:s})=>SI(e,n,s)))}function NI(e){let t=DI(e),n=bx(),s=!0;const l=T=>(E,S)=>{var L;const I=Ic(e,S,T==="exit"?(L=e.presenceContext)==null?void 0:L.custom:void 0);if(I){const{transition:k,transitionEnd:G,...W}=I;E={...E,...W,...G}}return E};function h(T){t=T(e)}function p(T){const{props:E}=e,S=gT(e.parent)||{},I=[],L=new Set;let k={},G=1/0;for(let Y=0;Y<RI;Y++){const Q=II[Y],rt=n[Q],nt=E[Q]!==void 0?E[Q]:S[Q],_t=Cc(nt),St=Q===T?rt.isActive:null;St===!1&&(G=Y);let Lt=nt===S[Q]&&nt!==E[Q]&&_t;if(Lt&&s&&e.manuallyAnimateOnMount&&(Lt=!1),rt.protectedKeys={...k},!rt.isActive&&St===null||!nt&&!rt.prevProp||ed(nt)||typeof nt=="boolean")continue;const z=MI(rt.prevProp,nt);let F=z||Q===T&&rt.isActive&&!Lt&&_t||Y>G&&_t,V=!1;const J=Array.isArray(nt)?nt:[nt];let tt=J.reduce(l(Q),{});St===!1&&(tt={});const{prevResolvedValues:K={}}=rt,q={...K,...tt},Ee=At=>{F=!0,L.has(At)&&(V=!0,L.delete(At)),rt.needsAnimating[At]=!0;const jt=e.getValue(At);jt&&(jt.liveStyle=!1)};for(const At in q){const jt=tt[At],ue=K[At];if(k.hasOwnProperty(At))continue;let $=!1;B1(jt)&&B1(ue)?$=!dT(jt,ue):$=jt!==ue,$?jt!=null?Ee(At):L.add(At):jt!==void 0&&L.has(At)?Ee(At):rt.protectedKeys[At]=!0}rt.prevProp=nt,rt.prevResolvedValues=tt,rt.isActive&&(k={...k,...tt}),s&&e.blockInitialAnimation&&(F=!1),F&&(!(Lt&&z)||V)&&I.push(...J.map(At=>({animation:At,options:{type:Q}})))}if(L.size){const Y={};if(typeof E.initial!="boolean"){const Q=Ic(e,Array.isArray(E.initial)?E.initial[0]:E.initial);Q&&Q.transition&&(Y.transition=Q.transition)}L.forEach(Q=>{const rt=e.getBaseTarget(Q),nt=e.getValue(Q);nt&&(nt.liveStyle=!0),Y[Q]=rt??null}),I.push({animation:Y})}let W=!!I.length;return s&&(E.initial===!1||E.initial===E.animate)&&!e.manuallyAnimateOnMount&&(W=!1),s=!1,W?t(I):Promise.resolve()}function A(T,E){var I;if(n[T].isActive===E)return Promise.resolve();(I=e.variantChildren)==null||I.forEach(L=>{var k;return(k=L.animationState)==null?void 0:k.setActive(T,E)}),n[T].isActive=E;const S=p(T);for(const L in n)n[L].protectedKeys={};return S}return{animateChanges:p,setActive:A,setAnimateFunction:h,getState:()=>n,reset:()=>{n=bx(),s=!0}}}function MI(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!dT(t,e):!1}function ko(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bx(){return{animate:ko(!0),whileInView:ko(),whileHover:ko(),whileTap:ko(),whileDrag:ko(),whileFocus:ko(),exit:ko()}}class Eo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class OI extends Eo{constructor(t){super(t),t.animationState||(t.animationState=NI(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();ed(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let LI=0;class PI extends Eo{constructor(){super(...arguments),this.id=LI++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const l=this.node.animationState.setActive("exit",!t);n&&!t&&l.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const BI={animation:{Feature:OI},exit:{Feature:PI}};function Dc(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function Wc(e){return{point:{x:e.pageX,y:e.pageY}}}const VI=e=>t=>kg(t)&&e(t,Wc(t));function gc(e,t,n,s){return Dc(e,t,VI(n),s)}function mT({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function kI({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function UI(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}const pT=1e-4,FI=1-pT,jI=1+pT,yT=.01,zI=0-yT,HI=0+yT;function tr(e){return e.max-e.min}function GI(e,t,n){return Math.abs(e-t)<=n}function Ix(e,t,n,s=.5){e.origin=s,e.originPoint=Pn(t.min,t.max,e.origin),e.scale=tr(n)/tr(t),e.translate=Pn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=FI&&e.scale<=jI||isNaN(e.scale))&&(e.scale=1),(e.translate>=zI&&e.translate<=HI||isNaN(e.translate))&&(e.translate=0)}function mc(e,t,n,s){Ix(e.x,t.x,n.x,s?s.originX:void 0),Ix(e.y,t.y,n.y,s?s.originY:void 0)}function Rx(e,t,n){e.min=n.min+t.min,e.max=e.min+tr(t)}function YI(e,t,n){Rx(e.x,t.x,n.x),Rx(e.y,t.y,n.y)}function Dx(e,t,n){e.min=t.min-n.min,e.max=e.min+tr(t)}function pc(e,t,n){Dx(e.x,t.x,n.x),Dx(e.y,t.y,n.y)}const Nx=()=>({translate:0,scale:1,origin:0,originPoint:0}),jl=()=>({x:Nx(),y:Nx()}),Mx=()=>({min:0,max:0}),$n=()=>({x:Mx(),y:Mx()});function $r(e){return[e("x"),e("y")]}function g1(e){return e===void 0||e===1}function W1({scale:e,scaleX:t,scaleY:n}){return!g1(e)||!g1(t)||!g1(n)}function Uo(e){return W1(e)||xT(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function xT(e){return Ox(e.x)||Ox(e.y)}function Ox(e){return e&&e!=="0%"}function Nf(e,t,n){const s=e-n,l=t*s;return n+l}function Lx(e,t,n,s,l){return l!==void 0&&(e=Nf(e,l,s)),Nf(e,n,s)+t}function Q1(e,t=0,n=1,s,l){e.min=Lx(e.min,t,n,s,l),e.max=Lx(e.max,t,n,s,l)}function ET(e,{x:t,y:n}){Q1(e.x,t.translate,t.scale,t.originPoint),Q1(e.y,n.translate,n.scale,n.originPoint)}const Px=.999999999999,Bx=1.0000000000001;function qI(e,t,n,s=!1){const l=n.length;if(!l)return;t.x=t.y=1;let h,p;for(let A=0;A<l;A++){h=n[A],p=h.projectionDelta;const{visualElement:T}=h.options;T&&T.props.style&&T.props.style.display==="contents"||(s&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Hl(e,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),p&&(t.x*=p.x.scale,t.y*=p.y.scale,ET(e,p)),s&&Uo(h.latestValues)&&Hl(e,h.latestValues))}t.x<Bx&&t.x>Px&&(t.x=1),t.y<Bx&&t.y>Px&&(t.y=1)}function zl(e,t){e.min=e.min+t,e.max=e.max+t}function Vx(e,t,n,s,l=.5){const h=Pn(e.min,e.max,l);Q1(e,t,n,h,s)}function Hl(e,t){Vx(e.x,t.x,t.scaleX,t.scale,t.originX),Vx(e.y,t.y,t.scaleY,t.scale,t.originY)}function AT(e,t){return mT(UI(e.getBoundingClientRect(),t))}function XI(e,t,n){const s=AT(e,n),{scroll:l}=t;return l&&(zl(s.x,l.offset.x),zl(s.y,l.offset.y)),s}const wT=({current:e})=>e?e.ownerDocument.defaultView:null,kx=(e,t)=>Math.abs(e-t);function WI(e,t){const n=kx(e.x,t.x),s=kx(e.y,t.y);return Math.sqrt(n**2+s**2)}class TT{constructor(t,n,{transformPagePoint:s,contextWindow:l,dragSnapToOrigin:h=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=p1(this.lastMoveEventInfo,this.history),L=this.startEvent!==null,k=WI(I.offset,{x:0,y:0})>=3;if(!L&&!k)return;const{point:G}=I,{timestamp:W}=Ri;this.history.push({...G,timestamp:W});const{onStart:Y,onMove:Q}=this.handlers;L||(Y&&Y(this.lastMoveEvent,I),this.startEvent=this.lastMoveEvent),Q&&Q(this.lastMoveEvent,I)},this.handlePointerMove=(I,L)=>{this.lastMoveEvent=I,this.lastMoveEventInfo=m1(L,this.transformPagePoint),yn.update(this.updatePoint,!0)},this.handlePointerUp=(I,L)=>{this.end();const{onEnd:k,onSessionEnd:G,resumeAnimation:W}=this.handlers;if(this.dragSnapToOrigin&&W&&W(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Y=p1(I.type==="pointercancel"?this.lastMoveEventInfo:m1(L,this.transformPagePoint),this.history);this.startEvent&&k&&k(I,Y),G&&G(I,Y)},!kg(t))return;this.dragSnapToOrigin=h,this.handlers=n,this.transformPagePoint=s,this.contextWindow=l||window;const p=Wc(t),A=m1(p,this.transformPagePoint),{point:T}=A,{timestamp:E}=Ri;this.history=[{...T,timestamp:E}];const{onSessionStart:S}=n;S&&S(t,p1(A,this.history)),this.removeListeners=Xc(gc(this.contextWindow,"pointermove",this.handlePointerMove),gc(this.contextWindow,"pointerup",this.handlePointerUp),gc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),uo(this.updatePoint)}}function m1(e,t){return t?{point:t(e.point)}:e}function Ux(e,t){return{x:e.x-t.x,y:e.y-t.y}}function p1({point:e},t){return{point:e,delta:Ux(e,vT(t)),offset:Ux(e,QI(t)),velocity:KI(t,.1)}}function QI(e){return e[0]}function vT(e){return e[e.length-1]}function KI(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const l=vT(e);for(;n>=0&&(s=e[n],!(l.timestamp-s.timestamp>Ns(t)));)n--;if(!s)return{x:0,y:0};const h=Ms(l.timestamp-s.timestamp);if(h===0)return{x:0,y:0};const p={x:(l.x-s.x)/h,y:(l.y-s.y)/h};return p.x===1/0&&(p.x=0),p.y===1/0&&(p.y=0),p}function ZI(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?Pn(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?Pn(n,e,s.max):Math.min(e,n)),e}function Fx(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function JI(e,{top:t,left:n,bottom:s,right:l}){return{x:Fx(e.x,n,l),y:Fx(e.y,t,s)}}function jx(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function $I(e,t){return{x:jx(e.x,t.x),y:jx(e.y,t.y)}}function tR(e,t){let n=.5;const s=tr(e),l=tr(t);return l>s?n=Tc(t.min,t.max-s,e.min):s>l&&(n=Tc(e.min,e.max-l,t.min)),pa(0,1,n)}function eR(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const K1=.35;function nR(e=K1){return e===!1?e=0:e===!0&&(e=K1),{x:zx(e,"left","right"),y:zx(e,"top","bottom")}}function zx(e,t,n){return{min:Hx(e,t),max:Hx(e,n)}}function Hx(e,t){return typeof e=="number"?e:e[t]||0}const iR=new WeakMap;class rR{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$n(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const l=S=>{const{dragSnapToOrigin:I}=this.getProps();I?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Wc(S).point)},h=(S,I)=>{const{drag:L,dragPropagation:k,onDragStart:G}=this.getProps();if(L&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$b(L),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$r(Y=>{let Q=this.getAxisMotionValue(Y).get()||0;if(Ls.test(Q)){const{projection:rt}=this.visualElement;if(rt&&rt.layout){const nt=rt.layout.layoutBox[Y];nt&&(Q=tr(nt)*(parseFloat(Q)/100))}}this.originPoint[Y]=Q}),G&&yn.postRender(()=>G(S,I)),V1(this.visualElement,"transform");const{animationState:W}=this.visualElement;W&&W.setActive("whileDrag",!0)},p=(S,I)=>{const{dragPropagation:L,dragDirectionLock:k,onDirectionLock:G,onDrag:W}=this.getProps();if(!L&&!this.openDragLock)return;const{offset:Y}=I;if(k&&this.currentDirection===null){this.currentDirection=sR(Y),this.currentDirection!==null&&G&&G(this.currentDirection);return}this.updateAxis("x",I.point,Y),this.updateAxis("y",I.point,Y),this.visualElement.render(),W&&W(S,I)},A=(S,I)=>this.stop(S,I),T=()=>$r(S=>{var I;return this.getAnimationState(S)==="paused"&&((I=this.getAxisMotionValue(S).animation)==null?void 0:I.play())}),{dragSnapToOrigin:E}=this.getProps();this.panSession=new TT(t,{onSessionStart:l,onStart:h,onMove:p,onSessionEnd:A,resumeAnimation:T},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:E,contextWindow:wT(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:l}=n;this.startAnimation(l);const{onDragEnd:h}=this.getProps();h&&yn.postRender(()=>h(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:l}=this.getProps();if(!s||!sf(t,l,this.currentDirection))return;const h=this.getAxisMotionValue(t);let p=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(p=ZI(p,this.constraints[t],this.elastic[t])),h.set(p)}resolveConstraints(){var h;const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(h=this.visualElement.projection)==null?void 0:h.layout,l=this.constraints;t&&Ul(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=JI(s.layoutBox,t):this.constraints=!1,this.elastic=nR(n),l!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&$r(p=>{this.constraints!==!1&&this.getAxisMotionValue(p)&&(this.constraints[p]=eR(s.layoutBox[p],this.constraints[p]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Ul(t))return!1;const s=t.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const h=XI(s,l.root,this.visualElement.getTransformPagePoint());let p=$I(l.layout.layoutBox,h);if(n){const A=n(kI(p));this.hasMutatedConstraints=!!A,A&&(p=mT(A))}return p}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:l,dragTransition:h,dragSnapToOrigin:p,onDragTransitionEnd:A}=this.getProps(),T=this.constraints||{},E=$r(S=>{if(!sf(S,n,this.currentDirection))return;let I=T&&T[S]||{};p&&(I={min:0,max:0});const L=l?200:1e6,k=l?40:1e7,G={type:"inertia",velocity:s?t[S]:0,bounceStiffness:L,bounceDamping:k,timeConstant:750,restDelta:1,restSpeed:10,...h,...I};return this.startAxisValueAnimation(S,G)});return Promise.all(E).then(A)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return V1(this.visualElement,t),s.start(sm(t,s,0,n,this.visualElement,!1))}stopAnimation(){$r(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){$r(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),l=s[n];return l||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){$r(n=>{const{drag:s}=this.getProps();if(!sf(n,s,this.currentDirection))return;const{projection:l}=this.visualElement,h=this.getAxisMotionValue(n);if(l&&l.layout){const{min:p,max:A}=l.layout.layoutBox[n];h.set(t[n]-Pn(p,A,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Ul(n)||!s||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};$r(p=>{const A=this.getAxisMotionValue(p);if(A&&this.constraints!==!1){const T=A.get();l[p]=tR({min:T,max:T},this.constraints[p])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),$r(p=>{if(!sf(p,t,null))return;const A=this.getAxisMotionValue(p),{min:T,max:E}=this.constraints[p];A.set(Pn(T,E,l[p]))})}addListeners(){if(!this.visualElement.current)return;iR.set(this.visualElement,this);const t=this.visualElement.current,n=gc(t,"pointerdown",T=>{const{drag:E,dragListener:S=!0}=this.getProps();E&&S&&this.start(T)}),s=()=>{const{dragConstraints:T}=this.getProps();Ul(T)&&T.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,h=l.addEventListener("measure",s);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),yn.read(s);const p=Dc(window,"resize",()=>this.scalePositionWithinConstraints()),A=l.addEventListener("didUpdate",({delta:T,hasLayoutChanged:E})=>{this.isDragging&&E&&($r(S=>{const I=this.getAxisMotionValue(S);I&&(this.originPoint[S]+=T[S].translate,I.set(I.get()+T[S].translate))}),this.visualElement.render())});return()=>{p(),n(),h(),A&&A()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:l=!1,dragConstraints:h=!1,dragElastic:p=K1,dragMomentum:A=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:l,dragConstraints:h,dragElastic:p,dragMomentum:A}}}function sf(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function sR(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class aR extends Eo{constructor(t){super(t),this.removeGroupControls=es,this.removeListeners=es,this.controls=new rR(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||es}unmount(){this.removeGroupControls(),this.removeListeners()}}const Gx=e=>(t,n)=>{e&&yn.postRender(()=>e(t,n))};class oR extends Eo{constructor(){super(...arguments),this.removePointerDownListener=es}onPointerDown(t){this.session=new TT(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wT(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:l}=this.node.getProps();return{onSessionStart:Gx(t),onStart:Gx(n),onMove:s,onEnd:(h,p)=>{delete this.session,l&&yn.postRender(()=>l(h,p))}}}mount(){this.removePointerDownListener=gc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const pf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Yx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const sc={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ne.test(e))e=parseFloat(e);else return e;const n=Yx(e,t.target.x),s=Yx(e,t.target.y);return`${n}% ${s}%`}},lR={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,l=co.parse(e);if(l.length>5)return s;const h=co.createTransformer(e),p=typeof l[0]!="number"?1:0,A=n.x.scale*t.x,T=n.y.scale*t.y;l[0+p]/=A,l[1+p]/=T;const E=Pn(A,T,.5);return typeof l[2+p]=="number"&&(l[2+p]/=E),typeof l[3+p]=="number"&&(l[3+p]/=E),h(l)}};class uR extends ct.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:l}=this.props,{projection:h}=t;S3(cR),h&&(n.group&&n.group.add(h),s&&s.register&&l&&s.register(h),h.root.didUpdate(),h.addEventListener("animationComplete",()=>{this.safeToRemove()}),h.setOptions({...h.options,onExitComplete:()=>this.safeToRemove()})),pf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:l,isPresent:h}=this.props,p=s.projection;return p&&(p.isPresent=h,l||t.layoutDependency!==n||n===void 0||t.isPresent!==h?p.willUpdate():this.safeToRemove(),t.isPresent!==h&&(h?p.promote():p.relegate()||yn.postRender(()=>{const A=p.getStack();(!A||!A.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Vg.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:l}=t;l&&(l.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(l),s&&s.deregister&&s.deregister(l))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function _T(e){const[t,n]=zb(),s=ct.useContext(ow);return lt.jsx(uR,{...e,layoutGroup:s,switchLayoutGroup:ct.useContext(Tw),isPresent:t,safeToRemove:n})}const cR={borderRadius:{...sc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sc,borderTopRightRadius:sc,borderBottomLeftRadius:sc,borderBottomRightRadius:sc,boxShadow:lR};function hR(e,t,n){const s=Wi(e)?e:_c(e);return s.start(sm("",s,t,n)),s.animation}function fR(e){return e instanceof SVGElement&&e.tagName!=="svg"}const dR=(e,t)=>e.depth-t.depth;class gR{constructor(){this.children=[],this.isDirty=!1}add(t){Rg(this.children,t),this.isDirty=!0}remove(t){Dg(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(dR),this.isDirty=!1,this.children.forEach(t)}}function mR(e,t){const n=Os.now(),s=({timestamp:l})=>{const h=l-n;h>=t&&(uo(s),e(h-t))};return yn.read(s,!0),()=>uo(s)}const CT=["TopLeft","TopRight","BottomLeft","BottomRight"],pR=CT.length,qx=e=>typeof e=="string"?parseFloat(e):e,Xx=e=>typeof e=="number"||ne.test(e);function yR(e,t,n,s,l,h){l?(e.opacity=Pn(0,n.opacity??1,xR(s)),e.opacityExit=Pn(t.opacity??1,0,ER(s))):h&&(e.opacity=Pn(t.opacity??1,n.opacity??1,s));for(let p=0;p<pR;p++){const A=`border${CT[p]}Radius`;let T=Wx(t,A),E=Wx(n,A);if(T===void 0&&E===void 0)continue;T||(T=0),E||(E=0),T===0||E===0||Xx(T)===Xx(E)?(e[A]=Math.max(Pn(qx(T),qx(E),s),0),(Ls.test(E)||Ls.test(T))&&(e[A]+="%")):e[A]=E}(t.rotate||n.rotate)&&(e.rotate=Pn(t.rotate||0,n.rotate||0,s))}function Wx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const xR=ST(0,.5,Hw),ER=ST(.5,.95,es);function ST(e,t,n){return s=>s<e?0:s>t?1:n(Tc(e,t,s))}function Qx(e,t){e.min=t.min,e.max=t.max}function Zr(e,t){Qx(e.x,t.x),Qx(e.y,t.y)}function Kx(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Zx(e,t,n,s,l){return e-=t,e=Nf(e,1/n,s),l!==void 0&&(e=Nf(e,1/l,s)),e}function AR(e,t=0,n=1,s=.5,l,h=e,p=e){if(Ls.test(t)&&(t=parseFloat(t),t=Pn(p.min,p.max,t/100)-p.min),typeof t!="number")return;let A=Pn(h.min,h.max,s);e===h&&(A-=t),e.min=Zx(e.min,t,n,A,l),e.max=Zx(e.max,t,n,A,l)}function Jx(e,t,[n,s,l],h,p){AR(e,t[n],t[s],t[l],t.scale,h,p)}const wR=["x","scaleX","originX"],TR=["y","scaleY","originY"];function $x(e,t,n,s){Jx(e.x,t,wR,n?n.x:void 0,s?s.x:void 0),Jx(e.y,t,TR,n?n.y:void 0,s?s.y:void 0)}function tE(e){return e.translate===0&&e.scale===1}function bT(e){return tE(e.x)&&tE(e.y)}function eE(e,t){return e.min===t.min&&e.max===t.max}function vR(e,t){return eE(e.x,t.x)&&eE(e.y,t.y)}function nE(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function IT(e,t){return nE(e.x,t.x)&&nE(e.y,t.y)}function iE(e){return tr(e.x)/tr(e.y)}function rE(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class _R{constructor(){this.members=[]}add(t){Rg(this.members,t),t.scheduleRender()}remove(t){if(Dg(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(l=>t===l);if(n===0)return!1;let s;for(let l=n;l>=0;l--){const h=this.members[l];if(h.isPresent!==!1){s=h;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:l}=t.options;l===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CR(e,t,n){let s="";const l=e.x.translate/t.x,h=e.y.translate/t.y,p=(n==null?void 0:n.z)||0;if((l||h||p)&&(s=`translate3d(${l}px, ${h}px, ${p}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:E,rotate:S,rotateX:I,rotateY:L,skewX:k,skewY:G}=n;E&&(s=`perspective(${E}px) ${s}`),S&&(s+=`rotate(${S}deg) `),I&&(s+=`rotateX(${I}deg) `),L&&(s+=`rotateY(${L}deg) `),k&&(s+=`skewX(${k}deg) `),G&&(s+=`skewY(${G}deg) `)}const A=e.x.scale*t.x,T=e.y.scale*t.y;return(A!==1||T!==1)&&(s+=`scale(${A}, ${T})`),s||"none"}const y1=["","X","Y","Z"],SR={visibility:"hidden"},sE=1e3;let bR=0;function x1(e,t,n,s){const{latestValues:l}=t;l[e]&&(n[e]=l[e],t.setStaticValue(e,0),s&&(s[e]=0))}function RT(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Bw(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:l,layoutId:h}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",yn,!(l||h))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&RT(s)}function DT({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:l}){return class{constructor(p={},A=t==null?void 0:t()){this.id=bR++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(DR),this.nodes.forEach(PR),this.nodes.forEach(BR),this.nodes.forEach(NR)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=p,this.root=A?A.root||A:this,this.path=A?[...A.path,A]:[],this.parent=A,this.depth=A?A.depth+1:0;for(let T=0;T<this.path.length;T++)this.path[T].shouldResetTransform=!0;this.root===this&&(this.nodes=new gR)}addEventListener(p,A){return this.eventHandlers.has(p)||this.eventHandlers.set(p,new Mg),this.eventHandlers.get(p).add(A)}notifyListeners(p,...A){const T=this.eventHandlers.get(p);T&&T.notify(...A)}hasListeners(p){return this.eventHandlers.has(p)}mount(p,A=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=fR(p),this.instance=p;const{layoutId:T,layout:E,visualElement:S}=this.options;if(S&&!S.current&&S.mount(p),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),A&&(E||T)&&(this.isLayoutDirty=!0),e){let I;const L=()=>this.root.updateBlockedByResize=!1;e(p,()=>{this.root.updateBlockedByResize=!0,I&&I(),I=mR(L,250),pf.hasAnimatedSinceResize&&(pf.hasAnimatedSinceResize=!1,this.nodes.forEach(oE))})}T&&this.root.registerSharedNode(T,this),this.options.animate!==!1&&S&&(T||E)&&this.addEventListener("didUpdate",({delta:I,hasLayoutChanged:L,hasRelativeLayoutChanged:k,layout:G})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const W=this.options.transition||S.getDefaultTransition()||jR,{onLayoutAnimationStart:Y,onLayoutAnimationComplete:Q}=S.getProps(),rt=!this.targetLayout||!IT(this.targetLayout,G),nt=!L&&k;if(this.options.layoutRoot||this.resumeFrom||nt||L&&(rt||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(I,nt);const _t={...Pg(W,"layout"),onPlay:Y,onComplete:Q};(S.shouldReduceMotion||this.options.layoutRoot)&&(_t.delay=0,_t.type=!1),this.startAnimation(_t)}else L||oE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=G})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const p=this.getStack();p&&p.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,uo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(VR),this.animationId++)}getTransformTemplate(){const{visualElement:p}=this.options;return p&&p.getProps().transformTemplate}willUpdate(p=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&RT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const I=this.path[S];I.shouldResetTransform=!0,I.updateScroll("snapshot"),I.options.layoutRoot&&I.willUpdate(!1)}const{layoutId:A,layout:T}=this.options;if(A===void 0&&!T)return;const E=this.getTransformTemplate();this.prevTransformTemplateValue=E?E(this.latestValues,""):void 0,this.updateSnapshot(),p&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aE);return}this.isUpdating||this.nodes.forEach(OR),this.isUpdating=!1,this.nodes.forEach(LR),this.nodes.forEach(IR),this.nodes.forEach(RR),this.clearAllSnapshots();const A=Os.now();Ri.delta=pa(0,1e3/60,A-Ri.timestamp),Ri.timestamp=A,Ri.isProcessing=!0,u1.update.process(Ri),u1.preRender.process(Ri),u1.render.process(Ri),Ri.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Vg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(MR),this.sharedNodes.forEach(kR)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!tr(this.snapshot.measuredBox.x)&&!tr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let T=0;T<this.path.length;T++)this.path[T].updateScroll();const p=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$n(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:A}=this.options;A&&A.notify("LayoutMeasure",this.layout.layoutBox,p?p.layoutBox:void 0)}updateScroll(p="measure"){let A=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===p&&(A=!1),A){const T=s(this.instance);this.scroll={animationId:this.root.animationId,phase:p,isRoot:T,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:T}}}resetTransform(){if(!l)return;const p=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,A=this.projectionDelta&&!bT(this.projectionDelta),T=this.getTransformTemplate(),E=T?T(this.latestValues,""):void 0,S=E!==this.prevTransformTemplateValue;p&&(A||Uo(this.latestValues)||S)&&(l(this.instance,E),this.shouldResetTransform=!1,this.scheduleRender())}measure(p=!0){const A=this.measurePageBox();let T=this.removeElementScroll(A);return p&&(T=this.removeTransform(T)),zR(T),{animationId:this.root.animationId,measuredBox:A,layoutBox:T,latestValues:{},source:this.id}}measurePageBox(){var E;const{visualElement:p}=this.options;if(!p)return $n();const A=p.measureViewportBox();if(!(((E=this.scroll)==null?void 0:E.wasRoot)||this.path.some(HR))){const{scroll:S}=this.root;S&&(zl(A.x,S.offset.x),zl(A.y,S.offset.y))}return A}removeElementScroll(p){var T;const A=$n();if(Zr(A,p),(T=this.scroll)!=null&&T.wasRoot)return A;for(let E=0;E<this.path.length;E++){const S=this.path[E],{scroll:I,options:L}=S;S!==this.root&&I&&L.layoutScroll&&(I.wasRoot&&Zr(A,p),zl(A.x,I.offset.x),zl(A.y,I.offset.y))}return A}applyTransform(p,A=!1){const T=$n();Zr(T,p);for(let E=0;E<this.path.length;E++){const S=this.path[E];!A&&S.options.layoutScroll&&S.scroll&&S!==S.root&&Hl(T,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),Uo(S.latestValues)&&Hl(T,S.latestValues)}return Uo(this.latestValues)&&Hl(T,this.latestValues),T}removeTransform(p){const A=$n();Zr(A,p);for(let T=0;T<this.path.length;T++){const E=this.path[T];if(!E.instance||!Uo(E.latestValues))continue;W1(E.latestValues)&&E.updateSnapshot();const S=$n(),I=E.measurePageBox();Zr(S,I),$x(A,E.latestValues,E.snapshot?E.snapshot.layoutBox:void 0,S)}return Uo(this.latestValues)&&$x(A,this.latestValues),A}setTargetDelta(p){this.targetDelta=p,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(p){this.options={...this.options,...p,crossfade:p.crossfade!==void 0?p.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ri.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(p=!1){var L;const A=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=A.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=A.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=A.isSharedProjectionDirty);const T=!!this.resumingFrom||this!==A;if(!(p||T&&this.isSharedProjectionDirty||this.isProjectionDirty||(L=this.parent)!=null&&L.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:I}=this.options;if(!(!this.layout||!(S||I))){if(this.resolvedRelativeTargetAt=Ri.timestamp,!this.targetDelta&&!this.relativeTarget){const k=this.getClosestProjectingParent();k&&k.layout&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$n(),this.relativeTargetOrigin=$n(),pc(this.relativeTargetOrigin,this.layout.layoutBox,k.layout.layoutBox),Zr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$n(),this.targetWithTransforms=$n()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),YI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zr(this.target,this.layout.layoutBox),ET(this.target,this.targetDelta)):Zr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const k=this.getClosestProjectingParent();k&&!!k.resumingFrom==!!this.resumingFrom&&!k.options.layoutScroll&&k.target&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$n(),this.relativeTargetOrigin=$n(),pc(this.relativeTargetOrigin,this.target,k.target),Zr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||W1(this.parent.latestValues)||xT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var G;const p=this.getLead(),A=!!this.resumingFrom||this!==p;let T=!0;if((this.isProjectionDirty||(G=this.parent)!=null&&G.isProjectionDirty)&&(T=!1),A&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(T=!1),this.resolvedRelativeTargetAt===Ri.timestamp&&(T=!1),T)return;const{layout:E,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||S))return;Zr(this.layoutCorrected,this.layout.layoutBox);const I=this.treeScale.x,L=this.treeScale.y;qI(this.layoutCorrected,this.treeScale,this.path,A),p.layout&&!p.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(p.target=p.layout.layoutBox,p.targetWithTransforms=$n());const{target:k}=p;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Kx(this.prevProjectionDelta.x,this.projectionDelta.x),Kx(this.prevProjectionDelta.y,this.projectionDelta.y)),mc(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==I||this.treeScale.y!==L||!rE(this.projectionDelta.x,this.prevProjectionDelta.x)||!rE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(p=!0){var A;if((A=this.options.visualElement)==null||A.scheduleRender(),p){const T=this.getStack();T&&T.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=jl(),this.projectionDelta=jl(),this.projectionDeltaWithTransform=jl()}setAnimationOrigin(p,A=!1){const T=this.snapshot,E=T?T.latestValues:{},S={...this.latestValues},I=jl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!A;const L=$n(),k=T?T.source:void 0,G=this.layout?this.layout.source:void 0,W=k!==G,Y=this.getStack(),Q=!Y||Y.members.length<=1,rt=!!(W&&!Q&&this.options.crossfade===!0&&!this.path.some(FR));this.animationProgress=0;let nt;this.mixTargetDelta=_t=>{const St=_t/1e3;lE(I.x,p.x,St),lE(I.y,p.y,St),this.setTargetDelta(I),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pc(L,this.layout.layoutBox,this.relativeParent.layout.layoutBox),UR(this.relativeTarget,this.relativeTargetOrigin,L,St),nt&&vR(this.relativeTarget,nt)&&(this.isProjectionDirty=!1),nt||(nt=$n()),Zr(nt,this.relativeTarget)),W&&(this.animationValues=S,yR(S,E,this.latestValues,St,rt,Q)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=St},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(p){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(uo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yn.update(()=>{pf.hasAnimatedSinceResize=!0,this.currentAnimation=hR(0,sE,{...p,onUpdate:A=>{this.mixTargetDelta(A),p.onUpdate&&p.onUpdate(A)},onStop:()=>{},onComplete:()=>{p.onComplete&&p.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const p=this.getStack();p&&p.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const p=this.getLead();let{targetWithTransforms:A,target:T,layout:E,latestValues:S}=p;if(!(!A||!T||!E)){if(this!==p&&this.layout&&E&&NT(this.options.animationType,this.layout.layoutBox,E.layoutBox)){T=this.target||$n();const I=tr(this.layout.layoutBox.x);T.x.min=p.target.x.min,T.x.max=T.x.min+I;const L=tr(this.layout.layoutBox.y);T.y.min=p.target.y.min,T.y.max=T.y.min+L}Zr(A,T),Hl(A,S),mc(this.projectionDeltaWithTransform,this.layoutCorrected,A,S)}}registerSharedNode(p,A){this.sharedNodes.has(p)||this.sharedNodes.set(p,new _R),this.sharedNodes.get(p).add(A);const E=A.options.initialPromotionConfig;A.promote({transition:E?E.transition:void 0,preserveFollowOpacity:E&&E.shouldPreserveFollowOpacity?E.shouldPreserveFollowOpacity(A):void 0})}isLead(){const p=this.getStack();return p?p.lead===this:!0}getLead(){var A;const{layoutId:p}=this.options;return p?((A=this.getStack())==null?void 0:A.lead)||this:this}getPrevLead(){var A;const{layoutId:p}=this.options;return p?(A=this.getStack())==null?void 0:A.prevLead:void 0}getStack(){const{layoutId:p}=this.options;if(p)return this.root.sharedNodes.get(p)}promote({needsReset:p,transition:A,preserveFollowOpacity:T}={}){const E=this.getStack();E&&E.promote(this,T),p&&(this.projectionDelta=void 0,this.needsReset=!0),A&&this.setOptions({transition:A})}relegate(){const p=this.getStack();return p?p.relegate(this):!1}resetSkewAndRotation(){const{visualElement:p}=this.options;if(!p)return;let A=!1;const{latestValues:T}=p;if((T.z||T.rotate||T.rotateX||T.rotateY||T.rotateZ||T.skewX||T.skewY)&&(A=!0),!A)return;const E={};T.z&&x1("z",p,E,this.animationValues);for(let S=0;S<y1.length;S++)x1(`rotate${y1[S]}`,p,E,this.animationValues),x1(`skew${y1[S]}`,p,E,this.animationValues);p.render();for(const S in E)p.setStaticValue(S,E[S]),this.animationValues&&(this.animationValues[S]=E[S]);p.scheduleRender()}getProjectionStyles(p){if(!this.instance||this.isSVG)return;if(!this.isVisible)return SR;const A={visibility:""},T=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,A.opacity="",A.pointerEvents=mf(p==null?void 0:p.pointerEvents)||"",A.transform=T?T(this.latestValues,""):"none",A;const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=mf(p==null?void 0:p.pointerEvents)||""),this.hasProjected&&!Uo(this.latestValues)&&(k.transform=T?T({},""):"none",this.hasProjected=!1),k}const S=E.animationValues||E.latestValues;this.applyTransformsToTarget(),A.transform=CR(this.projectionDeltaWithTransform,this.treeScale,S),T&&(A.transform=T(S,A.transform));const{x:I,y:L}=this.projectionDelta;A.transformOrigin=`${I.origin*100}% ${L.origin*100}% 0`,E.animationValues?A.opacity=E===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:A.opacity=E===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const k in Sc){if(S[k]===void 0)continue;const{correct:G,applyTo:W,isCSSVariable:Y}=Sc[k],Q=A.transform==="none"?S[k]:G(S[k],E);if(W){const rt=W.length;for(let nt=0;nt<rt;nt++)A[W[nt]]=Q}else Y?this.options.visualElement.renderState.vars[k]=Q:A[k]=Q}return this.options.layoutId&&(A.pointerEvents=E===this?mf(p==null?void 0:p.pointerEvents)||"":"none"),A}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(p=>{var A;return(A=p.currentAnimation)==null?void 0:A.stop()}),this.root.nodes.forEach(aE),this.root.sharedNodes.clear()}}}function IR(e){e.updateLayout()}function RR(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:l}=e.layout,{animationType:h}=e.options,p=t.source!==e.layout.source;h==="size"?$r(I=>{const L=p?t.measuredBox[I]:t.layoutBox[I],k=tr(L);L.min=s[I].min,L.max=L.min+k}):NT(h,t.layoutBox,s)&&$r(I=>{const L=p?t.measuredBox[I]:t.layoutBox[I],k=tr(s[I]);L.max=L.min+k,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[I].max=e.relativeTarget[I].min+k)});const A=jl();mc(A,s,t.layoutBox);const T=jl();p?mc(T,e.applyTransform(l,!0),t.measuredBox):mc(T,s,t.layoutBox);const E=!bT(A);let S=!1;if(!e.resumeFrom){const I=e.getClosestProjectingParent();if(I&&!I.resumeFrom){const{snapshot:L,layout:k}=I;if(L&&k){const G=$n();pc(G,t.layoutBox,L.layoutBox);const W=$n();pc(W,s,k.layoutBox),IT(G,W)||(S=!0),I.options.layoutRoot&&(e.relativeTarget=W,e.relativeTargetOrigin=G,e.relativeParent=I)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:T,layoutDelta:A,hasLayoutChanged:E,hasRelativeLayoutChanged:S})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function DR(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function NR(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function MR(e){e.clearSnapshot()}function aE(e){e.clearMeasurements()}function OR(e){e.isLayoutDirty=!1}function LR(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function oE(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function PR(e){e.resolveTargetDelta()}function BR(e){e.calcProjection()}function VR(e){e.resetSkewAndRotation()}function kR(e){e.removeLeadSnapshot()}function lE(e,t,n){e.translate=Pn(t.translate,0,n),e.scale=Pn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function uE(e,t,n,s){e.min=Pn(t.min,n.min,s),e.max=Pn(t.max,n.max,s)}function UR(e,t,n,s){uE(e.x,t.x,n.x,s),uE(e.y,t.y,n.y,s)}function FR(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const jR={duration:.45,ease:[.4,0,.1,1]},cE=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),hE=cE("applewebkit/")&&!cE("chrome/")?Math.round:es;function fE(e){e.min=hE(e.min),e.max=hE(e.max)}function zR(e){fE(e.x),fE(e.y)}function NT(e,t,n){return e==="position"||e==="preserve-aspect"&&!GI(iE(t),iE(n),.2)}function HR(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const GR=DT({attachResizeListener:(e,t)=>Dc(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),E1={current:void 0},MT=DT({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!E1.current){const e=new GR({});e.mount(window),e.setOptions({layoutScroll:!0}),E1.current=e}return E1.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),YR={pan:{Feature:oR},drag:{Feature:aR,ProjectionNode:MT,MeasureLayout:_T}};function dE(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n==="Start");const l="onHover"+n,h=s[l];h&&yn.postRender(()=>h(t,Wc(t)))}class qR extends Eo{mount(){const{current:t}=this.node;t&&(this.unmount=e3(t,(n,s)=>(dE(this.node,s,"Start"),l=>dE(this.node,l,"End"))))}unmount(){}}class XR extends Eo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xc(Dc(this.node.current,"focus",()=>this.onFocus()),Dc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function gE(e,t,n){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",n==="Start");const l="onTap"+(n==="End"?"":n),h=s[l];h&&yn.postRender(()=>h(t,Wc(t)))}class WR extends Eo{mount(){const{current:t}=this.node;t&&(this.unmount=s3(t,(n,s)=>(gE(this.node,s,"Start"),(l,{success:h})=>gE(this.node,l,h?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Z1=new WeakMap,A1=new WeakMap,QR=e=>{const t=Z1.get(e.target);t&&t(e)},KR=e=>{e.forEach(QR)};function ZR({root:e,...t}){const n=e||document;A1.has(n)||A1.set(n,{});const s=A1.get(n),l=JSON.stringify(t);return s[l]||(s[l]=new IntersectionObserver(KR,{root:e,...t})),s[l]}function JR(e,t,n){const s=ZR(t);return Z1.set(e,n),s.observe(e),()=>{Z1.delete(e),s.unobserve(e)}}const $R={some:0,all:1};class t8 extends Eo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:l="some",once:h}=t,p={root:n?n.current:void 0,rootMargin:s,threshold:typeof l=="number"?l:$R[l]},A=T=>{const{isIntersecting:E}=T;if(this.isInView===E||(this.isInView=E,h&&!E&&this.hasEnteredView))return;E&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",E);const{onViewportEnter:S,onViewportLeave:I}=this.node.getProps(),L=E?S:I;L&&L(T)};return JR(this.node.current,p,A)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(e8(t,n))&&this.startObserver()}unmount(){}}function e8({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const n8={inView:{Feature:t8},tap:{Feature:WR},focus:{Feature:XR},hover:{Feature:qR}},i8={layout:{ProjectionNode:MT,MeasureLayout:_T}},J1={current:null},OT={current:!1};function r8(){if(OT.current=!0,!!bg)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>J1.current=e.matches;e.addListener(t),t()}else J1.current=!1}const s8=[...rT,Yi,co],a8=e=>s8.find(iT(e)),o8=new WeakMap;function l8(e,t,n){for(const s in t){const l=t[s],h=n[s];if(Wi(l))e.addValue(s,l);else if(Wi(h))e.addValue(s,_c(l,{owner:e}));else if(h!==l)if(e.hasValue(s)){const p=e.getValue(s);p.liveStyle===!0?p.jump(l):p.hasAnimated||p.set(l)}else{const p=e.getStaticValue(s);e.addValue(s,_c(p!==void 0?p:l,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const mE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class u8{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:l,blockInitialAnimation:h,visualState:p},A={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const k=Os.now();this.renderScheduledAt<k&&(this.renderScheduledAt=k,yn.render(this.render,!1,!0))};const{latestValues:T,renderState:E,onUpdate:S}=p;this.onUpdate=S,this.latestValues=T,this.baseTarget={...T},this.initialValues=n.initial?{...T}:{},this.renderState=E,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=l,this.options=A,this.blockInitialAnimation=!!h,this.isControllingVariants=nd(n),this.isVariantNode=Aw(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:I,...L}=this.scrapeMotionValuesFromProps(n,{},this);for(const k in L){const G=L[k];T[k]!==void 0&&Wi(G)&&G.set(T[k],!1)}}mount(t){this.current=t,o8.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),OT.current||r8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:J1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),uo(this.notifyUpdate),uo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=Wo.has(t);s&&this.onBindTransform&&this.onBindTransform();const l=n.on("change",A=>{this.latestValues[t]=A,this.props.onUpdate&&yn.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),h=n.on("renderRequest",this.scheduleRender);let p;window.MotionCheckAppearSync&&(p=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{l(),h(),p&&p(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Wl){const n=Wl[t];if(!n)continue;const{isEnabled:s,Feature:l}=n;if(!this.features[t]&&l&&s(this.props)&&(this.features[t]=new l(this)),this.features[t]){const h=this.features[t];h.isMounted?h.update():(h.mount(),h.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$n()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<mE.length;s++){const l=mE[s];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const h="on"+l,p=t[h];p&&(this.propEventSubscriptions[l]=this.on(l,p))}this.prevMotionValues=l8(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=_c(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(eT(s)||Yw(s))?s=parseFloat(s):!a8(s)&&co.test(n)&&(s=Jw(t,n)),this.setBaseTarget(t,Wi(s)?s.get():s)),Wi(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var h;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const p=Kg(this.props,n,(h=this.presenceContext)==null?void 0:h.custom);p&&(s=p[t])}if(n&&s!==void 0)return s;const l=this.getBaseTargetFromProps(this.props,t);return l!==void 0&&!Wi(l)?l:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Mg),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class LT extends u8{constructor(){super(...arguments),this.KeyframeResolver=sT}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Wi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function c8(e){return window.getComputedStyle(e)}class h8 extends LT{constructor(){super(...arguments),this.type="html",this.renderInstance=Nw}readValueFromInstance(t,n){if(Wo.has(n))return v4(t,n);{const s=c8(t),l=(zg(n)?s.getPropertyValue(n):s[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:n}){return AT(t,n)}build(t,n,s){Yg(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return Zg(t,n,s)}}class f8 extends LT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$n,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&Dw(this.current,this.renderState)}}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Wo.has(n)){const s=Zw(n);return s&&s.default||0}return n=Mw.has(n)?n:jg(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return Lw(t,n,s)}onBindTransform(){this.current&&!this.renderState.dimensions&&yn.postRender(this.updateDimensions)}build(t,n,s){Wg(t,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,s,l){Ow(t,n,s,l)}mount(t){this.isSVGTag=Qg(t.tagName),super.mount(t)}}const d8=(e,t)=>Xg(e)?new f8(t):new h8(t,{allowProjection:e!==ct.Fragment}),g8=K3({...BI,...n8,...YR,...i8},d8),ds=f3(g8);var PT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},pE=fa.createContext&&fa.createContext(PT),m8=["attr","size","title"];function p8(e,t){if(e==null)return{};var n=y8(e,t),s,l;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(l=0;l<h.length;l++)s=h[l],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function y8(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Mf(){return Mf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Mf.apply(this,arguments)}function yE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,s)}return n}function Of(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yE(Object(n),!0).forEach(function(s){x8(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function x8(e,t,n){return t=E8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E8(e){var t=A8(e,"string");return typeof t=="symbol"?t:t+""}function A8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BT(e){return e&&e.map((t,n)=>fa.createElement(t.tag,Of({key:n},t.attr),BT(t.child)))}function am(e){return t=>fa.createElement(w8,Mf({attr:Of({},e.attr)},t),BT(e.child))}function w8(e){var t=n=>{var{attr:s,size:l,title:h}=e,p=p8(e,m8),A=l||n.size||"1em",T;return n.className&&(T=n.className),e.className&&(T=(T?T+" ":"")+e.className),fa.createElement("svg",Mf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,p,{className:T,style:Of(Of({color:e.color||n.color},n.style),e.style),height:A,width:A,xmlns:"http://www.w3.org/2000/svg"}),h&&fa.createElement("title",null,h),e.children)};return pE!==void 0?fa.createElement(pE.Consumer,null,n=>t(n)):t(PT)}function T8(e){return am({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(e)}function v8(e){return am({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M519.442 288.651c-41.519 0-59.5 31.593-82.058 31.593C377.409 320.244 432 144 432 144s-196.288 80-196.288-3.297c0-35.827 36.288-46.25 36.288-85.985C272 19.216 243.885 0 210.539 0c-34.654 0-66.366 18.891-66.366 56.346 0 41.364 31.711 59.277 31.711 81.75C175.885 207.719 0 166.758 0 166.758v333.237s178.635 41.047 178.635-28.662c0-22.473-40-40.107-40-81.471 0-37.456 29.25-56.346 63.577-56.346 33.673 0 61.788 19.216 61.788 54.717 0 39.735-36.288 50.158-36.288 85.985 0 60.803 129.675 25.73 181.23 25.73 0 0-34.725-120.101 25.827-120.101 35.962 0 46.423 36.152 86.308 36.152C556.712 416 576 387.99 576 354.443c0-34.199-18.962-65.792-56.558-65.792z"},child:[]}]})(e)}function _8(e){return am({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"},child:[]}]})(e)}const C8=()=>lt.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-green-100 via-white to-green-200",children:[lt.jsx(Gc,{}),lt.jsx("main",{className:"flex-1 flex items-center justify-center text-center p-6",children:lt.jsxs(ds.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"glass p-10 rounded-2xl shadow-xl max-w-3xl w-full",children:[lt.jsx("h2",{className:"text-4xl font-bold text-green-800 mb-4",children:"Join the EcoQuest 🌿"}),lt.jsx("p",{className:"text-lg text-gray-700 mb-8 italic",children:'"Power the future by solving the past – let the adventure begin!"'}),lt.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[lt.jsx("a",{href:"/register",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-xl font-semibold shadow-md transition transform hover:scale-105 hover:rotate-3",children:"🚀 Register Team"}),lt.jsx("a",{href:"/register",className:"border border-green-600 text-green-600 hover:bg-green-100 px-6 py-3 rounded-xl font-semibold shadow-md transition transform hover:scale-105 hover:rotate-3",children:"🎯 Start Adventure"})]})]})}),lt.jsxs("section",{className:"bg-white px-6 py-12",children:[lt.jsx("h3",{className:"text-3xl font-bold text-center text-green-700 mb-10",children:"How to Play"}),lt.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:[lt.jsxs(ds.div,{whileHover:{scale:1.05,rotate:-5},className:"p-6 rounded-xl shadow-md bg-green-50 hover:scale-105 transition duration-300",children:[lt.jsx(_8,{className:"text-3xl text-green-600 mb-2"}),lt.jsx("h4",{className:"text-xl font-semibold text-green-800 mb-1",children:"Scan QR Codes"}),lt.jsx("p",{className:"text-gray-600",children:"Find QR codes hidden in the campus and scan to unlock challenges."})]}),lt.jsxs(ds.div,{whileHover:{scale:1.05,rotate:5},className:"p-6 rounded-xl shadow-md bg-green-50 hover:scale-105 transition duration-300",children:[lt.jsx(v8,{className:"text-3xl text-green-600 mb-2"}),lt.jsx("h4",{className:"text-xl font-semibold text-green-800 mb-1",children:"Solve Challenges"}),lt.jsx("p",{className:"text-gray-600",children:"Answer 2 fun questions at each stage to move forward."})]}),lt.jsxs(ds.div,{whileHover:{scale:1.05,rotate:-5},className:"p-6 rounded-xl shadow-md bg-green-50 hover:scale-105 transition duration-300",children:[lt.jsx(T8,{className:"text-3xl text-green-600 mb-2"}),lt.jsx("h4",{className:"text-xl font-semibold text-green-800 mb-1",children:"Finish Fast"}),lt.jsx("p",{className:"text-gray-600",children:"The fastest team to finish all stages wins. Time is ticking!"})]})]})]}),lt.jsx(su,{})]}),S8=()=>{};var xE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let l=e.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},b8=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const l=e[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const h=e[n++];t[s++]=String.fromCharCode((l&31)<<6|h&63)}else if(l>239&&l<365){const h=e[n++],p=e[n++],A=e[n++],T=((l&7)<<18|(h&63)<<12|(p&63)<<6|A&63)-65536;t[s++]=String.fromCharCode(55296+(T>>10)),t[s++]=String.fromCharCode(56320+(T&1023))}else{const h=e[n++],p=e[n++];t[s++]=String.fromCharCode((l&15)<<12|(h&63)<<6|p&63)}}return t.join("")},kT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<e.length;l+=3){const h=e[l],p=l+1<e.length,A=p?e[l+1]:0,T=l+2<e.length,E=T?e[l+2]:0,S=h>>2,I=(h&3)<<4|A>>4;let L=(A&15)<<2|E>>6,k=E&63;T||(k=64,p||(L=64)),s.push(n[S],n[I],n[L],n[k])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(VT(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):b8(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<e.length;){const h=n[e.charAt(l++)],A=l<e.length?n[e.charAt(l)]:0;++l;const E=l<e.length?n[e.charAt(l)]:64;++l;const I=l<e.length?n[e.charAt(l)]:64;if(++l,h==null||A==null||E==null||I==null)throw new I8;const L=h<<2|A>>4;if(s.push(L),E!==64){const k=A<<4&240|E>>2;if(s.push(k),I!==64){const G=E<<6&192|I;s.push(G)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class I8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const R8=function(e){const t=VT(e);return kT.encodeByteArray(t,!0)},Lf=function(e){return R8(e).replace(/\./g,"")},D8=function(e){try{return kT.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=()=>N8().__FIREBASE_DEFAULTS__,O8=()=>{if(typeof process>"u"||typeof xE>"u")return;const e=xE.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},L8=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&D8(e[1]);return t&&JSON.parse(t)},om=()=>{try{return S8()||M8()||O8()||L8()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},P8=e=>{var t,n;return(n=(t=om())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},B8=e=>{const t=P8(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},UT=()=>{var e;return(e=om())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=e.iat||0,h=e.sub||e.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Lf(JSON.stringify(n)),Lf(JSON.stringify(p)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function F8(){var e;const t=(e=om())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j8(){return!F8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z8(){try{return typeof indexedDB=="object"}catch{return!1}}function H8(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var h;t(((h=l.error)===null||h===void 0?void 0:h.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8="FirebaseError";class lu extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=G8,Object.setPrototypeOf(this,lu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,FT.prototype.create)}}class FT{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,h=this.errors[t],p=h?Y8(h,s):"Error",A=`${this.serviceName}: ${p} (${l}).`;return new lu(l,A,s)}}function Y8(e,t){return e.replace(q8,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const q8=/\{\$([^}]+)}/g;function Pf(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const h=e[l],p=t[l];if(EE(h)&&EE(p)){if(!Pf(h,p))return!1}else if(h!==p)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function EE(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(e){return e&&e._delegate?e._delegate:e}class Mc{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new V8;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),l=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(h){if(l)return null;throw h}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Q8(t))try{this.getOrInitializeService({instanceIdentifier:Fo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const h=this.getOrInitializeService({instanceIdentifier:l});s.resolve(h)}catch{}}}}clearInstance(t=Fo){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Fo){return this.instances.has(t)}getOptions(t=Fo){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[h,p]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(h);s===A&&p.resolve(l)}return l}onInit(t,n){var s;const l=this.normalizeInstanceIdentifier(n),h=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;h.add(t),this.onInitCallbacks.set(l,h);const p=this.instances.get(l);return p&&t(p,l),()=>{h.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:W8(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Fo){return this.component?this.component.multipleInstances?t:Fo:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function W8(e){return e===Fo?void 0:e}function Q8(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new X8(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ve||(Ve={}));const Z8={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},J8=Ve.INFO,$8={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},t6=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),l=$8[t];if(l)console[l](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class jT{constructor(t){this.name=t,this._logLevel=J8,this._logHandler=t6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ve))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Z8[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...t),this._logHandler(this,Ve.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...t),this._logHandler(this,Ve.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...t),this._logHandler(this,Ve.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...t),this._logHandler(this,Ve.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...t),this._logHandler(this,Ve.ERROR,...t)}}const e6=(e,t)=>t.some(n=>e instanceof n);let AE,wE;function n6(){return AE||(AE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function i6(){return wE||(wE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zT=new WeakMap,$1=new WeakMap,HT=new WeakMap,w1=new WeakMap,lm=new WeakMap;function r6(e){const t=new Promise((n,s)=>{const l=()=>{e.removeEventListener("success",h),e.removeEventListener("error",p)},h=()=>{n(so(e.result)),l()},p=()=>{s(e.error),l()};e.addEventListener("success",h),e.addEventListener("error",p)});return t.then(n=>{n instanceof IDBCursor&&zT.set(n,e)}).catch(()=>{}),lm.set(t,e),t}function s6(e){if($1.has(e))return;const t=new Promise((n,s)=>{const l=()=>{e.removeEventListener("complete",h),e.removeEventListener("error",p),e.removeEventListener("abort",p)},h=()=>{n(),l()},p=()=>{s(e.error||new DOMException("AbortError","AbortError")),l()};e.addEventListener("complete",h),e.addEventListener("error",p),e.addEventListener("abort",p)});$1.set(e,t)}let tg={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return $1.get(e);if(t==="objectStoreNames")return e.objectStoreNames||HT.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return so(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function a6(e){tg=e(tg)}function o6(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(T1(this),t,...n);return HT.set(s,t.sort?t.sort():[t]),so(s)}:i6().includes(e)?function(...t){return e.apply(T1(this),t),so(zT.get(this))}:function(...t){return so(e.apply(T1(this),t))}}function l6(e){return typeof e=="function"?o6(e):(e instanceof IDBTransaction&&s6(e),e6(e,n6())?new Proxy(e,tg):e)}function so(e){if(e instanceof IDBRequest)return r6(e);if(w1.has(e))return w1.get(e);const t=l6(e);return t!==e&&(w1.set(e,t),lm.set(t,e)),t}const T1=e=>lm.get(e);function u6(e,t,{blocked:n,upgrade:s,blocking:l,terminated:h}={}){const p=indexedDB.open(e,t),A=so(p);return s&&p.addEventListener("upgradeneeded",T=>{s(so(p.result),T.oldVersion,T.newVersion,so(p.transaction),T)}),n&&p.addEventListener("blocked",T=>n(T.oldVersion,T.newVersion,T)),A.then(T=>{h&&T.addEventListener("close",()=>h()),l&&T.addEventListener("versionchange",E=>l(E.oldVersion,E.newVersion,E))}).catch(()=>{}),A}const c6=["get","getKey","getAll","getAllKeys","count"],h6=["put","add","delete","clear"],v1=new Map;function TE(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(v1.get(t))return v1.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=h6.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||c6.includes(n)))return;const h=async function(p,...A){const T=this.transaction(p,l?"readwrite":"readonly");let E=T.store;return s&&(E=E.index(A.shift())),(await Promise.all([E[n](...A),l&&T.done]))[0]};return v1.set(t,h),h}a6(e=>({...e,get:(t,n,s)=>TE(t,n)||e.get(t,n,s),has:(t,n)=>!!TE(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(d6(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function d6(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const eg="@firebase/app",vE="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new jT("@firebase/app"),g6="@firebase/app-compat",m6="@firebase/analytics-compat",p6="@firebase/analytics",y6="@firebase/app-check-compat",x6="@firebase/app-check",E6="@firebase/auth",A6="@firebase/auth-compat",w6="@firebase/database",T6="@firebase/data-connect",v6="@firebase/database-compat",_6="@firebase/functions",C6="@firebase/functions-compat",S6="@firebase/installations",b6="@firebase/installations-compat",I6="@firebase/messaging",R6="@firebase/messaging-compat",D6="@firebase/performance",N6="@firebase/performance-compat",M6="@firebase/remote-config",O6="@firebase/remote-config-compat",L6="@firebase/storage",P6="@firebase/storage-compat",B6="@firebase/firestore",V6="@firebase/vertexai",k6="@firebase/firestore-compat",U6="firebase",F6="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="[DEFAULT]",j6={[eg]:"fire-core",[g6]:"fire-core-compat",[p6]:"fire-analytics",[m6]:"fire-analytics-compat",[x6]:"fire-app-check",[y6]:"fire-app-check-compat",[E6]:"fire-auth",[A6]:"fire-auth-compat",[w6]:"fire-rtdb",[T6]:"fire-data-connect",[v6]:"fire-rtdb-compat",[_6]:"fire-fn",[C6]:"fire-fn-compat",[S6]:"fire-iid",[b6]:"fire-iid-compat",[I6]:"fire-fcm",[R6]:"fire-fcm-compat",[D6]:"fire-perf",[N6]:"fire-perf-compat",[M6]:"fire-rc",[O6]:"fire-rc-compat",[L6]:"fire-gcs",[P6]:"fire-gcs-compat",[B6]:"fire-fst",[k6]:"fire-fst-compat",[V6]:"fire-vertex","fire-js":"fire-js",[U6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf=new Map,z6=new Map,ig=new Map;function _E(e,t){try{e.container.addComponent(t)}catch(n){ya.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Vf(e){const t=e.name;if(ig.has(t))return ya.debug(`There were multiple attempts to register component ${t}.`),!1;ig.set(t,e);for(const n of Bf.values())_E(n,e);for(const n of z6.values())_E(n,e);return!0}function H6(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function G6(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ao=new FT("app","Firebase",Y6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Mc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ao.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=F6;function GT(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s=Object.assign({name:ng,automaticDataCollectionEnabled:!1},t),l=s.name;if(typeof l!="string"||!l)throw ao.create("bad-app-name",{appName:String(l)});if(n||(n=UT()),!n)throw ao.create("no-options");const h=Bf.get(l);if(h){if(Pf(n,h.options)&&Pf(s,h.config))return h;throw ao.create("duplicate-app",{appName:l})}const p=new K8(l);for(const T of ig.values())p.addComponent(T);const A=new q6(n,s,p);return Bf.set(l,A),A}function W6(e=ng){const t=Bf.get(e);if(!t&&e===ng&&UT())return GT();if(!t)throw ao.create("no-app",{appName:e});return t}function ql(e,t,n){var s;let l=(s=j6[e])!==null&&s!==void 0?s:e;n&&(l+=`-${n}`);const h=l.match(/\s|\//),p=t.match(/\s|\//);if(h||p){const A=[`Unable to register library "${l}" with version "${t}":`];h&&A.push(`library name "${l}" contains illegal characters (whitespace or "/")`),h&&p&&A.push("and"),p&&A.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ya.warn(A.join(" "));return}Vf(new Mc(`${l}-version`,()=>({library:l,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6="firebase-heartbeat-database",K6=1,Oc="firebase-heartbeat-store";let _1=null;function YT(){return _1||(_1=u6(Q6,K6,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Oc)}catch(n){console.warn(n)}}}}).catch(e=>{throw ao.create("idb-open",{originalErrorMessage:e.message})})),_1}async function Z6(e){try{const n=(await YT()).transaction(Oc),s=await n.objectStore(Oc).get(qT(e));return await n.done,s}catch(t){if(t instanceof lu)ya.warn(t.message);else{const n=ao.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ya.warn(n.message)}}}async function CE(e,t){try{const s=(await YT()).transaction(Oc,"readwrite");await s.objectStore(Oc).put(t,qT(e)),await s.done}catch(n){if(n instanceof lu)ya.warn(n.message);else{const s=ao.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ya.warn(s.message)}}}function qT(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6=1024,$6=30;class tD{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nD(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=SE();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(p=>p.date===h))return;if(this._heartbeatsCache.heartbeats.push({date:h,agent:l}),this._heartbeatsCache.heartbeats.length>$6){const p=iD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(p,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ya.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=SE(),{heartbeatsToSend:s,unsentEntries:l}=eD(this._heartbeatsCache.heartbeats),h=Lf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(n){return ya.warn(n),""}}}function SE(){return new Date().toISOString().substring(0,10)}function eD(e,t=J6){const n=[];let s=e.slice();for(const l of e){const h=n.find(p=>p.agent===l.agent);if(h){if(h.dates.push(l.date),bE(n)>t){h.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),bE(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class nD{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return z8()?H8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Z6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return CE(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return CE(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...t.heartbeats]})}else return}}function bE(e){return Lf(JSON.stringify({version:2,heartbeats:e})).length}function iD(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(e){Vf(new Mc("platform-logger",t=>new f6(t),"PRIVATE")),Vf(new Mc("heartbeat",t=>new tD(t),"PRIVATE")),ql(eg,vE,e),ql(eg,vE,"esm2017"),ql("fire-js","")}rD("");var sD="firebase",aD="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ql(sD,aD,"app");var IE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oo,XT;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(z,F){function V(){}V.prototype=F.prototype,z.D=F.prototype,z.prototype=new V,z.prototype.constructor=z,z.C=function(J,tt,K){for(var q=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)q[Ee-2]=arguments[Ee];return F.prototype[tt].apply(J,q)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(z,F,V){V||(V=0);var J=Array(16);if(typeof F=="string")for(var tt=0;16>tt;++tt)J[tt]=F.charCodeAt(V++)|F.charCodeAt(V++)<<8|F.charCodeAt(V++)<<16|F.charCodeAt(V++)<<24;else for(tt=0;16>tt;++tt)J[tt]=F[V++]|F[V++]<<8|F[V++]<<16|F[V++]<<24;F=z.g[0],V=z.g[1],tt=z.g[2];var K=z.g[3],q=F+(K^V&(tt^K))+J[0]+3614090360&4294967295;F=V+(q<<7&4294967295|q>>>25),q=K+(tt^F&(V^tt))+J[1]+3905402710&4294967295,K=F+(q<<12&4294967295|q>>>20),q=tt+(V^K&(F^V))+J[2]+606105819&4294967295,tt=K+(q<<17&4294967295|q>>>15),q=V+(F^tt&(K^F))+J[3]+3250441966&4294967295,V=tt+(q<<22&4294967295|q>>>10),q=F+(K^V&(tt^K))+J[4]+4118548399&4294967295,F=V+(q<<7&4294967295|q>>>25),q=K+(tt^F&(V^tt))+J[5]+1200080426&4294967295,K=F+(q<<12&4294967295|q>>>20),q=tt+(V^K&(F^V))+J[6]+2821735955&4294967295,tt=K+(q<<17&4294967295|q>>>15),q=V+(F^tt&(K^F))+J[7]+4249261313&4294967295,V=tt+(q<<22&4294967295|q>>>10),q=F+(K^V&(tt^K))+J[8]+1770035416&4294967295,F=V+(q<<7&4294967295|q>>>25),q=K+(tt^F&(V^tt))+J[9]+2336552879&4294967295,K=F+(q<<12&4294967295|q>>>20),q=tt+(V^K&(F^V))+J[10]+4294925233&4294967295,tt=K+(q<<17&4294967295|q>>>15),q=V+(F^tt&(K^F))+J[11]+2304563134&4294967295,V=tt+(q<<22&4294967295|q>>>10),q=F+(K^V&(tt^K))+J[12]+1804603682&4294967295,F=V+(q<<7&4294967295|q>>>25),q=K+(tt^F&(V^tt))+J[13]+4254626195&4294967295,K=F+(q<<12&4294967295|q>>>20),q=tt+(V^K&(F^V))+J[14]+2792965006&4294967295,tt=K+(q<<17&4294967295|q>>>15),q=V+(F^tt&(K^F))+J[15]+1236535329&4294967295,V=tt+(q<<22&4294967295|q>>>10),q=F+(tt^K&(V^tt))+J[1]+4129170786&4294967295,F=V+(q<<5&4294967295|q>>>27),q=K+(V^tt&(F^V))+J[6]+3225465664&4294967295,K=F+(q<<9&4294967295|q>>>23),q=tt+(F^V&(K^F))+J[11]+643717713&4294967295,tt=K+(q<<14&4294967295|q>>>18),q=V+(K^F&(tt^K))+J[0]+3921069994&4294967295,V=tt+(q<<20&4294967295|q>>>12),q=F+(tt^K&(V^tt))+J[5]+3593408605&4294967295,F=V+(q<<5&4294967295|q>>>27),q=K+(V^tt&(F^V))+J[10]+38016083&4294967295,K=F+(q<<9&4294967295|q>>>23),q=tt+(F^V&(K^F))+J[15]+3634488961&4294967295,tt=K+(q<<14&4294967295|q>>>18),q=V+(K^F&(tt^K))+J[4]+3889429448&4294967295,V=tt+(q<<20&4294967295|q>>>12),q=F+(tt^K&(V^tt))+J[9]+568446438&4294967295,F=V+(q<<5&4294967295|q>>>27),q=K+(V^tt&(F^V))+J[14]+3275163606&4294967295,K=F+(q<<9&4294967295|q>>>23),q=tt+(F^V&(K^F))+J[3]+4107603335&4294967295,tt=K+(q<<14&4294967295|q>>>18),q=V+(K^F&(tt^K))+J[8]+1163531501&4294967295,V=tt+(q<<20&4294967295|q>>>12),q=F+(tt^K&(V^tt))+J[13]+2850285829&4294967295,F=V+(q<<5&4294967295|q>>>27),q=K+(V^tt&(F^V))+J[2]+4243563512&4294967295,K=F+(q<<9&4294967295|q>>>23),q=tt+(F^V&(K^F))+J[7]+1735328473&4294967295,tt=K+(q<<14&4294967295|q>>>18),q=V+(K^F&(tt^K))+J[12]+2368359562&4294967295,V=tt+(q<<20&4294967295|q>>>12),q=F+(V^tt^K)+J[5]+4294588738&4294967295,F=V+(q<<4&4294967295|q>>>28),q=K+(F^V^tt)+J[8]+2272392833&4294967295,K=F+(q<<11&4294967295|q>>>21),q=tt+(K^F^V)+J[11]+1839030562&4294967295,tt=K+(q<<16&4294967295|q>>>16),q=V+(tt^K^F)+J[14]+4259657740&4294967295,V=tt+(q<<23&4294967295|q>>>9),q=F+(V^tt^K)+J[1]+2763975236&4294967295,F=V+(q<<4&4294967295|q>>>28),q=K+(F^V^tt)+J[4]+1272893353&4294967295,K=F+(q<<11&4294967295|q>>>21),q=tt+(K^F^V)+J[7]+4139469664&4294967295,tt=K+(q<<16&4294967295|q>>>16),q=V+(tt^K^F)+J[10]+3200236656&4294967295,V=tt+(q<<23&4294967295|q>>>9),q=F+(V^tt^K)+J[13]+681279174&4294967295,F=V+(q<<4&4294967295|q>>>28),q=K+(F^V^tt)+J[0]+3936430074&4294967295,K=F+(q<<11&4294967295|q>>>21),q=tt+(K^F^V)+J[3]+3572445317&4294967295,tt=K+(q<<16&4294967295|q>>>16),q=V+(tt^K^F)+J[6]+76029189&4294967295,V=tt+(q<<23&4294967295|q>>>9),q=F+(V^tt^K)+J[9]+3654602809&4294967295,F=V+(q<<4&4294967295|q>>>28),q=K+(F^V^tt)+J[12]+3873151461&4294967295,K=F+(q<<11&4294967295|q>>>21),q=tt+(K^F^V)+J[15]+530742520&4294967295,tt=K+(q<<16&4294967295|q>>>16),q=V+(tt^K^F)+J[2]+3299628645&4294967295,V=tt+(q<<23&4294967295|q>>>9),q=F+(tt^(V|~K))+J[0]+4096336452&4294967295,F=V+(q<<6&4294967295|q>>>26),q=K+(V^(F|~tt))+J[7]+1126891415&4294967295,K=F+(q<<10&4294967295|q>>>22),q=tt+(F^(K|~V))+J[14]+2878612391&4294967295,tt=K+(q<<15&4294967295|q>>>17),q=V+(K^(tt|~F))+J[5]+4237533241&4294967295,V=tt+(q<<21&4294967295|q>>>11),q=F+(tt^(V|~K))+J[12]+1700485571&4294967295,F=V+(q<<6&4294967295|q>>>26),q=K+(V^(F|~tt))+J[3]+2399980690&4294967295,K=F+(q<<10&4294967295|q>>>22),q=tt+(F^(K|~V))+J[10]+4293915773&4294967295,tt=K+(q<<15&4294967295|q>>>17),q=V+(K^(tt|~F))+J[1]+2240044497&4294967295,V=tt+(q<<21&4294967295|q>>>11),q=F+(tt^(V|~K))+J[8]+1873313359&4294967295,F=V+(q<<6&4294967295|q>>>26),q=K+(V^(F|~tt))+J[15]+4264355552&4294967295,K=F+(q<<10&4294967295|q>>>22),q=tt+(F^(K|~V))+J[6]+2734768916&4294967295,tt=K+(q<<15&4294967295|q>>>17),q=V+(K^(tt|~F))+J[13]+1309151649&4294967295,V=tt+(q<<21&4294967295|q>>>11),q=F+(tt^(V|~K))+J[4]+4149444226&4294967295,F=V+(q<<6&4294967295|q>>>26),q=K+(V^(F|~tt))+J[11]+3174756917&4294967295,K=F+(q<<10&4294967295|q>>>22),q=tt+(F^(K|~V))+J[2]+718787259&4294967295,tt=K+(q<<15&4294967295|q>>>17),q=V+(K^(tt|~F))+J[9]+3951481745&4294967295,z.g[0]=z.g[0]+F&4294967295,z.g[1]=z.g[1]+(tt+(q<<21&4294967295|q>>>11))&4294967295,z.g[2]=z.g[2]+tt&4294967295,z.g[3]=z.g[3]+K&4294967295}s.prototype.u=function(z,F){F===void 0&&(F=z.length);for(var V=F-this.blockSize,J=this.B,tt=this.h,K=0;K<F;){if(tt==0)for(;K<=V;)l(this,z,K),K+=this.blockSize;if(typeof z=="string"){for(;K<F;)if(J[tt++]=z.charCodeAt(K++),tt==this.blockSize){l(this,J),tt=0;break}}else for(;K<F;)if(J[tt++]=z[K++],tt==this.blockSize){l(this,J),tt=0;break}}this.h=tt,this.o+=F},s.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var F=1;F<z.length-8;++F)z[F]=0;var V=8*this.o;for(F=z.length-8;F<z.length;++F)z[F]=V&255,V/=256;for(this.u(z),z=Array(16),F=V=0;4>F;++F)for(var J=0;32>J;J+=8)z[V++]=this.g[F]>>>J&255;return z};function h(z,F){var V=A;return Object.prototype.hasOwnProperty.call(V,z)?V[z]:V[z]=F(z)}function p(z,F){this.h=F;for(var V=[],J=!0,tt=z.length-1;0<=tt;tt--){var K=z[tt]|0;J&&K==F||(V[tt]=K,J=!1)}this.g=V}var A={};function T(z){return-128<=z&&128>z?h(z,function(F){return new p([F|0],0>F?-1:0)}):new p([z|0],0>z?-1:0)}function E(z){if(isNaN(z)||!isFinite(z))return I;if(0>z)return Y(E(-z));for(var F=[],V=1,J=0;z>=V;J++)F[J]=z/V|0,V*=4294967296;return new p(F,0)}function S(z,F){if(z.length==0)throw Error("number format error: empty string");if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(z.charAt(0)=="-")return Y(S(z.substring(1),F));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=E(Math.pow(F,8)),J=I,tt=0;tt<z.length;tt+=8){var K=Math.min(8,z.length-tt),q=parseInt(z.substring(tt,tt+K),F);8>K?(K=E(Math.pow(F,K)),J=J.j(K).add(E(q))):(J=J.j(V),J=J.add(E(q)))}return J}var I=T(0),L=T(1),k=T(16777216);e=p.prototype,e.m=function(){if(W(this))return-Y(this).m();for(var z=0,F=1,V=0;V<this.g.length;V++){var J=this.i(V);z+=(0<=J?J:4294967296+J)*F,F*=4294967296}return z},e.toString=function(z){if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(G(this))return"0";if(W(this))return"-"+Y(this).toString(z);for(var F=E(Math.pow(z,6)),V=this,J="";;){var tt=_t(V,F).g;V=Q(V,tt.j(F));var K=((0<V.g.length?V.g[0]:V.h)>>>0).toString(z);if(V=tt,G(V))return K+J;for(;6>K.length;)K="0"+K;J=K+J}},e.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h};function G(z){if(z.h!=0)return!1;for(var F=0;F<z.g.length;F++)if(z.g[F]!=0)return!1;return!0}function W(z){return z.h==-1}e.l=function(z){return z=Q(this,z),W(z)?-1:G(z)?0:1};function Y(z){for(var F=z.g.length,V=[],J=0;J<F;J++)V[J]=~z.g[J];return new p(V,~z.h).add(L)}e.abs=function(){return W(this)?Y(this):this},e.add=function(z){for(var F=Math.max(this.g.length,z.g.length),V=[],J=0,tt=0;tt<=F;tt++){var K=J+(this.i(tt)&65535)+(z.i(tt)&65535),q=(K>>>16)+(this.i(tt)>>>16)+(z.i(tt)>>>16);J=q>>>16,K&=65535,q&=65535,V[tt]=q<<16|K}return new p(V,V[V.length-1]&-2147483648?-1:0)};function Q(z,F){return z.add(Y(F))}e.j=function(z){if(G(this)||G(z))return I;if(W(this))return W(z)?Y(this).j(Y(z)):Y(Y(this).j(z));if(W(z))return Y(this.j(Y(z)));if(0>this.l(k)&&0>z.l(k))return E(this.m()*z.m());for(var F=this.g.length+z.g.length,V=[],J=0;J<2*F;J++)V[J]=0;for(J=0;J<this.g.length;J++)for(var tt=0;tt<z.g.length;tt++){var K=this.i(J)>>>16,q=this.i(J)&65535,Ee=z.i(tt)>>>16,mt=z.i(tt)&65535;V[2*J+2*tt]+=q*mt,rt(V,2*J+2*tt),V[2*J+2*tt+1]+=K*mt,rt(V,2*J+2*tt+1),V[2*J+2*tt+1]+=q*Ee,rt(V,2*J+2*tt+1),V[2*J+2*tt+2]+=K*Ee,rt(V,2*J+2*tt+2)}for(J=0;J<F;J++)V[J]=V[2*J+1]<<16|V[2*J];for(J=F;J<2*F;J++)V[J]=0;return new p(V,0)};function rt(z,F){for(;(z[F]&65535)!=z[F];)z[F+1]+=z[F]>>>16,z[F]&=65535,F++}function nt(z,F){this.g=z,this.h=F}function _t(z,F){if(G(F))throw Error("division by zero");if(G(z))return new nt(I,I);if(W(z))return F=_t(Y(z),F),new nt(Y(F.g),Y(F.h));if(W(F))return F=_t(z,Y(F)),new nt(Y(F.g),F.h);if(30<z.g.length){if(W(z)||W(F))throw Error("slowDivide_ only works with positive integers.");for(var V=L,J=F;0>=J.l(z);)V=St(V),J=St(J);var tt=Lt(V,1),K=Lt(J,1);for(J=Lt(J,2),V=Lt(V,2);!G(J);){var q=K.add(J);0>=q.l(z)&&(tt=tt.add(V),K=q),J=Lt(J,1),V=Lt(V,1)}return F=Q(z,tt.j(F)),new nt(tt,F)}for(tt=I;0<=z.l(F);){for(V=Math.max(1,Math.floor(z.m()/F.m())),J=Math.ceil(Math.log(V)/Math.LN2),J=48>=J?1:Math.pow(2,J-48),K=E(V),q=K.j(F);W(q)||0<q.l(z);)V-=J,K=E(V),q=K.j(F);G(K)&&(K=L),tt=tt.add(K),z=Q(z,q)}return new nt(tt,z)}e.A=function(z){return _t(this,z).h},e.and=function(z){for(var F=Math.max(this.g.length,z.g.length),V=[],J=0;J<F;J++)V[J]=this.i(J)&z.i(J);return new p(V,this.h&z.h)},e.or=function(z){for(var F=Math.max(this.g.length,z.g.length),V=[],J=0;J<F;J++)V[J]=this.i(J)|z.i(J);return new p(V,this.h|z.h)},e.xor=function(z){for(var F=Math.max(this.g.length,z.g.length),V=[],J=0;J<F;J++)V[J]=this.i(J)^z.i(J);return new p(V,this.h^z.h)};function St(z){for(var F=z.g.length+1,V=[],J=0;J<F;J++)V[J]=z.i(J)<<1|z.i(J-1)>>>31;return new p(V,z.h)}function Lt(z,F){var V=F>>5;F%=32;for(var J=z.g.length-V,tt=[],K=0;K<J;K++)tt[K]=0<F?z.i(K+V)>>>F|z.i(K+V+1)<<32-F:z.i(K+V);return new p(tt,z.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,XT=s,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.A,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=E,p.fromString=S,oo=p}).apply(typeof IE<"u"?IE:typeof self<"u"?self:typeof window<"u"?window:{});var af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WT,lc,QT,yf,rg,KT,ZT,JT;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,b,D){return x==Array.prototype||x==Object.prototype||(x[b]=D.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof af=="object"&&af];for(var b=0;b<x.length;++b){var D=x[b];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var s=n(this);function l(x,b){if(b)t:{var D=s;x=x.split(".");for(var U=0;U<x.length-1;U++){var ot=x[U];if(!(ot in D))break t;D=D[ot]}x=x[x.length-1],U=D[x],b=b(U),b!=U&&b!=null&&t(D,x,{configurable:!0,writable:!0,value:b})}}function h(x,b){x instanceof String&&(x+="");var D=0,U=!1,ot={next:function(){if(!U&&D<x.length){var xt=D++;return{value:b(xt,x[xt]),done:!1}}return U=!0,{done:!0,value:void 0}}};return ot[Symbol.iterator]=function(){return ot},ot}l("Array.prototype.values",function(x){return x||function(){return h(this,function(b,D){return D})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var p=p||{},A=this||self;function T(x){var b=typeof x;return b=b!="object"?b:x?Array.isArray(x)?"array":b:"null",b=="array"||b=="object"&&typeof x.length=="number"}function E(x){var b=typeof x;return b=="object"&&x!=null||b=="function"}function S(x,b,D){return x.call.apply(x.bind,arguments)}function I(x,b,D){if(!x)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var ot=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ot,U),x.apply(b,ot)}}return function(){return x.apply(b,arguments)}}function L(x,b,D){return L=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:I,L.apply(null,arguments)}function k(x,b){var D=Array.prototype.slice.call(arguments,1);return function(){var U=D.slice();return U.push.apply(U,arguments),x.apply(this,U)}}function G(x,b){function D(){}D.prototype=b.prototype,x.aa=b.prototype,x.prototype=new D,x.prototype.constructor=x,x.Qb=function(U,ot,xt){for(var kt=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)kt[Ie-2]=arguments[Ie];return b.prototype[ot].apply(U,kt)}}function W(x){const b=x.length;if(0<b){const D=Array(b);for(let U=0;U<b;U++)D[U]=x[U];return D}return[]}function Y(x,b){for(let D=1;D<arguments.length;D++){const U=arguments[D];if(T(U)){const ot=x.length||0,xt=U.length||0;x.length=ot+xt;for(let kt=0;kt<xt;kt++)x[ot+kt]=U[kt]}else x.push(U)}}class Q{constructor(b,D){this.i=b,this.j=D,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function rt(x){return/^[\s\xa0]*$/.test(x)}function nt(){var x=A.navigator;return x&&(x=x.userAgent)?x:""}function _t(x){return _t[" "](x),x}_t[" "]=function(){};var St=nt().indexOf("Gecko")!=-1&&!(nt().toLowerCase().indexOf("webkit")!=-1&&nt().indexOf("Edge")==-1)&&!(nt().indexOf("Trident")!=-1||nt().indexOf("MSIE")!=-1)&&nt().indexOf("Edge")==-1;function Lt(x,b,D){for(const U in x)b.call(D,x[U],U,x)}function z(x,b){for(const D in x)b.call(void 0,x[D],D,x)}function F(x){const b={};for(const D in x)b[D]=x[D];return b}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(x,b){let D,U;for(let ot=1;ot<arguments.length;ot++){U=arguments[ot];for(D in U)x[D]=U[D];for(let xt=0;xt<V.length;xt++)D=V[xt],Object.prototype.hasOwnProperty.call(U,D)&&(x[D]=U[D])}}function tt(x){var b=1;x=x.split(":");const D=[];for(;0<b&&x.length;)D.push(x.shift()),b--;return x.length&&D.push(x.join(":")),D}function K(x){A.setTimeout(()=>{throw x},0)}function q(){var x=ue;let b=null;return x.g&&(b=x.g,x.g=x.g.next,x.g||(x.h=null),b.next=null),b}class Ee{constructor(){this.h=this.g=null}add(b,D){const U=mt.get();U.set(b,D),this.h?this.h.next=U:this.g=U,this.h=U}}var mt=new Q(()=>new Et,x=>x.reset());class Et{constructor(){this.next=this.g=this.h=null}set(b,D){this.h=b,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let At,jt=!1,ue=new Ee,$=()=>{const x=A.Promise.resolve(void 0);At=()=>{x.then(It)}};var It=()=>{for(var x;x=q();){try{x.h.call(x.g)}catch(D){K(D)}var b=mt;b.j(x),100>b.h&&(b.h++,x.next=b.g,b.g=x)}jt=!1};function Bt(){this.s=this.s,this.C=this.C}Bt.prototype.s=!1,Bt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Bt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ot(x,b){this.type=x,this.g=this.target=b,this.defaultPrevented=!1}Ot.prototype.h=function(){this.defaultPrevented=!0};var zt=function(){if(!A.addEventListener||!Object.defineProperty)return!1;var x=!1,b=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const D=()=>{};A.addEventListener("test",D,b),A.removeEventListener("test",D,b)}catch{}return x}();function fe(x,b){if(Ot.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var D=this.type=x.type,U=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=b,b=x.relatedTarget){if(St){t:{try{_t(b.nodeName);var ot=!0;break t}catch{}ot=!1}ot||(b=null)}}else D=="mouseover"?b=x.fromElement:D=="mouseout"&&(b=x.toElement);this.relatedTarget=b,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:Mt[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&fe.aa.h.call(this)}}G(fe,Ot);var Mt={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var kn="closure_listenable_"+(1e6*Math.random()|0),ae=0;function Oi(x,b,D,U,ot){this.listener=x,this.proxy=null,this.src=b,this.type=D,this.capture=!!U,this.ha=ot,this.key=++ae,this.da=this.fa=!1}function er(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function _n(x){this.src=x,this.g={},this.h=0}_n.prototype.add=function(x,b,D,U,ot){var xt=x.toString();x=this.g[xt],x||(x=this.g[xt]=[],this.h++);var kt=Ae(x,b,U,ot);return-1<kt?(b=x[kt],D||(b.fa=!1)):(b=new Oi(b,this.src,xt,!!U,ot),b.fa=D,x.push(b)),b};function Lr(x,b){var D=b.type;if(D in x.g){var U=x.g[D],ot=Array.prototype.indexOf.call(U,b,void 0),xt;(xt=0<=ot)&&Array.prototype.splice.call(U,ot,1),xt&&(er(b),x.g[D].length==0&&(delete x.g[D],x.h--))}}function Ae(x,b,D,U){for(var ot=0;ot<x.length;++ot){var xt=x[ot];if(!xt.da&&xt.listener==b&&xt.capture==!!D&&xt.ha==U)return ot}return-1}var nr="closure_lm_"+(1e6*Math.random()|0),Li={};function ps(x,b,D,U,ot){if(Array.isArray(b)){for(var xt=0;xt<b.length;xt++)ps(x,b[xt],D,U,ot);return null}return D=va(D),x&&x[kn]?x.K(b,D,E(U)?!!U.capture:!1,ot):Xe(x,b,D,!1,U,ot)}function Xe(x,b,D,U,ot,xt){if(!b)throw Error("Invalid event type");var kt=E(ot)?!!ot.capture:!!ot,Ie=js(x);if(Ie||(x[nr]=Ie=new _n(x)),D=Ie.add(b,D,U,kt,xt),D.proxy)return D;if(U=We(),D.proxy=U,U.src=x,U.listener=D,x.addEventListener)zt||(ot=kt),ot===void 0&&(ot=!1),x.addEventListener(b.toString(),U,ot);else if(x.attachEvent)x.attachEvent(Ht(b.toString()),U);else if(x.addListener&&x.removeListener)x.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return D}function We(){function x(D){return b.call(x.src,x.listener,D)}const b=Ta;return x}function we(x,b,D,U,ot){if(Array.isArray(b))for(var xt=0;xt<b.length;xt++)we(x,b[xt],D,U,ot);else U=E(U)?!!U.capture:!!U,D=va(D),x&&x[kn]?(x=x.i,b=String(b).toString(),b in x.g&&(xt=x.g[b],D=Ae(xt,D,U,ot),-1<D&&(er(xt[D]),Array.prototype.splice.call(xt,D,1),xt.length==0&&(delete x.g[b],x.h--)))):x&&(x=js(x))&&(b=x.g[b.toString()],x=-1,b&&(x=Ae(b,D,U,ot)),(D=-1<x?b[x]:null)&&ns(D))}function ns(x){if(typeof x!="number"&&x&&!x.da){var b=x.src;if(b&&b[kn])Lr(b.i,x);else{var D=x.type,U=x.proxy;b.removeEventListener?b.removeEventListener(D,U,x.capture):b.detachEvent?b.detachEvent(Ht(D),U):b.addListener&&b.removeListener&&b.removeListener(U),(D=js(b))?(Lr(D,x),D.h==0&&(D.src=null,b[nr]=null)):er(x)}}}function Ht(x){return x in Li?Li[x]:Li[x]="on"+x}function Ta(x,b){if(x.da)x=!0;else{b=new fe(b,this);var D=x.listener,U=x.ha||x.src;x.fa&&ns(x),x=D.call(U,b)}return x}function js(x){return x=x[nr],x instanceof _n?x:null}var Qi="__closure_events_fn_"+(1e9*Math.random()>>>0);function va(x){return typeof x=="function"?x:(x[Qi]||(x[Qi]=function(b){return x.handleEvent(b)}),x[Qi])}function Oe(){Bt.call(this),this.i=new _n(this),this.M=this,this.F=null}G(Oe,Bt),Oe.prototype[kn]=!0,Oe.prototype.removeEventListener=function(x,b,D,U){we(this,x,b,D,U)};function Ue(x,b){var D,U=x.F;if(U)for(D=[];U;U=U.F)D.push(U);if(x=x.M,U=b.type||b,typeof b=="string")b=new Ot(b,x);else if(b instanceof Ot)b.target=b.target||x;else{var ot=b;b=new Ot(U,x),J(b,ot)}if(ot=!0,D)for(var xt=D.length-1;0<=xt;xt--){var kt=b.g=D[xt];ot=Un(kt,U,!0,b)&&ot}if(kt=b.g=x,ot=Un(kt,U,!0,b)&&ot,ot=Un(kt,U,!1,b)&&ot,D)for(xt=0;xt<D.length;xt++)kt=b.g=D[xt],ot=Un(kt,U,!1,b)&&ot}Oe.prototype.N=function(){if(Oe.aa.N.call(this),this.i){var x=this.i,b;for(b in x.g){for(var D=x.g[b],U=0;U<D.length;U++)er(D[U]);delete x.g[b],x.h--}}this.F=null},Oe.prototype.K=function(x,b,D,U){return this.i.add(String(x),b,!1,D,U)},Oe.prototype.L=function(x,b,D,U){return this.i.add(String(x),b,!0,D,U)};function Un(x,b,D,U){if(b=x.i.g[String(b)],!b)return!0;b=b.concat();for(var ot=!0,xt=0;xt<b.length;++xt){var kt=b[xt];if(kt&&!kt.da&&kt.capture==D){var Ie=kt.listener,Tn=kt.ha||kt.src;kt.fa&&Lr(x.i,kt),ot=Ie.call(Tn,U)!==!1&&ot}}return ot&&!U.defaultPrevented}function Fe(x,b,D){if(typeof x=="function")D&&(x=L(x,D));else if(x&&typeof x.handleEvent=="function")x=L(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:A.setTimeout(x,b||0)}function Ao(x){x.g=Fe(()=>{x.g=null,x.i&&(x.i=!1,Ao(x))},x.l);const b=x.h;x.h=null,x.m.apply(null,b)}class _a extends Bt{constructor(b,D){super(),this.m=b,this.l=D,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Ao(this)}N(){super.N(),this.g&&(A.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zs(x){Bt.call(this),this.h=x,this.g={}}G(zs,Bt);var rn=[];function Vt(x){Lt(x.g,function(b,D){this.g.hasOwnProperty(D)&&ns(b)},x),x.g={}}zs.prototype.N=function(){zs.aa.N.call(this),Vt(this)},zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ye=A.JSON.stringify,Le=A.JSON.parse,Qe=class{stringify(x){return A.JSON.stringify(x,void 0)}parse(x){return A.JSON.parse(x,void 0)}};function is(){}is.prototype.h=null;function Hs(x){return x.h||(x.h=x.i())}function Ca(){}var ge={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ai(){Ot.call(this,"d")}G(Ai,Ot);function Sa(){Ot.call(this,"c")}G(Sa,Ot);var mr={},wi=null;function Pr(){return wi=wi||new Oe}mr.La="serverreachability";function On(x){Ot.call(this,mr.La,x)}G(On,Ot);function Ki(x){const b=Pr();Ue(b,new On(b))}mr.STAT_EVENT="statevent";function Gs(x,b){Ot.call(this,mr.STAT_EVENT,x),this.stat=b}G(Gs,Ot);function Me(x){const b=Pr();Ue(b,new Gs(b,x))}mr.Ma="timingevent";function Xn(x,b){Ot.call(this,mr.Ma,x),this.size=b}G(Xn,Ot);function sn(x,b){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return A.setTimeout(function(){x()},b)}function Pi(){this.g=!0}Pi.prototype.xa=function(){this.g=!1};function ei(x,b,D,U,ot,xt){x.info(function(){if(x.g)if(xt)for(var kt="",Ie=xt.split("&"),Tn=0;Tn<Ie.length;Tn++){var Re=Ie[Tn].split("=");if(1<Re.length){var dn=Re[0];Re=Re[1];var Dn=dn.split("_");kt=2<=Dn.length&&Dn[1]=="type"?kt+(dn+"="+Re+"&"):kt+(dn+"=redacted&")}}else kt=null;else kt=xt;return"XMLHTTP REQ ("+U+") [attempt "+ot+"]: "+b+`
`+D+`
`+kt})}function rs(x,b,D,U,ot,xt,kt){x.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ot+"]: "+b+`
`+D+`
`+xt+" "+kt})}function Wn(x,b,D,U){x.info(function(){return"XMLHTTP TEXT ("+b+"): "+ir(x,D)+(U?" "+U:"")})}function Ft(x,b){x.info(function(){return"TIMEOUT: "+b})}Pi.prototype.info=function(){};function ir(x,b){if(!x.g)return b;if(!b)return null;try{var D=JSON.parse(b);if(D){for(x=0;x<D.length;x++)if(Array.isArray(D[x])){var U=D[x];if(!(2>U.length)){var ot=U[1];if(Array.isArray(ot)&&!(1>ot.length)){var xt=ot[0];if(xt!="noop"&&xt!="stop"&&xt!="close")for(var kt=1;kt<ot.length;kt++)ot[kt]=""}}}}return Ye(D)}catch{return b}}var Br={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Cn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ti;function Zi(){}G(Zi,is),Zi.prototype.g=function(){return new XMLHttpRequest},Zi.prototype.i=function(){return{}},Ti=new Zi;function ni(x,b,D,U){this.j=x,this.i=b,this.l=D,this.R=U||1,this.U=new zs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new je}function je(){this.i=null,this.g="",this.h=!1}var wo={},ba={};function Fn(x,b,D){x.L=1,x.v=mn(xe(b)),x.m=D,x.P=!0,xn(x,null)}function xn(x,b){x.F=Date.now(),Bi(x),x.A=xe(x.v);var D=x.A,U=x.R;Array.isArray(U)||(U=[String(U)]),bn(D.i,"t",U),x.C=0,D=x.j.J,x.h=new je,x.g=rl(x.j,D?b:null,!x.m),0<x.O&&(x.M=new _a(L(x.Y,x,x.g),x.O)),b=x.U,D=x.g,U=x.ca;var ot="readystatechange";Array.isArray(ot)||(ot&&(rn[0]=ot.toString()),ot=rn);for(var xt=0;xt<ot.length;xt++){var kt=ps(D,ot[xt],U||b.handleEvent,!1,b.h||b);if(!kt)break;b.g[kt.key]=kt}b=x.H?F(x.H):{},x.m?(x.u||(x.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,b)):(x.u="GET",x.g.ea(x.A,x.u,null,b)),Ki(),ei(x.i,x.u,x.A,x.l,x.R,x.m)}ni.prototype.ca=function(x){x=x.target;const b=this.M;b&&sr(x)==3?b.j():this.Y(x)},ni.prototype.Y=function(x){try{if(x==this.g)t:{const Dn=sr(this.g);var b=this.g.Ba();const zn=this.g.Z();if(!(3>Dn)&&(Dn!=3||this.g&&(this.h.h||this.g.oa()||el(this.g)))){this.J||Dn!=4||b==7||(b==8||0>=zn?Ki(3):Ki(2)),vt(this);var D=this.g.Z();this.X=D;e:if(Je(this)){var U=el(this.g);x="";var ot=U.length,xt=sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pe(this),Vr(this);var kt="";break e}this.h.i=new A.TextDecoder}for(b=0;b<ot;b++)this.h.h=!0,x+=this.h.i.decode(U[b],{stream:!(xt&&b==ot-1)});U.length=0,this.h.g+=x,this.C=0,kt=this.h.g}else kt=this.g.oa();if(this.o=D==200,rs(this.i,this.u,this.A,this.l,this.R,Dn,D),this.o){if(this.T&&!this.K){e:{if(this.g){var Ie,Tn=this.g;if((Ie=Tn.g?Tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rt(Ie)){var Re=Ie;break e}}Re=null}if(D=Re)Wn(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rr(this,D);else{this.o=!1,this.s=3,Me(12),pe(this),Vr(this);break t}}if(this.P){D=!0;let ii;for(;!this.J&&this.C<kt.length;)if(ii=To(this,kt),ii==ba){Dn==4&&(this.s=4,Me(14),D=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(ii==wo){this.s=4,Me(15),Wn(this.i,this.l,kt,"[Invalid Chunk]"),D=!1;break}else Wn(this.i,this.l,ii,null),rr(this,ii);if(Je(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dn!=4||kt.length!=0||this.h.h||(this.s=1,Me(16),D=!1),this.o=this.o&&D,!D)Wn(this.i,this.l,kt,"[Invalid Chunked Response]"),pe(this),Vr(this);else if(0<kt.length&&!this.W){this.W=!0;var dn=this.j;dn.g==this&&dn.ba&&!dn.M&&(dn.j.info("Great, no buffering proxy detected. Bytes received: "+kt.length),ls(dn),dn.M=!0,Me(11))}}else Wn(this.i,this.l,kt,null),rr(this,kt);Dn==4&&pe(this),this.o&&!this.J&&(Dn==4?fn(this.j,this):(this.o=!1,Bi(this)))}else ze(this.g),D==400&&0<kt.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),pe(this),Vr(this)}}}catch{}finally{}};function Je(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function To(x,b){var D=x.C,U=b.indexOf(`
`,D);return U==-1?ba:(D=Number(b.substring(D,U)),isNaN(D)?wo:(U+=1,U+D>b.length?ba:(b=b.slice(U,U+D),x.C=U+D,b)))}ni.prototype.cancel=function(){this.J=!0,pe(this)};function Bi(x){x.S=Date.now()+x.I,Ia(x,x.I)}function Ia(x,b){if(x.B!=null)throw Error("WatchDog timer not null");x.B=sn(L(x.ba,x),b)}function vt(x){x.B&&(A.clearTimeout(x.B),x.B=null)}ni.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Ft(this.i,this.A),this.L!=2&&(Ki(),Me(17)),pe(this),this.s=2,Vr(this)):Ia(this,this.S-x)};function Vr(x){x.j.G==0||x.J||fn(x.j,x)}function pe(x){vt(x);var b=x.M;b&&typeof b.ma=="function"&&b.ma(),x.M=null,Vt(x.U),x.g&&(b=x.g,x.g=null,b.abort(),b.ma())}function rr(x,b){try{var D=x.j;if(D.G!=0&&(D.g==x||Ys(D.h,x))){if(!x.K&&Ys(D.h,x)&&D.G==3){try{var U=D.Da.g.parse(b)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ot=U;if(ot[0]==0){t:if(!D.u){if(D.g)if(D.g.F+3e3<x.F)ws(D),Ma(D);else break t;vo(D),Me(18)}}else D.za=ot[1],0<D.za-D.T&&37500>ot[2]&&D.F&&D.v==0&&!D.C&&(D.C=sn(L(D.Za,D),6e3));if(1>=de(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else _i(D,11)}else if((x.K||D.g==x)&&ws(D),!rt(b))for(ot=D.Da.g.parse(b),b=0;b<ot.length;b++){let Re=ot[b];if(D.T=Re[0],Re=Re[1],D.G==2)if(Re[0]=="c"){D.K=Re[1],D.ia=Re[2];const dn=Re[3];dn!=null&&(D.la=dn,D.j.info("VER="+D.la));const Dn=Re[4];Dn!=null&&(D.Aa=Dn,D.j.info("SVER="+D.Aa));const zn=Re[5];zn!=null&&typeof zn=="number"&&0<zn&&(U=1.5*zn,D.L=U,D.j.info("backChannelRequestTimeoutMs_="+U)),U=D;const ii=x.g;if(ii){const Kn=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kn){var xt=U.h;xt.g||Kn.indexOf("spdy")==-1&&Kn.indexOf("quic")==-1&&Kn.indexOf("h2")==-1||(xt.j=xt.l,xt.g=new Set,xt.h&&(ys(xt,xt.h),xt.h=null))}if(U.D){const _o=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;_o&&(U.ya=_o,Ut(U.I,U.D,_o))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-x.F,D.j.info("Handshake RTT: "+D.R+"ms")),U=D;var kt=x;if(U.qa=Kt(U,U.J?U.ia:null,U.W),kt.K){oi(U.h,kt);var Ie=kt,Tn=U.L;Tn&&(Ie.I=Tn),Ie.B&&(vt(Ie),Bi(Ie)),U.g=kt}else il(U);0<D.i.length&&se(D)}else Re[0]!="stop"&&Re[0]!="close"||_i(D,7);else D.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?_i(D,7):ar(D):Re[0]!="noop"&&D.l&&D.l.ta(Re),D.v=0)}}Ki(4)}catch{}}var $o=class{constructor(x,b){this.g=x,this.map=b}};function ye(x){this.l=x||10,A.PerformanceNavigationTiming?(x=A.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(A.chrome&&A.chrome.loadTimes&&A.chrome.loadTimes()&&A.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _e(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function de(x){return x.h?1:x.g?x.g.size:0}function Ys(x,b){return x.h?x.h==b:x.g?x.g.has(b):!1}function ys(x,b){x.g?x.g.add(b):x.h=b}function oi(x,b){x.h&&x.h==b?x.h=null:x.g&&x.g.has(b)&&x.g.delete(b)}ye.prototype.cancel=function(){if(this.i=En(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function En(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let b=x.i;for(const D of x.g.values())b=b.concat(D.D);return b}return W(x.i)}function kr(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(T(x)){for(var b=[],D=x.length,U=0;U<D;U++)b.push(x[U]);return b}b=[],D=0;for(U in x)b[D++]=x[U];return b}function Ra(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(T(x)||typeof x=="string"){var b=[];x=x.length;for(var D=0;D<x;D++)b.push(D);return b}b=[],D=0;for(const U in x)b[D++]=U;return b}}}function un(x,b){if(x.forEach&&typeof x.forEach=="function")x.forEach(b,void 0);else if(T(x)||typeof x=="string")Array.prototype.forEach.call(x,b,void 0);else for(var D=Ra(x),U=kr(x),ot=U.length,xt=0;xt<ot;xt++)b.call(void 0,U[xt],D&&D[xt],x)}var Vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gu(x,b){if(x){x=x.split("&");for(var D=0;D<x.length;D++){var U=x[D].indexOf("="),ot=null;if(0<=U){var xt=x[D].substring(0,U);ot=x[D].substring(U+1)}else xt=x[D];b(xt,ot?decodeURIComponent(ot.replace(/\+/g," ")):"")}}}function cn(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof cn){this.h=x.h,Sn(this,x.j),this.o=x.o,this.g=x.g,at(this,x.s),this.l=x.l;var b=x.i,D=new pr;D.i=b.i,b.g&&(D.g=new Map(b.g),D.h=b.h),j(this,D),this.m=x.m}else x&&(b=String(x).match(Vi))?(this.h=!1,Sn(this,b[1]||"",!0),this.o=An(b[2]||""),this.g=An(b[3]||"",!0),at(this,b[4]),this.l=An(b[5]||"",!0),j(this,b[6]||"",!0),this.m=An(b[7]||"")):(this.h=!1,this.i=new pr(null,this.h))}cn.prototype.toString=function(){var x=[],b=this.j;b&&x.push(qs(b,mi,!0),":");var D=this.g;return(D||b=="file")&&(x.push("//"),(b=this.o)&&x.push(qs(b,mi,!0),"@"),x.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&x.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&x.push("/"),x.push(qs(D,D.charAt(0)=="/"?hn:Xt,!0))),(D=this.i.toString())&&x.push("?",D),(D=this.m)&&x.push("#",qs(D,Na)),x.join("")};function xe(x){return new cn(x)}function Sn(x,b,D){x.j=D?An(b,!0):b,x.j&&(x.j=x.j.replace(/:$/,""))}function at(x,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);x.s=b}else x.s=null}function j(x,b,D){b instanceof pr?(x.i=b,xr(x.i,x.h)):(D||(b=qs(b,tl)),x.i=new pr(b,x.h))}function Ut(x,b,D){x.i.set(b,D)}function mn(x){return Ut(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function An(x,b){return x?b?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function qs(x,b,D){return typeof x=="string"?(x=encodeURI(x).replace(b,Da),D&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Da(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var mi=/[#\/\?@]/g,Xt=/[#\?:]/g,hn=/[#\?]/g,tl=/[#\?@]/g,Na=/#/g;function pr(x,b){this.h=this.g=null,this.i=x||null,this.j=!!b}function vi(x){x.g||(x.g=new Map,x.h=0,x.i&&gu(x.i,function(b,D){x.add(decodeURIComponent(b.replace(/\+/g," ")),D)}))}e=pr.prototype,e.add=function(x,b){vi(this),this.i=null,x=ki(this,x);var D=this.g.get(x);return D||this.g.set(x,D=[]),D.push(b),this.h+=1,this};function yr(x,b){vi(x),b=ki(x,b),x.g.has(b)&&(x.i=null,x.h-=x.g.get(b).length,x.g.delete(b))}function ss(x,b){return vi(x),b=ki(x,b),x.g.has(b)}e.forEach=function(x,b){vi(this),this.g.forEach(function(D,U){D.forEach(function(ot){x.call(b,ot,U,this)},this)},this)},e.na=function(){vi(this);const x=Array.from(this.g.values()),b=Array.from(this.g.keys()),D=[];for(let U=0;U<b.length;U++){const ot=x[U];for(let xt=0;xt<ot.length;xt++)D.push(b[U])}return D},e.V=function(x){vi(this);let b=[];if(typeof x=="string")ss(this,x)&&(b=b.concat(this.g.get(ki(this,x))));else{x=Array.from(this.g.values());for(let D=0;D<x.length;D++)b=b.concat(x[D])}return b},e.set=function(x,b){return vi(this),this.i=null,x=ki(this,x),ss(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[b]),this.h+=1,this},e.get=function(x,b){return x?(x=this.V(x),0<x.length?String(x[0]):b):b};function bn(x,b,D){yr(x,b),0<D.length&&(x.i=null,x.g.set(ki(x,b),W(D)),x.h+=D.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],b=Array.from(this.g.keys());for(var D=0;D<b.length;D++){var U=b[D];const xt=encodeURIComponent(String(U)),kt=this.V(U);for(U=0;U<kt.length;U++){var ot=xt;kt[U]!==""&&(ot+="="+encodeURIComponent(String(kt[U]))),x.push(ot)}}return this.i=x.join("&")};function ki(x,b){return b=String(b),x.j&&(b=b.toLowerCase()),b}function xr(x,b){b&&!x.j&&(vi(x),x.i=null,x.g.forEach(function(D,U){var ot=U.toLowerCase();U!=ot&&(yr(this,U),bn(this,ot,D))},x)),x.j=b}function Wt(x,b){const D=new Pi;if(A.Image){const U=new Image;U.onload=k(Jt,D,"TestLoadImage: loaded",!0,b,U),U.onerror=k(Jt,D,"TestLoadImage: error",!1,b,U),U.onabort=k(Jt,D,"TestLoadImage: abort",!1,b,U),U.ontimeout=k(Jt,D,"TestLoadImage: timeout",!1,b,U),A.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=x}else b(!1)}function Er(x,b){const D=new Pi,U=new AbortController,ot=setTimeout(()=>{U.abort(),Jt(D,"TestPingServer: timeout",!1,b)},1e4);fetch(x,{signal:U.signal}).then(xt=>{clearTimeout(ot),xt.ok?Jt(D,"TestPingServer: ok",!0,b):Jt(D,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(ot),Jt(D,"TestPingServer: error",!1,b)})}function Jt(x,b,D,U,ot){try{ot&&(ot.onload=null,ot.onerror=null,ot.onabort=null,ot.ontimeout=null),U(D)}catch{}}function wn(){this.g=new Qe}function Ur(x,b,D){const U=D||"";try{un(x,function(ot,xt){let kt=ot;E(ot)&&(kt=Ye(ot)),b.push(U+xt+"="+encodeURIComponent(kt))})}catch(ot){throw b.push(U+"type="+encodeURIComponent("_badmap")),ot}}function Fr(x){this.l=x.Ub||null,this.j=x.eb||!1}G(Fr,is),Fr.prototype.g=function(){return new jr(this.l,this.j)},Fr.prototype.i=function(x){return function(){return x}}({});function jr(x,b){Oe.call(this),this.D=x,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(jr,Oe),e=jr.prototype,e.open=function(x,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=b,this.readyState=1,Ui(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(b.body=x),(this.D||A).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zr(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof A.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ar(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ar(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var b=x.value?x.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!x.done}))&&(this.response=this.responseText+=b)}x.done?zr(this):Ui(this),this.readyState==3&&Ar(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,zr(this))},e.Qa=function(x){this.g&&(this.response=x,zr(this))},e.ga=function(){this.g&&zr(this)};function zr(x){x.readyState=4,x.l=null,x.j=null,x.v=null,Ui(x)}e.setRequestHeader=function(x,b){this.u.append(x,b)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],b=this.h.entries();for(var D=b.next();!D.done;)D=D.value,x.push(D[0]+": "+D[1]),D=b.next();return x.join(`\r
`)};function Ui(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(jr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function as(x){let b="";return Lt(x,function(D,U){b+=U,b+=":",b+=D,b+=`\r
`}),b}function In(x,b,D){t:{for(U in D){var U=!1;break t}U=!0}U||(D=as(D),typeof x=="string"?D!=null&&encodeURIComponent(String(D)):Ut(x,b,D))}function ke(x){Oe.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(ke,Oe);var Hr=/^https?$/i,wr=["POST","PUT"];e=ke.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,b,D,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);b=b?b.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ti.g(),this.v=this.o?Hs(this.o):Hs(Ti),this.g.onreadystatechange=L(this.Ea,this);try{this.B=!0,this.g.open(b,String(x),!0),this.B=!1}catch(xt){li(this,xt);return}if(x=D||"",D=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ot in U)D.set(ot,U[ot]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const xt of U.keys())D.set(xt,U.get(xt));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(D.keys()).find(xt=>xt.toLowerCase()=="content-type"),ot=A.FormData&&x instanceof A.FormData,!(0<=Array.prototype.indexOf.call(wr,b,void 0))||U||ot||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xt,kt]of D)this.g.setRequestHeader(xt,kt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qs(this),this.u=!0,this.g.send(x),this.u=!1}catch(xt){li(this,xt)}};function li(x,b){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=b,x.m=5,Xs(x),Tr(x)}function Xs(x){x.A||(x.A=!0,Ue(x,"complete"),Ue(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,Ue(this,"complete"),Ue(this,"abort"),Tr(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tr(this,!0)),ke.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ws(this):this.bb())},e.bb=function(){Ws(this)};function Ws(x){if(x.h&&typeof p<"u"&&(!x.v[1]||sr(x)!=4||x.Z()!=2)){if(x.u&&sr(x)==4)Fe(x.Ea,0,x);else if(Ue(x,"readystatechange"),sr(x)==4){x.h=!1;try{const kt=x.Z();t:switch(kt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break t;default:b=!1}var D;if(!(D=b)){var U;if(U=kt===0){var ot=String(x.D).match(Vi)[1]||null;!ot&&A.self&&A.self.location&&(ot=A.self.location.protocol.slice(0,-1)),U=!Hr.test(ot?ot.toLowerCase():"")}D=U}if(D)Ue(x,"complete"),Ue(x,"success");else{x.m=6;try{var xt=2<sr(x)?x.g.statusText:""}catch{xt=""}x.l=xt+" ["+x.Z()+"]",Xs(x)}}finally{Tr(x)}}}}function Tr(x,b){if(x.g){Qs(x);const D=x.g,U=x.v[0]?()=>{}:null;x.g=null,x.v=null,b||Ue(x,"ready");try{D.onreadystatechange=U}catch{}}}function Qs(x){x.I&&(A.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function sr(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<sr(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var b=this.g.responseText;return x&&b.indexOf(x)==0&&(b=b.substring(x.length)),Le(b)}};function el(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function ze(x){const b={};x=(x.g&&2<=sr(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<x.length;U++){if(rt(x[U]))continue;var D=tt(x[U]);const ot=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const xt=b[ot]||[];b[ot]=xt,xt.push(D)}z(b,function(U){return U.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xs(x,b,D){return D&&D.internalChannelParams&&D.internalChannelParams[x]||b}function os(x){this.Aa=0,this.i=[],this.j=new Pi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xs("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xs("baseRetryDelayMs",5e3,x),this.cb=xs("retryDelaySeedMs",1e4,x),this.Wa=xs("forwardChannelMaxRetries",2,x),this.wa=xs("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new ye(x&&x.concurrentRequestLimit),this.Da=new wn,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=os.prototype,e.la=8,e.G=1,e.connect=function(x,b,D,U){Me(0),this.W=x,this.H=b||{},D&&U!==void 0&&(this.H.OSID=D,this.H.OAID=U),this.F=this.X,this.I=Kt(this,null,this.W),se(this)};function ar(x){if(pt(x),x.G==3){var b=x.U++,D=xe(x.I);if(Ut(D,"SID",x.K),Ut(D,"RID",b),Ut(D,"TYPE","terminate"),As(x,D),b=new ni(x,x.j,b),b.L=2,b.v=mn(xe(D)),D=!1,A.navigator&&A.navigator.sendBeacon)try{D=A.navigator.sendBeacon(b.v.toString(),"")}catch{}!D&&A.Image&&(new Image().src=b.v,D=!0),D||(b.g=rl(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Bi(b)}He(x)}function Ma(x){x.g&&(ls(x),x.g.cancel(),x.g=null)}function pt(x){Ma(x),x.u&&(A.clearTimeout(x.u),x.u=null),ws(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&A.clearTimeout(x.s),x.s=null)}function se(x){if(!_e(x.h)&&!x.s){x.s=!0;var b=x.Ga;At||$(),jt||(At(),jt=!0),ue.add(b,x),x.B=0}}function Qn(x,b){return de(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=b.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=sn(L(x.Ga,x,b),Ts(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const ot=new ni(this,this.j,x);let xt=this.o;if(this.S&&(xt?(xt=F(xt),J(xt,this.S)):xt=this.S),this.m!==null||this.O||(ot.H=xt,xt=null),this.P)t:{for(var b=0,D=0;D<this.i.length;D++){e:{var U=this.i[D];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break e}U=void 0}if(U===void 0)break;if(b+=U,4096<b){b=D;break t}if(b===4096||D===this.i.length-1){b=D+1;break t}}b=1e3}else b=1e3;b=nl(this,ot,b),D=xe(this.I),Ut(D,"RID",x),Ut(D,"CVER",22),this.D&&Ut(D,"X-HTTP-Session-Id",this.D),As(this,D),xt&&(this.O?b="headers="+encodeURIComponent(String(as(xt)))+"&"+b:this.m&&In(D,this.m,xt)),ys(this.h,ot),this.Ua&&Ut(D,"TYPE","init"),this.P?(Ut(D,"$req",b),Ut(D,"SID","null"),ot.T=!0,Fn(ot,D,null)):Fn(ot,D,b),this.G=2}}else this.G==3&&(x?Es(this,x):this.i.length==0||_e(this.h)||Es(this))};function Es(x,b){var D;b?D=b.l:D=x.U++;const U=xe(x.I);Ut(U,"SID",x.K),Ut(U,"RID",D),Ut(U,"AID",x.T),As(x,U),x.m&&x.o&&In(U,x.m,x.o),D=new ni(x,x.j,D,x.B+1),x.m===null&&(D.H=x.o),b&&(x.i=b.D.concat(x.i)),b=nl(x,D,1e3),D.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),ys(x.h,D),Fn(D,U,b)}function As(x,b){x.H&&Lt(x.H,function(D,U){Ut(b,U,D)}),x.l&&un({},function(D,U){Ut(b,U,D)})}function nl(x,b,D){D=Math.min(x.i.length,D);var U=x.l?L(x.l.Na,x.l,x):null;t:{var ot=x.i;let xt=-1;for(;;){const kt=["count="+D];xt==-1?0<D?(xt=ot[0].g,kt.push("ofs="+xt)):xt=0:kt.push("ofs="+xt);let Ie=!0;for(let Tn=0;Tn<D;Tn++){let Re=ot[Tn].g;const dn=ot[Tn].map;if(Re-=xt,0>Re)xt=Math.max(0,ot[Tn].g-100),Ie=!1;else try{Ur(dn,kt,"req"+Re+"_")}catch{U&&U(dn)}}if(Ie){U=kt.join("&");break t}}}return x=x.i.splice(0,D),b.D=x,U}function il(x){if(!x.g&&!x.u){x.Y=1;var b=x.Fa;At||$(),jt||(At(),jt=!0),ue.add(b,x),x.v=0}}function vo(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=sn(L(x.Fa,x),Ts(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,Rn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=sn(L(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),Ma(this),Rn(this))};function ls(x){x.A!=null&&(A.clearTimeout(x.A),x.A=null)}function Rn(x){x.g=new ni(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var b=xe(x.qa);Ut(b,"RID","rpc"),Ut(b,"SID",x.K),Ut(b,"AID",x.T),Ut(b,"CI",x.F?"0":"1"),!x.F&&x.ja&&Ut(b,"TO",x.ja),Ut(b,"TYPE","xmlhttp"),As(x,b),x.m&&x.o&&In(b,x.m,x.o),x.L&&(x.g.I=x.L);var D=x.g;x=x.ia,D.L=1,D.v=mn(xe(b)),D.m=null,D.P=!0,xn(D,x)}e.Za=function(){this.C!=null&&(this.C=null,Ma(this),vo(this),Me(19))};function ws(x){x.C!=null&&(A.clearTimeout(x.C),x.C=null)}function fn(x,b){var D=null;if(x.g==b){ws(x),ls(x),x.g=null;var U=2}else if(Ys(x.h,b))D=b.D,oi(x.h,b),U=1;else return;if(x.G!=0){if(b.o)if(U==1){D=b.m?b.m.length:0,b=Date.now()-b.F;var ot=x.B;U=Pr(),Ue(U,new Xn(U,D)),se(x)}else il(x);else if(ot=b.s,ot==3||ot==0&&0<b.X||!(U==1&&Qn(x,b)||U==2&&vo(x)))switch(D&&0<D.length&&(b=x.h,b.i=b.i.concat(D)),ot){case 1:_i(x,5);break;case 4:_i(x,10);break;case 3:_i(x,6);break;default:_i(x,2)}}}function Ts(x,b){let D=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(D*=2),D*b}function _i(x,b){if(x.j.info("Error code "+b),b==2){var D=L(x.fb,x),U=x.Xa;const ot=!U;U=new cn(U||"//www.google.com/images/cleardot.gif"),A.location&&A.location.protocol=="http"||Sn(U,"https"),mn(U),ot?Wt(U.toString(),D):Er(U.toString(),D)}else Me(2);x.G=0,x.l&&x.l.sa(b),He(x),pt(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function He(x){if(x.G=0,x.ka=[],x.l){const b=En(x.h);(b.length!=0||x.i.length!=0)&&(Y(x.ka,b),Y(x.ka,x.i),x.h.i.length=0,W(x.i),x.i.length=0),x.l.ra()}}function Kt(x,b,D){var U=D instanceof cn?xe(D):new cn(D);if(U.g!="")b&&(U.g=b+"."+U.g),at(U,U.s);else{var ot=A.location;U=ot.protocol,b=b?b+"."+ot.hostname:ot.hostname,ot=+ot.port;var xt=new cn(null);U&&Sn(xt,U),b&&(xt.g=b),ot&&at(xt,ot),D&&(xt.l=D),U=xt}return D=x.D,b=x.ya,D&&b&&Ut(U,D,b),Ut(U,"VER",x.la),As(x,U),U}function rl(x,b,D){if(b&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=x.Ca&&!x.pa?new ke(new Fr({eb:D})):new ke(x.pa),b.Ha(x.J),b}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ke(){}e=Ke.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function or(){}or.prototype.g=function(x,b){return new jn(x,b)};function jn(x,b){Oe.call(this),this.g=new os(b),this.l=x,this.h=b&&b.messageUrlParams||null,x=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(x?x["X-WebChannel-Content-Type"]=b.messageContentType:x={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(x?x["X-WebChannel-Client-Profile"]=b.va:x={"X-WebChannel-Client-Profile":b.va}),this.g.S=x,(x=b&&b.Sb)&&!rt(x)&&(this.g.m=x),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!rt(b)&&(this.g.D=b,x=this.h,x!==null&&b in x&&(x=this.h,b in x&&delete x[b])),this.j=new lr(this)}G(jn,Oe),jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){ar(this.g)},jn.prototype.o=function(x){var b=this.g;if(typeof x=="string"){var D={};D.__data__=x,x=D}else this.u&&(D={},D.__data__=Ye(x),x=D);b.i.push(new $o(b.Ya++,x)),b.G==3&&se(b)},jn.prototype.N=function(){this.g.l=null,delete this.j,ar(this.g),delete this.g,jn.aa.N.call(this)};function sl(x){Ai.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var b=x.__sm__;if(b){t:{for(const D in b){x=D;break t}x=void 0}(this.i=x)&&(x=this.i,b=b!==null&&x in b?b[x]:void 0),this.data=b}else this.data=x}G(sl,Ai);function Ji(){Sa.call(this),this.status=1}G(Ji,Sa);function lr(x){this.g=x}G(lr,Ke),lr.prototype.ua=function(){Ue(this.g,"a")},lr.prototype.ta=function(x){Ue(this.g,new sl(x))},lr.prototype.sa=function(x){Ue(this.g,new Ji)},lr.prototype.ra=function(){Ue(this.g,"b")},or.prototype.createWebChannel=or.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,JT=function(){return new or},ZT=function(){return Pr()},KT=mr,rg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Br.NO_ERROR=0,Br.TIMEOUT=8,Br.HTTP_ERROR=6,yf=Br,Cn.COMPLETE="complete",QT=Cn,Ca.EventType=ge,ge.OPEN="a",ge.CLOSE="b",ge.ERROR="c",ge.MESSAGE="d",Oe.prototype.listen=Oe.prototype.K,lc=Ca,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,WT=ke}).apply(typeof af<"u"?af:typeof self<"u"?self:typeof window<"u"?window:{});const RE="@firebase/firestore",DE="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}qi.UNAUTHENTICATED=new qi(null),qi.GOOGLE_CREDENTIALS=new qi("google-credentials-uid"),qi.FIRST_PARTY=new qi("first-party-uid"),qi.MOCK_USER=new qi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=new jT("@firebase/firestore");function Ll(){return Yo.logLevel}function Gt(e,...t){if(Yo.logLevel<=Ve.DEBUG){const n=t.map(um);Yo.debug(`Firestore (${uu}): ${e}`,...n)}}function xa(e,...t){if(Yo.logLevel<=Ve.ERROR){const n=t.map(um);Yo.error(`Firestore (${uu}): ${e}`,...n)}}function Kl(e,...t){if(Yo.logLevel<=Ve.WARN){const n=t.map(um);Yo.warn(`Firestore (${uu}): ${e}`,...n)}}function um(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(e="Unexpected state"){const t=`FIRESTORE (${uu}) INTERNAL ASSERTION FAILED: `+e;throw xa(t),new Error(t)}function Ze(e,t){e||re()}function he(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zt extends lu{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class oD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(qi.UNAUTHENTICATED))}shutdown(){}}class lD{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uD{constructor(t){this.t=t,this.currentUser=qi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ze(this.o===void 0);let s=this.i;const l=T=>this.i!==s?(s=this.i,n(T)):Promise.resolve();let h=new ga;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new ga,t.enqueueRetryable(()=>l(this.currentUser))};const p=()=>{const T=h;t.enqueueRetryable(async()=>{await T.promise,await l(this.currentUser)})},A=T=>{Gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit(T=>A(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?A(T):(Gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new ga)}},0),p()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(Gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ze(typeof s.accessToken=="string"),new $T(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ze(t===null||typeof t=="string"),new qi(t)}}class cD{constructor(t,n,s){this.l=t,this.h=n,this.P=s,this.type="FirstParty",this.user=qi.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class hD{constructor(t,n,s){this.l=t,this.h=n,this.P=s}getToken(){return Promise.resolve(new cD(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(qi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fD{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,G6(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){Ze(this.o===void 0);const s=h=>{h.error!=null&&Gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const p=h.token!==this.R;return this.R=h.token,Gt("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?n(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable(()=>s(h))};const l=h=>{Gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(h=>l(h)),setTimeout(()=>{if(!this.appCheck){const h=this.A.getImmediate({optional:!0});h?l(h):Gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new NE(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ze(typeof n.token=="string"),this.R=n.token,new NE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=dD(40);for(let h=0;h<l.length;++h)s.length<20&&l[h]<n&&(s+=t.charAt(l[h]%62))}return s}}function ve(e,t){return e<t?-1:e>t?1:0}function sg(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=e.codePointAt(n),l=t.codePointAt(n);if(s!==l){if(s<128&&l<128)return ve(s,l);{const h=tv(),p=gD(h.encode(ME(e,n)),h.encode(ME(t,n)));return p!==0?p:ve(s,l)}}n+=s>65535?2:1}return ve(e.length,t.length)}function ME(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function gD(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ve(e[n],t[n]);return ve(e.length,t.length)}function Zl(e,t,n){return e.length===t.length&&e.every((s,l)=>n(s,t[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=-62135596800,LE=1e6;class di{static now(){return di.fromMillis(Date.now())}static fromDate(t){return di.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*LE);return new di(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Zt(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Zt(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<OE)throw new Zt(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Zt(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/LE}_compareTo(t){return this.seconds===t.seconds?ve(this.nanoseconds,t.nanoseconds):ve(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-OE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{static fromTimestamp(t){return new le(t)}static min(){return new le(new di(0,0))}static max(){return new le(new di(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="__name__";class Ds{constructor(t,n,s){n===void 0?n=0:n>t.length&&re(),s===void 0?s=t.length-n:s>t.length-n&&re(),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return Ds.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ds?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const h=Ds.compareSegments(t.get(l),n.get(l));if(h!==0)return h}return ve(t.length,n.length)}static compareSegments(t,n){const s=Ds.isNumericId(t),l=Ds.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?Ds.extractNumericId(t).compare(Ds.extractNumericId(n)):sg(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return oo.fromString(t.substring(4,t.length-2))}}class Mn extends Ds{construct(t,n,s){return new Mn(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new Zt(Dt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(l=>l.length>0))}return new Mn(n)}static emptyPath(){return new Mn([])}}const mD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ni extends Ds{construct(t,n,s){return new Ni(t,n,s)}static isValidIdentifier(t){return mD.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ni.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===PE}static keyField(){return new Ni([PE])}static fromServerFormat(t){const n=[];let s="",l=0;const h=()=>{if(s.length===0)throw new Zt(Dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let p=!1;for(;l<t.length;){const A=t[l];if(A==="\\"){if(l+1===t.length)throw new Zt(Dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const T=t[l+1];if(T!=="\\"&&T!=="."&&T!=="`")throw new Zt(Dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=T,l+=2}else A==="`"?(p=!p,l++):A!=="."||p?(s+=A,l++):(h(),l++)}if(h(),p)throw new Zt(Dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ni(n)}static emptyPath(){return new Ni([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t){this.path=t}static fromPath(t){return new $t(Mn.fromString(t))}static fromName(t){return new $t(Mn.fromString(t).popFirst(5))}static empty(){return new $t(Mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Mn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Mn.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new $t(new Mn(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=-1;function pD(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,l=le.fromTimestamp(s===1e9?new di(n+1,0):new di(n,s));return new ho(l,$t.empty(),t)}function yD(e){return new ho(e.readTime,e.key,Lc)}class ho{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new ho(le.min(),$t.empty(),Lc)}static max(){return new ho(le.max(),$t.empty(),Lc)}}function xD(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=$t.comparator(e.documentKey,t.documentKey),n!==0?n:ve(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cu(e){if(e.code!==Dt.FAILED_PRECONDITION||e.message!==ED)throw e;Gt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new bt((s,l)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(s,l)},this.catchCallback=h=>{this.wrapFailure(n,h).next(s,l)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof bt?n:bt.resolve(n)}catch(n){return bt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):bt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):bt.reject(n)}static resolve(t){return new bt((n,s)=>{n(t)})}static reject(t){return new bt((n,s)=>{s(t)})}static waitFor(t){return new bt((n,s)=>{let l=0,h=0,p=!1;t.forEach(A=>{++l,A.next(()=>{++h,p&&h===l&&n()},T=>s(T))}),p=!0,h===l&&n()})}static or(t){let n=bt.resolve(!1);for(const s of t)n=n.next(l=>l?bt.resolve(l):s());return n}static forEach(t,n){const s=[];return t.forEach((l,h)=>{s.push(n.call(this,l,h))}),this.waitFor(s)}static mapArray(t,n){return new bt((s,l)=>{const h=t.length,p=new Array(h);let A=0;for(let T=0;T<h;T++){const E=T;n(t[E]).next(S=>{p[E]=S,++A,A===h&&s(p)},S=>l(S))}})}static doWhile(t,n){return new bt((s,l)=>{const h=()=>{t()===!0?n().next(()=>{h()},l):s()};h()})}}function wD(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function hu(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}rd.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm=-1;function sd(e){return e==null}function kf(e){return e===0&&1/e==-1/0}function TD(e){return typeof e=="number"&&Number.isInteger(e)&&!kf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="";function vD(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=BE(t)),t=_D(e.get(n),t);return BE(t)}function _D(e,t){let n=t;const s=e.length;for(let l=0;l<s;l++){const h=e.charAt(l);switch(h){case"\0":n+="";break;case nv:n+="";break;default:n+=h}}return n}function BE(e){return e+nv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function iv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t,n){this.comparator=t,this.root=n||Di.EMPTY}insert(t,n){return new Vn(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Di.BLACK,null,null))}remove(t){return new Vn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Di.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new of(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new of(this.root,t,this.comparator,!1)}getReverseIterator(){return new of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new of(this.root,t,this.comparator,!0)}}class of{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=n?s(t.key,n):1,n&&l&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Di{constructor(t,n,s,l,h){this.key=t,this.value=n,this.color=s??Di.RED,this.left=l??Di.EMPTY,this.right=h??Di.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,h){return new Di(t??this.key,n??this.value,s??this.color,l??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const h=s(t,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(t,n,s),null):h===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Di.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return Di.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Di.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const t=this.left.check();if(t!==this.right.check())throw re();return t+(this.isRed()?0:1)}}Di.EMPTY=null,Di.RED=!0,Di.BLACK=!1;Di.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(t,n,s,l,h){return this}insert(t,n,s){return new Di(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(t){this.comparator=t,this.data=new Vn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new kE(this.data.getIterator())}getIteratorFrom(t){return new kE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof gi)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,h=s.getNext().key;if(this.comparator(l,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new gi(this.comparator);return n.data=t,n}}class kE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(t){this.fields=t,t.sort(Ni.comparator)}static empty(){return new gs([])}unionWith(t){let n=new gi(Ni.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new gs(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Zl(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new rv("Invalid base64 string: "+h):h}}(t);return new Mi(n)}static fromUint8Array(t){const n=function(l){let h="";for(let p=0;p<l.length;++p)h+=String.fromCharCode(l[p]);return h}(t);return new Mi(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ve(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Mi.EMPTY_BYTE_STRING=new Mi("");const CD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fo(e){if(Ze(!!e),typeof e=="string"){let t=0;const n=CD.exec(e);if(Ze(!!n),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ti(e.seconds),nanos:ti(e.nanos)}}function ti(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function go(e){return typeof e=="string"?Mi.fromBase64String(e):Mi.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="server_timestamp",av="__type__",ov="__previous_value__",lv="__local_write_time__";function hm(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[av])===null||n===void 0?void 0:n.stringValue)===sv}function ad(e){const t=e.mapValue.fields[ov];return hm(t)?ad(t):t}function Pc(e){const t=fo(e.mapValue.fields[lv].timestampValue);return new di(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(t,n,s,l,h,p,A,T,E){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=h,this.forceLongPolling=p,this.autoDetectLongPolling=A,this.longPollingOptions=T,this.useFetchStreams=E}}const Uf="(default)";class Bc{constructor(t,n){this.projectId=t,this.database=n||Uf}static empty(){return new Bc("","")}get isDefaultDatabase(){return this.database===Uf}isEqual(t){return t instanceof Bc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="__type__",bD="__max__",lf={mapValue:{}},cv="__vector__",Ff="value";function mo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hm(e)?4:RD(e)?9007199254740991:ID(e)?10:11:re()}function ks(e,t){if(e===t)return!0;const n=mo(e);if(n!==mo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Pc(e).isEqual(Pc(t));case 3:return function(l,h){if(typeof l.timestampValue=="string"&&typeof h.timestampValue=="string"&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const p=fo(l.timestampValue),A=fo(h.timestampValue);return p.seconds===A.seconds&&p.nanos===A.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(l,h){return go(l.bytesValue).isEqual(go(h.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(l,h){return ti(l.geoPointValue.latitude)===ti(h.geoPointValue.latitude)&&ti(l.geoPointValue.longitude)===ti(h.geoPointValue.longitude)}(e,t);case 2:return function(l,h){if("integerValue"in l&&"integerValue"in h)return ti(l.integerValue)===ti(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const p=ti(l.doubleValue),A=ti(h.doubleValue);return p===A?kf(p)===kf(A):isNaN(p)&&isNaN(A)}return!1}(e,t);case 9:return Zl(e.arrayValue.values||[],t.arrayValue.values||[],ks);case 10:case 11:return function(l,h){const p=l.mapValue.fields||{},A=h.mapValue.fields||{};if(VE(p)!==VE(A))return!1;for(const T in p)if(p.hasOwnProperty(T)&&(A[T]===void 0||!ks(p[T],A[T])))return!1;return!0}(e,t);default:return re()}}function Vc(e,t){return(e.values||[]).find(n=>ks(n,t))!==void 0}function Jl(e,t){if(e===t)return 0;const n=mo(e),s=mo(t);if(n!==s)return ve(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(e.booleanValue,t.booleanValue);case 2:return function(h,p){const A=ti(h.integerValue||h.doubleValue),T=ti(p.integerValue||p.doubleValue);return A<T?-1:A>T?1:A===T?0:isNaN(A)?isNaN(T)?0:-1:1}(e,t);case 3:return UE(e.timestampValue,t.timestampValue);case 4:return UE(Pc(e),Pc(t));case 5:return sg(e.stringValue,t.stringValue);case 6:return function(h,p){const A=go(h),T=go(p);return A.compareTo(T)}(e.bytesValue,t.bytesValue);case 7:return function(h,p){const A=h.split("/"),T=p.split("/");for(let E=0;E<A.length&&E<T.length;E++){const S=ve(A[E],T[E]);if(S!==0)return S}return ve(A.length,T.length)}(e.referenceValue,t.referenceValue);case 8:return function(h,p){const A=ve(ti(h.latitude),ti(p.latitude));return A!==0?A:ve(ti(h.longitude),ti(p.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return FE(e.arrayValue,t.arrayValue);case 10:return function(h,p){var A,T,E,S;const I=h.fields||{},L=p.fields||{},k=(A=I[Ff])===null||A===void 0?void 0:A.arrayValue,G=(T=L[Ff])===null||T===void 0?void 0:T.arrayValue,W=ve(((E=k==null?void 0:k.values)===null||E===void 0?void 0:E.length)||0,((S=G==null?void 0:G.values)===null||S===void 0?void 0:S.length)||0);return W!==0?W:FE(k,G)}(e.mapValue,t.mapValue);case 11:return function(h,p){if(h===lf.mapValue&&p===lf.mapValue)return 0;if(h===lf.mapValue)return 1;if(p===lf.mapValue)return-1;const A=h.fields||{},T=Object.keys(A),E=p.fields||{},S=Object.keys(E);T.sort(),S.sort();for(let I=0;I<T.length&&I<S.length;++I){const L=sg(T[I],S[I]);if(L!==0)return L;const k=Jl(A[T[I]],E[S[I]]);if(k!==0)return k}return ve(T.length,S.length)}(e.mapValue,t.mapValue);default:throw re()}}function UE(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ve(e,t);const n=fo(e),s=fo(t),l=ve(n.seconds,s.seconds);return l!==0?l:ve(n.nanos,s.nanos)}function FE(e,t){const n=e.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const h=Jl(n[l],s[l]);if(h)return h}return ve(n.length,s.length)}function $l(e){return ag(e)}function ag(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const s=fo(n);return`time(${s.seconds},${s.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return go(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return $t.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let s="[",l=!0;for(const h of n.values||[])l?l=!1:s+=",",s+=ag(h);return s+"]"}(e.arrayValue):"mapValue"in e?function(n){const s=Object.keys(n.fields||{}).sort();let l="{",h=!0;for(const p of s)h?h=!1:l+=",",l+=`${p}:${ag(n.fields[p])}`;return l+"}"}(e.mapValue):re()}function xf(e){switch(mo(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ad(e);return t?16+xf(t):16;case 5:return 2*e.stringValue.length;case 6:return go(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,h)=>l+xf(h),0)}(e.arrayValue);case 10:case 11:return function(s){let l=0;return Qo(s.fields,(h,p)=>{l+=h.length+xf(p)}),l}(e.mapValue);default:throw re()}}function og(e){return!!e&&"integerValue"in e}function fm(e){return!!e&&"arrayValue"in e}function jE(e){return!!e&&"nullValue"in e}function zE(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ef(e){return!!e&&"mapValue"in e}function ID(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[uv])===null||n===void 0?void 0:n.stringValue)===cv}function yc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Qo(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=yc(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=yc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function RD(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===bD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(t){this.value=t}static empty(){return new ts({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Ef(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=yc(n)}setAll(t){let n=Ni.emptyPath(),s={},l=[];t.forEach((p,A)=>{if(!n.isImmediateParentOf(A)){const T=this.getFieldsMap(n);this.applyChanges(T,s,l),s={},l=[],n=A.popLast()}p?s[A.lastSegment()]=yc(p):l.push(A.lastSegment())});const h=this.getFieldsMap(n);this.applyChanges(h,s,l)}delete(t){const n=this.field(t.popLast());Ef(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ks(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];Ef(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){Qo(n,(l,h)=>t[l]=h);for(const l of s)delete t[l]}clone(){return new ts(yc(this.value))}}function hv(e){const t=[];return Qo(e.fields,(n,s)=>{const l=new Ni([n]);if(Ef(s)){const h=hv(s.mapValue).fields;if(h.length===0)t.push(l);else for(const p of h)t.push(l.child(p))}else t.push(l)}),new gs(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(t,n,s,l,h,p,A){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=h,this.data=p,this.documentState=A}static newInvalidDocument(t){return new Xi(t,0,le.min(),le.min(),le.min(),ts.empty(),0)}static newFoundDocument(t,n,s,l){return new Xi(t,1,n,le.min(),s,l,0)}static newNoDocument(t,n){return new Xi(t,2,n,le.min(),le.min(),ts.empty(),0)}static newUnknownDocument(t,n){return new Xi(t,3,n,le.min(),le.min(),ts.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ts.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Xi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Xi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(t,n){this.position=t,this.inclusive=n}}function HE(e,t,n){let s=0;for(let l=0;l<e.position.length;l++){const h=t[l],p=e.position[l];if(h.field.isKeyField()?s=$t.comparator($t.fromName(p.referenceValue),n.key):s=Jl(p,n.data.field(h.field)),h.dir==="desc"&&(s*=-1),s!==0)break}return s}function GE(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ks(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(t,n="asc"){this.field=t,this.dir=n}}function DD(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{}class fi extends fv{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new MD(t,n,s):n==="array-contains"?new PD(t,s):n==="in"?new BD(t,s):n==="not-in"?new VD(t,s):n==="array-contains-any"?new kD(t,s):new fi(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new OD(t,s):new LD(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Jl(n,this.value)):n!==null&&mo(this.value)===mo(n)&&this.matchesComparison(Jl(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Us extends fv{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new Us(t,n)}matches(t){return dv(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function dv(e){return e.op==="and"}function gv(e){return ND(e)&&dv(e)}function ND(e){for(const t of e.filters)if(t instanceof Us)return!1;return!0}function lg(e){if(e instanceof fi)return e.field.canonicalString()+e.op.toString()+$l(e.value);if(gv(e))return e.filters.map(t=>lg(t)).join(",");{const t=e.filters.map(n=>lg(n)).join(",");return`${e.op}(${t})`}}function mv(e,t){return e instanceof fi?function(s,l){return l instanceof fi&&s.op===l.op&&s.field.isEqual(l.field)&&ks(s.value,l.value)}(e,t):e instanceof Us?function(s,l){return l instanceof Us&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((h,p,A)=>h&&mv(p,l.filters[A]),!0):!1}(e,t):void re()}function pv(e){return e instanceof fi?function(n){return`${n.field.canonicalString()} ${n.op} ${$l(n.value)}`}(e):e instanceof Us?function(n){return n.op.toString()+" {"+n.getFilters().map(pv).join(" ,")+"}"}(e):"Filter"}class MD extends fi{constructor(t,n,s){super(t,n,s),this.key=$t.fromName(s.referenceValue)}matches(t){const n=$t.comparator(t.key,this.key);return this.matchesComparison(n)}}class OD extends fi{constructor(t,n){super(t,"in",n),this.keys=yv("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class LD extends fi{constructor(t,n){super(t,"not-in",n),this.keys=yv("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function yv(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>$t.fromName(s.referenceValue))}class PD extends fi{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return fm(n)&&Vc(n.arrayValue,this.value)}}class BD extends fi{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Vc(this.value.arrayValue,n)}}class VD extends fi{constructor(t,n){super(t,"not-in",n)}matches(t){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Vc(this.value.arrayValue,n)}}class kD extends fi{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!fm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Vc(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(t,n=null,s=[],l=[],h=null,p=null,A=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=h,this.startAt=p,this.endAt=A,this.le=null}}function YE(e,t=null,n=[],s=[],l=null,h=null,p=null){return new UD(e,t,n,s,l,h,p)}function dm(e){const t=he(e);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>lg(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(h){return h.field.canonicalString()+h.dir}(s)).join(","),sd(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>$l(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>$l(s)).join(",")),t.le=n}return t.le}function gm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!DD(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!mv(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!GE(e.startAt,t.startAt)&&GE(e.endAt,t.endAt)}function ug(e){return $t.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t,n=null,s=[],l=[],h=null,p="F",A=null,T=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=h,this.limitType=p,this.startAt=A,this.endAt=T,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function FD(e,t,n,s,l,h,p,A){return new od(e,t,n,s,l,h,p,A)}function mm(e){return new od(e)}function qE(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function jD(e){return e.collectionGroup!==null}function xc(e){const t=he(e);if(t.he===null){t.he=[];const n=new Set;for(const h of t.explicitOrderBy)t.he.push(h),n.add(h.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(p){let A=new gi(Ni.comparator);return p.filters.forEach(T=>{T.getFlattenedFilters().forEach(E=>{E.isInequality()&&(A=A.add(E.field))})}),A})(t).forEach(h=>{n.has(h.canonicalString())||h.isKeyField()||t.he.push(new zf(h,s))}),n.has(Ni.keyField().canonicalString())||t.he.push(new zf(Ni.keyField(),s))}return t.he}function Ps(e){const t=he(e);return t.Pe||(t.Pe=zD(t,xc(e))),t.Pe}function zD(e,t){if(e.limitType==="F")return YE(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(l=>{const h=l.dir==="desc"?"asc":"desc";return new zf(l.field,h)});const n=e.endAt?new jf(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new jf(e.startAt.position,e.startAt.inclusive):null;return YE(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function cg(e,t,n){return new od(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ld(e,t){return gm(Ps(e),Ps(t))&&e.limitType===t.limitType}function xv(e){return`${dm(Ps(e))}|lt:${e.limitType}`}function Pl(e){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(l=>pv(l)).join(", ")}]`),sd(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(l=>function(p){return`${p.field.canonicalString()} (${p.dir})`}(l)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(l=>$l(l)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(l=>$l(l)).join(",")),`Target(${s})`}(Ps(e))}; limitType=${e.limitType})`}function ud(e,t){return t.isFoundDocument()&&function(s,l){const h=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):$t.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)}(e,t)&&function(s,l){for(const h of xc(s))if(!h.field.isKeyField()&&l.data.field(h.field)===null)return!1;return!0}(e,t)&&function(s,l){for(const h of s.filters)if(!h.matches(l))return!1;return!0}(e,t)&&function(s,l){return!(s.startAt&&!function(p,A,T){const E=HE(p,A,T);return p.inclusive?E<=0:E<0}(s.startAt,xc(s),l)||s.endAt&&!function(p,A,T){const E=HE(p,A,T);return p.inclusive?E>=0:E>0}(s.endAt,xc(s),l))}(e,t)}function HD(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ev(e){return(t,n)=>{let s=!1;for(const l of xc(e)){const h=GD(l,t,n);if(h!==0)return h;s=s||l.field.isKeyField()}return 0}}function GD(e,t,n){const s=e.field.isKeyField()?$t.comparator(t.key,n.key):function(h,p,A){const T=p.data.field(h),E=A.data.field(h);return T!==null&&E!==null?Jl(T,E):re()}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,h]of s)if(this.equalsFn(l,t))return h}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],t))return void(l[h]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Qo(this.inner,(n,s)=>{for(const[l,h]of s)t(l,h)})}isEmpty(){return iv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=new Vn($t.comparator);function Ea(){return YD}const Av=new Vn($t.comparator);function uc(...e){let t=Av;for(const n of e)t=t.insert(n.key,n);return t}function wv(e){let t=Av;return e.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function Ho(){return Ec()}function Tv(){return Ec()}function Ec(){return new Ko(e=>e.toString(),(e,t)=>e.isEqual(t))}const qD=new Vn($t.comparator),XD=new gi($t.comparator);function Ne(...e){let t=XD;for(const n of e)t=t.add(n);return t}const WD=new gi(ve);function QD(){return WD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kf(t)?"-0":t}}function vv(e){return{integerValue:""+e}}function KD(e,t){return TD(t)?vv(t):pm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(){this._=void 0}}function ZD(e,t,n){return e instanceof Hf?function(l,h){const p={fields:{[av]:{stringValue:sv},[lv]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&hm(h)&&(h=ad(h)),h&&(p.fields[ov]=h),{mapValue:p}}(n,t):e instanceof kc?Cv(e,t):e instanceof Uc?Sv(e,t):function(l,h){const p=_v(l,h),A=XE(p)+XE(l.Ie);return og(p)&&og(l.Ie)?vv(A):pm(l.serializer,A)}(e,t)}function JD(e,t,n){return e instanceof kc?Cv(e,t):e instanceof Uc?Sv(e,t):n}function _v(e,t){return e instanceof Gf?function(s){return og(s)||function(h){return!!h&&"doubleValue"in h}(s)}(t)?t:{integerValue:0}:null}class Hf extends cd{}class kc extends cd{constructor(t){super(),this.elements=t}}function Cv(e,t){const n=bv(t);for(const s of e.elements)n.some(l=>ks(l,s))||n.push(s);return{arrayValue:{values:n}}}class Uc extends cd{constructor(t){super(),this.elements=t}}function Sv(e,t){let n=bv(t);for(const s of e.elements)n=n.filter(l=>!ks(l,s));return{arrayValue:{values:n}}}class Gf extends cd{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function XE(e){return ti(e.integerValue||e.doubleValue)}function bv(e){return fm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function $D(e,t){return e.field.isEqual(t.field)&&function(s,l){return s instanceof kc&&l instanceof kc||s instanceof Uc&&l instanceof Uc?Zl(s.elements,l.elements,ks):s instanceof Gf&&l instanceof Gf?ks(s.Ie,l.Ie):s instanceof Hf&&l instanceof Hf}(e.transform,t.transform)}class tN{constructor(t,n){this.version=t,this.transformResults=n}}class ms{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ms}static exists(t){return new ms(void 0,t)}static updateTime(t){return new ms(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Af(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class hd{}function Iv(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new ym(e.key,ms.none()):new Qc(e.key,e.data,ms.none());{const n=e.data,s=ts.empty();let l=new gi(Ni.comparator);for(let h of t.fields)if(!l.has(h)){let p=n.field(h);p===null&&h.length>1&&(h=h.popLast(),p=n.field(h)),p===null?s.delete(h):s.set(h,p),l=l.add(h)}return new Zo(e.key,s,new gs(l.toArray()),ms.none())}}function eN(e,t,n){e instanceof Qc?function(l,h,p){const A=l.value.clone(),T=QE(l.fieldTransforms,h,p.transformResults);A.setAll(T),h.convertToFoundDocument(p.version,A).setHasCommittedMutations()}(e,t,n):e instanceof Zo?function(l,h,p){if(!Af(l.precondition,h))return void h.convertToUnknownDocument(p.version);const A=QE(l.fieldTransforms,h,p.transformResults),T=h.data;T.setAll(Rv(l)),T.setAll(A),h.convertToFoundDocument(p.version,T).setHasCommittedMutations()}(e,t,n):function(l,h,p){h.convertToNoDocument(p.version).setHasCommittedMutations()}(0,t,n)}function Ac(e,t,n,s){return e instanceof Qc?function(h,p,A,T){if(!Af(h.precondition,p))return A;const E=h.value.clone(),S=KE(h.fieldTransforms,T,p);return E.setAll(S),p.convertToFoundDocument(p.version,E).setHasLocalMutations(),null}(e,t,n,s):e instanceof Zo?function(h,p,A,T){if(!Af(h.precondition,p))return A;const E=KE(h.fieldTransforms,T,p),S=p.data;return S.setAll(Rv(h)),S.setAll(E),p.convertToFoundDocument(p.version,S).setHasLocalMutations(),A===null?null:A.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(I=>I.field))}(e,t,n,s):function(h,p,A){return Af(h.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):A}(e,t,n)}function nN(e,t){let n=null;for(const s of e.fieldTransforms){const l=t.data.field(s.field),h=_v(s.transform,l||null);h!=null&&(n===null&&(n=ts.empty()),n.set(s.field,h))}return n||null}function WE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Zl(s,l,(h,p)=>$D(h,p))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Qc extends hd{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Zo extends hd{constructor(t,n,s,l,h=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function Rv(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function QE(e,t,n){const s=new Map;Ze(e.length===n.length);for(let l=0;l<n.length;l++){const h=e[l],p=h.transform,A=t.data.field(h.field);s.set(h.field,JD(p,A,n[l]))}return s}function KE(e,t,n){const s=new Map;for(const l of e){const h=l.transform,p=n.data.field(l.field);s.set(l.field,ZD(h,p,t))}return s}class ym extends hd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iN extends hd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(t.key)&&eN(h,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Ac(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Ac(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=Tv();return this.mutations.forEach(l=>{const h=t.get(l.key),p=h.overlayedDocument;let A=this.applyToLocalView(p,h.mutatedFields);A=n.has(l.key)?null:A;const T=Iv(p,A);T!==null&&s.set(l.key,T),p.isValidDocument()||p.convertToNoDocument(le.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Ne())}isEqual(t){return this.batchId===t.batchId&&Zl(this.mutations,t.mutations,(n,s)=>WE(n,s))&&Zl(this.baseMutations,t.baseMutations,(n,s)=>WE(n,s))}}class xm{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){Ze(t.mutations.length===s.length);let l=function(){return qD}();const h=t.mutations;for(let p=0;p<h.length;p++)l=l.insert(h[p].key,s[p].version);return new xm(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ai,Be;function oN(e){switch(e){case Dt.OK:return re();case Dt.CANCELLED:case Dt.UNKNOWN:case Dt.DEADLINE_EXCEEDED:case Dt.RESOURCE_EXHAUSTED:case Dt.INTERNAL:case Dt.UNAVAILABLE:case Dt.UNAUTHENTICATED:return!1;case Dt.INVALID_ARGUMENT:case Dt.NOT_FOUND:case Dt.ALREADY_EXISTS:case Dt.PERMISSION_DENIED:case Dt.FAILED_PRECONDITION:case Dt.ABORTED:case Dt.OUT_OF_RANGE:case Dt.UNIMPLEMENTED:case Dt.DATA_LOSS:return!0;default:return re()}}function Dv(e){if(e===void 0)return xa("GRPC error has no .code"),Dt.UNKNOWN;switch(e){case ai.OK:return Dt.OK;case ai.CANCELLED:return Dt.CANCELLED;case ai.UNKNOWN:return Dt.UNKNOWN;case ai.DEADLINE_EXCEEDED:return Dt.DEADLINE_EXCEEDED;case ai.RESOURCE_EXHAUSTED:return Dt.RESOURCE_EXHAUSTED;case ai.INTERNAL:return Dt.INTERNAL;case ai.UNAVAILABLE:return Dt.UNAVAILABLE;case ai.UNAUTHENTICATED:return Dt.UNAUTHENTICATED;case ai.INVALID_ARGUMENT:return Dt.INVALID_ARGUMENT;case ai.NOT_FOUND:return Dt.NOT_FOUND;case ai.ALREADY_EXISTS:return Dt.ALREADY_EXISTS;case ai.PERMISSION_DENIED:return Dt.PERMISSION_DENIED;case ai.FAILED_PRECONDITION:return Dt.FAILED_PRECONDITION;case ai.ABORTED:return Dt.ABORTED;case ai.OUT_OF_RANGE:return Dt.OUT_OF_RANGE;case ai.UNIMPLEMENTED:return Dt.UNIMPLEMENTED;case ai.DATA_LOSS:return Dt.DATA_LOSS;default:return re()}}(Be=ai||(ai={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=new oo([4294967295,4294967295],0);function ZE(e){const t=tv().encode(e),n=new XT;return n.update(t),new Uint8Array(n.digest())}function JE(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),h=t.getUint32(12,!0);return[new oo([n,s],0),new oo([l,h],0)]}class Em{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new cc(`Invalid padding: ${n}`);if(s<0)throw new cc(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new cc(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new cc(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=oo.fromNumber(this.Ee)}Ae(t,n,s){let l=t.add(n.multiply(oo.fromNumber(s)));return l.compare(lN)===1&&(l=new oo([l.getBits(0),l.getBits(1)],0)),l.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=ZE(t),[s,l]=JE(n);for(let h=0;h<this.hashCount;h++){const p=this.Ae(s,l,h);if(!this.Re(p))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,h=new Uint8Array(Math.ceil(t/8)),p=new Em(h,l,n);return s.forEach(A=>p.insert(A)),p}insert(t){if(this.Ee===0)return;const n=ZE(t),[s,l]=JE(n);for(let h=0;h<this.hashCount;h++){const p=this.Ae(s,l,h);this.Ve(p)}}Ve(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(t,n,s,l,h){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,Kc.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new fd(le.min(),l,new Vn(ve),Ea(),Ne())}}class Kc{constructor(t,n,s,l,h){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Kc(s,n,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(t,n,s,l){this.me=t,this.removedTargetIds=n,this.key=s,this.fe=l}}class Nv{constructor(t,n){this.targetId=t,this.ge=n}}class Mv{constructor(t,n,s=Mi.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class $E{constructor(){this.pe=0,this.ye=tA(),this.we=Mi.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Ne(),n=Ne(),s=Ne();return this.ye.forEach((l,h)=>{switch(h){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:re()}}),new Kc(this.we,this.Se,t,n,s)}Me(){this.be=!1,this.ye=tA()}xe(t,n){this.be=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Ze(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class uN{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Ea(),this.$e=uf(),this.Ue=uf(),this.Ke=new Vn(ve)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const s=this.He(n);switch(t.state){case 0:this.Je(n)&&s.Ce(t.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(t.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(t.resumeToken));break;default:re()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((s,l)=>{this.Je(l)&&n(l)})}Ze(t){const n=t.targetId,s=t.ge.count,l=this.Xe(n);if(l){const h=l.target;if(ug(h))if(s===0){const p=new $t(h.path);this.ze(n,p,Xi.newNoDocument(p,le.min()))}else Ze(s===1);else{const p=this.et(n);if(p!==s){const A=this.tt(t),T=A?this.nt(A,t,p):1;if(T!==0){this.Ye(n);const E=T===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,E)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:h=0}=n;let p,A;try{p=go(s).toUint8Array()}catch(T){if(T instanceof rv)return Kl("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw T}try{A=new Em(p,l,h)}catch(T){return Kl(T instanceof cc?"BloomFilter error: ":"Applying bloom filter failed: ",T),null}return A.Ee===0?null:A}nt(t,n,s){return n.ge.count===s-this.st(t,n.targetId)?0:2}st(t,n){const s=this.ke.getRemoteKeysForTarget(n);let l=0;return s.forEach(h=>{const p=this.ke.it(),A=`projects/${p.projectId}/databases/${p.database}/documents/${h.path.canonicalString()}`;t.mightContain(A)||(this.ze(n,h,null),l++)}),l}ot(t){const n=new Map;this.qe.forEach((h,p)=>{const A=this.Xe(p);if(A){if(h.current&&ug(A.target)){const T=new $t(A.target.path);this._t(T).has(p)||this.ut(p,T)||this.ze(p,T,Xi.newNoDocument(T,t))}h.ve&&(n.set(p,h.Fe()),h.Me())}});let s=Ne();this.Ue.forEach((h,p)=>{let A=!0;p.forEachWhile(T=>{const E=this.Xe(T);return!E||E.purpose==="TargetPurposeLimboResolution"||(A=!1,!1)}),A&&(s=s.add(h))}),this.Qe.forEach((h,p)=>p.setReadTime(t));const l=new fd(t,n,this.Ke,this.Qe,s);return this.Qe=Ea(),this.$e=uf(),this.Ue=uf(),this.Ke=new Vn(ve),l}Ge(t,n){if(!this.Je(t))return;const s=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(t))}ze(t,n,s){if(!this.Je(t))return;const l=this.He(t);this.ut(t,n)?l.xe(n,1):l.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(t)),this.Ue=this.Ue.insert(n,this.ct(n).add(t)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new $E,this.qe.set(t,n)),n}ct(t){let n=this.Ue.get(t);return n||(n=new gi(ve),this.Ue=this.Ue.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new gi(ve),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||Gt("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new $E),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function uf(){return new Vn($t.comparator)}function tA(){return new Vn($t.comparator)}const cN={asc:"ASCENDING",desc:"DESCENDING"},hN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fN={and:"AND",or:"OR"};class dN{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function hg(e,t){return e.useProto3Json||sd(t)?t:{value:t}}function Yf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ov(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function gN(e,t){return Yf(e,t.toTimestamp())}function Bs(e){return Ze(!!e),le.fromTimestamp(function(n){const s=fo(n);return new di(s.seconds,s.nanos)}(e))}function Am(e,t){return fg(e,t).canonicalString()}function fg(e,t){const n=function(l){return new Mn(["projects",l.projectId,"databases",l.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Lv(e){const t=Mn.fromString(e);return Ze(Uv(t)),t}function dg(e,t){return Am(e.databaseId,t.path)}function C1(e,t){const n=Lv(t);if(n.get(1)!==e.databaseId.projectId)throw new Zt(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Zt(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new $t(Bv(n))}function Pv(e,t){return Am(e.databaseId,t)}function mN(e){const t=Lv(e);return t.length===4?Mn.emptyPath():Bv(t)}function gg(e){return new Mn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Bv(e){return Ze(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function eA(e,t,n){return{name:dg(e,t),fields:n.value.mapValue.fields}}function pN(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:re()}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],h=function(E,S){return E.useProto3Json?(Ze(S===void 0||typeof S=="string"),Mi.fromBase64String(S||"")):(Ze(S===void 0||S instanceof Buffer||S instanceof Uint8Array),Mi.fromUint8Array(S||new Uint8Array))}(e,t.targetChange.resumeToken),p=t.targetChange.cause,A=p&&function(E){const S=E.code===void 0?Dt.UNKNOWN:Dv(E.code);return new Zt(S,E.message||"")}(p);n=new Mv(s,l,h,A||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=C1(e,s.document.name),h=Bs(s.document.updateTime),p=s.document.createTime?Bs(s.document.createTime):le.min(),A=new ts({mapValue:{fields:s.document.fields}}),T=Xi.newFoundDocument(l,h,p,A),E=s.targetIds||[],S=s.removedTargetIds||[];n=new wf(E,S,T.key,T)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=C1(e,s.document),h=s.readTime?Bs(s.readTime):le.min(),p=Xi.newNoDocument(l,h),A=s.removedTargetIds||[];n=new wf([],A,p.key,p)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=C1(e,s.document),h=s.removedTargetIds||[];n=new wf([],h,l,null)}else{if(!("filter"in t))return re();{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:h}=s,p=new aN(l,h),A=s.targetId;n=new Nv(A,p)}}return n}function yN(e,t){let n;if(t instanceof Qc)n={update:eA(e,t.key,t.value)};else if(t instanceof ym)n={delete:dg(e,t.key)};else if(t instanceof Zo)n={update:eA(e,t.key,t.data),updateMask:SN(t.fieldMask)};else{if(!(t instanceof iN))return re();n={verify:dg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(h,p){const A=p.transform;if(A instanceof Hf)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(A instanceof kc)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:A.elements}};if(A instanceof Uc)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:A.elements}};if(A instanceof Gf)return{fieldPath:p.field.canonicalString(),increment:A.Ie};throw re()}(0,s))),t.precondition.isNone||(n.currentDocument=function(l,h){return h.updateTime!==void 0?{updateTime:gN(l,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:re()}(e,t.precondition)),n}function xN(e,t){return e&&e.length>0?(Ze(t!==void 0),e.map(n=>function(l,h){let p=l.updateTime?Bs(l.updateTime):Bs(h);return p.isEqual(le.min())&&(p=Bs(h)),new tN(p,l.transformResults||[])}(n,t))):[]}function EN(e,t){return{documents:[Pv(e,t.path)]}}function AN(e,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Pv(e,l);const h=function(E){if(E.length!==0)return kv(Us.create(E,"and"))}(t.filters);h&&(n.structuredQuery.where=h);const p=function(E){if(E.length!==0)return E.map(S=>function(L){return{field:Bl(L.field),direction:vN(L.dir)}}(S))}(t.orderBy);p&&(n.structuredQuery.orderBy=p);const A=hg(e,t.limit);return A!==null&&(n.structuredQuery.limit=A),t.startAt&&(n.structuredQuery.startAt=function(E){return{before:E.inclusive,values:E.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(E){return{before:!E.inclusive,values:E.position}}(t.endAt)),{ht:n,parent:l}}function wN(e){let t=mN(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Ze(s===1);const S=n.from[0];S.allDescendants?l=S.collectionId:t=t.child(S.collectionId)}let h=[];n.where&&(h=function(I){const L=Vv(I);return L instanceof Us&&gv(L)?L.getFilters():[L]}(n.where));let p=[];n.orderBy&&(p=function(I){return I.map(L=>function(G){return new zf(Vl(G.field),function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(L))}(n.orderBy));let A=null;n.limit&&(A=function(I){let L;return L=typeof I=="object"?I.value:I,sd(L)?null:L}(n.limit));let T=null;n.startAt&&(T=function(I){const L=!!I.before,k=I.values||[];return new jf(k,L)}(n.startAt));let E=null;return n.endAt&&(E=function(I){const L=!I.before,k=I.values||[];return new jf(k,L)}(n.endAt)),FD(t,l,p,h,A,"F",T,E)}function TN(e,t){const n=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Vv(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Vl(n.unaryFilter.field);return fi.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Vl(n.unaryFilter.field);return fi.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Vl(n.unaryFilter.field);return fi.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=Vl(n.unaryFilter.field);return fi.create(p,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(e):e.fieldFilter!==void 0?function(n){return fi.create(Vl(n.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Us.create(n.compositeFilter.filters.map(s=>Vv(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(e):re()}function vN(e){return cN[e]}function _N(e){return hN[e]}function CN(e){return fN[e]}function Bl(e){return{fieldPath:e.canonicalString()}}function Vl(e){return Ni.fromServerFormat(e.fieldPath)}function kv(e){return e instanceof fi?function(n){if(n.op==="=="){if(zE(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NAN"}};if(jE(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zE(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NAN"}};if(jE(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(n.field),op:_N(n.op),value:n.value}}}(e):e instanceof Us?function(n){const s=n.getFilters().map(l=>kv(l));return s.length===1?s[0]:{compositeFilter:{op:CN(n.op),filters:s}}}(e):re()}function SN(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Uv(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(t,n,s,l,h=le.min(),p=le.min(),A=Mi.EMPTY_BYTE_STRING,T=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=A,this.expectedCount=T}withSequenceNumber(t){return new ro(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(t){this.Tt=t}}function IN(e){const t=wN({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?cg(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.Tn=new DN}addToCollectionParentIndex(t,n){return this.Tn.add(n),bt.resolve()}getCollectionParents(t,n){return bt.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return bt.resolve()}deleteFieldIndex(t,n){return bt.resolve()}deleteAllFieldIndexes(t){return bt.resolve()}createTargetIndexes(t,n){return bt.resolve()}getDocumentsMatchingTarget(t,n){return bt.resolve(null)}getIndexType(t,n){return bt.resolve(0)}getFieldIndexes(t,n){return bt.resolve([])}getNextCollectionGroupToUpdate(t){return bt.resolve(null)}getMinOffset(t,n){return bt.resolve(ho.min())}getMinOffsetFromCollectionGroup(t,n){return bt.resolve(ho.min())}updateCollectionGroup(t,n,s){return bt.resolve()}updateIndexEntries(t,n){return bt.resolve()}}class DN{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new gi(Mn.comparator),h=!l.has(s);return this.index[n]=l.add(s),h}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new gi(Mn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fv=41943040;class gr{static withCacheSize(t){return new gr(t,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr.DEFAULT_COLLECTION_PERCENTILE=10,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gr.DEFAULT=new gr(Fv,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gr.DISABLED=new gr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new tu(0)}static Kn(){return new tu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="LruGarbageCollector",NN=1048576;function rA([e,t],[n,s]){const l=ve(e,n);return l===0?ve(t,s):l}class MN{constructor(t){this.Hn=t,this.buffer=new gi(rA),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();rA(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ON{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Gt(iA,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){hu(n)?Gt(iA,"Ignoring IndexedDB error during garbage collection: ",n):await cu(n)}await this.er(3e5)})}}class LN{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return bt.resolve(rd.ae);const s=new MN(n);return this.tr.forEachTarget(t,l=>s.Zn(l.sequenceNumber)).next(()=>this.tr.rr(t,l=>s.Zn(l))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.tr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Gt("LruGarbageCollector","Garbage collection skipped; disabled"),bt.resolve(nA)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(Gt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nA):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let s,l,h,p,A,T,E;const S=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Gt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),l=this.params.maximumSequenceNumbersToCollect):l=I,p=Date.now(),this.nthSequenceNumber(t,l))).next(I=>(s=I,A=Date.now(),this.removeTargets(t,s,n))).next(I=>(h=I,T=Date.now(),this.removeOrphanedDocuments(t,s))).next(I=>(E=Date.now(),Ll()<=Ve.DEBUG&&Gt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-S}ms
	Determined least recently used ${l} in `+(A-p)+`ms
	Removed ${h} targets in `+(T-A)+`ms
	Removed ${I} documents in `+(E-T)+`ms
Total Duration: ${E-S}ms`),bt.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:I})))}}function PN(e,t){return new LN(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.changes=new Ko(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Xi.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?bt.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(l=>(s=l,this.remoteDocumentCache.getEntry(t,n))).next(l=>(s!==null&&Ac(s.mutation,l,gs.empty(),di.now()),l))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Ne()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Ne()){const l=Ho();return this.populateOverlays(t,l,n).next(()=>this.computeViews(t,n,l,s).next(h=>{let p=uc();return h.forEach((A,T)=>{p=p.insert(A,T.overlayedDocument)}),p}))}getOverlayedDocuments(t,n){const s=Ho();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Ne()))}populateOverlays(t,n,s){const l=[];return s.forEach(h=>{n.has(h)||l.push(h)}),this.documentOverlayCache.getOverlays(t,l).next(h=>{h.forEach((p,A)=>{n.set(p,A)})})}computeViews(t,n,s,l){let h=Ea();const p=Ec(),A=function(){return Ec()}();return n.forEach((T,E)=>{const S=s.get(E.key);l.has(E.key)&&(S===void 0||S.mutation instanceof Zo)?h=h.insert(E.key,E):S!==void 0?(p.set(E.key,S.mutation.getFieldMask()),Ac(S.mutation,E,S.mutation.getFieldMask(),di.now())):p.set(E.key,gs.empty())}),this.recalculateAndSaveOverlays(t,h).next(T=>(T.forEach((E,S)=>p.set(E,S)),n.forEach((E,S)=>{var I;return A.set(E,new VN(S,(I=p.get(E))!==null&&I!==void 0?I:null))}),A))}recalculateAndSaveOverlays(t,n){const s=Ec();let l=new Vn((p,A)=>p-A),h=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(p=>{for(const A of p)A.keys().forEach(T=>{const E=n.get(T);if(E===null)return;let S=s.get(T)||gs.empty();S=A.applyToLocalView(E,S),s.set(T,S);const I=(l.get(A.batchId)||Ne()).add(T);l=l.insert(A.batchId,I)})}).next(()=>{const p=[],A=l.getReverseIterator();for(;A.hasNext();){const T=A.getNext(),E=T.key,S=T.value,I=Tv();S.forEach(L=>{if(!h.has(L)){const k=Iv(n.get(L),s.get(L));k!==null&&I.set(L,k),h=h.add(L)}}),p.push(this.documentOverlayCache.saveOverlays(t,E,I))}return bt.waitFor(p)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,l){return function(p){return $t.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):jD(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next(h=>{const p=l-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-h.size):bt.resolve(Ho());let A=Lc,T=h;return p.next(E=>bt.forEach(E,(S,I)=>(A<I.largestBatchId&&(A=I.largestBatchId),h.get(S)?bt.resolve():this.remoteDocumentCache.getEntry(t,S).next(L=>{T=T.insert(S,L)}))).next(()=>this.populateOverlays(t,E,h)).next(()=>this.computeViews(t,T,E,Ne())).next(S=>({batchId:A,changes:wv(S)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new $t(n)).next(s=>{let l=uc();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const h=n.collectionGroup;let p=uc();return this.indexManager.getCollectionParents(t,h).next(A=>bt.forEach(A,T=>{const E=function(I,L){return new od(L,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(n,T.child(h));return this.getDocumentsMatchingCollectionQuery(t,E,s,l).next(S=>{S.forEach((I,L)=>{p=p.insert(I,L)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(t,n,s,l){let h;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(p=>(h=p,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,h,l))).next(p=>{h.forEach((T,E)=>{const S=E.getKey();p.get(S)===null&&(p=p.insert(S,Xi.newInvalidDocument(S)))});let A=uc();return p.forEach((T,E)=>{const S=h.get(T);S!==void 0&&Ac(S.mutation,E,gs.empty(),di.now()),ud(n,E)&&(A=A.insert(T,E))}),A})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return bt.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(l){return{id:l.id,version:l.version,createTime:Bs(l.createTime)}}(n)),bt.resolve()}getNamedQuery(t,n){return bt.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(l){return{name:l.name,query:IN(l.bundledQuery),readTime:Bs(l.readTime)}}(n)),bt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.overlays=new Vn($t.comparator),this.Rr=new Map}getOverlay(t,n){return bt.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ho();return bt.forEach(n,l=>this.getOverlay(t,l).next(h=>{h!==null&&s.set(l,h)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((l,h)=>{this.Et(t,n,h)}),bt.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.Rr.get(s);return l!==void 0&&(l.forEach(h=>this.overlays=this.overlays.remove(h)),this.Rr.delete(s)),bt.resolve()}getOverlaysForCollection(t,n,s){const l=Ho(),h=n.length+1,p=new $t(n.child("")),A=this.overlays.getIteratorFrom(p);for(;A.hasNext();){const T=A.getNext().value,E=T.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===h&&T.largestBatchId>s&&l.set(T.getKey(),T)}return bt.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let h=new Vn((E,S)=>E-S);const p=this.overlays.getIterator();for(;p.hasNext();){const E=p.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>s){let S=h.get(E.largestBatchId);S===null&&(S=Ho(),h=h.insert(E.largestBatchId,S)),S.set(E.getKey(),E)}}const A=Ho(),T=h.getIterator();for(;T.hasNext()&&(T.getNext().value.forEach((E,S)=>A.set(E,S)),!(A.size()>=l)););return bt.resolve(A)}Et(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const p=this.Rr.get(l.largestBatchId).delete(s.key);this.Rr.set(l.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new sN(n,s));let h=this.Rr.get(n);h===void 0&&(h=Ne(),this.Rr.set(n,h)),this.Rr.set(n,h.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(){this.sessionToken=Mi.EMPTY_BYTE_STRING}getSessionToken(t){return bt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,bt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.Vr=new gi(Ei.mr),this.gr=new gi(Ei.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const s=new Ei(t,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.wr(new Ei(t,n))}Sr(t,n){t.forEach(s=>this.removeReference(s,n))}br(t){const n=new $t(new Mn([])),s=new Ei(n,t),l=new Ei(n,t+1),h=[];return this.gr.forEachInRange([s,l],p=>{this.wr(p),h.push(p.key)}),h}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new $t(new Mn([])),s=new Ei(n,t),l=new Ei(n,t+1);let h=Ne();return this.gr.forEachInRange([s,l],p=>{h=h.add(p.key)}),h}containsKey(t){const n=new Ei(t,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Ei{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return $t.comparator(t.key,n.key)||ve(t.Cr,n.Cr)}static pr(t,n){return ve(t.Cr,n.Cr)||$t.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new gi(Ei.mr)}checkEmpty(t){return bt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const h=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new rN(h,n,s,l);this.mutationQueue.push(p);for(const A of l)this.Mr=this.Mr.add(new Ei(A.key,h)),this.indexManager.addToCollectionParentIndex(t,A.key.path.popLast());return bt.resolve(p)}lookupMutationBatch(t,n){return bt.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.Nr(s),h=l<0?0:l;return bt.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return bt.resolve(this.mutationQueue.length===0?cm:this.Fr-1)}getAllMutationBatches(t){return bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Ei(n,0),l=new Ei(n,Number.POSITIVE_INFINITY),h=[];return this.Mr.forEachInRange([s,l],p=>{const A=this.Or(p.Cr);h.push(A)}),bt.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new gi(ve);return n.forEach(l=>{const h=new Ei(l,0),p=new Ei(l,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([h,p],A=>{s=s.add(A.Cr)})}),bt.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let h=s;$t.isDocumentKey(h)||(h=h.child(""));const p=new Ei(new $t(h),0);let A=new gi(ve);return this.Mr.forEachWhile(T=>{const E=T.key.path;return!!s.isPrefixOf(E)&&(E.length===l&&(A=A.add(T.Cr)),!0)},p),bt.resolve(this.Br(A))}Br(t){const n=[];return t.forEach(s=>{const l=this.Or(s);l!==null&&n.push(l)}),n}removeMutationBatch(t,n){Ze(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return bt.forEach(n.mutations,l=>{const h=new Ei(l.key,n.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.Mr=s})}qn(t){}containsKey(t,n){const s=new Ei(n,0),l=this.Mr.firstAfterOrEqual(s);return bt.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,bt.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(t){this.kr=t,this.docs=function(){return new Vn($t.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),h=l?l.size:0,p=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:p}),this.size+=p-h,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return bt.resolve(s?s.document.mutableCopy():Xi.newInvalidDocument(n))}getEntries(t,n){let s=Ea();return n.forEach(l=>{const h=this.docs.get(l);s=s.insert(l,h?h.document.mutableCopy():Xi.newInvalidDocument(l))}),bt.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let h=Ea();const p=n.path,A=new $t(p.child("__id-9223372036854775808__")),T=this.docs.getIteratorFrom(A);for(;T.hasNext();){const{key:E,value:{document:S}}=T.getNext();if(!p.isPrefixOf(E.path))break;E.path.length>p.length+1||xD(yD(S),s)<=0||(l.has(S.key)||ud(n,S))&&(h=h.insert(S.key,S.mutableCopy()))}return bt.resolve(h)}getAllFromCollectionGroup(t,n,s,l){re()}qr(t,n){return bt.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new GN(this)}getSize(t){return bt.resolve(this.size)}}class GN extends BN{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?n.push(this.Ir.addEntry(t,l)):this.Ir.removeEntry(s)}),bt.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(t){this.persistence=t,this.Qr=new Ko(n=>dm(n),gm),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.$r=0,this.Ur=new wm,this.targetCount=0,this.Kr=tu.Un()}forEachTarget(t,n){return this.Qr.forEach((s,l)=>n(l)),bt.resolve()}getLastRemoteSnapshotVersion(t){return bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return bt.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),bt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),bt.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Kr=new tu(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,bt.resolve()}updateTargetData(t,n){return this.zn(n),bt.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,bt.resolve()}removeTargets(t,n,s){let l=0;const h=[];return this.Qr.forEach((p,A)=>{A.sequenceNumber<=n&&s.get(A.targetId)===null&&(this.Qr.delete(p),h.push(this.removeMatchingKeysForTargetId(t,A.targetId)),l++)}),bt.waitFor(h).next(()=>l)}getTargetCount(t){return bt.resolve(this.targetCount)}getTargetData(t,n){const s=this.Qr.get(n)||null;return bt.resolve(s)}addMatchingKeys(t,n,s){return this.Ur.yr(n,s),bt.resolve()}removeMatchingKeys(t,n,s){this.Ur.Sr(n,s);const l=this.persistence.referenceDelegate,h=[];return l&&n.forEach(p=>{h.push(l.markPotentiallyOrphaned(t,p))}),bt.waitFor(h)}removeMatchingKeysForTargetId(t,n){return this.Ur.br(n),bt.resolve()}getMatchingKeysForTargetId(t,n){const s=this.Ur.vr(n);return bt.resolve(s)}containsKey(t,n){return bt.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new rd(0),this.zr=!1,this.zr=!0,this.jr=new jN,this.referenceDelegate=t(this),this.Hr=new YN(this),this.indexManager=new RN,this.remoteDocumentCache=function(l){return new HN(l)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new bN(n),this.Yr=new UN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new FN,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.Wr[t.toKey()];return s||(s=new zN(n,this.referenceDelegate),this.Wr[t.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,s){Gt("MemoryPersistence","Starting transaction:",t);const l=new qN(this.Gr.next());return this.referenceDelegate.Zr(),s(l).next(h=>this.referenceDelegate.Xr(l).next(()=>h)).toPromise().then(h=>(l.raiseOnCommittedEvent(),h))}ei(t,n){return bt.or(Object.values(this.Wr).map(s=>()=>s.containsKey(t,n)))}}class qN extends AD{constructor(t){super(),this.currentSequenceNumber=t}}class Tm{constructor(t){this.persistence=t,this.ti=new wm,this.ni=null}static ri(t){return new Tm(t)}get ii(){if(this.ni)return this.ni;throw re()}addReference(t,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),bt.resolve()}removeReference(t,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),bt.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),bt.resolve()}removeTarget(t,n){this.ti.br(n.targetId).forEach(l=>this.ii.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(l=>{l.forEach(h=>this.ii.add(h.toString()))}).next(()=>s.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bt.forEach(this.ii,s=>{const l=$t.fromPath(s);return this.si(t,l).next(h=>{h||n.removeEntry(l,le.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return bt.or([()=>bt.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class qf{constructor(t,n){this.persistence=t,this.oi=new Ko(s=>vD(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=PN(this,n)}static ri(t,n){return new qf(t,n)}Zr(){}Xr(t){return bt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(l=>s+l))}sr(t){let n=0;return this.rr(t,s=>{n++}).next(()=>n)}rr(t,n){return bt.forEach(this.oi,(s,l)=>this.ar(t,s,l).next(h=>h?bt.resolve():n(l)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),h=l.newChangeBuffer();return l.qr(t,p=>this.ar(t,p,n).next(A=>{A||(s++,h.removeEntry(p,le.min()))})).next(()=>h.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),bt.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.oi.set(s,t.currentSequenceNumber),bt.resolve()}removeReference(t,n,s){return this.oi.set(s,t.currentSequenceNumber),bt.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),bt.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=xf(t.data.value)),n}ar(t,n,s){return bt.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.oi.get(n);return bt.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Hi=s,this.Ji=l}static Yi(t,n){let s=Ne(),l=Ne();for(const h of n.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new vm(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return j8()?8:wD(U8())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,s,l){const h={result:null};return this.rs(t,n).next(p=>{h.result=p}).next(()=>{if(!h.result)return this.ss(t,n,l,s).next(p=>{h.result=p})}).next(()=>{if(h.result)return;const p=new XN;return this._s(t,n,p).next(A=>{if(h.result=A,this.Xi)return this.us(t,n,p,A.size)})}).next(()=>h.result)}us(t,n,s,l){return s.documentReadCount<this.es?(Ll()<=Ve.DEBUG&&Gt("QueryEngine","SDK will not create cache indexes for query:",Pl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),bt.resolve()):(Ll()<=Ve.DEBUG&&Gt("QueryEngine","Query:",Pl(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.ts*l?(Ll()<=Ve.DEBUG&&Gt("QueryEngine","The SDK decides to create cache indexes for query:",Pl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ps(n))):bt.resolve())}rs(t,n){if(qE(n))return bt.resolve(null);let s=Ps(n);return this.indexManager.getIndexType(t,s).next(l=>l===0?null:(n.limit!==null&&l===1&&(n=cg(n,null,"F"),s=Ps(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(h=>{const p=Ne(...h);return this.ns.getDocuments(t,p).next(A=>this.indexManager.getMinOffset(t,s).next(T=>{const E=this.cs(n,A);return this.ls(n,E,p,T.readTime)?this.rs(t,cg(n,null,"F")):this.hs(t,E,n,T)}))})))}ss(t,n,s,l){return qE(n)||l.isEqual(le.min())?bt.resolve(null):this.ns.getDocuments(t,s).next(h=>{const p=this.cs(n,h);return this.ls(n,p,s,l)?bt.resolve(null):(Ll()<=Ve.DEBUG&&Gt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Pl(n)),this.hs(t,p,n,pD(l,Lc)).next(A=>A))})}cs(t,n){let s=new gi(Ev(t));return n.forEach((l,h)=>{ud(t,h)&&(s=s.add(h))}),s}ls(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const h=t.limitType==="F"?n.last():n.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}_s(t,n,s){return Ll()<=Ve.DEBUG&&Gt("QueryEngine","Using full collection scan to execute query:",Pl(n)),this.ns.getDocumentsMatchingQuery(t,n,ho.min(),s)}hs(t,n,s,l){return this.ns.getDocumentsMatchingQuery(t,s,l).next(h=>(n.forEach(p=>{h=h.insert(p.key,p)}),h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="LocalStore",QN=3e8;class KN{constructor(t,n,s,l){this.persistence=t,this.Ps=n,this.serializer=l,this.Ts=new Vn(ve),this.Is=new Ko(h=>dm(h),gm),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(s)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new kN(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function ZN(e,t,n,s){return new KN(e,t,n,s)}async function zv(e,t){const n=he(e);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next(h=>(l=h,n.As(t),n.mutationQueue.getAllMutationBatches(s))).next(h=>{const p=[],A=[];let T=Ne();for(const E of l){p.push(E.batchId);for(const S of E.mutations)T=T.add(S.key)}for(const E of h){A.push(E.batchId);for(const S of E.mutations)T=T.add(S.key)}return n.localDocuments.getDocuments(s,T).next(E=>({Rs:E,removedBatchIds:p,addedBatchIds:A}))})})}function JN(e,t){const n=he(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=t.batch.keys(),h=n.ds.newChangeBuffer({trackRemovals:!0});return function(A,T,E,S){const I=E.batch,L=I.keys();let k=bt.resolve();return L.forEach(G=>{k=k.next(()=>S.getEntry(T,G)).next(W=>{const Y=E.docVersions.get(G);Ze(Y!==null),W.version.compareTo(Y)<0&&(I.applyToRemoteDocument(W,E),W.isValidDocument()&&(W.setReadTime(E.commitVersion),S.addEntry(W)))})}),k.next(()=>A.mutationQueue.removeMutationBatch(T,I))}(n,s,t,h).next(()=>h.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(A){let T=Ne();for(let E=0;E<A.mutationResults.length;++E)A.mutationResults[E].transformResults.length>0&&(T=T.add(A.batch.mutations[E].key));return T}(t))).next(()=>n.localDocuments.getDocuments(s,l))})}function Hv(e){const t=he(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function $N(e,t){const n=he(e),s=t.snapshotVersion;let l=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const p=n.ds.newChangeBuffer({trackRemovals:!0});l=n.Ts;const A=[];t.targetChanges.forEach((S,I)=>{const L=l.get(I);if(!L)return;A.push(n.Hr.removeMatchingKeys(h,S.removedDocuments,I).next(()=>n.Hr.addMatchingKeys(h,S.addedDocuments,I)));let k=L.withSequenceNumber(h.currentSequenceNumber);t.targetMismatches.get(I)!==null?k=k.withResumeToken(Mi.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):S.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(S.resumeToken,s)),l=l.insert(I,k),function(W,Y,Q){return W.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=QN?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(L,k,S)&&A.push(n.Hr.updateTargetData(h,k))});let T=Ea(),E=Ne();if(t.documentUpdates.forEach(S=>{t.resolvedLimboDocuments.has(S)&&A.push(n.persistence.referenceDelegate.updateLimboDocument(h,S))}),A.push(tM(h,p,t.documentUpdates).next(S=>{T=S.Vs,E=S.fs})),!s.isEqual(le.min())){const S=n.Hr.getLastRemoteSnapshotVersion(h).next(I=>n.Hr.setTargetsMetadata(h,h.currentSequenceNumber,s));A.push(S)}return bt.waitFor(A).next(()=>p.apply(h)).next(()=>n.localDocuments.getLocalViewOfDocuments(h,T,E)).next(()=>T)}).then(h=>(n.Ts=l,h))}function tM(e,t,n){let s=Ne(),l=Ne();return n.forEach(h=>s=s.add(h)),t.getEntries(e,s).next(h=>{let p=Ea();return n.forEach((A,T)=>{const E=h.get(A);T.isFoundDocument()!==E.isFoundDocument()&&(l=l.add(A)),T.isNoDocument()&&T.version.isEqual(le.min())?(t.removeEntry(A,T.readTime),p=p.insert(A,T)):!E.isValidDocument()||T.version.compareTo(E.version)>0||T.version.compareTo(E.version)===0&&E.hasPendingWrites?(t.addEntry(T),p=p.insert(A,T)):Gt(_m,"Ignoring outdated watch update for ",A,". Current version:",E.version," Watch version:",T.version)}),{Vs:p,fs:l}})}function eM(e,t){const n=he(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=cm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function nM(e,t){const n=he(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return n.Hr.getTargetData(s,t).next(h=>h?(l=h,bt.resolve(l)):n.Hr.allocateTargetId(s).next(p=>(l=new ro(t,p,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=n.Ts.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(t,s.targetId)),s})}async function mg(e,t,n){const s=he(e),l=s.Ts.get(t),h=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",h,p=>s.persistence.referenceDelegate.removeTarget(p,l))}catch(p){if(!hu(p))throw p;Gt(_m,`Failed to update sequence numbers for target ${t}: ${p}`)}s.Ts=s.Ts.remove(t),s.Is.delete(l.target)}function sA(e,t,n){const s=he(e);let l=le.min(),h=Ne();return s.persistence.runTransaction("Execute query","readwrite",p=>function(T,E,S){const I=he(T),L=I.Is.get(S);return L!==void 0?bt.resolve(I.Ts.get(L)):I.Hr.getTargetData(E,S)}(s,p,Ps(t)).next(A=>{if(A)return l=A.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(p,A.targetId).next(T=>{h=T})}).next(()=>s.Ps.getDocumentsMatchingQuery(p,t,n?l:le.min(),n?h:Ne())).next(A=>(iM(s,HD(t),A),{documents:A,gs:h})))}function iM(e,t,n){let s=e.Es.get(t)||le.min();n.forEach((l,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)}),e.Es.set(t,s)}class aA{constructor(){this.activeTargetIds=QD()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class rM{constructor(){this.ho=new aA,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,s){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new aA,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="ConnectivityMonitor";class lA{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Gt(oA,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Gt(oA,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cf=null;function pg(){return cf===null?cf=function(){return 268435456+Math.round(2147483648*Math.random())}():cf++,"0x"+cf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="RestConnection",aM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oM{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${s}/databases/${l}`,this.wo=this.databaseId.database===Uf?`project_id=${s}`:`project_id=${s}&database_id=${l}`}So(t,n,s,l,h){const p=pg(),A=this.bo(t,n.toUriEncodedString());Gt(S1,`Sending RPC '${t}' ${p}:`,A,s);const T={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(T,l,h),this.vo(t,A,T,s).then(E=>(Gt(S1,`Received RPC '${t}' ${p}: `,E),E),E=>{throw Kl(S1,`RPC '${t}' ${p} failed with error: `,E,"url: ",A,"request:",s),E})}Co(t,n,s,l,h,p){return this.So(t,n,s,l,h)}Do(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+uu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,h)=>t[h]=l),s&&s.headers.forEach((l,h)=>t[h]=l)}bo(t,n){const s=aM[t];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="WebChannelConnection";class uM extends oM{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,s,l){const h=pg();return new Promise((p,A)=>{const T=new WT;T.setWithCredentials(!0),T.listenOnce(QT.COMPLETE,()=>{try{switch(T.getLastErrorCode()){case yf.NO_ERROR:const S=T.getResponseJson();Gt(Gi,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(S)),p(S);break;case yf.TIMEOUT:Gt(Gi,`RPC '${t}' ${h} timed out`),A(new Zt(Dt.DEADLINE_EXCEEDED,"Request time out"));break;case yf.HTTP_ERROR:const I=T.getStatus();if(Gt(Gi,`RPC '${t}' ${h} failed with status:`,I,"response text:",T.getResponseText()),I>0){let L=T.getResponseJson();Array.isArray(L)&&(L=L[0]);const k=L==null?void 0:L.error;if(k&&k.status&&k.message){const G=function(Y){const Q=Y.toLowerCase().replace(/_/g,"-");return Object.values(Dt).indexOf(Q)>=0?Q:Dt.UNKNOWN}(k.status);A(new Zt(G,k.message))}else A(new Zt(Dt.UNKNOWN,"Server responded with status "+T.getStatus()))}else A(new Zt(Dt.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{Gt(Gi,`RPC '${t}' ${h} completed.`)}});const E=JSON.stringify(l);Gt(Gi,`RPC '${t}' ${h} sending request:`,l),T.send(n,"POST",E,s,15)})}Wo(t,n,s){const l=pg(),h=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],p=JT(),A=ZT(),T={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(T.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(T.useFetchStreams=!0),this.Do(T.initMessageHeaders,n,s),T.encodeInitMessageHeaders=!0;const S=h.join("");Gt(Gi,`Creating RPC '${t}' stream ${l}: ${S}`,T);const I=p.createWebChannel(S,T);let L=!1,k=!1;const G=new lM({Fo:Y=>{k?Gt(Gi,`Not sending because RPC '${t}' stream ${l} is closed:`,Y):(L||(Gt(Gi,`Opening RPC '${t}' stream ${l} transport.`),I.open(),L=!0),Gt(Gi,`RPC '${t}' stream ${l} sending:`,Y),I.send(Y))},Mo:()=>I.close()}),W=(Y,Q,rt)=>{Y.listen(Q,nt=>{try{rt(nt)}catch(_t){setTimeout(()=>{throw _t},0)}})};return W(I,lc.EventType.OPEN,()=>{k||(Gt(Gi,`RPC '${t}' stream ${l} transport opened.`),G.Qo())}),W(I,lc.EventType.CLOSE,()=>{k||(k=!0,Gt(Gi,`RPC '${t}' stream ${l} transport closed`),G.Uo())}),W(I,lc.EventType.ERROR,Y=>{k||(k=!0,Kl(Gi,`RPC '${t}' stream ${l} transport errored:`,Y),G.Uo(new Zt(Dt.UNAVAILABLE,"The operation could not be completed")))}),W(I,lc.EventType.MESSAGE,Y=>{var Q;if(!k){const rt=Y.data[0];Ze(!!rt);const nt=rt,_t=(nt==null?void 0:nt.error)||((Q=nt[0])===null||Q===void 0?void 0:Q.error);if(_t){Gt(Gi,`RPC '${t}' stream ${l} received error:`,_t);const St=_t.status;let Lt=function(V){const J=ai[V];if(J!==void 0)return Dv(J)}(St),z=_t.message;Lt===void 0&&(Lt=Dt.INTERNAL,z="Unknown error status: "+St+" with message "+_t.message),k=!0,G.Uo(new Zt(Lt,z)),I.close()}else Gt(Gi,`RPC '${t}' stream ${l} received:`,rt),G.Ko(rt)}}),W(A,KT.STAT_EVENT,Y=>{Y.stat===rg.PROXY?Gt(Gi,`RPC '${t}' stream ${l} detected buffering proxy`):Y.stat===rg.NOPROXY&&Gt(Gi,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{G.$o()},0),G}}function b1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(e){return new dN(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(t,n,s=1e3,l=1.5,h=6e4){this.Ti=t,this.timerId=n,this.Go=s,this.zo=l,this.jo=h,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),l=Math.max(0,n-s);l>0&&Gt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,l,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="PersistentStream";class Yv{constructor(t,n,s,l,h,p,A,T){this.Ti=t,this.n_=s,this.r_=l,this.connection=h,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=A,this.listener=T,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Gv(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===Dt.RESOURCE_EXHAUSTED?(xa(n.toString()),xa("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===Dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.i_===n&&this.V_(s,l)},s=>{t(()=>{const l=new Zt(Dt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(l)})})}V_(t,n){const s=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(l=>{s(()=>this.m_(l))}),this.stream.onMessage(l=>{s(()=>++this.__==1?this.g_(l):this.onNext(l))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Gt(uA,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(Gt(uA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cM extends Yv{constructor(t,n,s,l,h,p){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,p),this.serializer=h}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=pN(this.serializer,t),s=function(h){if(!("targetChange"in h))return le.min();const p=h.targetChange;return p.targetIds&&p.targetIds.length?le.min():p.readTime?Bs(p.readTime):le.min()}(t);return this.listener.p_(n,s)}y_(t){const n={};n.database=gg(this.serializer),n.addTarget=function(h,p){let A;const T=p.target;if(A=ug(T)?{documents:EN(h,T)}:{query:AN(h,T).ht},A.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){A.resumeToken=Ov(h,p.resumeToken);const E=hg(h,p.expectedCount);E!==null&&(A.expectedCount=E)}else if(p.snapshotVersion.compareTo(le.min())>0){A.readTime=Yf(h,p.snapshotVersion.toTimestamp());const E=hg(h,p.expectedCount);E!==null&&(A.expectedCount=E)}return A}(this.serializer,t);const s=TN(this.serializer,t);s&&(n.labels=s),this.I_(n)}w_(t){const n={};n.database=gg(this.serializer),n.removeTarget=t,this.I_(n)}}class hM extends Yv{constructor(t,n,s,l,h,p){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,p),this.serializer=h}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,n){return this.connection.Wo("Write",t,n)}g_(t){return Ze(!!t.streamToken),this.lastStreamToken=t.streamToken,Ze(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Ze(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const n=xN(t.writeResults,t.commitTime),s=Bs(t.commitTime);return this.listener.v_(s,n)}C_(){const t={};t.database=gg(this.serializer),this.I_(t)}b_(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>yN(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{}class dM extends fM{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.F_=!1}M_(){if(this.F_)throw new Zt(Dt.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,s,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,p])=>this.connection.So(t,fg(n,s),l,h,p)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Zt(Dt.UNKNOWN,h.toString())})}Co(t,n,s,l,h){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,A])=>this.connection.Co(t,fg(n,s),l,p,A,h)).catch(p=>{throw p.name==="FirebaseError"?(p.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Zt(Dt.UNKNOWN,p.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class gM{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(xa(n),this.N_=!1):Gt("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="RemoteStore";class mM{constructor(t,n,s,l,h){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=h,this.z_.To(p=>{s.enqueueAndForget(async()=>{Jo(this)&&(Gt(qo,"Restarting streams for network reachability change."),await async function(T){const E=he(T);E.W_.add(4),await Zc(E),E.j_.set("Unknown"),E.W_.delete(4),await gd(E)}(this))})}),this.j_=new gM(s,l)}}async function gd(e){if(Jo(e))for(const t of e.G_)await t(!0)}async function Zc(e){for(const t of e.G_)await t(!1)}function qv(e,t){const n=he(e);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),Im(n)?bm(n):fu(n).c_()&&Sm(n,t))}function Cm(e,t){const n=he(e),s=fu(n);n.K_.delete(t),s.c_()&&Xv(n,t),n.K_.size===0&&(s.c_()?s.P_():Jo(n)&&n.j_.set("Unknown"))}function Sm(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(le.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fu(e).y_(t)}function Xv(e,t){e.H_.Ne(t),fu(e).w_(t)}function bm(e){e.H_=new uN({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.K_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),fu(e).start(),e.j_.B_()}function Im(e){return Jo(e)&&!fu(e).u_()&&e.K_.size>0}function Jo(e){return he(e).W_.size===0}function Wv(e){e.H_=void 0}async function pM(e){e.j_.set("Online")}async function yM(e){e.K_.forEach((t,n)=>{Sm(e,t)})}async function xM(e,t){Wv(e),Im(e)?(e.j_.q_(t),bm(e)):e.j_.set("Unknown")}async function EM(e,t,n){if(e.j_.set("Online"),t instanceof Mv&&t.state===2&&t.cause)try{await async function(l,h){const p=h.cause;for(const A of h.targetIds)l.K_.has(A)&&(await l.remoteSyncer.rejectListen(A,p),l.K_.delete(A),l.H_.removeTarget(A))}(e,t)}catch(s){Gt(qo,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Xf(e,s)}else if(t instanceof wf?e.H_.We(t):t instanceof Nv?e.H_.Ze(t):e.H_.je(t),!n.isEqual(le.min()))try{const s=await Hv(e.localStore);n.compareTo(s)>=0&&await function(h,p){const A=h.H_.ot(p);return A.targetChanges.forEach((T,E)=>{if(T.resumeToken.approximateByteSize()>0){const S=h.K_.get(E);S&&h.K_.set(E,S.withResumeToken(T.resumeToken,p))}}),A.targetMismatches.forEach((T,E)=>{const S=h.K_.get(T);if(!S)return;h.K_.set(T,S.withResumeToken(Mi.EMPTY_BYTE_STRING,S.snapshotVersion)),Xv(h,T);const I=new ro(S.target,T,E,S.sequenceNumber);Sm(h,I)}),h.remoteSyncer.applyRemoteEvent(A)}(e,n)}catch(s){Gt(qo,"Failed to raise snapshot:",s),await Xf(e,s)}}async function Xf(e,t,n){if(!hu(t))throw t;e.W_.add(1),await Zc(e),e.j_.set("Offline"),n||(n=()=>Hv(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Gt(qo,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await gd(e)})}function Qv(e,t){return t().catch(n=>Xf(e,n,t))}async function md(e){const t=he(e),n=po(t);let s=t.U_.length>0?t.U_[t.U_.length-1].batchId:cm;for(;AM(t);)try{const l=await eM(t.localStore,s);if(l===null){t.U_.length===0&&n.P_();break}s=l.batchId,wM(t,l)}catch(l){await Xf(t,l)}Kv(t)&&Zv(t)}function AM(e){return Jo(e)&&e.U_.length<10}function wM(e,t){e.U_.push(t);const n=po(e);n.c_()&&n.S_&&n.b_(t.mutations)}function Kv(e){return Jo(e)&&!po(e).u_()&&e.U_.length>0}function Zv(e){po(e).start()}async function TM(e){po(e).C_()}async function vM(e){const t=po(e);for(const n of e.U_)t.b_(n.mutations)}async function _M(e,t,n){const s=e.U_.shift(),l=xm.from(s,t,n);await Qv(e,()=>e.remoteSyncer.applySuccessfulWrite(l)),await md(e)}async function CM(e,t){t&&po(e).S_&&await async function(s,l){if(function(p){return oN(p)&&p!==Dt.ABORTED}(l.code)){const h=s.U_.shift();po(s).h_(),await Qv(s,()=>s.remoteSyncer.rejectFailedWrite(h.batchId,l)),await md(s)}}(e,t),Kv(e)&&Zv(e)}async function cA(e,t){const n=he(e);n.asyncQueue.verifyOperationInProgress(),Gt(qo,"RemoteStore received new credentials");const s=Jo(n);n.W_.add(3),await Zc(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await gd(n)}async function SM(e,t){const n=he(e);t?(n.W_.delete(2),await gd(n)):t||(n.W_.add(2),await Zc(n),n.j_.set("Unknown"))}function fu(e){return e.J_||(e.J_=function(n,s,l){const h=he(n);return h.M_(),new cM(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(e.datastore,e.asyncQueue,{xo:pM.bind(null,e),No:yM.bind(null,e),Lo:xM.bind(null,e),p_:EM.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),Im(e)?bm(e):e.j_.set("Unknown")):(await e.J_.stop(),Wv(e))})),e.J_}function po(e){return e.Y_||(e.Y_=function(n,s,l){const h=he(n);return h.M_(),new hM(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:TM.bind(null,e),Lo:CM.bind(null,e),D_:vM.bind(null,e),v_:_M.bind(null,e)}),e.G_.push(async t=>{t?(e.Y_.h_(),await md(e)):(await e.Y_.stop(),e.U_.length>0&&(Gt(qo,`Stopping write stream with ${e.U_.length} pending writes`),e.U_=[]))})),e.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(t,n,s,l,h){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=h,this.deferred=new ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,h){const p=Date.now()+s,A=new Rm(t,n,p,l,h);return A.start(s),A}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Zt(Dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dm(e,t){if(xa("AsyncQueue",`${t}: ${e}`),hu(e))return new Zt(Dt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{static emptySet(t){return new Xl(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||$t.comparator(n.key,s.key):(n,s)=>$t.comparator(n.key,s.key),this.keyedMap=uc(),this.sortedSet=new Vn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Xl)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,h=s.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Xl;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(){this.Z_=new Vn($t.comparator)}track(t){const n=t.doc.key,s=this.Z_.get(n);s?t.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.Z_=this.Z_.remove(n):t.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):re():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,s)=>{t.push(s)}),t}}class eu{constructor(t,n,s,l,h,p,A,T,E){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=h,this.fromCache=p,this.syncStateChanged=A,this.excludesMetadataChanges=T,this.hasCachedResults=E}static fromInitialDocuments(t,n,s,l,h){const p=[];return n.forEach(A=>{p.push({type:0,doc:A})}),new eu(t,n,Xl.emptySet(n),p,s,l,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ld(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class IM{constructor(){this.queries=fA(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const l=he(n),h=l.queries;l.queries=fA(),h.forEach((p,A)=>{for(const T of A.ta)T.onError(s)})})(this,new Zt(Dt.ABORTED,"Firestore shutting down"))}}function fA(){return new Ko(e=>xv(e),ld)}async function Jv(e,t){const n=he(e);let s=3;const l=t.query;let h=n.queries.get(l);h?!h.na()&&t.ra()&&(s=2):(h=new bM,s=t.ra()?0:1);try{switch(s){case 0:h.ea=await n.onListen(l,!0);break;case 1:h.ea=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(p){const A=Dm(p,`Initialization of query '${Pl(t.query)}' failed`);return void t.onError(A)}n.queries.set(l,h),h.ta.push(t),t.sa(n.onlineState),h.ea&&t.oa(h.ea)&&Nm(n)}async function $v(e,t){const n=he(e),s=t.query;let l=3;const h=n.queries.get(s);if(h){const p=h.ta.indexOf(t);p>=0&&(h.ta.splice(p,1),h.ta.length===0?l=t.ra()?0:1:!h.na()&&t.ra()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function RM(e,t){const n=he(e);let s=!1;for(const l of t){const h=l.query,p=n.queries.get(h);if(p){for(const A of p.ta)A.oa(l)&&(s=!0);p.ea=l}}s&&Nm(n)}function DM(e,t,n){const s=he(e),l=s.queries.get(t);if(l)for(const h of l.ta)h.onError(n);s.queries.delete(t)}function Nm(e){e.ia.forEach(t=>{t.next()})}var yg,dA;(dA=yg||(yg={}))._a="default",dA.Cache="cache";class t_{constructor(t,n,s){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new eu(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=eu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==yg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(t){this.key=t}}class n_{constructor(t){this.key=t}}class NM{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ne(),this.mutatedKeys=Ne(),this.ya=Ev(t),this.wa=new Xl(this.ya)}get Sa(){return this.fa}ba(t,n){const s=n?n.Da:new hA,l=n?n.wa:this.wa;let h=n?n.mutatedKeys:this.mutatedKeys,p=l,A=!1;const T=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,E=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((S,I)=>{const L=l.get(S),k=ud(this.query,I)?I:null,G=!!L&&this.mutatedKeys.has(L.key),W=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let Y=!1;L&&k?L.data.isEqual(k.data)?G!==W&&(s.track({type:3,doc:k}),Y=!0):this.va(L,k)||(s.track({type:2,doc:k}),Y=!0,(T&&this.ya(k,T)>0||E&&this.ya(k,E)<0)&&(A=!0)):!L&&k?(s.track({type:0,doc:k}),Y=!0):L&&!k&&(s.track({type:1,doc:L}),Y=!0,(T||E)&&(A=!0)),Y&&(k?(p=p.add(k),h=W?h.add(S):h.delete(S)):(p=p.delete(S),h=h.delete(S)))}),this.query.limit!==null)for(;p.size>this.query.limit;){const S=this.query.limitType==="F"?p.last():p.first();p=p.delete(S.key),h=h.delete(S.key),s.track({type:1,doc:S})}return{wa:p,Da:s,ls:A,mutatedKeys:h}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const h=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const p=t.Da.X_();p.sort((S,I)=>function(k,G){const W=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return W(k)-W(G)}(S.type,I.type)||this.ya(S.doc,I.doc)),this.Ca(s),l=l!=null&&l;const A=n&&!l?this.Fa():[],T=this.pa.size===0&&this.current&&!l?1:0,E=T!==this.ga;return this.ga=T,p.length!==0||E?{snapshot:new eu(this.query,t.wa,h,p,t.mutatedKeys,T===0,E,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:A}:{Ma:A}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new hA,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Ne(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return t.forEach(s=>{this.pa.has(s)||n.push(new n_(s))}),this.pa.forEach(s=>{t.has(s)||n.push(new e_(s))}),n}Oa(t){this.fa=t.gs,this.pa=Ne();const n=this.ba(t.documents);return this.applyChanges(n,!0)}Na(){return eu.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Mm="SyncEngine";class MM{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class OM{constructor(t){this.key=t,this.Ba=!1}}class LM{constructor(t,n,s,l,h,p){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=p,this.La={},this.ka=new Ko(A=>xv(A),ld),this.qa=new Map,this.Qa=new Set,this.$a=new Vn($t.comparator),this.Ua=new Map,this.Ka=new wm,this.Wa={},this.Ga=new Map,this.za=tu.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function PM(e,t,n=!0){const s=l_(e);let l;const h=s.ka.get(t);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),l=h.view.Na()):l=await i_(s,t,n,!0),l}async function BM(e,t){const n=l_(e);await i_(n,t,!0,!1)}async function i_(e,t,n,s){const l=await nM(e.localStore,Ps(t)),h=l.targetId,p=e.sharedClientState.addLocalQueryTarget(h,n);let A;return s&&(A=await VM(e,t,h,p==="current",l.resumeToken)),e.isPrimaryClient&&n&&qv(e.remoteStore,l),A}async function VM(e,t,n,s,l){e.Ha=(I,L,k)=>async function(W,Y,Q,rt){let nt=Y.view.ba(Q);nt.ls&&(nt=await sA(W.localStore,Y.query,!1).then(({documents:z})=>Y.view.ba(z,nt)));const _t=rt&&rt.targetChanges.get(Y.targetId),St=rt&&rt.targetMismatches.get(Y.targetId)!=null,Lt=Y.view.applyChanges(nt,W.isPrimaryClient,_t,St);return mA(W,Y.targetId,Lt.Ma),Lt.snapshot}(e,I,L,k);const h=await sA(e.localStore,t,!0),p=new NM(t,h.gs),A=p.ba(h.documents),T=Kc.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",l),E=p.applyChanges(A,e.isPrimaryClient,T);mA(e,n,E.Ma);const S=new MM(t,n,p);return e.ka.set(t,S),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),E.snapshot}async function kM(e,t,n){const s=he(e),l=s.ka.get(t),h=s.qa.get(l.targetId);if(h.length>1)return s.qa.set(l.targetId,h.filter(p=>!ld(p,t))),void s.ka.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await mg(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Cm(s.remoteStore,l.targetId),xg(s,l.targetId)}).catch(cu)):(xg(s,l.targetId),await mg(s.localStore,l.targetId,!0))}async function UM(e,t){const n=he(e),s=n.ka.get(t),l=n.qa.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Cm(n.remoteStore,s.targetId))}async function FM(e,t,n){const s=XM(e);try{const l=await function(p,A){const T=he(p),E=di.now(),S=A.reduce((k,G)=>k.add(G.key),Ne());let I,L;return T.persistence.runTransaction("Locally write mutations","readwrite",k=>{let G=Ea(),W=Ne();return T.ds.getEntries(k,S).next(Y=>{G=Y,G.forEach((Q,rt)=>{rt.isValidDocument()||(W=W.add(Q))})}).next(()=>T.localDocuments.getOverlayedDocuments(k,G)).next(Y=>{I=Y;const Q=[];for(const rt of A){const nt=nN(rt,I.get(rt.key).overlayedDocument);nt!=null&&Q.push(new Zo(rt.key,nt,hv(nt.value.mapValue),ms.exists(!0)))}return T.mutationQueue.addMutationBatch(k,E,Q,A)}).next(Y=>{L=Y;const Q=Y.applyToLocalDocumentSet(I,W);return T.documentOverlayCache.saveOverlays(k,Y.batchId,Q)})}).then(()=>({batchId:L.batchId,changes:wv(I)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),function(p,A,T){let E=p.Wa[p.currentUser.toKey()];E||(E=new Vn(ve)),E=E.insert(A,T),p.Wa[p.currentUser.toKey()]=E}(s,l.batchId,n),await Jc(s,l.changes),await md(s.remoteStore)}catch(l){const h=Dm(l,"Failed to persist write");n.reject(h)}}async function r_(e,t){const n=he(e);try{const s=await $N(n.localStore,t);t.targetChanges.forEach((l,h)=>{const p=n.Ua.get(h);p&&(Ze(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?p.Ba=!0:l.modifiedDocuments.size>0?Ze(p.Ba):l.removedDocuments.size>0&&(Ze(p.Ba),p.Ba=!1))}),await Jc(n,s,t)}catch(s){await cu(s)}}function gA(e,t,n){const s=he(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.ka.forEach((h,p)=>{const A=p.view.sa(t);A.snapshot&&l.push(A.snapshot)}),function(p,A){const T=he(p);T.onlineState=A;let E=!1;T.queries.forEach((S,I)=>{for(const L of I.ta)L.sa(A)&&(E=!0)}),E&&Nm(T)}(s.eventManager,t),l.length&&s.La.p_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function jM(e,t,n){const s=he(e);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Ua.get(t),h=l&&l.key;if(h){let p=new Vn($t.comparator);p=p.insert(h,Xi.newNoDocument(h,le.min()));const A=Ne().add(h),T=new fd(le.min(),new Map,new Vn(ve),p,A);await r_(s,T),s.$a=s.$a.remove(h),s.Ua.delete(t),Om(s)}else await mg(s.localStore,t,!1).then(()=>xg(s,t,n)).catch(cu)}async function zM(e,t){const n=he(e),s=t.batch.batchId;try{const l=await JN(n.localStore,t);a_(n,s,null),s_(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Jc(n,l)}catch(l){await cu(l)}}async function HM(e,t,n){const s=he(e);try{const l=await function(p,A){const T=he(p);return T.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let S;return T.mutationQueue.lookupMutationBatch(E,A).next(I=>(Ze(I!==null),S=I.keys(),T.mutationQueue.removeMutationBatch(E,I))).next(()=>T.mutationQueue.performConsistencyCheck(E)).next(()=>T.documentOverlayCache.removeOverlaysForBatchId(E,S,A)).next(()=>T.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,S)).next(()=>T.localDocuments.getDocuments(E,S))})}(s.localStore,t);a_(s,t,n),s_(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Jc(s,l)}catch(l){await cu(l)}}function s_(e,t){(e.Ga.get(t)||[]).forEach(n=>{n.resolve()}),e.Ga.delete(t)}function a_(e,t,n){const s=he(e);let l=s.Wa[s.currentUser.toKey()];if(l){const h=l.get(t);h&&(n?h.reject(n):h.resolve(),l=l.remove(t)),s.Wa[s.currentUser.toKey()]=l}}function xg(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.qa.get(t))e.ka.delete(s),n&&e.La.Ja(s,n);e.qa.delete(t),e.isPrimaryClient&&e.Ka.br(t).forEach(s=>{e.Ka.containsKey(s)||o_(e,s)})}function o_(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);n!==null&&(Cm(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ua.delete(n),Om(e))}function mA(e,t,n){for(const s of n)s instanceof e_?(e.Ka.addReference(s.key,t),GM(e,s)):s instanceof n_?(Gt(Mm,"Document no longer in limbo: "+s.key),e.Ka.removeReference(s.key,t),e.Ka.containsKey(s.key)||o_(e,s.key)):re()}function GM(e,t){const n=t.key,s=n.path.canonicalString();e.$a.get(n)||e.Qa.has(s)||(Gt(Mm,"New document in limbo: "+n),e.Qa.add(s),Om(e))}function Om(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new $t(Mn.fromString(t)),s=e.za.next();e.Ua.set(s,new OM(n)),e.$a=e.$a.insert(n,s),qv(e.remoteStore,new ro(Ps(mm(n.path)),s,"TargetPurposeLimboResolution",rd.ae))}}async function Jc(e,t,n){const s=he(e),l=[],h=[],p=[];s.ka.isEmpty()||(s.ka.forEach((A,T)=>{p.push(s.Ha(T,t,n).then(E=>{var S;if((E||n)&&s.isPrimaryClient){const I=E?!E.fromCache:(S=n==null?void 0:n.targetChanges.get(T.targetId))===null||S===void 0?void 0:S.current;s.sharedClientState.updateQueryState(T.targetId,I?"current":"not-current")}if(E){l.push(E);const I=vm.Yi(T.targetId,E);h.push(I)}}))}),await Promise.all(p),s.La.p_(l),await async function(T,E){const S=he(T);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>bt.forEach(E,L=>bt.forEach(L.Hi,k=>S.persistence.referenceDelegate.addReference(I,L.targetId,k)).next(()=>bt.forEach(L.Ji,k=>S.persistence.referenceDelegate.removeReference(I,L.targetId,k)))))}catch(I){if(!hu(I))throw I;Gt(_m,"Failed to update sequence numbers: "+I)}for(const I of E){const L=I.targetId;if(!I.fromCache){const k=S.Ts.get(L),G=k.snapshotVersion,W=k.withLastLimboFreeSnapshotVersion(G);S.Ts=S.Ts.insert(L,W)}}}(s.localStore,h))}async function YM(e,t){const n=he(e);if(!n.currentUser.isEqual(t)){Gt(Mm,"User change. New user:",t.toKey());const s=await zv(n.localStore,t);n.currentUser=t,function(h,p){h.Ga.forEach(A=>{A.forEach(T=>{T.reject(new Zt(Dt.CANCELLED,p))})}),h.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Jc(n,s.Rs)}}function qM(e,t){const n=he(e),s=n.Ua.get(t);if(s&&s.Ba)return Ne().add(s.key);{let l=Ne();const h=n.qa.get(t);if(!h)return l;for(const p of h){const A=n.ka.get(p);l=l.unionWith(A.view.Sa)}return l}}function l_(e){const t=he(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=r_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=qM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jM.bind(null,t),t.La.p_=RM.bind(null,t.eventManager),t.La.Ja=DM.bind(null,t.eventManager),t}function XM(e){const t=he(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=zM.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=HM.bind(null,t),t}class Wf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=dd(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return ZN(this.persistence,new WN,t.initialUser,this.serializer)}Xa(t){return new jv(Tm.ri,this.serializer)}Za(t){return new rM}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wf.provider={build:()=>new Wf};class WM extends Wf{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){Ze(this.persistence.referenceDelegate instanceof qf);const s=this.persistence.referenceDelegate.garbageCollector;return new ON(s,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?gr.withCacheSize(this.cacheSizeBytes):gr.DEFAULT;return new jv(s=>qf.ri(s,n),this.serializer)}}class Eg{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>gA(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=YM.bind(null,this.syncEngine),await SM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new IM}()}createDatastore(t){const n=dd(t.databaseInfo.databaseId),s=function(h){return new uM(h)}(t.databaseInfo);return function(h,p,A,T){return new dM(h,p,A,T)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,l,h,p,A){return new mM(s,l,h,p,A)}(this.localStore,this.datastore,t.asyncQueue,n=>gA(this.syncEngine,n,0),function(){return lA.D()?new lA:new sM}())}createSyncEngine(t,n){return function(l,h,p,A,T,E,S){const I=new LM(l,h,p,A,T,E);return S&&(I.ja=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(l){const h=he(l);Gt(qo,"RemoteStore shutting down."),h.W_.add(5),await Zc(h),h.z_.shutdown(),h.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Eg.provider={build:()=>new Eg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):xa("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="FirestoreClient";class QM{constructor(t,n,s,l,h){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=qi.UNAUTHENTICATED,this.clientId=ev.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,async p=>{Gt(yo,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p}),this.appCheckCredentials.start(s,p=>(Gt(yo,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Dm(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function I1(e,t){e.asyncQueue.verifyOperationInProgress(),Gt(yo,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async l=>{s.isEqual(l)||(await zv(t.localStore,l),s=l)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function pA(e,t){e.asyncQueue.verifyOperationInProgress();const n=await KM(e);Gt(yo,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(s=>cA(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,l)=>cA(t.remoteStore,l)),e._onlineComponents=t}async function KM(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Gt(yo,"Using user provided OfflineComponentProvider");try{await I1(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(l){return l.name==="FirebaseError"?l.code===Dt.FAILED_PRECONDITION||l.code===Dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(n))throw n;Kl("Error using user provided cache. Falling back to memory cache: "+n),await I1(e,new Wf)}}else Gt(yo,"Using default OfflineComponentProvider"),await I1(e,new WM(void 0));return e._offlineComponents}async function c_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Gt(yo,"Using user provided OnlineComponentProvider"),await pA(e,e._uninitializedComponentsProvider._online)):(Gt(yo,"Using default OnlineComponentProvider"),await pA(e,new Eg))),e._onlineComponents}function ZM(e){return c_(e).then(t=>t.syncEngine)}async function h_(e){const t=await c_(e),n=t.eventManager;return n.onListen=PM.bind(null,t.syncEngine),n.onUnlisten=kM.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=BM.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=UM.bind(null,t.syncEngine),n}function JM(e,t,n={}){const s=new ga;return e.asyncQueue.enqueueAndForget(async()=>function(h,p,A,T,E){const S=new u_({next:L=>{S.su(),p.enqueueAndForget(()=>$v(h,I));const k=L.docs.has(A);!k&&L.fromCache?E.reject(new Zt(Dt.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&L.fromCache&&T&&T.source==="server"?E.reject(new Zt(Dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(L)},error:L=>E.reject(L)}),I=new t_(mm(A.path),S,{includeMetadataChanges:!0,Ta:!0});return Jv(h,I)}(await h_(e),e.asyncQueue,t,n,s)),s.promise}function $M(e,t,n={}){const s=new ga;return e.asyncQueue.enqueueAndForget(async()=>function(h,p,A,T,E){const S=new u_({next:L=>{S.su(),p.enqueueAndForget(()=>$v(h,I)),L.fromCache&&T.source==="server"?E.reject(new Zt(Dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(L)},error:L=>E.reject(L)}),I=new t_(A,S,{includeMetadataChanges:!0,Ta:!0});return Jv(h,I)}(await h_(e),e.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(e,t,n){if(!n)throw new Zt(Dt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function tO(e,t,n,s){if(t===!0&&s===!0)throw new Zt(Dt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function xA(e){if(!$t.isDocumentKey(e))throw new Zt(Dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function EA(e){if($t.isDocumentKey(e))throw new Zt(Dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Lm(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":re()}function Aa(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Zt(Dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lm(e);throw new Zt(Dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="firestore.googleapis.com",AA=!0;class wA{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new Zt(Dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=g_,this.ssl=AA}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:AA;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Fv;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<NN)throw new Zt(Dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}tO("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=f_((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(h){if(h.timeoutSeconds!==void 0){if(isNaN(h.timeoutSeconds))throw new Zt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new Zt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new Zt(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class pd{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Zt(Dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Zt(Dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wA(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new oD;switch(s.type){case"firstParty":return new hD(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Zt(Dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=yA.get(n);s&&(Gt("ComponentProvider","Removing Datastore"),yA.delete(n),s.terminate())}(this),Promise.resolve()}}function eO(e,t,n,s={}){var l;const h=(e=Aa(e,pd))._getSettings(),p=Object.assign(Object.assign({},h),{emulatorOptions:e._getEmulatorOptions()}),A=`${t}:${n}`;h.host!==g_&&h.host!==A&&Kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const T=Object.assign(Object.assign({},h),{host:A,ssl:!1,emulatorOptions:s});if(!Pf(T,p)&&(e._setSettings(T),s.mockUserToken)){let E,S;if(typeof s.mockUserToken=="string")E=s.mockUserToken,S=qi.MOCK_USER;else{E=k8(s.mockUserToken,(l=e._app)===null||l===void 0?void 0:l.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new Zt(Dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new qi(I)}e._authCredentials=new lD(new $T(E,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new yd(this.firestore,t,this._query)}}class Or{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Or(this.firestore,t,this._key)}}class lo extends yd{constructor(t,n,s){super(t,n,mm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Or(this.firestore,null,new $t(t))}withConverter(t){return new lo(this.firestore,t,this._path)}}function Pm(e,t,...n){if(e=Nc(e),d_("collection","path",t),e instanceof pd){const s=Mn.fromString(t,...n);return EA(s),new lo(e,null,s)}{if(!(e instanceof Or||e instanceof lo))throw new Zt(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Mn.fromString(t,...n));return EA(s),new lo(e.firestore,null,s)}}function Tf(e,t,...n){if(e=Nc(e),arguments.length===1&&(t=ev.newId()),d_("doc","path",t),e instanceof pd){const s=Mn.fromString(t,...n);return xA(s),new Or(e,null,new $t(s))}{if(!(e instanceof Or||e instanceof lo))throw new Zt(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Mn.fromString(t,...n));return xA(s),new Or(e.firestore,e instanceof lo?e.converter:null,new $t(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="AsyncQueue";class vA{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Gv(this,"async_queue_retry"),this.Su=()=>{const s=b1();s&&Gt(TA,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=t;const n=b1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=b1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new ga;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!hu(t))throw t;Gt(TA,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.bu.then(()=>(this.pu=!0,t().catch(s=>{this.gu=s,this.pu=!1;const l=function(p){let A=p.message||"";return p.stack&&(A=p.stack.includes(p.message)?p.stack:p.message+`
`+p.stack),A}(s);throw xa("INTERNAL UNHANDLED ERROR: ",l),s}).then(s=>(this.pu=!1,s))));return this.bu=n,n}enqueueAfterDelay(t,n,s){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const l=Rm.createAndSchedule(this,t,n,s,h=>this.Fu(h));return this.fu.push(l),l}Du(){this.gu&&re()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}class du extends pd{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new vA,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new vA(t),this._firestoreClient=void 0,await t}}}function nO(e,t){const n=typeof e=="object"?e:W6(),s=typeof e=="string"?e:Uf,l=H6(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const h=B8("firestore");h&&eO(l,...h)}return l}function Bm(e){if(e._terminated)throw new Zt(Dt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||iO(e),e._firestoreClient}function iO(e){var t,n,s;const l=e._freezeSettings(),h=function(A,T,E,S){return new SD(A,T,E,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,f_(S.experimentalLongPollingOptions),S.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,l);e._componentsProvider||!((n=l.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=l.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),e._firestoreClient=new QM(e._authCredentials,e._appCheckCredentials,e._queue,h,e._componentsProvider&&function(A){const T=A==null?void 0:A._online.build();return{_offline:A==null?void 0:A._offline.build(T),_online:T}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new nu(Mi.fromBase64String(t))}catch(n){throw new Zt(Dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new nu(Mi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Zt(Dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ni(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Zt(Dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Zt(Dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ve(this._lat,t._lat)||ve(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,l){if(s.length!==l.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==l[h])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=/^__.*__$/;class sO{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Zo(t,this.data,this.fieldMask,n,this.fieldTransforms):new Qc(t,this.data,n,this.fieldTransforms)}}function p_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class Fm{constructor(t,n,s,l,h,p){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,h===void 0&&this.Bu(),this.fieldTransforms=h||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Fm(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),l=this.ku({path:s,Qu:!1});return l.$u(t),l}Uu(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),l=this.ku({path:s,Qu:!1});return l.Bu(),l}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Qf(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(p_(this.Lu)&&rO.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class aO{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||dd(t)}ju(t,n,s,l=!1){return new Fm({Lu:t,methodName:n,zu:s,path:Ni.emptyPath(),Qu:!1,Gu:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function y_(e){const t=e._freezeSettings(),n=dd(e._databaseId);return new aO(e._databaseId,!!t.ignoreUndefinedProperties,n)}function x_(e,t,n,s,l,h={}){const p=e.ju(h.merge||h.mergeFields?2:0,t,n,l);T_("Data must be an object, but it was:",p,s);const A=A_(s,p);let T,E;if(h.merge)T=new gs(p.fieldMask),E=p.fieldTransforms;else if(h.mergeFields){const S=[];for(const I of h.mergeFields){const L=oO(t,I,n);if(!p.contains(L))throw new Zt(Dt.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);uO(S,L)||S.push(L)}T=new gs(S),E=p.fieldTransforms.filter(I=>T.covers(I.field))}else T=null,E=p.fieldTransforms;return new sO(new ts(A),T,E)}function E_(e,t){if(w_(e=Nc(e)))return T_("Unsupported field value:",t,e),A_(e,t);if(e instanceof m_)return function(s,l){if(!p_(l.Lu))throw l.Wu(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Wu(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(l);h&&l.fieldTransforms.push(h)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(s,l){const h=[];let p=0;for(const A of s){let T=E_(A,l.Ku(p));T==null&&(T={nullValue:"NULL_VALUE"}),h.push(T),p++}return{arrayValue:{values:h}}}(e,t)}return function(s,l){if((s=Nc(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return KD(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const h=di.fromDate(s);return{timestampValue:Yf(l.serializer,h)}}if(s instanceof di){const h=new di(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Yf(l.serializer,h)}}if(s instanceof km)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof nu)return{bytesValue:Ov(l.serializer,s._byteString)};if(s instanceof Or){const h=l.databaseId,p=s.firestore._databaseId;if(!p.isEqual(h))throw l.Wu(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Am(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Um)return function(p,A){return{mapValue:{fields:{[uv]:{stringValue:cv},[Ff]:{arrayValue:{values:p.toArray().map(E=>{if(typeof E!="number")throw A.Wu("VectorValues must only contain numeric values.");return pm(A.serializer,E)})}}}}}}(s,l);throw l.Wu(`Unsupported field value: ${Lm(s)}`)}(e,t)}function A_(e,t){const n={};return iv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qo(e,(s,l)=>{const h=E_(l,t.qu(s));h!=null&&(n[s]=h)}),{mapValue:{fields:n}}}function w_(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof di||e instanceof km||e instanceof nu||e instanceof Or||e instanceof m_||e instanceof Um)}function T_(e,t,n){if(!w_(n)||!function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}(n)){const s=Lm(n);throw s==="an object"?t.Wu(e+" a custom object"):t.Wu(e+" "+s)}}function oO(e,t,n){if((t=Nc(t))instanceof Vm)return t._internalPath;if(typeof t=="string")return v_(e,t);throw Qf("Field path arguments must be of type string or ",e,!1,void 0,n)}const lO=new RegExp("[~\\*/\\[\\]]");function v_(e,t,n){if(t.search(lO)>=0)throw Qf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Vm(...t.split("."))._internalPath}catch{throw Qf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Qf(e,t,n,s,l){const h=s&&!s.isEmpty(),p=l!==void 0;let A=`Function ${t}() called with invalid data`;n&&(A+=" (via `toFirestore()`)"),A+=". ";let T="";return(h||p)&&(T+=" (found",h&&(T+=` in field ${s}`),p&&(T+=` in document ${l}`),T+=")"),new Zt(Dt.INVALID_ARGUMENT,A+e+T)}function uO(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(t,n,s,l,h){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new cO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(C_("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cO extends __{data(){return super.data()}}function C_(e,t){return typeof t=="string"?v_(e,t):t instanceof Vm?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Zt(Dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fO{convertValue(t,n="none"){switch(mo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ti(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(go(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw re()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Qo(t,(l,h)=>{s[l]=this.convertValue(h,n)}),s}convertVectorValue(t){var n,s,l;const h=(l=(s=(n=t.fields)===null||n===void 0?void 0:n[Ff].arrayValue)===null||s===void 0?void 0:s.values)===null||l===void 0?void 0:l.map(p=>ti(p.doubleValue));return new Um(h)}convertGeoPoint(t){return new km(ti(t.latitude),ti(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=ad(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Pc(t));default:return null}}convertTimestamp(t){const n=fo(t);return new di(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Mn.fromString(t);Ze(Uv(s));const l=new Bc(s.get(1),s.get(3)),h=new $t(s.popFirst(5));return l.isEqual(n)||xa(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(e,t,n){let s;return s=e?e.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class b_ extends __{constructor(t,n,s,l,h,p){super(t,n,s,l,p),this._firestore=t,this._firestoreImpl=t,this.metadata=h}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new vf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(C_("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class vf extends b_{data(t={}){return super.data(t)}}class dO{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new hc(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new vf(this._firestore,this._userDataWriter,s.key,s,new hc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Zt(Dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(l,h){if(l._snapshot.oldDocs.isEmpty()){let p=0;return l._snapshot.docChanges.map(A=>{const T=new vf(l._firestore,l._userDataWriter,A.doc.key,A.doc,new hc(l._snapshot.mutatedKeys.has(A.doc.key),l._snapshot.fromCache),l.query.converter);return A.doc,{type:"added",doc:T,oldIndex:-1,newIndex:p++}})}{let p=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(A=>h||A.type!==3).map(A=>{const T=new vf(l._firestore,l._userDataWriter,A.doc.key,A.doc,new hc(l._snapshot.mutatedKeys.has(A.doc.key),l._snapshot.fromCache),l.query.converter);let E=-1,S=-1;return A.type!==0&&(E=p.indexOf(A.doc.key),p=p.delete(A.doc.key)),A.type!==1&&(p=p.add(A.doc),S=p.indexOf(A.doc.key)),{type:gO(A.type),doc:T,oldIndex:E,newIndex:S}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function gO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(e){e=Aa(e,Or);const t=Aa(e.firestore,du);return JM(Bm(t),e._key).then(n=>EO(t,e,n))}class I_ extends fO{constructor(t){super(),this.firestore=t}convertBytes(t){return new nu(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Or(this.firestore,null,n)}}function R_(e){e=Aa(e,yd);const t=Aa(e.firestore,du),n=Bm(t),s=new I_(t);return hO(e._query),$M(n,e._query).then(l=>new dO(t,s,e,l))}function pO(e,t,n){e=Aa(e,Or);const s=Aa(e.firestore,du),l=S_(e.converter,t);return jm(s,[x_(y_(s),"setDoc",e._key,l,e.converter!==null,n).toMutation(e._key,ms.none())])}function yO(e){return jm(Aa(e.firestore,du),[new ym(e._key,ms.none())])}function xO(e,t){const n=Aa(e.firestore,du),s=Tf(e),l=S_(e.converter,t);return jm(n,[x_(y_(e.firestore),"addDoc",s._key,l,e.converter!==null,{}).toMutation(s._key,ms.exists(!1))]).then(()=>s)}function jm(e,t){return function(s,l){const h=new ga;return s.asyncQueue.enqueueAndForget(async()=>FM(await ZM(s),l,h)),h.promise}(Bm(e),t)}function EO(e,t,n){const s=n.docs.get(t._key),l=new I_(e);return new b_(e,l,t._key,s,new hc(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(l){uu=l})(X6),Vf(new Mc("firestore",(s,{instanceIdentifier:l,options:h})=>{const p=s.getProvider("app").getImmediate(),A=new du(new uD(s.getProvider("auth-internal")),new fD(p,s.getProvider("app-check-internal")),function(E,S){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new Zt(Dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bc(E.options.projectId,S)}(p,l),p);return h=Object.assign({useFetchStreams:n},h),A._setSettings(h),A},"PUBLIC").setMultipleInstances(!0)),ql(RE,DE,t),ql(RE,DE,"esm2017")})();const AO={apiKey:"AIzaSyClC9pC-qp0bv2yqKizlRVOYsbjn8prhYE",authDomain:"ecoquest-app.firebaseapp.com",projectId:"ecoquest-app",storageBucket:"ecoquest-app.firebasestorage.app",messagingSenderId:"994488550246",appId:"1:994488550246:web:a72ff1b222c34c23343ea7",measurementId:"G-V7MX80TXJ7"},wO=GT(AO),Gl=nO(wO),TO="/your-repo-name/assets/treasure-bg-CBW1x3mk.jpg",vO="/your-repo-name/assets/scroll-Dquyk9nl.png",_O=()=>{const[e,t]=ct.useState(""),[n,s]=ct.useState(""),[l,h]=ct.useState(""),p=zc(),A=async T=>{if(T.preventDefault(),!e||!n||!l)return alert("Fill all fields!");try{await xO(Pm(Gl,"teams"),{teamName:e,player1:n,player2:l,score:0,stage:1,timestamp:Date.now()}),p("/scan")}catch(E){console.error("Error adding team:",E),alert("Something went wrong!")}};return lt.jsxs("div",{className:"min-h-screen flex flex-col justify-between bg-cover bg-center",style:{backgroundImage:`url(${TO})`},children:[lt.jsx(ds.div,{initial:{opacity:0},animate:{opacity:.4},transition:{duration:2,repeat:1/0,repeatType:"reverse"},className:"fixed inset-0 pointer-events-none z-0",children:lt.jsx("div",{className:"w-full h-full bg-[radial-gradient(white,transparent)] animate-pulse"})}),lt.jsx("div",{className:"flex-grow flex items-center justify-center px-4 pt-16 pb-10 relative z-10",children:lt.jsx(ds.div,{initial:{opacity:0,scale:.8,y:80},animate:{opacity:1,scale:1,y:0},transition:{duration:1.2,ease:"easeOut"},className:"relative w-full max-w-md",children:lt.jsxs(ds.div,{initial:{y:-10},animate:{y:[0,-10,0]},transition:{repeat:1/0,duration:4,ease:"easeInOut"},className:"bg-no-repeat bg-contain bg-center p-8 pt-12 pb-10 shadow-2xl text-center",style:{backgroundImage:`url(${vO})`,backgroundSize:"100% 100%"},children:[lt.jsx("h2",{className:"text-3xl font-bold text-yellow-900 mb-6 font-adventure drop-shadow-lg",children:"Register Your Crew 🏴‍☠️"}),lt.jsxs("form",{onSubmit:A,className:"space-y-5",children:[[{value:e,set:t,placeholder:"Team Name"},{value:n,set:s,placeholder:"Player 1 Name"},{value:l,set:h,placeholder:"Player 2 Name"}].map(({value:T,set:E,placeholder:S},I)=>lt.jsx(ds.input,{type:"text",placeholder:S,value:T,onChange:L=>E(L.target.value),whileFocus:{scale:1.02,boxShadow:"0 0 10px #facc15"},className:"w-full px-4 py-2 border rounded bg-yellow-50 focus:outline-none focus:ring-2 focus:ring-yellow-600"},I)),lt.jsx(ds.button,{whileTap:{scale:.95},whileHover:{scale:1.05},type:"submit",className:"w-full bg-yellow-700 text-white py-2 rounded-md font-semibold hover:bg-yellow-800 transition",children:"Begin The Quest 🚀"})]})]})})}),lt.jsx(su,{})]})};var Yt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Yt||(Yt={}));var _A=new Map([[Yt.QR_CODE,"QR_CODE"],[Yt.AZTEC,"AZTEC"],[Yt.CODABAR,"CODABAR"],[Yt.CODE_39,"CODE_39"],[Yt.CODE_93,"CODE_93"],[Yt.CODE_128,"CODE_128"],[Yt.DATA_MATRIX,"DATA_MATRIX"],[Yt.MAXICODE,"MAXICODE"],[Yt.ITF,"ITF"],[Yt.EAN_13,"EAN_13"],[Yt.EAN_8,"EAN_8"],[Yt.PDF_417,"PDF_417"],[Yt.RSS_14,"RSS_14"],[Yt.RSS_EXPANDED,"RSS_EXPANDED"],[Yt.UPC_A,"UPC_A"],[Yt.UPC_E,"UPC_E"],[Yt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),CA;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(CA||(CA={}));function CO(e){return Object.values(Yt).includes(e)}var xo;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(xo||(xo={}));var fs=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[xo.SCAN_TYPE_CAMERA,xo.SCAN_TYPE_FILE],e}(),D_=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!_A.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,_A.get(t))},e}(),SA=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),Ag;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ag||(Ag={}));var N_=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Ag.UNKWOWN_ERROR}},e}(),M_=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Rs(e){return typeof e>"u"||e===null}function SO(e,t,n){return e>n?n:e<t?t:e}var Yl=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),nn=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),bA=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),O_=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var s=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],h=new Set(l),p=Object.keys(t),A=0,T=p;A<T.length;A++){var E=T[A];if(h.has(E))return n.logError("".concat(E," is not supported videoConstaints."),!0),!1}return!0},e}(),fc={exports:{}},bO=fc.exports,IA;function IO(){return IA||(IA=1,function(e,t){(function(n,s){s(t)})(bO,function(n){function s(M){return M==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,r){M.__proto__=r}||function(M,r){for(var o in r)r.hasOwnProperty(o)&&(M[o]=r[o])};function h(M,r){l(M,r);function o(){this.constructor=M}M.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}function p(M,r){var o=Object.setPrototypeOf;o?o(M,r):M.__proto__=r}function A(M,r){r===void 0&&(r=M.constructor);var o=Error.captureStackTrace;o&&o(M,r)}var T=function(M){h(r,M);function r(o){var u=this.constructor,f=M.call(this,o)||this;return Object.defineProperty(f,"name",{value:u.name,enumerable:!1}),p(f,u.prototype),A(f),f}return r}(Error);class E extends T{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}E.kind="Exception";class S extends E{}S.kind="ArgumentException";class I extends E{}I.kind="IllegalArgumentException";class L{constructor(r){if(this.binarizer=r,r===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,o){return this.binarizer.getBlackRow(r,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,o,u,f){const d=this.binarizer.getLuminanceSource().crop(r,o,u,f);return new L(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new L(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new L(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends E{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class G{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class W{static arraycopy(r,o,u,f,d){for(;d--;)u[f++]=r[o++]}static currentTimeMillis(){return Date.now()}}class Y extends E{}Y.kind="IndexOutOfBoundsException";class Q extends Y{constructor(r=void 0,o=void 0){super(o),this.index=r,this.message=o}}Q.kind="ArrayIndexOutOfBoundsException";class rt{static fill(r,o){for(let u=0,f=r.length;u<f;u++)r[u]=o}static fillWithin(r,o,u,f){rt.rangeCheck(r.length,o,u);for(let d=o;d<u;d++)r[d]=f}static rangeCheck(r,o,u){if(o>u)throw new I("fromIndex("+o+") > toIndex("+u+")");if(o<0)throw new Q(o);if(u>r)throw new Q(u)}static asList(...r){return r}static create(r,o,u){return Array.from({length:r}).map(d=>Array.from({length:o}).fill(u))}static createInt32Array(r,o,u){return Array.from({length:r}).map(d=>Int32Array.from({length:o}).fill(u))}static equals(r,o){if(!r||!o||!r.length||!o.length||r.length!==o.length)return!1;for(let u=0,f=r.length;u<f;u++)if(r[u]!==o[u])return!1;return!0}static hashCode(r){if(r===null)return 0;let o=1;for(const u of r)o=31*o+u;return o}static fillUint8Array(r,o){for(let u=0;u!==r.length;u++)r[u]=o}static copyOf(r,o){return r.slice(0,o)}static copyOfUint8Array(r,o){if(r.length<=o){const u=new Uint8Array(o);return u.set(r),u}return r.slice(0,o)}static copyOfRange(r,o,u){const f=u-o,d=new Int32Array(f);return W.arraycopy(r,o,d,0,f),d}static binarySearch(r,o,u){u===void 0&&(u=rt.numberComparator);let f=0,d=r.length-1;for(;f<=d;){const m=d+f>>1,y=u(o,r[m]);if(y>0)f=m+1;else if(y<0)d=m-1;else return m}return-f-1}static numberComparator(r,o){return r-o}}class nt{static numberOfTrailingZeros(r){let o;if(r===0)return 32;let u=31;return o=r<<16,o!==0&&(u-=16,r=o),o=r<<8,o!==0&&(u-=8,r=o),o=r<<4,o!==0&&(u-=4,r=o),o=r<<2,o!==0&&(u-=2,r=o),u-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let o=1;return r>>>16||(o+=16,r<<=16),r>>>24||(o+=8,r<<=8),r>>>28||(o+=4,r<<=4),r>>>30||(o+=2,r<<=2),o-=r>>>31,o}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,o){return Math.trunc(r/o)}static parseInt(r,o=void 0){return parseInt(r,o)}}nt.MIN_VALUE_32_BITS=-2147483648,nt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class _t{constructor(r,o){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,o==null?this.bits=_t.makeArray(r):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const o=_t.makeArray(r);W.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const o=this.size;if(r>=o)return o;const u=this.bits;let f=Math.floor(r/32),d=u[f];d&=~((1<<(r&31))-1);const m=u.length;for(;d===0;){if(++f===m)return o;d=u[f]}const y=f*32+nt.numberOfTrailingZeros(d);return y>o?o:y}getNextUnset(r){const o=this.size;if(r>=o)return o;const u=this.bits;let f=Math.floor(r/32),d=~u[f];d&=~((1<<(r&31))-1);const m=u.length;for(;d===0;){if(++f===m)return o;d=~u[f]}const y=f*32+nt.numberOfTrailingZeros(d);return y>o?o:y}setBulk(r,o){this.bits[Math.floor(r/32)]=o}setRange(r,o){if(o<r||r<0||o>this.size)throw new I;if(o===r)return;o--;const u=Math.floor(r/32),f=Math.floor(o/32),d=this.bits;for(let m=u;m<=f;m++){const y=m>u?0:r&31,C=(2<<(m<f?31:o&31))-(1<<y);d[m]|=C}}clear(){const r=this.bits.length,o=this.bits;for(let u=0;u<r;u++)o[u]=0}isRange(r,o,u){if(o<r||r<0||o>this.size)throw new I;if(o===r)return!0;o--;const f=Math.floor(r/32),d=Math.floor(o/32),m=this.bits;for(let y=f;y<=d;y++){const v=y>f?0:r&31,R=(2<<(y<d?31:o&31))-(1<<v)&4294967295;if((m[y]&R)!==(u?R:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,o){if(o<0||o>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let u=o;u>0;u--)this.appendBit((r>>u-1&1)===1)}appendBitArray(r){const o=r.size;this.ensureCapacity(this.size+o);for(let u=0;u<o;u++)this.appendBit(r.get(u))}xor(r){if(this.size!==r.size)throw new I("Sizes don't match");const o=this.bits;for(let u=0,f=o.length;u<f;u++)o[u]^=r.bits[u]}toBytes(r,o,u,f){for(let d=0;d<f;d++){let m=0;for(let y=0;y<8;y++)this.get(r)&&(m|=1<<7-y),r++;o[u+d]=m}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),u=o+1,f=this.bits;for(let d=0;d<u;d++){let m=f[d];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,r[o-d]=m}if(this.size!==u*32){const d=u*32-this.size;let m=r[0]>>>d;for(let y=1;y<u;y++){const v=r[y];m|=v<<32-d,r[y-1]=m,m=v>>>d}r[u-1]=m}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof _t))return!1;const o=r;return this.size===o.size&&rt.equals(this.bits,o.bits)}hashCode(){return 31*this.size+rt.hashCode(this.bits)}toString(){let r="";for(let o=0,u=this.size;o<u;o++)(o&7)===0&&(r+=" "),r+=this.get(o)?"X":".";return r}clone(){return new _t(this.size,this.bits.slice())}}var St;(function(M){M[M.OTHER=0]="OTHER",M[M.PURE_BARCODE=1]="PURE_BARCODE",M[M.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",M[M.TRY_HARDER=3]="TRY_HARDER",M[M.CHARACTER_SET=4]="CHARACTER_SET",M[M.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",M[M.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",M[M.ASSUME_GS1=7]="ASSUME_GS1",M[M.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",M[M.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",M[M.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(St||(St={}));var Lt=St;class z extends E{static getFormatInstance(){return new z}}z.kind="FormatException";var F;(function(M){M[M.Cp437=0]="Cp437",M[M.ISO8859_1=1]="ISO8859_1",M[M.ISO8859_2=2]="ISO8859_2",M[M.ISO8859_3=3]="ISO8859_3",M[M.ISO8859_4=4]="ISO8859_4",M[M.ISO8859_5=5]="ISO8859_5",M[M.ISO8859_6=6]="ISO8859_6",M[M.ISO8859_7=7]="ISO8859_7",M[M.ISO8859_8=8]="ISO8859_8",M[M.ISO8859_9=9]="ISO8859_9",M[M.ISO8859_10=10]="ISO8859_10",M[M.ISO8859_11=11]="ISO8859_11",M[M.ISO8859_13=12]="ISO8859_13",M[M.ISO8859_14=13]="ISO8859_14",M[M.ISO8859_15=14]="ISO8859_15",M[M.ISO8859_16=15]="ISO8859_16",M[M.SJIS=16]="SJIS",M[M.Cp1250=17]="Cp1250",M[M.Cp1251=18]="Cp1251",M[M.Cp1252=19]="Cp1252",M[M.Cp1256=20]="Cp1256",M[M.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",M[M.UTF8=22]="UTF8",M[M.ASCII=23]="ASCII",M[M.Big5=24]="Big5",M[M.GB18030=25]="GB18030",M[M.EUC_KR=26]="EUC_KR"})(F||(F={}));class V{constructor(r,o,u,...f){this.valueIdentifier=r,this.name=u,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=f,V.VALUE_IDENTIFIER_TO_ECI.set(r,this),V.NAME_TO_ECI.set(u,this);const d=this.values;for(let m=0,y=d.length;m!==y;m++){const v=d[m];V.VALUES_TO_ECI.set(v,this)}for(const m of f)V.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new z("incorect value");const o=V.VALUES_TO_ECI.get(r);if(o===void 0)throw new z("incorect value");return o}static getCharacterSetECIByName(r){const o=V.NAME_TO_ECI.get(r);if(o===void 0)throw new z("incorect value");return o}equals(r){if(!(r instanceof V))return!1;const o=r;return this.getName()===o.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(F.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(F.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(F.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(F.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(F.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(F.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(F.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(F.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(F.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(F.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(F.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(F.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(F.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(F.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(F.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(F.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(F.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(F.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(F.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(F.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(F.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(F.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(F.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(F.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(F.Big5,28,"Big5"),V.GB18030=new V(F.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(F.EUC_KR,30,"EUC_KR","EUC-KR");class J extends E{}J.kind="UnsupportedOperationException";class tt{static decode(r,o){const u=this.encodingName(o);return this.customDecoder?this.customDecoder(r,u):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(u)?this.decodeFallback(r,u):new TextDecoder(u).decode(r)}static shouldDecodeOnFallback(r){return!tt.isBrowser()&&r==="ISO-8859-1"}static encode(r,o){const u=this.encodingName(o);return this.customEncoder?this.customEncoder(r,u):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof V?r:V.getCharacterSetECIByName(r)}static decodeFallback(r,o){const u=this.encodingCharacterSet(o);if(tt.isDecodeFallbackSupported(u)){let f="";for(let d=0,m=r.length;d<m;d++){let y=r[d].toString(16);y.length<2&&(y="0"+y),f+="%"+y}return decodeURIComponent(f)}if(u.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new J(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(V.UTF8)||r.equals(V.ISO8859_1)||r.equals(V.ASCII)}static encodeFallback(r){const u=btoa(unescape(encodeURIComponent(r))).split(""),f=[];for(let d=0;d<u.length;d++)f.push(u[d].charCodeAt(0));return new Uint8Array(f)}}class K{static castAsNonUtf8Char(r,o=null){const u=o?o.getName():this.ISO88591;return tt.decode(new Uint8Array([r]),u)}static guessEncoding(r,o){if(o!=null&&o.get(Lt.CHARACTER_SET)!==void 0)return o.get(Lt.CHARACTER_SET).toString();const u=r.length;let f=!0,d=!0,m=!0,y=0,v=0,C=0,R=0,O=0,P=0,H=0,Z=0,et=0,ut=0,gt=0;const Nt=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Pt=0;Pt<u&&(f||d||m);Pt++){const Rt=r[Pt]&255;m&&(y>0?(Rt&128)===0?m=!1:y--:(Rt&128)!==0&&((Rt&64)===0?m=!1:(y++,(Rt&32)===0?v++:(y++,(Rt&16)===0?C++:(y++,(Rt&8)===0?R++:m=!1))))),f&&(Rt>127&&Rt<160?f=!1:Rt>159&&(Rt<192||Rt===215||Rt===247)&&gt++),d&&(O>0?Rt<64||Rt===127||Rt>252?d=!1:O--:Rt===128||Rt===160||Rt>239?d=!1:Rt>160&&Rt<224?(P++,Z=0,H++,H>et&&(et=H)):Rt>127?(O++,H=0,Z++,Z>ut&&(ut=Z)):(H=0,Z=0))}return m&&y>0&&(m=!1),d&&O>0&&(d=!1),m&&(Nt||v+C+R>0)?K.UTF8:d&&(K.ASSUME_SHIFT_JIS||et>=3||ut>=3)?K.SHIFT_JIS:f&&d?et===2&&P===2||gt*10>=u?K.SHIFT_JIS:K.ISO88591:f?K.ISO88591:d?K.SHIFT_JIS:m?K.UTF8:K.PLATFORM_DEFAULT_ENCODING}static format(r,...o){let u=-1;function f(m,y,v,C,R,O){if(m==="%%")return"%";if(o[++u]===void 0)return;m=C?parseInt(C.substr(1)):void 0;let P=R?parseInt(R.substr(1)):void 0,H;switch(O){case"s":H=o[u];break;case"c":H=o[u][0];break;case"f":H=parseFloat(o[u]).toFixed(m);break;case"p":H=parseFloat(o[u]).toPrecision(m);break;case"e":H=parseFloat(o[u]).toExponential(m);break;case"x":H=parseInt(o[u]).toString(P||16);break;case"d":H=parseFloat(parseInt(o[u],P||10).toPrecision(m)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(P);let Z=parseInt(v),et=v&&v[0]+""=="0"?"0":" ";for(;H.length<Z;)H=y!==void 0?H+et:et+H;return H}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,f)}static getBytes(r,o){return tt.encode(r,o)}static getCharCode(r,o=0){return r.charCodeAt(o)}static getCharAt(r){return String.fromCharCode(r)}}K.SHIFT_JIS=V.SJIS.getName(),K.GB2312="GB2312",K.ISO88591=V.ISO8859_1.getName(),K.EUC_JP="EUC_JP",K.UTF8=V.UTF8.getName(),K.PLATFORM_DEFAULT_ENCODING=K.UTF8,K.ASSUME_SHIFT_JIS=!1;class q{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=K.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,o,u){for(let f=o;o<o+u;f++)this.append(r[f]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+1)}substring(r,o){return this.value.substring(r,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+o.length)}}class Ee{constructor(r,o,u,f){if(this.width=r,this.height=o,this.rowSize=u,this.bits=f,o==null&&(o=r),this.height=o,r<1||o<1)throw new I("Both dimensions must be greater than 0");u==null&&(u=Math.floor((r+31)/32)),this.rowSize=u,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const o=r.length,u=r[0].length,f=new Ee(u,o);for(let d=0;d<o;d++){const m=r[d];for(let y=0;y<u;y++)m[y]&&f.set(y,d)}return f}static parseFromString(r,o,u){if(r===null)throw new I("stringRepresentation cannot be null");const f=new Array(r.length);let d=0,m=0,y=-1,v=0,C=0;for(;C<r.length;)if(r.charAt(C)===`
`||r.charAt(C)==="\r"){if(d>m){if(y===-1)y=d-m;else if(d-m!==y)throw new I("row lengths do not match");m=d,v++}C++}else if(r.substring(C,C+o.length)===o)C+=o.length,f[d]=!0,d++;else if(r.substring(C,C+u.length)===u)C+=u.length,f[d]=!1,d++;else throw new I("illegal character encountered: "+r.substring(C));if(d>m){if(y===-1)y=d-m;else if(d-m!==y)throw new I("row lengths do not match");v++}const R=new Ee(y,v);for(let O=0;O<d;O++)f[O]&&R.set(Math.floor(O%y),Math.floor(O/y));return R}get(r,o){const u=o*this.rowSize+Math.floor(r/32);return(this.bits[u]>>>(r&31)&1)!==0}set(r,o){const u=o*this.rowSize+Math.floor(r/32);this.bits[u]|=1<<(r&31)&4294967295}unset(r,o){const u=o*this.rowSize+Math.floor(r/32);this.bits[u]&=~(1<<(r&31)&4294967295)}flip(r,o){const u=o*this.rowSize+Math.floor(r/32);this.bits[u]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new I("input matrix dimensions do not match");const o=new _t(Math.floor(this.width/32)+1),u=this.rowSize,f=this.bits;for(let d=0,m=this.height;d<m;d++){const y=d*u,v=r.getRow(d,o).getBitArray();for(let C=0;C<u;C++)f[y+C]^=v[C]}}clear(){const r=this.bits,o=r.length;for(let u=0;u<o;u++)r[u]=0}setRegion(r,o,u,f){if(o<0||r<0)throw new I("Left and top must be nonnegative");if(f<1||u<1)throw new I("Height and width must be at least 1");const d=r+u,m=o+f;if(m>this.height||d>this.width)throw new I("The region must fit inside the matrix");const y=this.rowSize,v=this.bits;for(let C=o;C<m;C++){const R=C*y;for(let O=r;O<d;O++)v[R+Math.floor(O/32)]|=1<<(O&31)&4294967295}}getRow(r,o){o==null||o.getSize()<this.width?o=new _t(this.width):o.clear();const u=this.rowSize,f=this.bits,d=r*u;for(let m=0;m<u;m++)o.setBulk(m*32,f[d+m]);return o}setRow(r,o){W.arraycopy(o.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),o=this.getHeight();let u=new _t(r),f=new _t(r);for(let d=0,m=Math.floor((o+1)/2);d<m;d++)u=this.getRow(d,u),f=this.getRow(o-1-d,f),u.reverse(),f.reverse(),this.setRow(d,f),this.setRow(o-1-d,u)}getEnclosingRectangle(){const r=this.width,o=this.height,u=this.rowSize,f=this.bits;let d=r,m=o,y=-1,v=-1;for(let C=0;C<o;C++)for(let R=0;R<u;R++){const O=f[C*u+R];if(O!==0){if(C<m&&(m=C),C>v&&(v=C),R*32<d){let P=0;for(;(O<<31-P&4294967295)===0;)P++;R*32+P<d&&(d=R*32+P)}if(R*32+31>y){let P=31;for(;!(O>>>P);)P--;R*32+P>y&&(y=R*32+P)}}}return y<d||v<m?null:Int32Array.from([d,m,y-d+1,v-m+1])}getTopLeftOnBit(){const r=this.rowSize,o=this.bits;let u=0;for(;u<o.length&&o[u]===0;)u++;if(u===o.length)return null;const f=u/r;let d=u%r*32;const m=o[u];let y=0;for(;(m<<31-y&4294967295)===0;)y++;return d+=y,Int32Array.from([d,f])}getBottomRightOnBit(){const r=this.rowSize,o=this.bits;let u=o.length-1;for(;u>=0&&o[u]===0;)u--;if(u<0)return null;const f=Math.floor(u/r);let d=Math.floor(u%r)*32;const m=o[u];let y=31;for(;!(m>>>y);)y--;return d+=y,Int32Array.from([d,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof Ee))return!1;const o=r;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&rt.equals(this.bits,o.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+rt.hashCode(this.bits),r}toString(r="X ",o="  ",u=`
`){return this.buildToString(r,o,u)}buildToString(r,o,u){let f=new q;for(let d=0,m=this.height;d<m;d++){for(let y=0,v=this.width;y<v;y++)f.append(this.get(y,d)?r:o);f.append(u)}return f.toString()}clone(){return new Ee(this.width,this.height,this.rowSize,this.bits.slice())}}class mt extends E{static getNotFoundInstance(){return new mt}}mt.kind="NotFoundException";class Et extends G{constructor(r){super(r),this.luminances=Et.EMPTY,this.buckets=new Int32Array(Et.LUMINANCE_BUCKETS)}getBlackRow(r,o){const u=this.getLuminanceSource(),f=u.getWidth();o==null||o.getSize()<f?o=new _t(f):o.clear(),this.initArrays(f);const d=u.getRow(r,this.luminances),m=this.buckets;for(let v=0;v<f;v++)m[(d[v]&255)>>Et.LUMINANCE_SHIFT]++;const y=Et.estimateBlackPoint(m);if(f<3)for(let v=0;v<f;v++)(d[v]&255)<y&&o.set(v);else{let v=d[0]&255,C=d[1]&255;for(let R=1;R<f-1;R++){const O=d[R+1]&255;(C*4-v-O)/2<y&&o.set(R),v=C,C=O}}return o}getBlackMatrix(){const r=this.getLuminanceSource(),o=r.getWidth(),u=r.getHeight(),f=new Ee(o,u);this.initArrays(o);const d=this.buckets;for(let v=1;v<5;v++){const C=Math.floor(u*v/5),R=r.getRow(C,this.luminances),O=Math.floor(o*4/5);for(let P=Math.floor(o/5);P<O;P++){const H=R[P]&255;d[H>>Et.LUMINANCE_SHIFT]++}}const m=Et.estimateBlackPoint(d),y=r.getMatrix();for(let v=0;v<u;v++){const C=v*o;for(let R=0;R<o;R++)(y[C+R]&255)<m&&f.set(R,v)}return f}createBinarizer(r){return new Et(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const o=this.buckets;for(let u=0;u<Et.LUMINANCE_BUCKETS;u++)o[u]=0}static estimateBlackPoint(r){const o=r.length;let u=0,f=0,d=0;for(let R=0;R<o;R++)r[R]>d&&(f=R,d=r[R]),r[R]>u&&(u=r[R]);let m=0,y=0;for(let R=0;R<o;R++){const O=R-f,P=r[R]*O*O;P>y&&(m=R,y=P)}if(f>m){const R=f;f=m,m=R}if(m-f<=o/16)throw new mt;let v=m-1,C=-1;for(let R=m-1;R>f;R--){const O=R-f,P=O*O*(m-R)*(u-r[R]);P>C&&(v=R,C=P)}return v<<Et.LUMINANCE_SHIFT}}Et.LUMINANCE_BITS=5,Et.LUMINANCE_SHIFT=8-Et.LUMINANCE_BITS,Et.LUMINANCE_BUCKETS=1<<Et.LUMINANCE_BITS,Et.EMPTY=Uint8ClampedArray.from([0]);class At extends Et{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),o=r.getWidth(),u=r.getHeight();if(o>=At.MINIMUM_DIMENSION&&u>=At.MINIMUM_DIMENSION){const f=r.getMatrix();let d=o>>At.BLOCK_SIZE_POWER;(o&At.BLOCK_SIZE_MASK)!==0&&d++;let m=u>>At.BLOCK_SIZE_POWER;(u&At.BLOCK_SIZE_MASK)!==0&&m++;const y=At.calculateBlackPoints(f,d,m,o,u),v=new Ee(o,u);At.calculateThresholdForBlock(f,d,m,o,u,y,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new At(r)}static calculateThresholdForBlock(r,o,u,f,d,m,y){const v=d-At.BLOCK_SIZE,C=f-At.BLOCK_SIZE;for(let R=0;R<u;R++){let O=R<<At.BLOCK_SIZE_POWER;O>v&&(O=v);const P=At.cap(R,2,u-3);for(let H=0;H<o;H++){let Z=H<<At.BLOCK_SIZE_POWER;Z>C&&(Z=C);const et=At.cap(H,2,o-3);let ut=0;for(let Nt=-2;Nt<=2;Nt++){const Pt=m[P+Nt];ut+=Pt[et-2]+Pt[et-1]+Pt[et]+Pt[et+1]+Pt[et+2]}const gt=ut/25;At.thresholdBlock(r,Z,O,gt,f,y)}}}static cap(r,o,u){return r<o?o:r>u?u:r}static thresholdBlock(r,o,u,f,d,m){for(let y=0,v=u*d+o;y<At.BLOCK_SIZE;y++,v+=d)for(let C=0;C<At.BLOCK_SIZE;C++)(r[v+C]&255)<=f&&m.set(o+C,u+y)}static calculateBlackPoints(r,o,u,f,d){const m=d-At.BLOCK_SIZE,y=f-At.BLOCK_SIZE,v=new Array(u);for(let C=0;C<u;C++){v[C]=new Int32Array(o);let R=C<<At.BLOCK_SIZE_POWER;R>m&&(R=m);for(let O=0;O<o;O++){let P=O<<At.BLOCK_SIZE_POWER;P>y&&(P=y);let H=0,Z=255,et=0;for(let gt=0,Nt=R*f+P;gt<At.BLOCK_SIZE;gt++,Nt+=f){for(let Pt=0;Pt<At.BLOCK_SIZE;Pt++){const Rt=r[Nt+Pt]&255;H+=Rt,Rt<Z&&(Z=Rt),Rt>et&&(et=Rt)}if(et-Z>At.MIN_DYNAMIC_RANGE)for(gt++,Nt+=f;gt<At.BLOCK_SIZE;gt++,Nt+=f)for(let Pt=0;Pt<At.BLOCK_SIZE;Pt++)H+=r[Nt+Pt]&255}let ut=H>>At.BLOCK_SIZE_POWER*2;if(et-Z<=At.MIN_DYNAMIC_RANGE&&(ut=Z/2,C>0&&O>0)){const gt=(v[C-1][O]+2*v[C][O-1]+v[C-1][O-1])/4;Z<gt&&(ut=gt)}v[C][O]=ut}}return v}}At.BLOCK_SIZE_POWER=3,At.BLOCK_SIZE=1<<At.BLOCK_SIZE_POWER,At.BLOCK_SIZE_MASK=At.BLOCK_SIZE-1,At.MINIMUM_DIMENSION=At.BLOCK_SIZE*5,At.MIN_DYNAMIC_RANGE=24;class jt{constructor(r,o){this.width=r,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,o,u,f){throw new J("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new J("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new J("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let o=new q;for(let u=0;u<this.height;u++){const f=this.getRow(u,r);for(let d=0;d<this.width;d++){const m=f[d]&255;let y;m<64?y="#":m<128?y="+":m<192?y=".":y=" ",o.append(y)}o.append(`
`)}return o.toString()}}class ue extends jt{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,o){const u=this.delegate.getRow(r,o),f=this.getWidth();for(let d=0;d<f;d++)u[d]=255-(u[d]&255);return u}getMatrix(){const r=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),u=new Uint8ClampedArray(o);for(let f=0;f<o;f++)u[f]=255-(r[f]&255);return u}isCropSupported(){return this.delegate.isCropSupported()}crop(r,o,u,f){return new ue(this.delegate.crop(r,o,u,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ue(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ue(this.delegate.rotateCounterClockwise45())}}class $ extends jt{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=$.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const o=r.getContext("2d").getImageData(0,0,r.width,r.height);return $.toGrayscaleBuffer(o.data,r.width,r.height)}static toGrayscaleBuffer(r,o,u){const f=new Uint8ClampedArray(o*u);for(let d=0,m=0,y=r.length;d<y;d+=4,m++){let v;if(r[d+3]===0)v=255;else{const R=r[d],O=r[d+1],P=r[d+2];v=306*R+601*O+117*P+512>>10}f[m]=v}return f}getRow(r,o){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const u=this.getWidth(),f=r*u;return o===null?o=this.buffer.slice(f,f+u):(o.length<u&&(o=new Uint8ClampedArray(u)),o.set(this.buffer.slice(f,f+u))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,o,u,f){return super.crop(r,o,u,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const o=this.getTempCanvasElement(),u=o.getContext("2d"),f=r*$.DEGREE_TO_RADIANS,d=this.canvas.width,m=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(f))*d+Math.abs(Math.sin(f))*m),v=Math.ceil(Math.abs(Math.sin(f))*d+Math.abs(Math.cos(f))*m);return o.width=y,o.height=v,u.translate(y/2,v/2),u.rotate(f),u.drawImage(this.canvas,d/-2,m/-2),this.buffer=$.makeBufferFromCanvasImageData(o),this}invert(){return new ue(this)}}$.DEGREE_TO_RADIANS=Math.PI/180;class It{constructor(r,o,u){this.deviceId=r,this.label=o,this.kind="videoinput",this.groupId=u||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Bt=(globalThis||tf||self||window||void 0)&&(globalThis||tf||self||window||void 0).__awaiter||function(M,r,o,u){function f(d){return d instanceof o?d:new o(function(m){m(d)})}return new(o||(o=Promise))(function(d,m){function y(R){try{C(u.next(R))}catch(O){m(O)}}function v(R){try{C(u.throw(R))}catch(O){m(O)}}function C(R){R.done?d(R.value):f(R.value).then(y,v)}C((u=u.apply(M,r||[])).next())})};class Ot{constructor(r,o=500,u){this.reader=r,this.timeBetweenScansMillis=o,this._hints=u,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Bt(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const u of r){const f=u.kind==="video"?"videoinput":u.kind;if(f!=="videoinput")continue;const d=u.deviceId||u.id,m=u.label||`Video device ${o.length+1}`,y=u.groupId,v={deviceId:d,label:m,kind:f,groupId:y};o.push(v)}return o})}getVideoInputDevices(){return Bt(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new It(o.deviceId,o.label))})}findDeviceById(r){return Bt(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(u=>u.deviceId===r):null})}decodeFromInputVideoDevice(r,o){return Bt(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,o)})}decodeOnceFromVideoDevice(r,o){return Bt(this,void 0,void 0,function*(){this.reset();let u;r?u={deviceId:{exact:r}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeOnceFromConstraints(f,o)})}decodeOnceFromConstraints(r,o){return Bt(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(u,o)})}decodeOnceFromStream(r,o){return Bt(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(r,o);return yield this.decodeOnce(u)})}decodeFromInputVideoDeviceContinuously(r,o,u){return Bt(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,o,u)})}decodeFromVideoDevice(r,o,u){return Bt(this,void 0,void 0,function*(){let f;r?f={deviceId:{exact:r}}:f={facingMode:"environment"};const d={video:f};return yield this.decodeFromConstraints(d,o,u)})}decodeFromConstraints(r,o,u){return Bt(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(f,o,u)})}decodeFromStream(r,o,u){return Bt(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(r,o);return yield this.decodeContinuously(f,u)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,o){return Bt(this,void 0,void 0,function*(){const u=this.prepareVideoElement(o);return this.addVideoSource(u,r),this.videoElement=u,this.stream=r,yield this.playVideoOnLoadAsync(u),u})}playVideoOnLoadAsync(r){return new Promise((o,u)=>this.playVideoOnLoad(r,()=>o()))}playVideoOnLoad(r,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",o),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Bt(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,o){const u=document.getElementById(r);if(!u)throw new S(`element with id '${r}' not found`);if(u.nodeName.toLowerCase()!==o.toLowerCase())throw new S(`element with id '${r}' must be an ${o} element`);return u}decodeFromImage(r,o){if(!r&&!o)throw new S("either imageElement with a src set or an url must be provided");return o&&!r?this.decodeFromImageUrl(o):this.decodeFromImageElement(r)}decodeFromVideo(r,o){if(!r&&!o)throw new S("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,o,u){if(r===void 0&&o===void 0)throw new S("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrlContinuously(o,u):this.decodeFromVideoElementContinuously(r,u)}decodeFromImageElement(r){if(!r)throw new S("An image element must be provided.");this.reset();const o=this.prepareImageElement(r);this.imageElement=o;let u;return this.isImageLoaded(o)?u=this.decodeOnce(o,!1,!0):u=this._decodeOnLoadImage(o),u}decodeFromVideoElement(r){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(r,o){const u=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(u,o)}_decodeFromVideoElementSetup(r){if(!r)throw new S("A video element must be provided.");this.reset();const o=this.prepareVideoElement(r);return this.videoElement=o,o}decodeFromImageUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const u=this._decodeOnLoadImage(o);return o.src=r,u}decodeFromVideoUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),u=this.decodeFromVideoElement(o);return o.src=r,u}decodeFromVideoUrlContinuously(r,o){if(!r)throw new S("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(u,o);return u.src=r,f}_decodeOnLoadImage(r){return new Promise((o,u)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(o,u),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Bt(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,o){return Bt(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,o)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let o;return typeof r>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(o=r),o}prepareVideoElement(r){let o;return!r&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(o=r),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(r,o=!0,u=!0){this._stopAsyncDecode=!1;const f=(d,m)=>{if(this._stopAsyncDecode){m(new mt("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(r);d(y)}catch(y){const v=o&&y instanceof mt,R=(y instanceof k||y instanceof z)&&u;if(v||R)return setTimeout(f,this._timeBetweenDecodingAttempts,d,m);m(y)}};return new Promise((d,m)=>f(d,m))}decodeContinuously(r,o){this._stopContinuousDecode=!1;const u=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(r);o(f,null),setTimeout(u,this.timeBetweenScansMillis)}catch(f){o(null,f);const d=f instanceof k||f instanceof z,m=f instanceof mt;(d||m)&&setTimeout(u,this._timeBetweenDecodingAttempts)}};u()}decode(r){const o=this.createBinaryBitmap(r);return this.decodeBitmap(o)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,o,u){o||(o={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),u||(u=this.captureCanvasContext),u.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(r,o,u=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),u||(u=this.captureCanvasContext),u.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const o=this.getCaptureCanvas(r),u=new $(o),f=new At(u);return new L(f)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const u=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=u}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const o=this.createCaptureCanvas(r);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let u,f;return typeof r<"u"&&(r instanceof HTMLVideoElement?(u=r.videoWidth,f=r.videoHeight):r instanceof HTMLImageElement&&(u=r.naturalWidth||r.width,f=r.naturalHeight||r.height)),o.style.width=u+"px",o.style.height=f+"px",o.width=u,o.height=f,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,o){try{r.srcObject=o}catch{r.src=URL.createObjectURL(o)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class zt{constructor(r,o,u=o==null?0:8*o.length,f,d,m=W.currentTimeMillis()){this.text=r,this.rawBytes=o,this.numBits=u,this.resultPoints=f,this.format=d,this.timestamp=m,this.text=r,this.rawBytes=o,u==null?this.numBits=o==null?0:8*o.length:this.numBits=u,this.resultPoints=f,this.format=d,this.resultMetadata=null,m==null?this.timestamp=W.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,o)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const o=this.resultPoints;if(o===null)this.resultPoints=r;else if(r!==null&&r.length>0){const u=new Array(o.length+r.length);W.arraycopy(o,0,u,0,o.length),W.arraycopy(r,0,u,o.length,r.length),this.resultPoints=u}}getTimestamp(){return this.timestamp}toString(){return this.text}}var fe;(function(M){M[M.AZTEC=0]="AZTEC",M[M.CODABAR=1]="CODABAR",M[M.CODE_39=2]="CODE_39",M[M.CODE_93=3]="CODE_93",M[M.CODE_128=4]="CODE_128",M[M.DATA_MATRIX=5]="DATA_MATRIX",M[M.EAN_8=6]="EAN_8",M[M.EAN_13=7]="EAN_13",M[M.ITF=8]="ITF",M[M.MAXICODE=9]="MAXICODE",M[M.PDF_417=10]="PDF_417",M[M.QR_CODE=11]="QR_CODE",M[M.RSS_14=12]="RSS_14",M[M.RSS_EXPANDED=13]="RSS_EXPANDED",M[M.UPC_A=14]="UPC_A",M[M.UPC_E=15]="UPC_E",M[M.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(fe||(fe={}));var Mt=fe,kn;(function(M){M[M.OTHER=0]="OTHER",M[M.ORIENTATION=1]="ORIENTATION",M[M.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",M[M.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",M[M.ISSUE_NUMBER=4]="ISSUE_NUMBER",M[M.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",M[M.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",M[M.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",M[M.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",M[M.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",M[M.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(kn||(kn={}));var ae=kn;class Oi{constructor(r,o,u,f,d=-1,m=-1){this.rawBytes=r,this.text=o,this.byteSegments=u,this.ecLevel=f,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=m,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class er{exp(r){return this.expTable[r]}log(r){if(r===0)throw new I;return this.logTable[r]}static addOrSubtract(r,o){return r^o}}class _n{constructor(r,o){if(o.length===0)throw new I;this.field=r;const u=o.length;if(u>1&&o[0]===0){let f=1;for(;f<u&&o[f]===0;)f++;f===u?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(u-f),W.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const o=this.coefficients;let u;if(r===1){u=0;for(let m=0,y=o.length;m!==y;m++){const v=o[m];u=er.addOrSubtract(u,v)}return u}u=o[0];const f=o.length,d=this.field;for(let m=1;m<f;m++)u=er.addOrSubtract(d.multiply(r,u),o[m]);return u}addOrSubtract(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,u=r.coefficients;if(o.length>u.length){const m=o;o=u,u=m}let f=new Int32Array(u.length);const d=u.length-o.length;W.arraycopy(u,0,f,0,d);for(let m=d;m<u.length;m++)f[m]=er.addOrSubtract(o[m-d],u[m]);return new _n(this.field,f)}multiply(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const o=this.coefficients,u=o.length,f=r.coefficients,d=f.length,m=new Int32Array(u+d-1),y=this.field;for(let v=0;v<u;v++){const C=o[v];for(let R=0;R<d;R++)m[v+R]=er.addOrSubtract(m[v+R],y.multiply(C,f[R]))}return new _n(y,m)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const o=this.coefficients.length,u=this.field,f=new Int32Array(o),d=this.coefficients;for(let m=0;m<o;m++)f[m]=u.multiply(d[m],r);return new _n(u,f)}multiplyByMonomial(r,o){if(r<0)throw new I;if(o===0)return this.field.getZero();const u=this.coefficients,f=u.length,d=new Int32Array(f+r),m=this.field;for(let y=0;y<f;y++)d[y]=m.multiply(u[y],o);return new _n(m,d)}divide(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new I("Divide by 0");const o=this.field;let u=o.getZero(),f=this;const d=r.getCoefficient(r.getDegree()),m=o.inverse(d);for(;f.getDegree()>=r.getDegree()&&!f.isZero();){const y=f.getDegree()-r.getDegree(),v=o.multiply(f.getCoefficient(f.getDegree()),m),C=r.multiplyByMonomial(y,v),R=o.buildMonomial(y,v);u=u.addOrSubtract(R),f=f.addOrSubtract(C)}return[u,f]}toString(){let r="";for(let o=this.getDegree();o>=0;o--){let u=this.getCoefficient(o);if(u!==0){if(u<0?(r+=" - ",u=-u):r.length>0&&(r+=" + "),o===0||u!==1){const f=this.field.log(u);f===0?r+="1":f===1?r+="a":(r+="a^",r+=f)}o!==0&&(o===1?r+="x":(r+="x^",r+=o))}}return r}}class Lr extends E{}Lr.kind="ArithmeticException";class Ae extends er{constructor(r,o,u){super(),this.primitive=r,this.size=o,this.generatorBase=u;const f=new Int32Array(o);let d=1;for(let y=0;y<o;y++)f[y]=d,d*=2,d>=o&&(d^=r,d&=o-1);this.expTable=f;const m=new Int32Array(o);for(let y=0;y<o-1;y++)m[f[y]]=y;this.logTable=m,this.zero=new _n(this,Int32Array.from([0])),this.one=new _n(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new I;if(o===0)return this.zero;const u=new Int32Array(r+1);return u[0]=o,new _n(this,u)}inverse(r){if(r===0)throw new Lr;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+nt.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Ae.AZTEC_DATA_12=new Ae(4201,4096,1),Ae.AZTEC_DATA_10=new Ae(1033,1024,1),Ae.AZTEC_DATA_6=new Ae(67,64,1),Ae.AZTEC_PARAM=new Ae(19,16,1),Ae.QR_CODE_FIELD_256=new Ae(285,256,0),Ae.DATA_MATRIX_FIELD_256=new Ae(301,256,1),Ae.AZTEC_DATA_8=Ae.DATA_MATRIX_FIELD_256,Ae.MAXICODE_FIELD_64=Ae.AZTEC_DATA_6;class nr extends E{}nr.kind="ReedSolomonException";class Li extends E{}Li.kind="IllegalStateException";class ps{constructor(r){this.field=r}decode(r,o){const u=this.field,f=new _n(u,r),d=new Int32Array(o);let m=!0;for(let H=0;H<o;H++){const Z=f.evaluateAt(u.exp(H+u.getGeneratorBase()));d[d.length-1-H]=Z,Z!==0&&(m=!1)}if(m)return;const y=new _n(u,d),v=this.runEuclideanAlgorithm(u.buildMonomial(o,1),y,o),C=v[0],R=v[1],O=this.findErrorLocations(C),P=this.findErrorMagnitudes(R,O);for(let H=0;H<O.length;H++){const Z=r.length-1-u.log(O[H]);if(Z<0)throw new nr("Bad error location");r[Z]=Ae.addOrSubtract(r[Z],P[H])}}runEuclideanAlgorithm(r,o,u){if(r.getDegree()<o.getDegree()){const H=r;r=o,o=H}const f=this.field;let d=r,m=o,y=f.getZero(),v=f.getOne();for(;m.getDegree()>=(u/2|0);){let H=d,Z=y;if(d=m,y=v,d.isZero())throw new nr("r_{i-1} was zero");m=H;let et=f.getZero();const ut=d.getCoefficient(d.getDegree()),gt=f.inverse(ut);for(;m.getDegree()>=d.getDegree()&&!m.isZero();){const Nt=m.getDegree()-d.getDegree(),Pt=f.multiply(m.getCoefficient(m.getDegree()),gt);et=et.addOrSubtract(f.buildMonomial(Nt,Pt)),m=m.addOrSubtract(d.multiplyByMonomial(Nt,Pt))}if(v=et.multiply(y).addOrSubtract(Z),m.getDegree()>=d.getDegree())throw new Li("Division algorithm failed to reduce polynomial?")}const C=v.getCoefficient(0);if(C===0)throw new nr("sigmaTilde(0) was zero");const R=f.inverse(C),O=v.multiplyScalar(R),P=m.multiplyScalar(R);return[O,P]}findErrorLocations(r){const o=r.getDegree();if(o===1)return Int32Array.from([r.getCoefficient(1)]);const u=new Int32Array(o);let f=0;const d=this.field;for(let m=1;m<d.getSize()&&f<o;m++)r.evaluateAt(m)===0&&(u[f]=d.inverse(m),f++);if(f!==o)throw new nr("Error locator degree does not match number of roots");return u}findErrorMagnitudes(r,o){const u=o.length,f=new Int32Array(u),d=this.field;for(let m=0;m<u;m++){const y=d.inverse(o[m]);let v=1;for(let C=0;C<u;C++)if(m!==C){const R=d.multiply(o[C],y),O=(R&1)===0?R|1:R&-2;v=d.multiply(v,O)}f[m]=d.multiply(r.evaluateAt(y),d.inverse(v)),d.getGeneratorBase()!==0&&(f[m]=d.multiply(f[m],y))}return f}}var Xe;(function(M){M[M.UPPER=0]="UPPER",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.DIGIT=3]="DIGIT",M[M.PUNCT=4]="PUNCT",M[M.BINARY=5]="BINARY"})(Xe||(Xe={}));class We{decode(r){this.ddata=r;let o=r.getBits(),u=this.extractBits(o),f=this.correctBits(u),d=We.convertBoolArrayToByteArray(f),m=We.getEncodedData(f),y=new Oi(d,m,null,null);return y.setNumBits(f.length),y}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let o=r.length,u=Xe.UPPER,f=Xe.UPPER,d="",m=0;for(;m<o;)if(f===Xe.BINARY){if(o-m<5)break;let y=We.readCode(r,m,5);if(m+=5,y===0){if(o-m<11)break;y=We.readCode(r,m,11)+31,m+=11}for(let v=0;v<y;v++){if(o-m<8){m=o;break}const C=We.readCode(r,m,8);d+=K.castAsNonUtf8Char(C),m+=8}f=u}else{let y=f===Xe.DIGIT?4:5;if(o-m<y)break;let v=We.readCode(r,m,y);m+=y;let C=We.getCharacter(f,v);C.startsWith("CTRL_")?(u=f,f=We.getTable(C.charAt(5)),C.charAt(6)==="L"&&(u=f)):(d+=C,f=u)}return d}static getTable(r){switch(r){case"L":return Xe.LOWER;case"P":return Xe.PUNCT;case"M":return Xe.MIXED;case"D":return Xe.DIGIT;case"B":return Xe.BINARY;case"U":default:return Xe.UPPER}}static getCharacter(r,o){switch(r){case Xe.UPPER:return We.UPPER_TABLE[o];case Xe.LOWER:return We.LOWER_TABLE[o];case Xe.MIXED:return We.MIXED_TABLE[o];case Xe.PUNCT:return We.PUNCT_TABLE[o];case Xe.DIGIT:return We.DIGIT_TABLE[o];default:throw new Li("Bad table")}}correctBits(r){let o,u;this.ddata.getNbLayers()<=2?(u=6,o=Ae.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,o=Ae.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,o=Ae.AZTEC_DATA_10):(u=12,o=Ae.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),d=r.length/u;if(d<f)throw new z;let m=r.length%u,y=new Int32Array(d);for(let P=0;P<d;P++,m+=u)y[P]=We.readCode(r,m,u);try{new ps(o).decode(y,d-f)}catch(P){throw new z(P)}let v=(1<<u)-1,C=0;for(let P=0;P<f;P++){let H=y[P];if(H===0||H===v)throw new z;(H===1||H===v-1)&&C++}let R=new Array(f*u-C),O=0;for(let P=0;P<f;P++){let H=y[P];if(H===1||H===v-1)R.fill(H>1,O,O+u-1),O+=u-1;else for(let Z=u-1;Z>=0;--Z)R[O++]=(H&1<<Z)!==0}return R}extractBits(r){let o=this.ddata.isCompact(),u=this.ddata.getNbLayers(),f=(o?11:14)+u*4,d=new Int32Array(f),m=new Array(this.totalBitsInLayer(u,o));if(o)for(let y=0;y<d.length;y++)d[y]=y;else{let y=f+1+2*nt.truncDivision(nt.truncDivision(f,2)-1,15),v=f/2,C=nt.truncDivision(y,2);for(let R=0;R<v;R++){let O=R+nt.truncDivision(R,15);d[v-R-1]=C-O-1,d[v+R]=C+O+1}}for(let y=0,v=0;y<u;y++){let C=(u-y)*4+(o?9:12),R=y*2,O=f-1-R;for(let P=0;P<C;P++){let H=P*2;for(let Z=0;Z<2;Z++)m[v+H+Z]=r.get(d[R+Z],d[R+P]),m[v+2*C+H+Z]=r.get(d[R+P],d[O-Z]),m[v+4*C+H+Z]=r.get(d[O-Z],d[O-P]),m[v+6*C+H+Z]=r.get(d[O-P],d[R+Z])}v+=C*8}return m}static readCode(r,o,u){let f=0;for(let d=o;d<o+u;d++)f<<=1,r[d]&&(f|=1);return f}static readByte(r,o){let u=r.length-o;return u>=8?We.readCode(r,o,8):We.readCode(r,o,u)<<8-u}static convertBoolArrayToByteArray(r){let o=new Uint8Array((r.length+7)/8);for(let u=0;u<o.length;u++)o[u]=We.readByte(r,8*u);return o}totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}We.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],We.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],We.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],We.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],We.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class we{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,o,u,f){const d=r-u,m=o-f;return Math.sqrt(d*d+m*m)}static sum(r){let o=0;for(let u=0,f=r.length;u!==f;u++){const d=r[u];o+=d}return o}}class ns{static floatToIntBits(r){return r}}ns.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ht{constructor(r,o){this.x=r,this.y=o}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof Ht){const o=r;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*ns.floatToIntBits(this.x)+ns.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const o=this.distance(r[0],r[1]),u=this.distance(r[1],r[2]),f=this.distance(r[0],r[2]);let d,m,y;if(u>=o&&u>=f?(m=r[0],d=r[1],y=r[2]):f>=u&&f>=o?(m=r[1],d=r[0],y=r[2]):(m=r[2],d=r[0],y=r[1]),this.crossProductZ(d,m,y)<0){const v=d;d=y,y=v}r[0]=d,r[1]=m,r[2]=y}static distance(r,o){return we.distance(r.x,r.y,o.x,o.y)}static crossProductZ(r,o,u){const f=o.x,d=o.y;return(u.x-f)*(r.y-d)-(u.y-d)*(r.x-f)}}class Ta{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class js extends Ta{constructor(r,o,u,f,d){super(r,o),this.compact=u,this.nbDatablocks=f,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Qi{constructor(r,o,u,f){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),o==null&&(o=Qi.INIT_SIZE),u==null&&(u=r.getWidth()/2|0),f==null&&(f=r.getHeight()/2|0);const d=o/2|0;if(this.leftInit=u-d,this.rightInit=u+d,this.upInit=f-d,this.downInit=f+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new mt}detect(){let r=this.leftInit,o=this.rightInit,u=this.upInit,f=this.downInit,d=!1,m=!0,y=!1,v=!1,C=!1,R=!1,O=!1;const P=this.width,H=this.height;for(;m;){m=!1;let Z=!0;for(;(Z||!v)&&o<P;)Z=this.containsBlackPoint(u,f,o,!1),Z?(o++,m=!0,v=!0):v||o++;if(o>=P){d=!0;break}let et=!0;for(;(et||!C)&&f<H;)et=this.containsBlackPoint(r,o,f,!0),et?(f++,m=!0,C=!0):C||f++;if(f>=H){d=!0;break}let ut=!0;for(;(ut||!R)&&r>=0;)ut=this.containsBlackPoint(u,f,r,!1),ut?(r--,m=!0,R=!0):R||r--;if(r<0){d=!0;break}let gt=!0;for(;(gt||!O)&&u>=0;)gt=this.containsBlackPoint(r,o,u,!0),gt?(u--,m=!0,O=!0):O||u--;if(u<0){d=!0;break}m&&(y=!0)}if(!d&&y){const Z=o-r;let et=null;for(let Pt=1;et===null&&Pt<Z;Pt++)et=this.getBlackPointOnSegment(r,f-Pt,r+Pt,f);if(et==null)throw new mt;let ut=null;for(let Pt=1;ut===null&&Pt<Z;Pt++)ut=this.getBlackPointOnSegment(r,u+Pt,r+Pt,u);if(ut==null)throw new mt;let gt=null;for(let Pt=1;gt===null&&Pt<Z;Pt++)gt=this.getBlackPointOnSegment(o,u+Pt,o-Pt,u);if(gt==null)throw new mt;let Nt=null;for(let Pt=1;Nt===null&&Pt<Z;Pt++)Nt=this.getBlackPointOnSegment(o,f-Pt,o-Pt,f);if(Nt==null)throw new mt;return this.centerEdges(Nt,et,gt,ut)}else throw new mt}getBlackPointOnSegment(r,o,u,f){const d=we.round(we.distance(r,o,u,f)),m=(u-r)/d,y=(f-o)/d,v=this.image;for(let C=0;C<d;C++){const R=we.round(r+C*m),O=we.round(o+C*y);if(v.get(R,O))return new Ht(R,O)}return null}centerEdges(r,o,u,f){const d=r.getX(),m=r.getY(),y=o.getX(),v=o.getY(),C=u.getX(),R=u.getY(),O=f.getX(),P=f.getY(),H=Qi.CORR;return d<this.width/2?[new Ht(O-H,P+H),new Ht(y+H,v+H),new Ht(C-H,R-H),new Ht(d+H,m-H)]:[new Ht(O+H,P+H),new Ht(y+H,v-H),new Ht(C-H,R+H),new Ht(d-H,m-H)]}containsBlackPoint(r,o,u,f){const d=this.image;if(f){for(let m=r;m<=o;m++)if(d.get(m,u))return!0}else for(let m=r;m<=o;m++)if(d.get(u,m))return!0;return!1}}Qi.INIT_SIZE=10,Qi.CORR=1;class va{static checkAndNudgePoints(r,o){const u=r.getWidth(),f=r.getHeight();let d=!0;for(let m=0;m<o.length&&d;m+=2){const y=Math.floor(o[m]),v=Math.floor(o[m+1]);if(y<-1||y>u||v<-1||v>f)throw new mt;d=!1,y===-1?(o[m]=0,d=!0):y===u&&(o[m]=u-1,d=!0),v===-1?(o[m+1]=0,d=!0):v===f&&(o[m+1]=f-1,d=!0)}d=!0;for(let m=o.length-2;m>=0&&d;m-=2){const y=Math.floor(o[m]),v=Math.floor(o[m+1]);if(y<-1||y>u||v<-1||v>f)throw new mt;d=!1,y===-1?(o[m]=0,d=!0):y===u&&(o[m]=u-1,d=!0),v===-1?(o[m+1]=0,d=!0):v===f&&(o[m+1]=f-1,d=!0)}}}class Oe{constructor(r,o,u,f,d,m,y,v,C){this.a11=r,this.a21=o,this.a31=u,this.a12=f,this.a22=d,this.a32=m,this.a13=y,this.a23=v,this.a33=C}static quadrilateralToQuadrilateral(r,o,u,f,d,m,y,v,C,R,O,P,H,Z,et,ut){const gt=Oe.quadrilateralToSquare(r,o,u,f,d,m,y,v);return Oe.squareToQuadrilateral(C,R,O,P,H,Z,et,ut).times(gt)}transformPoints(r){const o=r.length,u=this.a11,f=this.a12,d=this.a13,m=this.a21,y=this.a22,v=this.a23,C=this.a31,R=this.a32,O=this.a33;for(let P=0;P<o;P+=2){const H=r[P],Z=r[P+1],et=d*H+v*Z+O;r[P]=(u*H+m*Z+C)/et,r[P+1]=(f*H+y*Z+R)/et}}transformPointsWithValues(r,o){const u=this.a11,f=this.a12,d=this.a13,m=this.a21,y=this.a22,v=this.a23,C=this.a31,R=this.a32,O=this.a33,P=r.length;for(let H=0;H<P;H++){const Z=r[H],et=o[H],ut=d*Z+v*et+O;r[H]=(u*Z+m*et+C)/ut,o[H]=(f*Z+y*et+R)/ut}}static squareToQuadrilateral(r,o,u,f,d,m,y,v){const C=r-u+d-y,R=o-f+m-v;if(C===0&&R===0)return new Oe(u-r,d-u,r,f-o,m-f,o,0,0,1);{const O=u-d,P=y-d,H=f-m,Z=v-m,et=O*Z-P*H,ut=(C*Z-P*R)/et,gt=(O*R-C*H)/et;return new Oe(u-r+ut*u,y-r+gt*y,r,f-o+ut*f,v-o+gt*v,o,ut,gt,1)}}static quadrilateralToSquare(r,o,u,f,d,m,y,v){return Oe.squareToQuadrilateral(r,o,u,f,d,m,y,v).buildAdjoint()}buildAdjoint(){return new Oe(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Oe(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class Ue extends va{sampleGrid(r,o,u,f,d,m,y,v,C,R,O,P,H,Z,et,ut,gt,Nt,Pt){const Rt=Oe.quadrilateralToQuadrilateral(f,d,m,y,v,C,R,O,P,H,Z,et,ut,gt,Nt,Pt);return this.sampleGridWithTransform(r,o,u,Rt)}sampleGridWithTransform(r,o,u,f){if(o<=0||u<=0)throw new mt;const d=new Ee(o,u),m=new Float32Array(2*o);for(let y=0;y<u;y++){const v=m.length,C=y+.5;for(let R=0;R<v;R+=2)m[R]=R/2+.5,m[R+1]=C;f.transformPoints(m),va.checkAndNudgePoints(r,m);try{for(let R=0;R<v;R+=2)r.get(Math.floor(m[R]),Math.floor(m[R+1]))&&d.set(R/2,y)}catch{throw new mt}}return d}}class Un{static setGridSampler(r){Un.gridSampler=r}static getInstance(){return Un.gridSampler}}Un.gridSampler=new Ue;class Fe{constructor(r,o){this.x=r,this.y=o}toResultPoint(){return new Ht(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ao{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let o=this.getMatrixCenter(),u=this.getBullsEyeCorners(o);if(r){let m=u[0];u[0]=u[2],u[2]=m}this.extractParameters(u);let f=this.sampleGrid(this.image,u[this.shift%4],u[(this.shift+1)%4],u[(this.shift+2)%4],u[(this.shift+3)%4]),d=this.getMatrixCornerPoints(u);return new js(f,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new mt;let o=2*this.nbCenterLayers,u=new Int32Array([this.sampleLine(r[0],r[1],o),this.sampleLine(r[1],r[2],o),this.sampleLine(r[2],r[3],o),this.sampleLine(r[3],r[0],o)]);this.shift=this.getRotation(u,o);let f=0;for(let m=0;m<4;m++){let y=u[(this.shift+m)%4];this.compact?(f<<=7,f+=y>>1&127):(f<<=10,f+=(y>>2&992)+(y>>1&31))}let d=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(r,o){let u=0;r.forEach((f,d,m)=>{let y=(f>>o-2<<1)+(f&1);u=(u<<3)+y}),u=((u&1)<<11)+(u>>1);for(let f=0;f<4;f++)if(nt.bitCount(u^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new mt}getCorrectedParameterData(r,o){let u,f;o?(u=7,f=2):(u=10,f=4);let d=u-f,m=new Int32Array(u);for(let v=u-1;v>=0;--v)m[v]=r&15,r>>=4;try{new ps(Ae.AZTEC_PARAM).decode(m,d)}catch{throw new mt}let y=0;for(let v=0;v<f;v++)y=(y<<4)+m[v];return y}getBullsEyeCorners(r){let o=r,u=r,f=r,d=r,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let O=this.getFirstDifferent(o,m,1,-1),P=this.getFirstDifferent(u,m,1,1),H=this.getFirstDifferent(f,m,-1,1),Z=this.getFirstDifferent(d,m,-1,-1);if(this.nbCenterLayers>2){let et=this.distancePoint(Z,O)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(et<.75||et>1.25||!this.isWhiteOrBlackRectangle(O,P,H,Z))break}o=O,u=P,f=H,d=Z,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new mt;this.compact=this.nbCenterLayers===5;let y=new Ht(o.getX()+.5,o.getY()-.5),v=new Ht(u.getX()+.5,u.getY()+.5),C=new Ht(f.getX()-.5,f.getY()+.5),R=new Ht(d.getX()-.5,d.getY()-.5);return this.expandSquare([y,v,C,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,o,u,f;try{let y=new Qi(this.image).detect();r=y[0],o=y[1],u=y[2],f=y[3]}catch{let v=this.image.getWidth()/2,C=this.image.getHeight()/2;r=this.getFirstDifferent(new Fe(v+7,C-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Fe(v+7,C+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Fe(v-7,C+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Fe(v-7,C-7),!1,-1,-1).toResultPoint()}let d=we.round((r.getX()+f.getX()+o.getX()+u.getX())/4),m=we.round((r.getY()+f.getY()+o.getY()+u.getY())/4);try{let y=new Qi(this.image,15,d,m).detect();r=y[0],o=y[1],u=y[2],f=y[3]}catch{r=this.getFirstDifferent(new Fe(d+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Fe(d+7,m+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Fe(d-7,m+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Fe(d-7,m-7),!1,-1,-1).toResultPoint()}return d=we.round((r.getX()+f.getX()+o.getX()+u.getX())/4),m=we.round((r.getY()+f.getY()+o.getY()+u.getY())/4),new Fe(d,m)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,o,u,f,d){let m=Un.getInstance(),y=this.getDimension(),v=y/2-this.nbCenterLayers,C=y/2+this.nbCenterLayers;return m.sampleGrid(r,y,y,v,v,C,v,C,C,v,C,o.getX(),o.getY(),u.getX(),u.getY(),f.getX(),f.getY(),d.getX(),d.getY())}sampleLine(r,o,u){let f=0,d=this.distanceResultPoint(r,o),m=d/u,y=r.getX(),v=r.getY(),C=m*(o.getX()-r.getX())/d,R=m*(o.getY()-r.getY())/d;for(let O=0;O<u;O++)this.image.get(we.round(y+O*C),we.round(v+O*R))&&(f|=1<<u-O-1);return f}isWhiteOrBlackRectangle(r,o,u,f){let d=3;r=new Fe(r.getX()-d,r.getY()+d),o=new Fe(o.getX()-d,o.getY()-d),u=new Fe(u.getX()+d,u.getY()-d),f=new Fe(f.getX()+d,f.getY()+d);let m=this.getColor(f,r);if(m===0)return!1;let y=this.getColor(r,o);return y!==m||(y=this.getColor(o,u),y!==m)?!1:(y=this.getColor(u,f),y===m)}getColor(r,o){let u=this.distancePoint(r,o),f=(o.getX()-r.getX())/u,d=(o.getY()-r.getY())/u,m=0,y=r.getX(),v=r.getY(),C=this.image.get(r.getX(),r.getY()),R=Math.ceil(u);for(let P=0;P<R;P++)y+=f,v+=d,this.image.get(we.round(y),we.round(v))!==C&&m++;let O=m/u;return O>.1&&O<.9?0:O<=.1===C?1:-1}getFirstDifferent(r,o,u,f){let d=r.getX()+u,m=r.getY()+f;for(;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=u,m+=f;for(d-=u,m-=f;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=u;for(d-=u;this.isValid(d,m)&&this.image.get(d,m)===o;)m+=f;return m-=f,new Fe(d,m)}expandSquare(r,o,u){let f=u/(2*o),d=r[0].getX()-r[2].getX(),m=r[0].getY()-r[2].getY(),y=(r[0].getX()+r[2].getX())/2,v=(r[0].getY()+r[2].getY())/2,C=new Ht(y+f*d,v+f*m),R=new Ht(y-f*d,v-f*m);d=r[1].getX()-r[3].getX(),m=r[1].getY()-r[3].getY(),y=(r[1].getX()+r[3].getX())/2,v=(r[1].getY()+r[3].getY())/2;let O=new Ht(y+f*d,v+f*m),P=new Ht(y-f*d,v-f*m);return[C,O,R,P]}isValid(r,o){return r>=0&&r<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(r){let o=we.round(r.getX()),u=we.round(r.getY());return this.isValid(o,u)}distancePoint(r,o){return we.distance(r.getX(),r.getY(),o.getX(),o.getY())}distanceResultPoint(r,o){return we.distance(r.getX(),r.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(nt.truncDivision(this.nbLayers-4,8)+1)+15}}class _a{decode(r,o=null){let u=null,f=new Ao(r.getBlackMatrix()),d=null,m=null;try{let R=f.detectMirror(!1);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new We().decode(R)}catch(R){u=R}if(m==null)try{let R=f.detectMirror(!0);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new We().decode(R)}catch(R){throw u??R}let y=new zt(m.getText(),m.getRawBytes(),m.getNumBits(),d,Mt.AZTEC,W.currentTimeMillis()),v=m.getByteSegments();v!=null&&y.putMetadata(ae.BYTE_SEGMENTS,v);let C=m.getECLevel();return C!=null&&y.putMetadata(ae.ERROR_CORRECTION_LEVEL,C),y}reportFoundResultPoints(r,o){if(r!=null){let u=r.get(Lt.NEED_RESULT_POINT_CALLBACK);u!=null&&o.forEach((f,d,m)=>{u.foundPossibleResultPoint(f)})}}reset(){}}class zs extends Ot{constructor(r=500){super(new _a,r)}}class rn{decode(r,o){try{return this.doDecode(r,o)}catch{if(o&&o.get(Lt.TRY_HARDER)===!0&&r.isRotateSupported()){const d=r.rotateCounterClockwise(),m=this.doDecode(d,o),y=m.getResultMetadata();let v=270;y!==null&&y.get(ae.ORIENTATION)===!0&&(v=v+y.get(ae.ORIENTATION)%360),m.putMetadata(ae.ORIENTATION,v);const C=m.getResultPoints();if(C!==null){const R=d.getHeight();for(let O=0;O<C.length;O++)C[O]=new Ht(R-C[O].getY()-1,C[O].getX())}return m}else throw new mt}}reset(){}doDecode(r,o){const u=r.getWidth(),f=r.getHeight();let d=new _t(u);const m=o&&o.get(Lt.TRY_HARDER)===!0,y=Math.max(1,f>>(m?8:5));let v;m?v=f:v=15;const C=Math.trunc(f/2);for(let R=0;R<v;R++){const O=Math.trunc((R+1)/2),P=(R&1)===0,H=C+y*(P?O:-O);if(H<0||H>=f)break;try{d=r.getBlackRow(H,d)}catch{continue}for(let Z=0;Z<2;Z++){if(Z===1&&(d.reverse(),o&&o.get(Lt.NEED_RESULT_POINT_CALLBACK)===!0)){const et=new Map;o.forEach((ut,gt)=>et.set(gt,ut)),et.delete(Lt.NEED_RESULT_POINT_CALLBACK),o=et}try{const et=this.decodeRow(H,d,o);if(Z===1){et.putMetadata(ae.ORIENTATION,180);const ut=et.getResultPoints();ut!==null&&(ut[0]=new Ht(u-ut[0].getX()-1,ut[0].getY()),ut[1]=new Ht(u-ut[1].getX()-1,ut[1].getY()))}return et}catch{}}}throw new mt}static recordPattern(r,o,u){const f=u.length;for(let C=0;C<f;C++)u[C]=0;const d=r.getSize();if(o>=d)throw new mt;let m=!r.get(o),y=0,v=o;for(;v<d;){if(r.get(v)!==m)u[y]++;else{if(++y===f)break;u[y]=1,m=!m}v++}if(!(y===f||y===f-1&&v===d))throw new mt}static recordPatternInReverse(r,o,u){let f=u.length,d=r.get(o);for(;o>0&&f>=0;)r.get(--o)!==d&&(f--,d=!d);if(f>=0)throw new mt;rn.recordPattern(r,o+1,u)}static patternMatchVariance(r,o,u){const f=r.length;let d=0,m=0;for(let C=0;C<f;C++)d+=r[C],m+=o[C];if(d<m)return Number.POSITIVE_INFINITY;const y=d/m;u*=y;let v=0;for(let C=0;C<f;C++){const R=r[C],O=o[C]*y,P=R>O?R-O:O-R;if(P>u)return Number.POSITIVE_INFINITY;v+=P}return v/d}}class Vt extends rn{static findStartPattern(r){const o=r.getSize(),u=r.getNextSet(0);let f=0,d=Int32Array.from([0,0,0,0,0,0]),m=u,y=!1;const v=6;for(let C=u;C<o;C++)if(r.get(C)!==y)d[f]++;else{if(f===v-1){let R=Vt.MAX_AVG_VARIANCE,O=-1;for(let P=Vt.CODE_START_A;P<=Vt.CODE_START_C;P++){const H=rn.patternMatchVariance(d,Vt.CODE_PATTERNS[P],Vt.MAX_INDIVIDUAL_VARIANCE);H<R&&(R=H,O=P)}if(O>=0&&r.isRange(Math.max(0,m-(C-m)/2),m,!1))return Int32Array.from([m,C,O]);m+=d[0]+d[1],d=d.slice(2,d.length-1),d[f-1]=0,d[f]=0,f--}else f++;d[f]=1,y=!y}throw new mt}static decodeCode(r,o,u){rn.recordPattern(r,u,o);let f=Vt.MAX_AVG_VARIANCE,d=-1;for(let m=0;m<Vt.CODE_PATTERNS.length;m++){const y=Vt.CODE_PATTERNS[m],v=this.patternMatchVariance(o,y,Vt.MAX_INDIVIDUAL_VARIANCE);v<f&&(f=v,d=m)}if(d>=0)return d;throw new mt}decodeRow(r,o,u){const f=u&&u.get(Lt.ASSUME_GS1)===!0,d=Vt.findStartPattern(o),m=d[2];let y=0;const v=new Uint8Array(20);v[y++]=m;let C;switch(m){case Vt.CODE_START_A:C=Vt.CODE_CODE_A;break;case Vt.CODE_START_B:C=Vt.CODE_CODE_B;break;case Vt.CODE_START_C:C=Vt.CODE_CODE_C;break;default:throw new z}let R=!1,O=!1,P="",H=d[0],Z=d[1];const et=Int32Array.from([0,0,0,0,0,0]);let ut=0,gt=0,Nt=m,Pt=0,Rt=!0,ce=!1,oe=!1;for(;!R;){const vs=O;switch(O=!1,ut=gt,gt=Vt.decodeCode(o,et,Z),v[y++]=gt,gt!==Vt.CODE_STOP&&(Rt=!0),gt!==Vt.CODE_STOP&&(Pt++,Nt+=Pt*gt),H=Z,Z+=et.reduce((vr,th)=>vr+th,0),gt){case Vt.CODE_START_A:case Vt.CODE_START_B:case Vt.CODE_START_C:throw new z}switch(C){case Vt.CODE_CODE_A:if(gt<64)oe===ce?P+=String.fromCharCode(32+gt):P+=String.fromCharCode(32+gt+128),oe=!1;else if(gt<96)oe===ce?P+=String.fromCharCode(gt-64):P+=String.fromCharCode(gt+64),oe=!1;else switch(gt!==Vt.CODE_STOP&&(Rt=!1),gt){case Vt.CODE_FNC_1:f&&(P.length===0?P+="]C1":P+="");break;case Vt.CODE_FNC_2:case Vt.CODE_FNC_3:break;case Vt.CODE_FNC_4_A:!ce&&oe?(ce=!0,oe=!1):ce&&oe?(ce=!1,oe=!1):oe=!0;break;case Vt.CODE_SHIFT:O=!0,C=Vt.CODE_CODE_B;break;case Vt.CODE_CODE_B:C=Vt.CODE_CODE_B;break;case Vt.CODE_CODE_C:C=Vt.CODE_CODE_C;break;case Vt.CODE_STOP:R=!0;break}break;case Vt.CODE_CODE_B:if(gt<96)oe===ce?P+=String.fromCharCode(32+gt):P+=String.fromCharCode(32+gt+128),oe=!1;else switch(gt!==Vt.CODE_STOP&&(Rt=!1),gt){case Vt.CODE_FNC_1:f&&(P.length===0?P+="]C1":P+="");break;case Vt.CODE_FNC_2:case Vt.CODE_FNC_3:break;case Vt.CODE_FNC_4_B:!ce&&oe?(ce=!0,oe=!1):ce&&oe?(ce=!1,oe=!1):oe=!0;break;case Vt.CODE_SHIFT:O=!0,C=Vt.CODE_CODE_A;break;case Vt.CODE_CODE_A:C=Vt.CODE_CODE_A;break;case Vt.CODE_CODE_C:C=Vt.CODE_CODE_C;break;case Vt.CODE_STOP:R=!0;break}break;case Vt.CODE_CODE_C:if(gt<100)gt<10&&(P+="0"),P+=gt;else switch(gt!==Vt.CODE_STOP&&(Rt=!1),gt){case Vt.CODE_FNC_1:f&&(P.length===0?P+="]C1":P+="");break;case Vt.CODE_CODE_A:C=Vt.CODE_CODE_A;break;case Vt.CODE_CODE_B:C=Vt.CODE_CODE_B;break;case Vt.CODE_STOP:R=!0;break}break}vs&&(C=C===Vt.CODE_CODE_A?Vt.CODE_CODE_B:Vt.CODE_CODE_A)}const Ci=Z-H;if(Z=o.getNextUnset(Z),!o.isRange(Z,Math.min(o.getSize(),Z+(Z-H)/2),!1))throw new mt;if(Nt-=Pt*ut,Nt%103!==ut)throw new k;const cr=P.length;if(cr===0)throw new mt;cr>0&&Rt&&(C===Vt.CODE_CODE_C?P=P.substring(0,cr-2):P=P.substring(0,cr-1));const Fi=(d[1]+d[0])/2,$e=H+Ci/2,ui=v.length,ji=new Uint8Array(ui);for(let vs=0;vs<ui;vs++)ji[vs]=v[vs];const Ks=[new Ht(Fi,r),new Ht($e,r)];return new zt(P,ji,0,Ks,Mt.CODE_128,new Date().getTime())}}Vt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Vt.MAX_AVG_VARIANCE=.25,Vt.MAX_INDIVIDUAL_VARIANCE=.7,Vt.CODE_SHIFT=98,Vt.CODE_CODE_C=99,Vt.CODE_CODE_B=100,Vt.CODE_CODE_A=101,Vt.CODE_FNC_1=102,Vt.CODE_FNC_2=97,Vt.CODE_FNC_3=96,Vt.CODE_FNC_4_A=101,Vt.CODE_FNC_4_B=100,Vt.CODE_START_A=103,Vt.CODE_START_B=104,Vt.CODE_START_C=105,Vt.CODE_STOP=106;class Ye extends rn{constructor(r=!1,o=!1){super(),this.usingCheckDigit=r,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,o,u){let f=this.counters;f.fill(0),this.decodeRowResult="";let d=Ye.findAsteriskPattern(o,f),m=o.getNextSet(d[1]),y=o.getSize(),v,C;do{Ye.recordPattern(o,m,f);let et=Ye.toNarrowWidePattern(f);if(et<0)throw new mt;v=Ye.patternToChar(et),this.decodeRowResult+=v,C=m;for(let ut of f)m+=ut;m=o.getNextSet(m)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let et of f)R+=et;let O=m-C-R;if(m!==y&&O*2<R)throw new mt;if(this.usingCheckDigit){let et=this.decodeRowResult.length-1,ut=0;for(let gt=0;gt<et;gt++)ut+=Ye.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(gt));if(this.decodeRowResult.charAt(et)!==Ye.ALPHABET_STRING.charAt(ut%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,et)}if(this.decodeRowResult.length===0)throw new mt;let P;this.extendedMode?P=Ye.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;let H=(d[1]+d[0])/2,Z=C+R/2;return new zt(P,null,0,[new Ht(H,r),new Ht(Z,r)],Mt.CODE_39,new Date().getTime())}static findAsteriskPattern(r,o){let u=r.getSize(),f=r.getNextSet(0),d=0,m=f,y=!1,v=o.length;for(let C=f;C<u;C++)if(r.get(C)!==y)o[d]++;else{if(d===v-1){if(this.toNarrowWidePattern(o)===Ye.ASTERISK_ENCODING&&r.isRange(Math.max(0,m-Math.floor((C-m)/2)),m,!1))return[m,C];m+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,y=!y}throw new mt}static toNarrowWidePattern(r){let o=r.length,u=0,f;do{let d=2147483647;for(let v of r)v<d&&v>u&&(d=v);u=d,f=0;let m=0,y=0;for(let v=0;v<o;v++){let C=r[v];C>u&&(y|=1<<o-1-v,f++,m+=C)}if(f===3){for(let v=0;v<o&&f>0;v++){let C=r[v];if(C>u&&(f--,C*2>=m))return-1}return y}}while(f>3);return-1}static patternToChar(r){for(let o=0;o<Ye.CHARACTER_ENCODINGS.length;o++)if(Ye.CHARACTER_ENCODINGS[o]===r)return Ye.ALPHABET_STRING.charAt(o);if(r===Ye.ASTERISK_ENCODING)return"*";throw new mt}static decodeExtended(r){let o=r.length,u="";for(let f=0;f<o;f++){let d=r.charAt(f);if(d==="+"||d==="$"||d==="%"||d==="/"){let m=r.charAt(f+1),y="\0";switch(d){case"+":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)+32);else throw new z;break;case"$":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)-64);else throw new z;break;case"%":if(m>="A"&&m<="E")y=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")y=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")y=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")y="\0";else if(m==="V")y="@";else if(m==="W")y="`";else if(m==="X"||m==="Y"||m==="Z")y="";else throw new z;break;case"/":if(m>="A"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")y=":";else throw new z;break}u+=y,f++}else u+=d}return u}}Ye.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Ye.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Ye.ASTERISK_ENCODING=148;class Le extends rn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,o,u){let f=this.decodeStart(o),d=this.decodeEnd(o),m=new q;Le.decodeMiddle(o,f[1],d[0],m);let y=m.toString(),v=null;u!=null&&(v=u.get(Lt.ALLOWED_LENGTHS)),v==null&&(v=Le.DEFAULT_ALLOWED_LENGTHS);let C=y.length,R=!1,O=0;for(let Z of v){if(C===Z){R=!0;break}Z>O&&(O=Z)}if(!R&&C>O&&(R=!0),!R)throw new z;const P=[new Ht(f[1],r),new Ht(d[0],r)];return new zt(y,null,0,P,Mt.ITF,new Date().getTime())}static decodeMiddle(r,o,u,f){let d=new Int32Array(10),m=new Int32Array(5),y=new Int32Array(5);for(d.fill(0),m.fill(0),y.fill(0);o<u;){rn.recordPattern(r,o,d);for(let C=0;C<5;C++){let R=2*C;m[C]=d[R],y[C]=d[R+1]}let v=Le.decodeDigit(m);f.append(v.toString()),v=this.decodeDigit(y),f.append(v.toString()),d.forEach(function(C){o+=C})}}decodeStart(r){let o=Le.skipWhiteSpace(r),u=Le.findGuardPattern(r,o,Le.START_PATTERN);return this.narrowLineWidth=(u[1]-u[0])/4,this.validateQuietZone(r,u[0]),u}validateQuietZone(r,o){let u=this.narrowLineWidth*10;u=u<o?u:o;for(let f=o-1;u>0&&f>=0&&!r.get(f);f--)u--;if(u!==0)throw new mt}static skipWhiteSpace(r){const o=r.getSize(),u=r.getNextSet(0);if(u===o)throw new mt;return u}decodeEnd(r){r.reverse();try{let o=Le.skipWhiteSpace(r),u;try{u=Le.findGuardPattern(r,o,Le.END_PATTERN_REVERSED[0])}catch(d){d instanceof mt&&(u=Le.findGuardPattern(r,o,Le.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,u[0]);let f=u[0];return u[0]=r.getSize()-u[1],u[1]=r.getSize()-f,u}finally{r.reverse()}}static findGuardPattern(r,o,u){let f=u.length,d=new Int32Array(f),m=r.getSize(),y=!1,v=0,C=o;d.fill(0);for(let R=o;R<m;R++)if(r.get(R)!==y)d[v]++;else{if(v===f-1){if(rn.patternMatchVariance(d,u,Le.MAX_INDIVIDUAL_VARIANCE)<Le.MAX_AVG_VARIANCE)return[C,R];C+=d[0]+d[1],W.arraycopy(d,2,d,0,v-1),d[v-1]=0,d[v]=0,v--}else v++;d[v]=1,y=!y}throw new mt}static decodeDigit(r){let o=Le.MAX_AVG_VARIANCE,u=-1,f=Le.PATTERNS.length;for(let d=0;d<f;d++){let m=Le.PATTERNS[d],y=rn.patternMatchVariance(r,m,Le.MAX_INDIVIDUAL_VARIANCE);y<o?(o=y,u=d):y===o&&(u=-1)}if(u>=0)return u%10;throw new mt}}Le.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Le.MAX_AVG_VARIANCE=.38,Le.MAX_INDIVIDUAL_VARIANCE=.5,Le.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Le.START_PATTERN=Int32Array.from([1,1,1,1]),Le.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Qe extends rn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let o=!1,u,f=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),u=Qe.findGuardPattern(r,f,!1,this.START_END_PATTERN,d);let m=u[0];f=u[1];let y=m-(f-m);y>=0&&(o=r.isRange(y,m,!1))}return u}static checkChecksum(r){return Qe.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let u=parseInt(r.charAt(o-1),10);return Qe.getStandardUPCEANChecksum(r.substring(0,o-1))===u}static getStandardUPCEANChecksum(r){let o=r.length,u=0;for(let f=o-1;f>=0;f-=2){let d=r.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new z;u+=d}u*=3;for(let f=o-2;f>=0;f-=2){let d=r.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new z;u+=d}return(1e3-u)%10}static decodeEnd(r,o){return Qe.findGuardPattern(r,o,!1,Qe.START_END_PATTERN,new Int32Array(Qe.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,o,u,f){return this.findGuardPattern(r,o,u,f,new Int32Array(f.length))}static findGuardPattern(r,o,u,f,d){let m=r.getSize();o=u?r.getNextUnset(o):r.getNextSet(o);let y=0,v=o,C=f.length,R=u;for(let O=o;O<m;O++)if(r.get(O)!==R)d[y]++;else{if(y===C-1){if(rn.patternMatchVariance(d,f,Qe.MAX_INDIVIDUAL_VARIANCE)<Qe.MAX_AVG_VARIANCE)return Int32Array.from([v,O]);v+=d[0]+d[1];let P=d.slice(2,d.length-1);for(let H=0;H<y-1;H++)d[H]=P[H];d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,R=!R}throw new mt}static decodeDigit(r,o,u,f){this.recordPattern(r,u,o);let d=this.MAX_AVG_VARIANCE,m=-1,y=f.length;for(let v=0;v<y;v++){let C=f[v],R=rn.patternMatchVariance(o,C,Qe.MAX_INDIVIDUAL_VARIANCE);R<d&&(d=R,m=v)}if(m>=0)return m;throw new mt}}Qe.MAX_AVG_VARIANCE=.48,Qe.MAX_INDIVIDUAL_VARIANCE=.7,Qe.START_END_PATTERN=Int32Array.from([1,1,1]),Qe.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Qe.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qe.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class is{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,u){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,u,f),m=f.toString(),y=is.parseExtensionString(m),v=[new Ht((u[0]+u[1])/2,r),new Ht(d,r)],C=new zt(m,null,0,v,Mt.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&C.putAllMetadata(y),C}decodeMiddle(r,o,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m=o[1],y=0;for(let C=0;C<5&&m<d;C++){let R=Qe.decodeDigit(r,f,m,Qe.L_AND_G_PATTERNS);u+=String.fromCharCode(48+R%10);for(let O of f)m+=O;R>=10&&(y|=1<<4-C),C!==4&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(u.length!==5)throw new mt;let v=this.determineCheckDigit(y);if(is.extensionChecksum(u.toString())!==v)throw new mt;return m}static extensionChecksum(r){let o=r.length,u=0;for(let f=o-2;f>=0;f-=2)u+=r.charAt(f).charCodeAt(0)-48;u*=3;for(let f=o-1;f>=0;f-=2)u+=r.charAt(f).charCodeAt(0)-48;return u*=3,u%10}determineCheckDigit(r){for(let o=0;o<10;o++)if(r===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new mt}static parseExtensionString(r){if(r.length!==5)return null;let o=is.parseExtension5String(r);return o==null?null:new Map([[ae.SUGGESTED_PRICE,o]])}static parseExtension5String(r){let o;switch(r.charAt(0)){case"0":o="£";break;case"5":o="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let u=parseInt(r.substring(1)),f=(u/100).toString(),d=u%100,m=d<10?"0"+d:d.toString();return o+f+"."+m}}class Hs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,u){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,u,f),m=f.toString(),y=Hs.parseExtensionString(m),v=[new Ht((u[0]+u[1])/2,r),new Ht(d,r)],C=new zt(m,null,0,v,Mt.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&C.putAllMetadata(y),C}decodeMiddle(r,o,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m=o[1],y=0;for(let v=0;v<2&&m<d;v++){let C=Qe.decodeDigit(r,f,m,Qe.L_AND_G_PATTERNS);u+=String.fromCharCode(48+C%10);for(let R of f)m+=R;C>=10&&(y|=1<<1-v),v!==1&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(u.length!==2)throw new mt;if(parseInt(u.toString())%4!==y)throw new mt;return m}static parseExtensionString(r){return r.length!==2?null:new Map([[ae.ISSUE_NUMBER,parseInt(r)]])}}class Ca{static decodeRow(r,o,u){let f=Qe.findGuardPattern(o,u,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new is().decodeRow(r,o,f)}catch{return new Hs().decodeRow(r,o,f)}}}Ca.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ge extends Qe{constructor(){super(),this.decodeRowStringBuffer="",ge.L_AND_G_PATTERNS=ge.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let o=ge.L_PATTERNS[r-10],u=new Int32Array(o.length);for(let f=0;f<o.length;f++)u[f]=o[o.length-f-1];ge.L_AND_G_PATTERNS[r]=u}}decodeRow(r,o,u){let f=ge.findStartGuardPattern(o),d=u==null?null:u.get(Lt.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Rt=new Ht((f[0]+f[1])/2,r);d.foundPossibleResultPoint(Rt)}let m=this.decodeMiddle(o,f,this.decodeRowStringBuffer),y=m.rowOffset,v=m.resultString;if(d!=null){const Rt=new Ht(y,r);d.foundPossibleResultPoint(Rt)}let C=this.decodeEnd(o,y);if(d!=null){const Rt=new Ht((C[0]+C[1])/2,r);d.foundPossibleResultPoint(Rt)}let R=C[1],O=R+(R-C[0]);if(O>=o.getSize()||!o.isRange(R,O,!1))throw new mt;let P=v.toString();if(P.length<8)throw new z;if(!ge.checkChecksum(P))throw new k;let H=(f[1]+f[0])/2,Z=(C[1]+C[0])/2,et=this.getBarcodeFormat(),ut=[new Ht(H,r),new Ht(Z,r)],gt=new zt(P,null,0,ut,et,new Date().getTime()),Nt=0;try{let Rt=Ca.decodeRow(r,o,C[1]);gt.putMetadata(ae.UPC_EAN_EXTENSION,Rt.getText()),gt.putAllMetadata(Rt.getResultMetadata()),gt.addResultPoints(Rt.getResultPoints()),Nt=Rt.getText().length}catch{}let Pt=u==null?null:u.get(Lt.ALLOWED_EAN_EXTENSIONS);if(Pt!=null){let Rt=!1;for(let ce in Pt)if(Nt.toString()===ce){Rt=!0;break}if(!Rt)throw new mt}return gt}decodeEnd(r,o){return ge.findGuardPattern(r,o,!1,ge.START_END_PATTERN,new Int32Array(ge.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return ge.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let u=parseInt(r.charAt(o-1),10);return ge.getStandardUPCEANChecksum(r.substring(0,o-1))===u}static getStandardUPCEANChecksum(r){let o=r.length,u=0;for(let f=o-1;f>=0;f-=2){let d=r.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new z;u+=d}u*=3;for(let f=o-2;f>=0;f-=2){let d=r.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new z;u+=d}return(1e3-u)%10}}class Ai extends ge{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m=o[1],y=0;for(let C=0;C<6&&m<d;C++){let R=ge.decodeDigit(r,f,m,ge.L_AND_G_PATTERNS);u+=String.fromCharCode(48+R%10);for(let O of f)m+=O;R>=10&&(y|=1<<5-C)}u=Ai.determineFirstDigit(u,y),m=ge.findGuardPattern(r,m,!0,ge.MIDDLE_PATTERN,new Int32Array(ge.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&m<d;C++){let R=ge.decodeDigit(r,f,m,ge.L_PATTERNS);u+=String.fromCharCode(48+R);for(let O of f)m+=O}return{rowOffset:m,resultString:u}}getBarcodeFormat(){return Mt.EAN_13}static determineFirstDigit(r,o){for(let u=0;u<10;u++)if(o===this.FIRST_DIGIT_ENCODINGS[u])return r=String.fromCharCode(48+u)+r,r;throw new mt}}Ai.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Sa extends ge{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,u){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m=o[1];for(let v=0;v<4&&m<d;v++){let C=ge.decodeDigit(r,f,m,ge.L_PATTERNS);u+=String.fromCharCode(48+C);for(let R of f)m+=R}m=ge.findGuardPattern(r,m,!0,ge.MIDDLE_PATTERN,new Int32Array(ge.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&m<d;v++){let C=ge.decodeDigit(r,f,m,ge.L_PATTERNS);u+=String.fromCharCode(48+C);for(let R of f)m+=R}return{rowOffset:m,resultString:u}}getBarcodeFormat(){return Mt.EAN_8}}class mr extends ge{constructor(){super(...arguments),this.ean13Reader=new Ai}getBarcodeFormat(){return Mt.UPC_A}decode(r,o){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,o,u){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,o,u))}decodeMiddle(r,o,u){return this.ean13Reader.decodeMiddle(r,o,u)}maybeReturnResult(r){let o=r.getText();if(o.charAt(0)==="0"){let u=new zt(o.substring(1),null,null,r.getResultPoints(),Mt.UPC_A);return r.getResultMetadata()!=null&&u.putAllMetadata(r.getResultMetadata()),u}else throw new mt}reset(){this.ean13Reader.reset()}}class wi extends ge{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,o,u){const f=this.decodeMiddleCounters.map(C=>C);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const d=r.getSize();let m=o[1],y=0;for(let C=0;C<6&&m<d;C++){const R=wi.decodeDigit(r,f,m,wi.L_AND_G_PATTERNS);u+=String.fromCharCode(48+R%10);for(let O of f)m+=O;R>=10&&(y|=1<<5-C)}let v=wi.determineNumSysAndCheckDigit(u,y);return{rowOffset:m,resultString:v}}decodeEnd(r,o){return wi.findGuardPatternWithoutCounters(r,o,!0,wi.MIDDLE_END_PATTERN)}checkChecksum(r){return ge.checkChecksum(wi.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,o){for(let u=0;u<=1;u++)for(let f=0;f<10;f++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[u][f]){let d=String.fromCharCode(48+u),m=String.fromCharCode(48+f);return d+r+m}throw mt.getNotFoundInstance()}getBarcodeFormat(){return Mt.UPC_E}static convertUPCEtoUPCA(r){const o=r.slice(1,7).split("").map(d=>d.charCodeAt(0)),u=new q;u.append(r.charAt(0));let f=o[5];switch(f){case 0:case 1:case 2:u.appendChars(o,0,2),u.append(f),u.append("0000"),u.appendChars(o,2,3);break;case 3:u.appendChars(o,0,3),u.append("00000"),u.appendChars(o,3,2);break;case 4:u.appendChars(o,0,4),u.append("00000"),u.append(o[4]);break;default:u.appendChars(o,0,5),u.append("0000"),u.append(f);break}return r.length>=8&&u.append(r.charAt(7)),u.toString()}}wi.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),wi.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Pr extends rn{constructor(r){super();let o=r==null?null:r.get(Lt.POSSIBLE_FORMATS),u=[];s(o)?(u.push(new Ai),u.push(new mr),u.push(new Sa),u.push(new wi)):(o.indexOf(Mt.EAN_13)>-1&&u.push(new Ai),o.indexOf(Mt.UPC_A)>-1&&u.push(new mr),o.indexOf(Mt.EAN_8)>-1&&u.push(new Sa),o.indexOf(Mt.UPC_E)>-1&&u.push(new wi)),this.readers=u}decodeRow(r,o,u){for(let f of this.readers)try{const d=f.decodeRow(r,o,u),m=d.getBarcodeFormat()===Mt.EAN_13&&d.getText().charAt(0)==="0",y=u==null?null:u.get(Lt.POSSIBLE_FORMATS),v=y==null||y.includes(Mt.UPC_A);if(m&&v){const C=d.getRawBytes(),R=new zt(d.getText().substring(1),C,C?C.length:null,d.getResultPoints(),Mt.UPC_A);return R.putAllMetadata(d.getResultMetadata()),R}return d}catch{}throw new mt}reset(){for(let r of this.readers)r.reset()}}class On extends rn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,o){for(let u=0;u<o.length;u++)if(rn.patternMatchVariance(r,o[u],On.MAX_INDIVIDUAL_VARIANCE)<On.MAX_AVG_VARIANCE)return u;throw new mt}static count(r){return we.sum(new Int32Array(r))}static increment(r,o){let u=0,f=o[0];for(let d=1;d<r.length;d++)o[d]>f&&(f=o[d],u=d);r[u]++}static decrement(r,o){let u=0,f=o[0];for(let d=1;d<r.length;d++)o[d]<f&&(f=o[d],u=d);r[u]--}static isFinderPattern(r){let o=r[0]+r[1],u=o+r[2]+r[3],f=o/u;if(f>=On.MIN_FINDER_PATTERN_RATIO&&f<=On.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let y of r)y>m&&(m=y),y<d&&(d=y);return m<10*d}return!1}}On.MAX_AVG_VARIANCE=.2,On.MAX_INDIVIDUAL_VARIANCE=.45,On.MIN_FINDER_PATTERN_RATIO=9.5/12,On.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ki{constructor(r,o){this.value=r,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Ki))return!1;const o=r;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Gs{constructor(r,o,u,f,d){this.value=r,this.startEnd=o,this.value=r,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Ht(u,d)),this.resultPoints.push(new Ht(f,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Gs))return!1;const o=r;return this.value===o.value}hashCode(){return this.value}}class Me{constructor(){}static getRSSvalue(r,o,u){let f=0;for(let v of r)f+=v;let d=0,m=0,y=r.length;for(let v=0;v<y-1;v++){let C;for(C=1,m|=1<<v;C<r[v];C++,m&=~(1<<v)){let R=Me.combins(f-C-1,y-v-2);if(u&&m===0&&f-C-(y-v-1)>=y-v-1&&(R-=Me.combins(f-C-(y-v),y-v-2)),y-v-1>1){let O=0;for(let P=f-C-(y-v-2);P>o;P--)O+=Me.combins(f-C-P-1,y-v-3);R-=O*(y-1-v)}else f-C>o&&R--;d+=R}f-=C}return d}static combins(r,o){let u,f;r-o>o?(f=o,u=r-o):(f=r-o,u=o);let d=1,m=1;for(let y=r;y>u;y--)d*=y,m<=f&&(d/=m,m++);for(;m<=f;)d/=m,m++;return d}}class Xn{static buildBitArray(r){let o=r.length*2-1;r[r.length-1].getRightChar()==null&&(o-=1);let u=12*o,f=new _t(u),d=0,y=r[0].getRightChar().getValue();for(let v=11;v>=0;--v)(y&1<<v)!=0&&f.set(d),d++;for(let v=1;v<r.length;++v){let C=r[v],R=C.getLeftChar().getValue();for(let O=11;O>=0;--O)(R&1<<O)!=0&&f.set(d),d++;if(C.getRightChar()!=null){let O=C.getRightChar().getValue();for(let P=11;P>=0;--P)(O&1<<P)!=0&&f.set(d),d++}}return f}}class sn{constructor(r,o){o?this.decodedInformation=null:(this.finished=r,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Pi{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class ei extends Pi{constructor(r,o){super(r),this.value=o}getValue(){return this.value}isFNC1(){return this.value===ei.FNC1}}ei.FNC1="$";class rs extends Pi{constructor(r,o,u){super(r),u?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Wn extends Pi{constructor(r,o,u){if(super(r),o<0||o>10||u<0||u>10)throw new z;this.firstDigit=o,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Wn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Wn.FNC1}isAnyFNC1(){return this.firstDigit===Wn.FNC1||this.secondDigit===Wn.FNC1}}Wn.FNC1=10;class Ft{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new mt;let o=r.substring(0,2);for(let d of Ft.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===Ft.VARIABLE_LENGTH?Ft.processVariableAI(2,d[2],r):Ft.processFixedAI(2,d[1],r);if(r.length<3)throw new mt;let u=r.substring(0,3);for(let d of Ft.THREE_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===Ft.VARIABLE_LENGTH?Ft.processVariableAI(3,d[2],r):Ft.processFixedAI(3,d[1],r);for(let d of Ft.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===Ft.VARIABLE_LENGTH?Ft.processVariableAI(4,d[2],r):Ft.processFixedAI(4,d[1],r);if(r.length<4)throw new mt;let f=r.substring(0,4);for(let d of Ft.FOUR_DIGIT_DATA_LENGTH)if(d[0]===f)return d[1]===Ft.VARIABLE_LENGTH?Ft.processVariableAI(4,d[2],r):Ft.processFixedAI(4,d[1],r);throw new mt}static processFixedAI(r,o,u){if(u.length<r)throw new mt;let f=u.substring(0,r);if(u.length<r+o)throw new mt;let d=u.substring(r,r+o),m=u.substring(r+o),y="("+f+")"+d,v=Ft.parseFieldsInGeneralPurpose(m);return v==null?y:y+v}static processVariableAI(r,o,u){let f=u.substring(0,r),d;u.length<r+o?d=u.length:d=r+o;let m=u.substring(r,d),y=u.substring(d),v="("+f+")"+m,C=Ft.parseFieldsInGeneralPurpose(y);return C==null?v:v+C}}Ft.VARIABLE_LENGTH=[],Ft.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ft.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ft.VARIABLE_LENGTH,20],["22",Ft.VARIABLE_LENGTH,29],["30",Ft.VARIABLE_LENGTH,8],["37",Ft.VARIABLE_LENGTH,8],["90",Ft.VARIABLE_LENGTH,30],["91",Ft.VARIABLE_LENGTH,30],["92",Ft.VARIABLE_LENGTH,30],["93",Ft.VARIABLE_LENGTH,30],["94",Ft.VARIABLE_LENGTH,30],["95",Ft.VARIABLE_LENGTH,30],["96",Ft.VARIABLE_LENGTH,30],["97",Ft.VARIABLE_LENGTH,3],["98",Ft.VARIABLE_LENGTH,30],["99",Ft.VARIABLE_LENGTH,30]],Ft.THREE_DIGIT_DATA_LENGTH=[["240",Ft.VARIABLE_LENGTH,30],["241",Ft.VARIABLE_LENGTH,30],["242",Ft.VARIABLE_LENGTH,6],["250",Ft.VARIABLE_LENGTH,30],["251",Ft.VARIABLE_LENGTH,30],["253",Ft.VARIABLE_LENGTH,17],["254",Ft.VARIABLE_LENGTH,20],["400",Ft.VARIABLE_LENGTH,30],["401",Ft.VARIABLE_LENGTH,30],["402",17],["403",Ft.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ft.VARIABLE_LENGTH,20],["421",Ft.VARIABLE_LENGTH,15],["422",3],["423",Ft.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ft.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ft.VARIABLE_LENGTH,15],["391",Ft.VARIABLE_LENGTH,18],["392",Ft.VARIABLE_LENGTH,15],["393",Ft.VARIABLE_LENGTH,18],["703",Ft.VARIABLE_LENGTH,30]],Ft.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ft.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ft.VARIABLE_LENGTH,20],["8003",Ft.VARIABLE_LENGTH,30],["8004",Ft.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ft.VARIABLE_LENGTH,30],["8008",Ft.VARIABLE_LENGTH,12],["8018",18],["8020",Ft.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ft.VARIABLE_LENGTH,70],["8200",Ft.VARIABLE_LENGTH,70]];class ir{constructor(r){this.buffer=new q,this.information=r}decodeAllCodes(r,o){let u=o,f=null;do{let d=this.decodeGeneralPurposeField(u,f),m=Ft.parseFieldsInGeneralPurpose(d.getNewString());if(m!=null&&r.append(m),d.isRemaining()?f=""+d.getRemainingValue():f=null,u===d.getNewPosition())break;u=d.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let o=r;o<r+3;++o)if(this.information.get(o))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(r,4);return d===0?new Wn(this.information.getSize(),Wn.FNC1,Wn.FNC1):new Wn(this.information.getSize(),d-1,Wn.FNC1)}let o=this.extractNumericValueFromBitArray(r,7),u=(o-8)/11,f=(o-8)%11;return new Wn(r+7,u,f)}extractNumericValueFromBitArray(r,o){return ir.extractNumericValueFromBitArray(this.information,r,o)}static extractNumericValueFromBitArray(r,o,u){let f=0;for(let d=0;d<u;++d)r.get(o+d)&&(f|=1<<u-d-1);return f}decodeGeneralPurposeField(r,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(r);let u=this.parseBlocks();return u!=null&&u.isRemaining()?new rs(this.current.getPosition(),this.buffer.toString(),u.getRemainingValue()):new rs(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,o;do{let u=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),r=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),r=o.isFinished()):(o=this.parseNumericBlock(),r=o.isFinished()),!(u!==this.current.getPosition())&&!r)break}while(!r);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let o;return r.isSecondDigitFNC1()?o=new rs(this.current.getPosition(),this.buffer.toString()):o=new rs(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new sn(!0,o)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let o=new rs(this.current.getPosition(),this.buffer.toString());return new sn(!0,o)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new sn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new rs(this.current.getPosition(),this.buffer.toString());return new sn(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new sn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new rs(this.current.getPosition(),this.buffer.toString());return new sn(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new sn(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+7>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(r,7);if(u>=64&&u<116)return!0;if(r+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(r,8);return f>=232&&f<253}decodeIsoIec646(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new ei(r+5,ei.FNC1);if(o>=5&&o<15)return new ei(r+5,"0"+(o-5));let u=this.extractNumericValueFromBitArray(r,7);if(u>=64&&u<90)return new ei(r+7,""+(u+1));if(u>=90&&u<116)return new ei(r+7,""+(u+7));let f=this.extractNumericValueFromBitArray(r,8),d;switch(f){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new z}return new ei(r+8,d)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+6>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(r,6);return u>=16&&u<63}decodeAlphanumeric(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new ei(r+5,ei.FNC1);if(o>=5&&o<15)return new ei(r+5,"0"+(o-5));let u=this.extractNumericValueFromBitArray(r,6);if(u>=32&&u<58)return new ei(r+6,""+(u+33));let f;switch(u){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new Li("Decoding invalid alphanumeric value: "+u)}return new ei(r+6,f)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<5&&o+r<this.information.getSize();++o)if(o===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+o))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let o=r;o<r+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<4&&o+r<this.information.getSize();++o)if(this.information.get(r+o))return!1;return!0}}class Br{constructor(r){this.information=r,this.generalDecoder=new ir(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Cn extends Br{constructor(r){super(r)}encodeCompressedGtin(r,o){r.append("(01)");let u=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,o,u)}encodeCompressedGtinWithoutAI(r,o,u){for(let f=0;f<4;++f){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*f,10);d/100===0&&r.append("0"),d/10===0&&r.append("0"),r.append(d)}Cn.appendCheckDigit(r,u)}static appendCheckDigit(r,o){let u=0;for(let f=0;f<13;f++){let d=r.charAt(f+o).charCodeAt(0)-48;u+=(f&1)===0?3*d:d}u=10-u%10,u===10&&(u=0),r.append(u)}}Cn.GTIN_SIZE=40;class Ti extends Cn{constructor(r){super(r)}parseInformation(){let r=new q;r.append("(01)");let o=r.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(Ti.HEADER_SIZE,4);return r.append(u),this.encodeCompressedGtinWithoutAI(r,Ti.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(r,Ti.HEADER_SIZE+44)}}Ti.HEADER_SIZE=4;class Zi extends Br{constructor(r){super(r)}parseInformation(){let r=new q;return this.getGeneralDecoder().decodeAllCodes(r,Zi.HEADER_SIZE)}}Zi.HEADER_SIZE=5;class ni extends Cn{constructor(r){super(r)}encodeCompressedWeight(r,o,u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(o,u);this.addWeightCode(r,f);let d=this.checkWeight(f),m=1e5;for(let y=0;y<5;++y)d/m===0&&r.append("0"),m/=10;r.append(d)}}class je extends ni{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=je.HEADER_SIZE+ni.GTIN_SIZE+je.WEIGHT_SIZE)throw new mt;let r=new q;return this.encodeCompressedGtin(r,je.HEADER_SIZE),this.encodeCompressedWeight(r,je.HEADER_SIZE+ni.GTIN_SIZE,je.WEIGHT_SIZE),r.toString()}}je.HEADER_SIZE=5,je.WEIGHT_SIZE=15;class wo extends je{constructor(r){super(r)}addWeightCode(r,o){r.append("(3103)")}checkWeight(r){return r}}class ba extends je{constructor(r){super(r)}addWeightCode(r,o){o<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Fn extends Cn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Fn.HEADER_SIZE+Cn.GTIN_SIZE)throw new mt;let r=new q;this.encodeCompressedGtin(r,Fn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Fn.HEADER_SIZE+Cn.GTIN_SIZE,Fn.LAST_DIGIT_SIZE);r.append("(392"),r.append(o),r.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(Fn.HEADER_SIZE+Cn.GTIN_SIZE+Fn.LAST_DIGIT_SIZE,null);return r.append(u.getNewString()),r.toString()}}Fn.HEADER_SIZE=8,Fn.LAST_DIGIT_SIZE=2;class xn extends Cn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<xn.HEADER_SIZE+Cn.GTIN_SIZE)throw new mt;let r=new q;this.encodeCompressedGtin(r,xn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(xn.HEADER_SIZE+Cn.GTIN_SIZE,xn.LAST_DIGIT_SIZE);r.append("(393"),r.append(o),r.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(xn.HEADER_SIZE+Cn.GTIN_SIZE+xn.LAST_DIGIT_SIZE,xn.FIRST_THREE_DIGITS_SIZE);u/100==0&&r.append("0"),u/10==0&&r.append("0"),r.append(u);let f=this.getGeneralDecoder().decodeGeneralPurposeField(xn.HEADER_SIZE+Cn.GTIN_SIZE+xn.LAST_DIGIT_SIZE+xn.FIRST_THREE_DIGITS_SIZE,null);return r.append(f.getNewString()),r.toString()}}xn.HEADER_SIZE=8,xn.LAST_DIGIT_SIZE=2,xn.FIRST_THREE_DIGITS_SIZE=10;class Je extends ni{constructor(r,o,u){super(r),this.dateCode=u,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Je.HEADER_SIZE+Je.GTIN_SIZE+Je.WEIGHT_SIZE+Je.DATE_SIZE)throw new mt;let r=new q;return this.encodeCompressedGtin(r,Je.HEADER_SIZE),this.encodeCompressedWeight(r,Je.HEADER_SIZE+Je.GTIN_SIZE,Je.WEIGHT_SIZE),this.encodeCompressedDate(r,Je.HEADER_SIZE+Je.GTIN_SIZE+Je.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,o){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Je.DATE_SIZE);if(u==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let f=u%32;u/=32;let d=u%12+1;u/=12;let m=u;m/10==0&&r.append("0"),r.append(m),d/10==0&&r.append("0"),r.append(d),f/10==0&&r.append("0"),r.append(f)}addWeightCode(r,o){r.append("("),r.append(this.firstAIdigits),r.append(o/1e5),r.append(")")}checkWeight(r){return r%1e5}}Je.HEADER_SIZE=8,Je.WEIGHT_SIZE=20,Je.DATE_SIZE=16;function To(M){try{if(M.get(1))return new Ti(M);if(!M.get(2))return new Zi(M);switch(ir.extractNumericValueFromBitArray(M,1,4)){case 4:return new wo(M);case 5:return new ba(M)}switch(ir.extractNumericValueFromBitArray(M,1,5)){case 12:return new Fn(M);case 13:return new xn(M)}switch(ir.extractNumericValueFromBitArray(M,1,7)){case 56:return new Je(M,"310","11");case 57:return new Je(M,"320","11");case 58:return new Je(M,"310","13");case 59:return new Je(M,"320","13");case 60:return new Je(M,"310","15");case 61:return new Je(M,"320","15");case 62:return new Je(M,"310","17");case 63:return new Je(M,"320","17")}}catch(r){throw console.log(r),new Li("unknown decoder: "+M)}}class Bi{constructor(r,o,u,f){this.leftchar=r,this.rightchar=o,this.finderpattern=u,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,o){return r instanceof Bi?Bi.equalsOrNull(r.leftchar,o.leftchar)&&Bi.equalsOrNull(r.rightchar,o.rightchar)&&Bi.equalsOrNull(r.finderpattern,o.finderpattern):!1}static equalsOrNull(r,o){return r===null?o===null:Bi.equals(r,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ia{constructor(r,o,u){this.pairs=r,this.rowNumber=o,this.wasReversed=u}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,o){return r instanceof Ia?this.checkEqualitity(r,o)&&r.wasReversed===o.wasReversed:!1}checkEqualitity(r,o){if(!r||!o)return;let u;return r.forEach((f,d)=>{o.forEach(m=>{f.getLeftChar().getValue()===m.getLeftChar().getValue()&&f.getRightChar().getValue()===m.getRightChar().getValue()&&f.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(u=!0)})}),u}}class vt extends On{constructor(r){super(...arguments),this.pairs=new Array(vt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,o,u){this.pairs.length=0,this.startFromEven=!1;try{return vt.constructResult(this.decodeRow2pairs(r,o))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,vt.constructResult(this.decodeRow2pairs(r,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,o){let u=!1;for(;!u;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,r))}catch(d){if(d instanceof mt){if(!this.pairs.length)throw new mt;u=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(r,!1),f){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new mt}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(u){this.verbose&&console.log(u)}return r&&(this.rows=this.rows.reverse()),o}checkRows(r,o){for(let u=o;u<this.rows.length;u++){let f=this.rows[u];this.pairs.length=0;for(let m of r)this.pairs.push(m.getPairs());if(this.pairs.push(f.getPairs()),!vt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(r);d.push(f);try{return this.checkRows(d,u+1)}catch(m){this.verbose&&console.log(m)}}throw new mt}static isValidSequence(r){for(let o of vt.FINDER_PATTERN_SEQUENCES){if(r.length>o.length)continue;let u=!0;for(let f=0;f<r.length;f++)if(r[f].getFinderPattern().getValue()!=o[f]){u=!1;break}if(u)return!0}return!1}storeRow(r,o){let u=0,f=!1,d=!1;for(;u<this.rows.length;){let m=this.rows[u];if(m.getRowNumber()>r){d=m.isEquivalent(this.pairs);break}f=m.isEquivalent(this.pairs),u++}d||f||vt.isPartialRow(this.pairs,this.rows)||(this.rows.push(u,new Ia(this.pairs,r,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,o){for(let u of o)if(u.getPairs().length!==r.length){for(let f of u.getPairs())for(let d of r)if(Bi.equals(f,d))break}}static isPartialRow(r,o){for(let u of o){let f=!0;for(let d of r){let m=!1;for(let y of u.getPairs())if(d.equals(y)){m=!0;break}if(!m){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(r){let o=Xn.buildBitArray(r),f=To(o).parseInformation(),d=r[0].getFinderPattern().getResultPoints(),m=r[r.length-1].getFinderPattern().getResultPoints(),y=[d[0],d[1],m[0],m[1]];return new zt(f,null,null,y,Mt.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),o=r.getLeftChar(),u=r.getRightChar();if(u==null)return!1;let f=u.getChecksumPortion(),d=2;for(let y=1;y<this.pairs.size();++y){let v=this.pairs.get(y);f+=v.getLeftChar().getChecksumPortion(),d++;let C=v.getRightChar();C!=null&&(f+=C.getChecksumPortion(),d++)}return f%=211,211*(d-4)+f==o.getValue()}static getNextSecondBar(r,o){let u;return r.get(o)?(u=r.getNextUnset(o),u=r.getNextSet(u)):(u=r.getNextSet(o),u=r.getNextUnset(u)),u}retrieveNextPair(r,o,u){let f=o.length%2==0;this.startFromEven&&(f=!f);let d,m=!0,y=-1;do this.findNextPair(r,o,y),d=this.parseFoundFinderPattern(r,u,f),d==null?y=vt.getNextSecondBar(r,this.startEnd[0]):m=!1;while(m);let v=this.decodeDataCharacter(r,d,f,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new mt;let C;try{C=this.decodeDataCharacter(r,d,f,!1)}catch(R){C=null,this.verbose&&console.log(R)}return new Bi(v,C,d,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,o,u){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=r.getSize(),m;u>=0?m=u:this.isEmptyPair(o)?m=0:m=o[o.length-1].getFinderPattern().getStartEnd()[1];let y=o.length%2!=0;this.startFromEven&&(y=!y);let v=!1;for(;m<d&&(v=!r.get(m),!!v);)m++;let C=0,R=m;for(let O=m;O<d;O++)if(r.get(O)!=v)f[C]++;else{if(C==3){if(y&&vt.reverseCounters(f),vt.isFinderPattern(f)){this.startEnd[0]=R,this.startEnd[1]=O;return}y&&vt.reverseCounters(f),R+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,C--}else C++;f[C]=1,v=!v}throw new mt}static reverseCounters(r){let o=r.length;for(let u=0;u<o/2;++u){let f=r[u];r[u]=r[o-u-1],r[o-u-1]=f}}parseFoundFinderPattern(r,o,u){let f,d,m;if(u){let C=this.startEnd[0]-1;for(;C>=0&&!r.get(C);)C--;C++,f=this.startEnd[0]-C,d=C,m=this.startEnd[1]}else d=this.startEnd[0],m=r.getNextUnset(this.startEnd[1]+1),f=m-this.startEnd[1];let y=this.getDecodeFinderCounters();W.arraycopy(y,0,y,1,y.length-1),y[0]=f;let v;try{v=this.parseFinderValue(y,vt.FINDER_PATTERNS)}catch{return null}return new Gs(v,[d,m],d,m,o)}decodeDataCharacter(r,o,u,f){let d=this.getDataCharacterCounters();for(let $e=0;$e<d.length;$e++)d[$e]=0;if(f)vt.recordPatternInReverse(r,o.getStartEnd()[0],d);else{vt.recordPattern(r,o.getStartEnd()[1],d);for(let $e=0,ui=d.length-1;$e<ui;$e++,ui--){let ji=d[$e];d[$e]=d[ui],d[ui]=ji}}let m=17,y=we.sum(new Int32Array(d))/m,v=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(y-v)/v>.3)throw new mt;let C=this.getOddCounts(),R=this.getEvenCounts(),O=this.getOddRoundingErrors(),P=this.getEvenRoundingErrors();for(let $e=0;$e<d.length;$e++){let ui=1*d[$e]/y,ji=ui+.5;if(ji<1){if(ui<.3)throw new mt;ji=1}else if(ji>8){if(ui>8.7)throw new mt;ji=8}let Ks=$e/2;($e&1)==0?(C[Ks]=ji,O[Ks]=ui-ji):(R[Ks]=ji,P[Ks]=ui-ji)}this.adjustOddEvenCounts(m);let H=4*o.getValue()+(u?0:2)+(f?0:1)-1,Z=0,et=0;for(let $e=C.length-1;$e>=0;$e--){if(vt.isNotA1left(o,u,f)){let ui=vt.WEIGHTS[H][2*$e];et+=C[$e]*ui}Z+=C[$e]}let ut=0;for(let $e=R.length-1;$e>=0;$e--)if(vt.isNotA1left(o,u,f)){let ui=vt.WEIGHTS[H][2*$e+1];ut+=R[$e]*ui}let gt=et+ut;if((Z&1)!=0||Z>13||Z<4)throw new mt;let Nt=(13-Z)/2,Pt=vt.SYMBOL_WIDEST[Nt],Rt=9-Pt,ce=Me.getRSSvalue(C,Pt,!0),oe=Me.getRSSvalue(R,Rt,!1),Ci=vt.EVEN_TOTAL_SUBSET[Nt],cr=vt.GSUM[Nt],Fi=ce*Ci+oe+cr;return new Ki(Fi,gt)}static isNotA1left(r,o,u){return!(r.getValue()==0&&o&&u)}adjustOddEvenCounts(r){let o=we.sum(new Int32Array(this.getOddCounts())),u=we.sum(new Int32Array(this.getEvenCounts())),f=!1,d=!1;o>13?d=!0:o<4&&(f=!0);let m=!1,y=!1;u>13?y=!0:u<4&&(m=!0);let v=o+u-r,C=(o&1)==1,R=(u&1)==0;if(v==1)if(C){if(R)throw new mt;d=!0}else{if(!R)throw new mt;y=!0}else if(v==-1)if(C){if(R)throw new mt;f=!0}else{if(!R)throw new mt;m=!0}else if(v==0){if(C){if(!R)throw new mt;o<u?(f=!0,y=!0):(d=!0,m=!0)}else if(R)throw new mt}else throw new mt;if(f){if(d)throw new mt;vt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&vt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new mt;vt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&vt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}vt.SYMBOL_WIDEST=[7,5,4,3,1],vt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],vt.GSUM=[0,348,1388,2948,3988],vt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],vt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],vt.FINDER_PAT_A=0,vt.FINDER_PAT_B=1,vt.FINDER_PAT_C=2,vt.FINDER_PAT_D=3,vt.FINDER_PAT_E=4,vt.FINDER_PAT_F=5,vt.FINDER_PATTERN_SEQUENCES=[[vt.FINDER_PAT_A,vt.FINDER_PAT_A],[vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B],[vt.FINDER_PAT_A,vt.FINDER_PAT_C,vt.FINDER_PAT_B,vt.FINDER_PAT_D],[vt.FINDER_PAT_A,vt.FINDER_PAT_E,vt.FINDER_PAT_B,vt.FINDER_PAT_D,vt.FINDER_PAT_C],[vt.FINDER_PAT_A,vt.FINDER_PAT_E,vt.FINDER_PAT_B,vt.FINDER_PAT_D,vt.FINDER_PAT_D,vt.FINDER_PAT_F],[vt.FINDER_PAT_A,vt.FINDER_PAT_E,vt.FINDER_PAT_B,vt.FINDER_PAT_D,vt.FINDER_PAT_E,vt.FINDER_PAT_F,vt.FINDER_PAT_F],[vt.FINDER_PAT_A,vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B,vt.FINDER_PAT_C,vt.FINDER_PAT_C,vt.FINDER_PAT_D,vt.FINDER_PAT_D],[vt.FINDER_PAT_A,vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B,vt.FINDER_PAT_C,vt.FINDER_PAT_C,vt.FINDER_PAT_D,vt.FINDER_PAT_E,vt.FINDER_PAT_E],[vt.FINDER_PAT_A,vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B,vt.FINDER_PAT_C,vt.FINDER_PAT_C,vt.FINDER_PAT_D,vt.FINDER_PAT_E,vt.FINDER_PAT_F,vt.FINDER_PAT_F],[vt.FINDER_PAT_A,vt.FINDER_PAT_A,vt.FINDER_PAT_B,vt.FINDER_PAT_B,vt.FINDER_PAT_C,vt.FINDER_PAT_D,vt.FINDER_PAT_D,vt.FINDER_PAT_E,vt.FINDER_PAT_E,vt.FINDER_PAT_F,vt.FINDER_PAT_F]],vt.MAX_PAIRS=11;class Vr extends Ki{constructor(r,o,u){super(r,o),this.count=0,this.finderPattern=u}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class pe extends On{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,o,u){const f=this.decodePair(o,!1,r,u);pe.addOrTally(this.possibleLeftPairs,f),o.reverse();let d=this.decodePair(o,!0,r,u);pe.addOrTally(this.possibleRightPairs,d),o.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&pe.checkChecksum(m,y))return pe.constructResult(m,y)}throw new mt}static addOrTally(r,o){if(o==null)return;let u=!1;for(let f of r)if(f.getValue()===o.getValue()){f.incrementCount(),u=!0;break}u||r.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,o){let u=4537077*r.getValue()+o.getValue(),f=new String(u).toString(),d=new q;for(let C=13-f.length;C>0;C--)d.append("0");d.append(f);let m=0;for(let C=0;C<13;C++){let R=d.charAt(C).charCodeAt(0)-48;m+=(C&1)===0?3*R:R}m=10-m%10,m===10&&(m=0),d.append(m.toString());let y=r.getFinderPattern().getResultPoints(),v=o.getFinderPattern().getResultPoints();return new zt(d.toString(),null,0,[y[0],y[1],v[0],v[1]],Mt.RSS_14,new Date().getTime())}static checkChecksum(r,o){let u=(r.getChecksumPortion()+16*o.getChecksumPortion())%79,f=9*r.getFinderPattern().getValue()+o.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,u===f}decodePair(r,o,u,f){try{let d=this.findFinderPattern(r,o),m=this.parseFoundFinderPattern(r,u,o,d),y=f==null?null:f.get(Lt.NEED_RESULT_POINT_CALLBACK);if(y!=null){let R=(d[0]+d[1])/2;o&&(R=r.getSize()-1-R),y.foundPossibleResultPoint(new Ht(R,u))}let v=this.decodeDataCharacter(r,m,!0),C=this.decodeDataCharacter(r,m,!1);return new Vr(1597*v.getValue()+C.getValue(),v.getChecksumPortion()+4*C.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(r,o,u){let f=this.getDataCharacterCounters();for(let ut=0;ut<f.length;ut++)f[ut]=0;if(u)rn.recordPatternInReverse(r,o.getStartEnd()[0],f);else{rn.recordPattern(r,o.getStartEnd()[1]+1,f);for(let ut=0,gt=f.length-1;ut<gt;ut++,gt--){let Nt=f[ut];f[ut]=f[gt],f[gt]=Nt}}let d=u?16:15,m=we.sum(new Int32Array(f))/d,y=this.getOddCounts(),v=this.getEvenCounts(),C=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let ut=0;ut<f.length;ut++){let gt=f[ut]/m,Nt=Math.floor(gt+.5);Nt<1?Nt=1:Nt>8&&(Nt=8);let Pt=Math.floor(ut/2);(ut&1)===0?(y[Pt]=Nt,C[Pt]=gt-Nt):(v[Pt]=Nt,R[Pt]=gt-Nt)}this.adjustOddEvenCounts(u,d);let O=0,P=0;for(let ut=y.length-1;ut>=0;ut--)P*=9,P+=y[ut],O+=y[ut];let H=0,Z=0;for(let ut=v.length-1;ut>=0;ut--)H*=9,H+=v[ut],Z+=v[ut];let et=P+3*H;if(u){if((O&1)!==0||O>12||O<4)throw new mt;let ut=(12-O)/2,gt=pe.OUTSIDE_ODD_WIDEST[ut],Nt=9-gt,Pt=Me.getRSSvalue(y,gt,!1),Rt=Me.getRSSvalue(v,Nt,!0),ce=pe.OUTSIDE_EVEN_TOTAL_SUBSET[ut],oe=pe.OUTSIDE_GSUM[ut];return new Ki(Pt*ce+Rt+oe,et)}else{if((Z&1)!==0||Z>10||Z<4)throw new mt;let ut=(10-Z)/2,gt=pe.INSIDE_ODD_WIDEST[ut],Nt=9-gt,Pt=Me.getRSSvalue(y,gt,!0),Rt=Me.getRSSvalue(v,Nt,!1),ce=pe.INSIDE_ODD_TOTAL_SUBSET[ut],oe=pe.INSIDE_GSUM[ut];return new Ki(Rt*ce+Pt+oe,et)}}findFinderPattern(r,o){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=r.getSize(),d=!1,m=0;for(;m<f&&(d=!r.get(m),o!==d);)m++;let y=0,v=m;for(let C=m;C<f;C++)if(r.get(C)!==d)u[y]++;else{if(y===3){if(On.isFinderPattern(u))return[v,C];v+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,y--}else y++;u[y]=1,d=!d}throw new mt}parseFoundFinderPattern(r,o,u,f){let d=r.get(f[0]),m=f[0]-1;for(;m>=0&&d!==r.get(m);)m--;m++;const y=f[0]-m,v=this.getDecodeFinderCounters(),C=new Int32Array(v.length);W.arraycopy(v,0,C,1,v.length-1),C[0]=y;const R=this.parseFinderValue(C,pe.FINDER_PATTERNS);let O=m,P=f[1];return u&&(O=r.getSize()-1-O,P=r.getSize()-1-P),new Gs(R,[m,f[1]],O,P,o)}adjustOddEvenCounts(r,o){let u=we.sum(new Int32Array(this.getOddCounts())),f=we.sum(new Int32Array(this.getEvenCounts())),d=!1,m=!1,y=!1,v=!1;r?(u>12?m=!0:u<4&&(d=!0),f>12?v=!0:f<4&&(y=!0)):(u>11?m=!0:u<5&&(d=!0),f>10?v=!0:f<4&&(y=!0));let C=u+f-o,R=(u&1)===(r?1:0),O=(f&1)===1;if(C===1)if(R){if(O)throw new mt;m=!0}else{if(!O)throw new mt;v=!0}else if(C===-1)if(R){if(O)throw new mt;d=!0}else{if(!O)throw new mt;y=!0}else if(C===0){if(R){if(!O)throw new mt;u<f?(d=!0,v=!0):(m=!0,y=!0)}else if(O)throw new mt}else throw new mt;if(d){if(m)throw new mt;On.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&On.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(v)throw new mt;On.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&On.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}pe.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],pe.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],pe.OUTSIDE_GSUM=[0,161,961,2015,2715],pe.INSIDE_GSUM=[0,336,1036,1516],pe.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],pe.INSIDE_ODD_WIDEST=[2,4,6,8],pe.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class rr extends rn{constructor(r,o){super(),this.readers=[],this.verbose=o===!0;const u=r?r.get(Lt.POSSIBLE_FORMATS):null,f=r&&r.get(Lt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;u?((u.includes(Mt.EAN_13)||u.includes(Mt.UPC_A)||u.includes(Mt.EAN_8)||u.includes(Mt.UPC_E))&&this.readers.push(new Pr(r)),u.includes(Mt.CODE_39)&&this.readers.push(new Ye(f)),u.includes(Mt.CODE_128)&&this.readers.push(new Vt),u.includes(Mt.ITF)&&this.readers.push(new Le),u.includes(Mt.RSS_14)&&this.readers.push(new pe),u.includes(Mt.RSS_EXPANDED)&&this.readers.push(new vt(this.verbose))):(this.readers.push(new Pr(r)),this.readers.push(new Ye),this.readers.push(new Pr(r)),this.readers.push(new Vt),this.readers.push(new Le),this.readers.push(new pe),this.readers.push(new vt(this.verbose)))}decodeRow(r,o,u){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(r,o,u)}catch{}throw new mt}reset(){this.readers.forEach(r=>r.reset())}}class $o extends Ot{constructor(r=500,o){super(new rr(o),r,o)}}class ye{constructor(r,o,u){this.ecCodewords=r,this.ecBlocks=[o],u&&this.ecBlocks.push(u)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class _e{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class de{constructor(r,o,u,f,d,m){this.versionNumber=r,this.symbolSizeRows=o,this.symbolSizeColumns=u,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=d,this.ecBlocks=m;let y=0;const v=m.getECCodewords(),C=m.getECBlocks();for(let R of C)y+=R.getCount()*(R.getDataCodewords()+v);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,o){if((r&1)!==0||(o&1)!==0)throw new z;for(let u of de.VERSIONS)if(u.symbolSizeRows===r&&u.symbolSizeColumns===o)return u;throw new z}toString(){return""+this.versionNumber}static buildVersions(){return[new de(1,10,10,8,8,new ye(5,new _e(1,3))),new de(2,12,12,10,10,new ye(7,new _e(1,5))),new de(3,14,14,12,12,new ye(10,new _e(1,8))),new de(4,16,16,14,14,new ye(12,new _e(1,12))),new de(5,18,18,16,16,new ye(14,new _e(1,18))),new de(6,20,20,18,18,new ye(18,new _e(1,22))),new de(7,22,22,20,20,new ye(20,new _e(1,30))),new de(8,24,24,22,22,new ye(24,new _e(1,36))),new de(9,26,26,24,24,new ye(28,new _e(1,44))),new de(10,32,32,14,14,new ye(36,new _e(1,62))),new de(11,36,36,16,16,new ye(42,new _e(1,86))),new de(12,40,40,18,18,new ye(48,new _e(1,114))),new de(13,44,44,20,20,new ye(56,new _e(1,144))),new de(14,48,48,22,22,new ye(68,new _e(1,174))),new de(15,52,52,24,24,new ye(42,new _e(2,102))),new de(16,64,64,14,14,new ye(56,new _e(2,140))),new de(17,72,72,16,16,new ye(36,new _e(4,92))),new de(18,80,80,18,18,new ye(48,new _e(4,114))),new de(19,88,88,20,20,new ye(56,new _e(4,144))),new de(20,96,96,22,22,new ye(68,new _e(4,174))),new de(21,104,104,24,24,new ye(56,new _e(6,136))),new de(22,120,120,18,18,new ye(68,new _e(6,175))),new de(23,132,132,20,20,new ye(62,new _e(8,163))),new de(24,144,144,22,22,new ye(62,new _e(8,156),new _e(2,155))),new de(25,8,18,6,16,new ye(7,new _e(1,5))),new de(26,8,32,6,14,new ye(11,new _e(1,10))),new de(27,12,26,10,24,new ye(14,new _e(1,16))),new de(28,12,36,10,16,new ye(18,new _e(1,22))),new de(29,16,36,14,16,new ye(24,new _e(1,32))),new de(30,16,48,14,22,new ye(28,new _e(1,49)))]}}de.VERSIONS=de.buildVersions();class Ys{constructor(r){const o=r.getHeight();if(o<8||o>144||(o&1)!==0)throw new z;this.version=Ys.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new Ee(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const o=r.getHeight(),u=r.getWidth();return de.getVersionForDimensions(o,u)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let o=0,u=4,f=0;const d=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let y=!1,v=!1,C=!1,R=!1;do if(u===d&&f===0&&!y)r[o++]=this.readCorner1(d,m)&255,u-=2,f+=2,y=!0;else if(u===d-2&&f===0&&(m&3)!==0&&!v)r[o++]=this.readCorner2(d,m)&255,u-=2,f+=2,v=!0;else if(u===d+4&&f===2&&(m&7)===0&&!C)r[o++]=this.readCorner3(d,m)&255,u-=2,f+=2,C=!0;else if(u===d-2&&f===0&&(m&7)===4&&!R)r[o++]=this.readCorner4(d,m)&255,u-=2,f+=2,R=!0;else{do u<d&&f>=0&&!this.readMappingMatrix.get(f,u)&&(r[o++]=this.readUtah(u,f,d,m)&255),u-=2,f+=2;while(u>=0&&f<m);u+=1,f+=3;do u>=0&&f<m&&!this.readMappingMatrix.get(f,u)&&(r[o++]=this.readUtah(u,f,d,m)&255),u+=2,f-=2;while(u<d&&f>=0);u+=3,f+=1}while(u<d||f<m);if(o!==this.version.getTotalCodewords())throw new z;return r}readModule(r,o,u,f){return r<0&&(r+=u,o+=4-(u+4&7)),o<0&&(o+=f,r+=4-(f+4&7)),this.readMappingMatrix.set(o,r),this.mappingBitMatrix.get(o,r)}readUtah(r,o,u,f){let d=0;return this.readModule(r-2,o-2,u,f)&&(d|=1),d<<=1,this.readModule(r-2,o-1,u,f)&&(d|=1),d<<=1,this.readModule(r-1,o-2,u,f)&&(d|=1),d<<=1,this.readModule(r-1,o-1,u,f)&&(d|=1),d<<=1,this.readModule(r-1,o,u,f)&&(d|=1),d<<=1,this.readModule(r,o-2,u,f)&&(d|=1),d<<=1,this.readModule(r,o-1,u,f)&&(d|=1),d<<=1,this.readModule(r,o,u,f)&&(d|=1),d}readCorner1(r,o){let u=0;return this.readModule(r-1,0,r,o)&&(u|=1),u<<=1,this.readModule(r-1,1,r,o)&&(u|=1),u<<=1,this.readModule(r-1,2,r,o)&&(u|=1),u<<=1,this.readModule(0,o-2,r,o)&&(u|=1),u<<=1,this.readModule(0,o-1,r,o)&&(u|=1),u<<=1,this.readModule(1,o-1,r,o)&&(u|=1),u<<=1,this.readModule(2,o-1,r,o)&&(u|=1),u<<=1,this.readModule(3,o-1,r,o)&&(u|=1),u}readCorner2(r,o){let u=0;return this.readModule(r-3,0,r,o)&&(u|=1),u<<=1,this.readModule(r-2,0,r,o)&&(u|=1),u<<=1,this.readModule(r-1,0,r,o)&&(u|=1),u<<=1,this.readModule(0,o-4,r,o)&&(u|=1),u<<=1,this.readModule(0,o-3,r,o)&&(u|=1),u<<=1,this.readModule(0,o-2,r,o)&&(u|=1),u<<=1,this.readModule(0,o-1,r,o)&&(u|=1),u<<=1,this.readModule(1,o-1,r,o)&&(u|=1),u}readCorner3(r,o){let u=0;return this.readModule(r-1,0,r,o)&&(u|=1),u<<=1,this.readModule(r-1,o-1,r,o)&&(u|=1),u<<=1,this.readModule(0,o-3,r,o)&&(u|=1),u<<=1,this.readModule(0,o-2,r,o)&&(u|=1),u<<=1,this.readModule(0,o-1,r,o)&&(u|=1),u<<=1,this.readModule(1,o-3,r,o)&&(u|=1),u<<=1,this.readModule(1,o-2,r,o)&&(u|=1),u<<=1,this.readModule(1,o-1,r,o)&&(u|=1),u}readCorner4(r,o){let u=0;return this.readModule(r-3,0,r,o)&&(u|=1),u<<=1,this.readModule(r-2,0,r,o)&&(u|=1),u<<=1,this.readModule(r-1,0,r,o)&&(u|=1),u<<=1,this.readModule(0,o-2,r,o)&&(u|=1),u<<=1,this.readModule(0,o-1,r,o)&&(u|=1),u<<=1,this.readModule(1,o-1,r,o)&&(u|=1),u<<=1,this.readModule(2,o-1,r,o)&&(u|=1),u<<=1,this.readModule(3,o-1,r,o)&&(u|=1),u}extractDataRegion(r){const o=this.version.getSymbolSizeRows(),u=this.version.getSymbolSizeColumns();if(r.getHeight()!==o)throw new I("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),m=o/f|0,y=u/d|0,v=m*f,C=y*d,R=new Ee(C,v);for(let O=0;O<m;++O){const P=O*f;for(let H=0;H<y;++H){const Z=H*d;for(let et=0;et<f;++et){const ut=O*(f+2)+1+et,gt=P+et;for(let Nt=0;Nt<d;++Nt){const Pt=H*(d+2)+1+Nt;if(r.get(Pt,ut)){const Rt=Z+Nt;R.set(Rt,gt)}}}}}return R}}class ys{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o){const u=o.getECBlocks();let f=0;const d=u.getECBlocks();for(let et of d)f+=et.getCount();const m=new Array(f);let y=0;for(let et of d)for(let ut=0;ut<et.getCount();ut++){const gt=et.getDataCodewords(),Nt=u.getECCodewords()+gt;m[y++]=new ys(gt,new Uint8Array(Nt))}const C=m[0].codewords.length-u.getECCodewords(),R=C-1;let O=0;for(let et=0;et<R;et++)for(let ut=0;ut<y;ut++)m[ut].codewords[et]=r[O++];const P=o.getVersionNumber()===24,H=P?8:y;for(let et=0;et<H;et++)m[et].codewords[C-1]=r[O++];const Z=m[0].codewords.length;for(let et=C;et<Z;et++)for(let ut=0;ut<y;ut++){const gt=P?(ut+8)%y:ut,Nt=P&&gt>7?et-1:et;m[gt].codewords[Nt]=r[O++]}if(O!==r.length)throw new I;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class oi{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new I(""+r);let o=0,u=this.bitOffset,f=this.byteOffset;const d=this.bytes;if(u>0){const m=8-u,y=r<m?r:m,v=m-y,C=255>>8-y<<v;o=(d[f]&C)>>v,r-=y,u+=y,u===8&&(u=0,f++)}if(r>0){for(;r>=8;)o=o<<8|d[f]&255,f++,r-=8;if(r>0){const m=8-r,y=255>>m<<m;o=o<<r|(d[f]&y)>>m,u+=r}}return this.bitOffset=u,this.byteOffset=f,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var En;(function(M){M[M.PAD_ENCODE=0]="PAD_ENCODE",M[M.ASCII_ENCODE=1]="ASCII_ENCODE",M[M.C40_ENCODE=2]="C40_ENCODE",M[M.TEXT_ENCODE=3]="TEXT_ENCODE",M[M.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",M[M.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",M[M.BASE256_ENCODE=6]="BASE256_ENCODE"})(En||(En={}));class kr{static decode(r){const o=new oi(r),u=new q,f=new q,d=new Array;let m=En.ASCII_ENCODE;do if(m===En.ASCII_ENCODE)m=this.decodeAsciiSegment(o,u,f);else{switch(m){case En.C40_ENCODE:this.decodeC40Segment(o,u);break;case En.TEXT_ENCODE:this.decodeTextSegment(o,u);break;case En.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,u);break;case En.EDIFACT_ENCODE:this.decodeEdifactSegment(o,u);break;case En.BASE256_ENCODE:this.decodeBase256Segment(o,u,d);break;default:throw new z}m=En.ASCII_ENCODE}while(m!==En.PAD_ENCODE&&o.available()>0);return f.length()>0&&u.append(f.toString()),new Oi(r,u.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(r,o,u){let f=!1;do{let d=r.readBits(8);if(d===0)throw new z;if(d<=128)return f&&(d+=128),o.append(String.fromCharCode(d-1)),En.ASCII_ENCODE;if(d===129)return En.PAD_ENCODE;if(d<=229){const m=d-130;m<10&&o.append("0"),o.append(""+m)}else switch(d){case 230:return En.C40_ENCODE;case 231:return En.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:o.append("[)>05"),u.insert(0,"");break;case 237:o.append("[)>06"),u.insert(0,"");break;case 238:return En.ANSIX12_ENCODE;case 239:return En.TEXT_ENCODE;case 240:return En.EDIFACT_ENCODE;case 241:break;default:if(d!==254||r.available()!==0)throw new z;break}}while(r.available()>0);return En.ASCII_ENCODE}static decodeC40Segment(r,o){let u=!1;const f=[];let d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),f);for(let y=0;y<3;y++){const v=f[y];switch(d){case 0:if(v<3)d=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[v];u?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):o.append(C)}else throw new z;break;case 1:u?(o.append(String.fromCharCode(v+128)),u=!1):o.append(String.fromCharCode(v)),d=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[v];u?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):o.append(C)}else switch(v){case 27:o.append("");break;case 30:u=!0;break;default:throw new z}d=0;break;case 3:u?(o.append(String.fromCharCode(v+224)),u=!1):o.append(String.fromCharCode(v+96)),d=0;break;default:throw new z}}}while(r.available()>0)}static decodeTextSegment(r,o){let u=!1,f=[],d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),f);for(let y=0;y<3;y++){const v=f[y];switch(d){case 0:if(v<3)d=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[v];u?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):o.append(C)}else throw new z;break;case 1:u?(o.append(String.fromCharCode(v+128)),u=!1):o.append(String.fromCharCode(v)),d=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[v];u?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):o.append(C)}else switch(v){case 27:o.append("");break;case 30:u=!0;break;default:throw new z}d=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[v];u?(o.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):o.append(C),d=0}else throw new z;break;default:throw new z}}}while(r.available()>0)}static decodeAnsiX12Segment(r,o){const u=[];do{if(r.available()===8)return;const f=r.readBits(8);if(f===254)return;this.parseTwoBytes(f,r.readBits(8),u);for(let d=0;d<3;d++){const m=u[d];switch(m){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(m<14)o.append(String.fromCharCode(m+44));else if(m<40)o.append(String.fromCharCode(m+51));else throw new z;break}}}while(r.available()>0)}static parseTwoBytes(r,o,u){let f=(r<<8)+o-1,d=Math.floor(f/1600);u[0]=d,f-=d*1600,d=Math.floor(f/40),u[1]=d,u[2]=f-d*40}static decodeEdifactSegment(r,o){do{if(r.available()<=16)return;for(let u=0;u<4;u++){let f=r.readBits(6);if(f===31){const d=8-r.getBitOffset();d!==8&&r.readBits(d);return}(f&32)===0&&(f|=64),o.append(String.fromCharCode(f))}}while(r.available()>0)}static decodeBase256Segment(r,o,u){let f=1+r.getByteOffset();const d=this.unrandomize255State(r.readBits(8),f++);let m;if(d===0?m=r.available()/8|0:d<250?m=d:m=250*(d-249)+this.unrandomize255State(r.readBits(8),f++),m<0)throw new z;const y=new Uint8Array(m);for(let v=0;v<m;v++){if(r.available()<8)throw new z;y[v]=this.unrandomize255State(r.readBits(8),f++)}u.push(y);try{o.append(tt.decode(y,K.ISO88591))}catch(v){throw new Li("Platform does not support required encoding: "+v.message)}}static unrandomize255State(r,o){const u=149*o%255+1,f=r-u;return f>=0?f:f+256}}kr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],kr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],kr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],kr.TEXT_SHIFT2_SET_CHARS=kr.C40_SHIFT2_SET_CHARS,kr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ra{constructor(){this.rsDecoder=new ps(Ae.DATA_MATRIX_FIELD_256)}decode(r){const o=new Ys(r),u=o.getVersion(),f=o.readCodewords(),d=ys.getDataBlocks(f,u);let m=0;for(let C of d)m+=C.getNumDataCodewords();const y=new Uint8Array(m),v=d.length;for(let C=0;C<v;C++){const R=d[C],O=R.getCodewords(),P=R.getNumDataCodewords();this.correctErrors(O,P);for(let H=0;H<P;H++)y[H*v+C]=O[H]}return kr.decode(y)}correctErrors(r,o){const u=new Int32Array(r);try{this.rsDecoder.decode(u,r.length-o)}catch{throw new k}for(let f=0;f<o;f++)r[f]=u[f]}}class un{constructor(r){this.image=r,this.rectangleDetector=new Qi(this.image)}detect(){const r=this.rectangleDetector.detect();let o=this.detectSolid1(r);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new mt;o=this.shiftToModuleCenter(o);const u=o[0],f=o[1],d=o[2],m=o[3];let y=this.transitionsBetween(u,m)+1,v=this.transitionsBetween(d,m)+1;(y&1)===1&&(y+=1),(v&1)===1&&(v+=1),4*y<7*v&&4*v<7*y&&(y=v=Math.max(y,v));let C=un.sampleGrid(this.image,u,f,d,m,y,v);return new Ta(C,[u,f,d,m])}static shiftPoint(r,o,u){let f=(o.getX()-r.getX())/(u+1),d=(o.getY()-r.getY())/(u+1);return new Ht(r.getX()+f,r.getY()+d)}static moveAway(r,o,u){let f=r.getX(),d=r.getY();return f<o?f-=1:f+=1,d<u?d-=1:d+=1,new Ht(f,d)}detectSolid1(r){let o=r[0],u=r[1],f=r[3],d=r[2],m=this.transitionsBetween(o,u),y=this.transitionsBetween(u,f),v=this.transitionsBetween(f,d),C=this.transitionsBetween(d,o),R=m,O=[d,o,u,f];return R>y&&(R=y,O[0]=o,O[1]=u,O[2]=f,O[3]=d),R>v&&(R=v,O[0]=u,O[1]=f,O[2]=d,O[3]=o),R>C&&(O[0]=f,O[1]=d,O[2]=o,O[3]=u),O}detectSolid2(r){let o=r[0],u=r[1],f=r[2],d=r[3],m=this.transitionsBetween(o,d),y=un.shiftPoint(u,f,(m+1)*4),v=un.shiftPoint(f,u,(m+1)*4),C=this.transitionsBetween(y,o),R=this.transitionsBetween(v,d);return C<R?(r[0]=o,r[1]=u,r[2]=f,r[3]=d):(r[0]=u,r[1]=f,r[2]=d,r[3]=o),r}correctTopRight(r){let o=r[0],u=r[1],f=r[2],d=r[3],m=this.transitionsBetween(o,d),y=this.transitionsBetween(u,d),v=un.shiftPoint(o,u,(y+1)*4),C=un.shiftPoint(f,u,(m+1)*4);m=this.transitionsBetween(v,d),y=this.transitionsBetween(C,d);let R=new Ht(d.getX()+(f.getX()-u.getX())/(m+1),d.getY()+(f.getY()-u.getY())/(m+1)),O=new Ht(d.getX()+(o.getX()-u.getX())/(y+1),d.getY()+(o.getY()-u.getY())/(y+1));if(!this.isValid(R))return this.isValid(O)?O:null;if(!this.isValid(O))return R;let P=this.transitionsBetween(v,R)+this.transitionsBetween(C,R),H=this.transitionsBetween(v,O)+this.transitionsBetween(C,O);return P>H?R:O}shiftToModuleCenter(r){let o=r[0],u=r[1],f=r[2],d=r[3],m=this.transitionsBetween(o,d)+1,y=this.transitionsBetween(f,d)+1,v=un.shiftPoint(o,u,y*4),C=un.shiftPoint(f,u,m*4);m=this.transitionsBetween(v,d)+1,y=this.transitionsBetween(C,d)+1,(m&1)===1&&(m+=1),(y&1)===1&&(y+=1);let R=(o.getX()+u.getX()+f.getX()+d.getX())/4,O=(o.getY()+u.getY()+f.getY()+d.getY())/4;o=un.moveAway(o,R,O),u=un.moveAway(u,R,O),f=un.moveAway(f,R,O),d=un.moveAway(d,R,O);let P,H;return v=un.shiftPoint(o,u,y*4),v=un.shiftPoint(v,d,m*4),P=un.shiftPoint(u,o,y*4),P=un.shiftPoint(P,f,m*4),C=un.shiftPoint(f,d,y*4),C=un.shiftPoint(C,u,m*4),H=un.shiftPoint(d,f,y*4),H=un.shiftPoint(H,o,m*4),[v,P,C,H]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,o,u,f,d,m,y){return Un.getInstance().sampleGrid(r,m,y,.5,.5,m-.5,.5,m-.5,y-.5,.5,y-.5,o.getX(),o.getY(),d.getX(),d.getY(),f.getX(),f.getY(),u.getX(),u.getY())}transitionsBetween(r,o){let u=Math.trunc(r.getX()),f=Math.trunc(r.getY()),d=Math.trunc(o.getX()),m=Math.trunc(o.getY()),y=Math.abs(m-f)>Math.abs(d-u);if(y){let et=u;u=f,f=et,et=d,d=m,m=et}let v=Math.abs(d-u),C=Math.abs(m-f),R=-v/2,O=f<m?1:-1,P=u<d?1:-1,H=0,Z=this.image.get(y?f:u,y?u:f);for(let et=u,ut=f;et!==d;et+=P){let gt=this.image.get(y?ut:et,y?et:ut);if(gt!==Z&&(H++,Z=gt),R+=C,R>0){if(ut===m)break;ut+=O,R-=v}}return H}}class Vi{constructor(){this.decoder=new Ra}decode(r,o=null){let u,f;if(o!=null&&o.has(Lt.PURE_BARCODE)){const C=Vi.extractPureBits(r.getBlackMatrix());u=this.decoder.decode(C),f=Vi.NO_POINTS}else{const C=new un(r.getBlackMatrix()).detect();u=this.decoder.decode(C.getBits()),f=C.getPoints()}const d=u.getRawBytes(),m=new zt(u.getText(),d,8*d.length,f,Mt.DATA_MATRIX,W.currentTimeMillis()),y=u.getByteSegments();y!=null&&m.putMetadata(ae.BYTE_SEGMENTS,y);const v=u.getECLevel();return v!=null&&m.putMetadata(ae.ERROR_CORRECTION_LEVEL,v),m}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),u=r.getBottomRightOnBit();if(o==null||u==null)throw new mt;const f=this.moduleSize(o,r);let d=o[1];const m=u[1];let y=o[0];const C=(u[0]-y+1)/f,R=(m-d+1)/f;if(C<=0||R<=0)throw new mt;const O=f/2;d+=O,y+=O;const P=new Ee(C,R);for(let H=0;H<R;H++){const Z=d+H*f;for(let et=0;et<C;et++)r.get(y+et*f,Z)&&P.set(et,H)}return P}static moduleSize(r,o){const u=o.getWidth();let f=r[0];const d=r[1];for(;f<u&&o.get(f,d);)f++;if(f===u)throw new mt;const m=f-r[0];if(m===0)throw new mt;return m}}Vi.NO_POINTS=[];class gu extends Ot{constructor(r=500){super(new Vi,r)}}var cn;(function(M){M[M.L=0]="L",M[M.M=1]="M",M[M.Q=2]="Q",M[M.H=3]="H"})(cn||(cn={}));class xe{constructor(r,o,u){this.value=r,this.stringValue=o,this.bits=u,xe.FOR_BITS.set(u,this),xe.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return xe.L;case"M":return xe.M;case"Q":return xe.Q;case"H":return xe.H;default:throw new S(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof xe))return!1;const o=r;return this.value===o.value}static forBits(r){if(r<0||r>=xe.FOR_BITS.size)throw new I;return xe.FOR_BITS.get(r)}}xe.FOR_BITS=new Map,xe.FOR_VALUE=new Map,xe.L=new xe(cn.L,"L",1),xe.M=new xe(cn.M,"M",0),xe.Q=new xe(cn.Q,"Q",3),xe.H=new xe(cn.H,"H",2);class Sn{constructor(r){this.errorCorrectionLevel=xe.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,o){return nt.bitCount(r^o)}static decodeFormatInformation(r,o){const u=Sn.doDecodeFormatInformation(r,o);return u!==null?u:Sn.doDecodeFormatInformation(r^Sn.FORMAT_INFO_MASK_QR,o^Sn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,o){let u=Number.MAX_SAFE_INTEGER,f=0;for(const d of Sn.FORMAT_INFO_DECODE_LOOKUP){const m=d[0];if(m===r||m===o)return new Sn(d[1]);let y=Sn.numBitsDiffering(r,m);y<u&&(f=d[1],u=y),r!==o&&(y=Sn.numBitsDiffering(o,m),y<u&&(f=d[1],u=y))}return u<=3?new Sn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Sn))return!1;const o=r;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Sn.FORMAT_INFO_MASK_QR=21522,Sn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class at{constructor(r,...o){this.ecCodewordsPerBlock=r,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const o=this.ecBlocks;for(const u of o)r+=u.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class j{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ut{constructor(r,o,...u){this.versionNumber=r,this.alignmentPatternCenters=o,this.ecBlocks=u;let f=0;const d=u[0].getECCodewordsPerBlock(),m=u[0].getECBlocks();for(const y of m)f+=y.getCount()*(y.getDataCodewords()+d);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new z;try{return this.getVersionForNumber((r-17)/4)}catch{throw new z}}static getVersionForNumber(r){if(r<1||r>40)throw new I;return Ut.VERSIONS[r-1]}static decodeVersionInformation(r){let o=Number.MAX_SAFE_INTEGER,u=0;for(let f=0;f<Ut.VERSION_DECODE_INFO.length;f++){const d=Ut.VERSION_DECODE_INFO[f];if(d===r)return Ut.getVersionForNumber(f+7);const m=Sn.numBitsDiffering(r,d);m<o&&(u=f+7,o=m)}return o<=3?Ut.getVersionForNumber(u):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),o=new Ee(r);o.setRegion(0,0,9,9),o.setRegion(r-8,0,8,9),o.setRegion(0,r-8,9,8);const u=this.alignmentPatternCenters.length;for(let f=0;f<u;f++){const d=this.alignmentPatternCenters[f]-2;for(let m=0;m<u;m++)f===0&&(m===0||m===u-1)||f===u-1&&m===0||o.setRegion(this.alignmentPatternCenters[m]-2,d,5,5)}return o.setRegion(6,9,1,r-17),o.setRegion(9,6,r-17,1),this.versionNumber>6&&(o.setRegion(r-11,0,3,6),o.setRegion(0,r-11,6,3)),o}toString(){return""+this.versionNumber}}Ut.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ut.VERSIONS=[new Ut(1,new Int32Array(0),new at(7,new j(1,19)),new at(10,new j(1,16)),new at(13,new j(1,13)),new at(17,new j(1,9))),new Ut(2,Int32Array.from([6,18]),new at(10,new j(1,34)),new at(16,new j(1,28)),new at(22,new j(1,22)),new at(28,new j(1,16))),new Ut(3,Int32Array.from([6,22]),new at(15,new j(1,55)),new at(26,new j(1,44)),new at(18,new j(2,17)),new at(22,new j(2,13))),new Ut(4,Int32Array.from([6,26]),new at(20,new j(1,80)),new at(18,new j(2,32)),new at(26,new j(2,24)),new at(16,new j(4,9))),new Ut(5,Int32Array.from([6,30]),new at(26,new j(1,108)),new at(24,new j(2,43)),new at(18,new j(2,15),new j(2,16)),new at(22,new j(2,11),new j(2,12))),new Ut(6,Int32Array.from([6,34]),new at(18,new j(2,68)),new at(16,new j(4,27)),new at(24,new j(4,19)),new at(28,new j(4,15))),new Ut(7,Int32Array.from([6,22,38]),new at(20,new j(2,78)),new at(18,new j(4,31)),new at(18,new j(2,14),new j(4,15)),new at(26,new j(4,13),new j(1,14))),new Ut(8,Int32Array.from([6,24,42]),new at(24,new j(2,97)),new at(22,new j(2,38),new j(2,39)),new at(22,new j(4,18),new j(2,19)),new at(26,new j(4,14),new j(2,15))),new Ut(9,Int32Array.from([6,26,46]),new at(30,new j(2,116)),new at(22,new j(3,36),new j(2,37)),new at(20,new j(4,16),new j(4,17)),new at(24,new j(4,12),new j(4,13))),new Ut(10,Int32Array.from([6,28,50]),new at(18,new j(2,68),new j(2,69)),new at(26,new j(4,43),new j(1,44)),new at(24,new j(6,19),new j(2,20)),new at(28,new j(6,15),new j(2,16))),new Ut(11,Int32Array.from([6,30,54]),new at(20,new j(4,81)),new at(30,new j(1,50),new j(4,51)),new at(28,new j(4,22),new j(4,23)),new at(24,new j(3,12),new j(8,13))),new Ut(12,Int32Array.from([6,32,58]),new at(24,new j(2,92),new j(2,93)),new at(22,new j(6,36),new j(2,37)),new at(26,new j(4,20),new j(6,21)),new at(28,new j(7,14),new j(4,15))),new Ut(13,Int32Array.from([6,34,62]),new at(26,new j(4,107)),new at(22,new j(8,37),new j(1,38)),new at(24,new j(8,20),new j(4,21)),new at(22,new j(12,11),new j(4,12))),new Ut(14,Int32Array.from([6,26,46,66]),new at(30,new j(3,115),new j(1,116)),new at(24,new j(4,40),new j(5,41)),new at(20,new j(11,16),new j(5,17)),new at(24,new j(11,12),new j(5,13))),new Ut(15,Int32Array.from([6,26,48,70]),new at(22,new j(5,87),new j(1,88)),new at(24,new j(5,41),new j(5,42)),new at(30,new j(5,24),new j(7,25)),new at(24,new j(11,12),new j(7,13))),new Ut(16,Int32Array.from([6,26,50,74]),new at(24,new j(5,98),new j(1,99)),new at(28,new j(7,45),new j(3,46)),new at(24,new j(15,19),new j(2,20)),new at(30,new j(3,15),new j(13,16))),new Ut(17,Int32Array.from([6,30,54,78]),new at(28,new j(1,107),new j(5,108)),new at(28,new j(10,46),new j(1,47)),new at(28,new j(1,22),new j(15,23)),new at(28,new j(2,14),new j(17,15))),new Ut(18,Int32Array.from([6,30,56,82]),new at(30,new j(5,120),new j(1,121)),new at(26,new j(9,43),new j(4,44)),new at(28,new j(17,22),new j(1,23)),new at(28,new j(2,14),new j(19,15))),new Ut(19,Int32Array.from([6,30,58,86]),new at(28,new j(3,113),new j(4,114)),new at(26,new j(3,44),new j(11,45)),new at(26,new j(17,21),new j(4,22)),new at(26,new j(9,13),new j(16,14))),new Ut(20,Int32Array.from([6,34,62,90]),new at(28,new j(3,107),new j(5,108)),new at(26,new j(3,41),new j(13,42)),new at(30,new j(15,24),new j(5,25)),new at(28,new j(15,15),new j(10,16))),new Ut(21,Int32Array.from([6,28,50,72,94]),new at(28,new j(4,116),new j(4,117)),new at(26,new j(17,42)),new at(28,new j(17,22),new j(6,23)),new at(30,new j(19,16),new j(6,17))),new Ut(22,Int32Array.from([6,26,50,74,98]),new at(28,new j(2,111),new j(7,112)),new at(28,new j(17,46)),new at(30,new j(7,24),new j(16,25)),new at(24,new j(34,13))),new Ut(23,Int32Array.from([6,30,54,78,102]),new at(30,new j(4,121),new j(5,122)),new at(28,new j(4,47),new j(14,48)),new at(30,new j(11,24),new j(14,25)),new at(30,new j(16,15),new j(14,16))),new Ut(24,Int32Array.from([6,28,54,80,106]),new at(30,new j(6,117),new j(4,118)),new at(28,new j(6,45),new j(14,46)),new at(30,new j(11,24),new j(16,25)),new at(30,new j(30,16),new j(2,17))),new Ut(25,Int32Array.from([6,32,58,84,110]),new at(26,new j(8,106),new j(4,107)),new at(28,new j(8,47),new j(13,48)),new at(30,new j(7,24),new j(22,25)),new at(30,new j(22,15),new j(13,16))),new Ut(26,Int32Array.from([6,30,58,86,114]),new at(28,new j(10,114),new j(2,115)),new at(28,new j(19,46),new j(4,47)),new at(28,new j(28,22),new j(6,23)),new at(30,new j(33,16),new j(4,17))),new Ut(27,Int32Array.from([6,34,62,90,118]),new at(30,new j(8,122),new j(4,123)),new at(28,new j(22,45),new j(3,46)),new at(30,new j(8,23),new j(26,24)),new at(30,new j(12,15),new j(28,16))),new Ut(28,Int32Array.from([6,26,50,74,98,122]),new at(30,new j(3,117),new j(10,118)),new at(28,new j(3,45),new j(23,46)),new at(30,new j(4,24),new j(31,25)),new at(30,new j(11,15),new j(31,16))),new Ut(29,Int32Array.from([6,30,54,78,102,126]),new at(30,new j(7,116),new j(7,117)),new at(28,new j(21,45),new j(7,46)),new at(30,new j(1,23),new j(37,24)),new at(30,new j(19,15),new j(26,16))),new Ut(30,Int32Array.from([6,26,52,78,104,130]),new at(30,new j(5,115),new j(10,116)),new at(28,new j(19,47),new j(10,48)),new at(30,new j(15,24),new j(25,25)),new at(30,new j(23,15),new j(25,16))),new Ut(31,Int32Array.from([6,30,56,82,108,134]),new at(30,new j(13,115),new j(3,116)),new at(28,new j(2,46),new j(29,47)),new at(30,new j(42,24),new j(1,25)),new at(30,new j(23,15),new j(28,16))),new Ut(32,Int32Array.from([6,34,60,86,112,138]),new at(30,new j(17,115)),new at(28,new j(10,46),new j(23,47)),new at(30,new j(10,24),new j(35,25)),new at(30,new j(19,15),new j(35,16))),new Ut(33,Int32Array.from([6,30,58,86,114,142]),new at(30,new j(17,115),new j(1,116)),new at(28,new j(14,46),new j(21,47)),new at(30,new j(29,24),new j(19,25)),new at(30,new j(11,15),new j(46,16))),new Ut(34,Int32Array.from([6,34,62,90,118,146]),new at(30,new j(13,115),new j(6,116)),new at(28,new j(14,46),new j(23,47)),new at(30,new j(44,24),new j(7,25)),new at(30,new j(59,16),new j(1,17))),new Ut(35,Int32Array.from([6,30,54,78,102,126,150]),new at(30,new j(12,121),new j(7,122)),new at(28,new j(12,47),new j(26,48)),new at(30,new j(39,24),new j(14,25)),new at(30,new j(22,15),new j(41,16))),new Ut(36,Int32Array.from([6,24,50,76,102,128,154]),new at(30,new j(6,121),new j(14,122)),new at(28,new j(6,47),new j(34,48)),new at(30,new j(46,24),new j(10,25)),new at(30,new j(2,15),new j(64,16))),new Ut(37,Int32Array.from([6,28,54,80,106,132,158]),new at(30,new j(17,122),new j(4,123)),new at(28,new j(29,46),new j(14,47)),new at(30,new j(49,24),new j(10,25)),new at(30,new j(24,15),new j(46,16))),new Ut(38,Int32Array.from([6,32,58,84,110,136,162]),new at(30,new j(4,122),new j(18,123)),new at(28,new j(13,46),new j(32,47)),new at(30,new j(48,24),new j(14,25)),new at(30,new j(42,15),new j(32,16))),new Ut(39,Int32Array.from([6,26,54,82,110,138,166]),new at(30,new j(20,117),new j(4,118)),new at(28,new j(40,47),new j(7,48)),new at(30,new j(43,24),new j(22,25)),new at(30,new j(10,15),new j(67,16))),new Ut(40,Int32Array.from([6,30,58,86,114,142,170]),new at(30,new j(19,118),new j(6,119)),new at(28,new j(18,47),new j(31,48)),new at(30,new j(34,24),new j(34,25)),new at(30,new j(20,15),new j(61,16)))];var mn;(function(M){M[M.DATA_MASK_000=0]="DATA_MASK_000",M[M.DATA_MASK_001=1]="DATA_MASK_001",M[M.DATA_MASK_010=2]="DATA_MASK_010",M[M.DATA_MASK_011=3]="DATA_MASK_011",M[M.DATA_MASK_100=4]="DATA_MASK_100",M[M.DATA_MASK_101=5]="DATA_MASK_101",M[M.DATA_MASK_110=6]="DATA_MASK_110",M[M.DATA_MASK_111=7]="DATA_MASK_111"})(mn||(mn={}));class An{constructor(r,o){this.value=r,this.isMasked=o}unmaskBitMatrix(r,o){for(let u=0;u<o;u++)for(let f=0;f<o;f++)this.isMasked(u,f)&&r.flip(f,u)}}An.values=new Map([[mn.DATA_MASK_000,new An(mn.DATA_MASK_000,(M,r)=>(M+r&1)===0)],[mn.DATA_MASK_001,new An(mn.DATA_MASK_001,(M,r)=>(M&1)===0)],[mn.DATA_MASK_010,new An(mn.DATA_MASK_010,(M,r)=>r%3===0)],[mn.DATA_MASK_011,new An(mn.DATA_MASK_011,(M,r)=>(M+r)%3===0)],[mn.DATA_MASK_100,new An(mn.DATA_MASK_100,(M,r)=>(Math.floor(M/2)+Math.floor(r/3)&1)===0)],[mn.DATA_MASK_101,new An(mn.DATA_MASK_101,(M,r)=>M*r%6===0)],[mn.DATA_MASK_110,new An(mn.DATA_MASK_110,(M,r)=>M*r%6<3)],[mn.DATA_MASK_111,new An(mn.DATA_MASK_111,(M,r)=>(M+r+M*r%3&1)===0)]]);class qs{constructor(r){const o=r.getHeight();if(o<21||(o&3)!==1)throw new z;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let d=0;d<6;d++)r=this.copyBit(d,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let d=5;d>=0;d--)r=this.copyBit(8,d,r);const o=this.bitMatrix.getHeight();let u=0;const f=o-7;for(let d=o-1;d>=f;d--)u=this.copyBit(8,d,u);for(let d=o-8;d<o;d++)u=this.copyBit(d,8,u);if(this.parsedFormatInfo=Sn.decodeFormatInformation(r,u),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new z}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),o=Math.floor((r-17)/4);if(o<=6)return Ut.getVersionForNumber(o);let u=0;const f=r-11;for(let m=5;m>=0;m--)for(let y=r-9;y>=f;y--)u=this.copyBit(y,m,u);let d=Ut.decodeVersionInformation(u);if(d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;u=0;for(let m=5;m>=0;m--)for(let y=r-9;y>=f;y--)u=this.copyBit(m,y,u);if(d=Ut.decodeVersionInformation(u),d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;throw new z}copyBit(r,o,u){return(this.isMirror?this.bitMatrix.get(o,r):this.bitMatrix.get(r,o))?u<<1|1:u<<1}readCodewords(){const r=this.readFormatInformation(),o=this.readVersion(),u=An.values.get(r.getDataMask()),f=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,f);const d=o.buildFunctionPattern();let m=!0;const y=new Uint8Array(o.getTotalCodewords());let v=0,C=0,R=0;for(let O=f-1;O>0;O-=2){O===6&&O--;for(let P=0;P<f;P++){const H=m?f-1-P:P;for(let Z=0;Z<2;Z++)d.get(O-Z,H)||(R++,C<<=1,this.bitMatrix.get(O-Z,H)&&(C|=1),R===8&&(y[v++]=C,R=0,C=0))}m=!m}if(v!==o.getTotalCodewords())throw new z;return y}remask(){if(this.parsedFormatInfo===null)return;const r=An.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,o)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let o=0,u=r.getWidth();o<u;o++)for(let f=o+1,d=r.getHeight();f<d;f++)r.get(o,f)!==r.get(f,o)&&(r.flip(f,o),r.flip(o,f))}}class Da{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o,u){if(r.length!==o.getTotalCodewords())throw new I;const f=o.getECBlocksForLevel(u);let d=0;const m=f.getECBlocks();for(const Z of m)d+=Z.getCount();const y=new Array(d);let v=0;for(const Z of m)for(let et=0;et<Z.getCount();et++){const ut=Z.getDataCodewords(),gt=f.getECCodewordsPerBlock()+ut;y[v++]=new Da(ut,new Uint8Array(gt))}const C=y[0].codewords.length;let R=y.length-1;for(;R>=0&&y[R].codewords.length!==C;)R--;R++;const O=C-f.getECCodewordsPerBlock();let P=0;for(let Z=0;Z<O;Z++)for(let et=0;et<v;et++)y[et].codewords[Z]=r[P++];for(let Z=R;Z<v;Z++)y[Z].codewords[O]=r[P++];const H=y[0].codewords.length;for(let Z=O;Z<H;Z++)for(let et=0;et<v;et++){const ut=et<R?Z:Z+1;y[et].codewords[ut]=r[P++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var mi;(function(M){M[M.TERMINATOR=0]="TERMINATOR",M[M.NUMERIC=1]="NUMERIC",M[M.ALPHANUMERIC=2]="ALPHANUMERIC",M[M.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",M[M.BYTE=4]="BYTE",M[M.ECI=5]="ECI",M[M.KANJI=6]="KANJI",M[M.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",M[M.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",M[M.HANZI=9]="HANZI"})(mi||(mi={}));class Xt{constructor(r,o,u,f){this.value=r,this.stringValue=o,this.characterCountBitsForVersions=u,this.bits=f,Xt.FOR_BITS.set(f,this),Xt.FOR_VALUE.set(r,this)}static forBits(r){const o=Xt.FOR_BITS.get(r);if(o===void 0)throw new I;return o}getCharacterCountBits(r){const o=r.getVersionNumber();let u;return o<=9?u=0:o<=26?u=1:u=2,this.characterCountBitsForVersions[u]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Xt))return!1;const o=r;return this.value===o.value}toString(){return this.stringValue}}Xt.FOR_BITS=new Map,Xt.FOR_VALUE=new Map,Xt.TERMINATOR=new Xt(mi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Xt.NUMERIC=new Xt(mi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Xt.ALPHANUMERIC=new Xt(mi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Xt.STRUCTURED_APPEND=new Xt(mi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Xt.BYTE=new Xt(mi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Xt.ECI=new Xt(mi.ECI,"ECI",Int32Array.from([0,0,0]),7),Xt.KANJI=new Xt(mi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Xt.FNC1_FIRST_POSITION=new Xt(mi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Xt.FNC1_SECOND_POSITION=new Xt(mi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Xt.HANZI=new Xt(mi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class hn{static decode(r,o,u,f){const d=new oi(r);let m=new q;const y=new Array;let v=-1,C=-1;try{let R=null,O=!1,P;do{if(d.available()<4)P=Xt.TERMINATOR;else{const H=d.readBits(4);P=Xt.forBits(H)}switch(P){case Xt.TERMINATOR:break;case Xt.FNC1_FIRST_POSITION:case Xt.FNC1_SECOND_POSITION:O=!0;break;case Xt.STRUCTURED_APPEND:if(d.available()<16)throw new z;v=d.readBits(8),C=d.readBits(8);break;case Xt.ECI:const H=hn.parseECIValue(d);if(R=V.getCharacterSetECIByValue(H),R===null)throw new z;break;case Xt.HANZI:const Z=d.readBits(4),et=d.readBits(P.getCharacterCountBits(o));Z===hn.GB2312_SUBSET&&hn.decodeHanziSegment(d,m,et);break;default:const ut=d.readBits(P.getCharacterCountBits(o));switch(P){case Xt.NUMERIC:hn.decodeNumericSegment(d,m,ut);break;case Xt.ALPHANUMERIC:hn.decodeAlphanumericSegment(d,m,ut,O);break;case Xt.BYTE:hn.decodeByteSegment(d,m,ut,R,y,f);break;case Xt.KANJI:hn.decodeKanjiSegment(d,m,ut);break;default:throw new z}break}}while(P!==Xt.TERMINATOR)}catch{throw new z}return new Oi(r,m.toString(),y.length===0?null:y,u===null?null:u.toString(),v,C)}static decodeHanziSegment(r,o,u){if(u*13>r.available())throw new z;const f=new Uint8Array(2*u);let d=0;for(;u>0;){const m=r.readBits(13);let y=m/96<<8&4294967295|m%96;y<959?y+=41377:y+=42657,f[d]=y>>8&255,f[d+1]=y&255,d+=2,u--}try{o.append(tt.decode(f,K.GB2312))}catch(m){throw new z(m)}}static decodeKanjiSegment(r,o,u){if(u*13>r.available())throw new z;const f=new Uint8Array(2*u);let d=0;for(;u>0;){const m=r.readBits(13);let y=m/192<<8&4294967295|m%192;y<7936?y+=33088:y+=49472,f[d]=y>>8,f[d+1]=y,d+=2,u--}try{o.append(tt.decode(f,K.SHIFT_JIS))}catch(m){throw new z(m)}}static decodeByteSegment(r,o,u,f,d,m){if(8*u>r.available())throw new z;const y=new Uint8Array(u);for(let C=0;C<u;C++)y[C]=r.readBits(8);let v;f===null?v=K.guessEncoding(y,m):v=f.getName();try{o.append(tt.decode(y,v))}catch(C){throw new z(C)}d.push(y)}static toAlphaNumericChar(r){if(r>=hn.ALPHANUMERIC_CHARS.length)throw new z;return hn.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,o,u,f){const d=o.length();for(;u>1;){if(r.available()<11)throw new z;const m=r.readBits(11);o.append(hn.toAlphaNumericChar(Math.floor(m/45))),o.append(hn.toAlphaNumericChar(m%45)),u-=2}if(u===1){if(r.available()<6)throw new z;o.append(hn.toAlphaNumericChar(r.readBits(6)))}if(f)for(let m=d;m<o.length();m++)o.charAt(m)==="%"&&(m<o.length()-1&&o.charAt(m+1)==="%"?o.deleteCharAt(m+1):o.setCharAt(m,""))}static decodeNumericSegment(r,o,u){for(;u>=3;){if(r.available()<10)throw new z;const f=r.readBits(10);if(f>=1e3)throw new z;o.append(hn.toAlphaNumericChar(Math.floor(f/100))),o.append(hn.toAlphaNumericChar(Math.floor(f/10)%10)),o.append(hn.toAlphaNumericChar(f%10)),u-=3}if(u===2){if(r.available()<7)throw new z;const f=r.readBits(7);if(f>=100)throw new z;o.append(hn.toAlphaNumericChar(Math.floor(f/10))),o.append(hn.toAlphaNumericChar(f%10))}else if(u===1){if(r.available()<4)throw new z;const f=r.readBits(4);if(f>=10)throw new z;o.append(hn.toAlphaNumericChar(f))}}static parseECIValue(r){const o=r.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const u=r.readBits(8);return(o&63)<<8&4294967295|u}if((o&224)===192){const u=r.readBits(16);return(o&31)<<16&4294967295|u}throw new z}}hn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",hn.GB2312_SUBSET=1;class tl{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const o=r[0];r[0]=r[2],r[2]=o}}class Na{constructor(){this.rsDecoder=new ps(Ae.QR_CODE_FIELD_256)}decodeBooleanArray(r,o){return this.decodeBitMatrix(Ee.parseFromBooleanArray(r),o)}decodeBitMatrix(r,o){const u=new qs(r);let f=null;try{return this.decodeBitMatrixParser(u,o)}catch(d){f=d}try{u.remask(),u.setMirror(!0),u.readVersion(),u.readFormatInformation(),u.mirror();const d=this.decodeBitMatrixParser(u,o);return d.setOther(new tl(!0)),d}catch(d){throw f!==null?f:d}}decodeBitMatrixParser(r,o){const u=r.readVersion(),f=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),m=Da.getDataBlocks(d,u,f);let y=0;for(const R of m)y+=R.getNumDataCodewords();const v=new Uint8Array(y);let C=0;for(const R of m){const O=R.getCodewords(),P=R.getNumDataCodewords();this.correctErrors(O,P);for(let H=0;H<P;H++)v[C++]=O[H]}return hn.decode(v,u,f,o)}correctErrors(r,o){const u=new Int32Array(r);try{this.rsDecoder.decode(u,r.length-o)}catch{throw new k}for(let f=0;f<o;f++)r[f]=u[f]}}class pr extends Ht{constructor(r,o,u){super(r,o),this.estimatedModuleSize=u}aboutEquals(r,o,u){if(Math.abs(o-this.getY())<=r&&Math.abs(u-this.getX())<=r){const f=Math.abs(r-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(r,o,u){const f=(this.getX()+o)/2,d=(this.getY()+r)/2,m=(this.estimatedModuleSize+u)/2;return new pr(f,d,m)}}class vi{constructor(r,o,u,f,d,m,y){this.image=r,this.startX=o,this.startY=u,this.width=f,this.height=d,this.moduleSize=m,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,o=this.height,u=this.width,f=r+u,d=this.startY+o/2,m=new Int32Array(3),y=this.image;for(let v=0;v<o;v++){const C=d+((v&1)===0?Math.floor((v+1)/2):-Math.floor((v+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=r;for(;R<f&&!y.get(R,C);)R++;let O=0;for(;R<f;){if(y.get(R,C))if(O===1)m[1]++;else if(O===2){if(this.foundPatternCross(m)){const P=this.handlePossibleCenter(m,C,R);if(P!==null)return P}m[0]=m[2],m[1]=1,m[2]=0,O=1}else m[++O]++;else O===1&&O++,m[O]++;R++}if(this.foundPatternCross(m)){const P=this.handlePossibleCenter(m,C,f);if(P!==null)return P}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new mt}static centerFromEnd(r,o){return o-r[2]-r[1]/2}foundPatternCross(r){const o=this.moduleSize,u=o/2;for(let f=0;f<3;f++)if(Math.abs(o-r[f])>=u)return!1;return!0}crossCheckVertical(r,o,u,f){const d=this.image,m=d.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let v=r;for(;v>=0&&d.get(o,v)&&y[1]<=u;)y[1]++,v--;if(v<0||y[1]>u)return NaN;for(;v>=0&&!d.get(o,v)&&y[0]<=u;)y[0]++,v--;if(y[0]>u)return NaN;for(v=r+1;v<m&&d.get(o,v)&&y[1]<=u;)y[1]++,v++;if(v===m||y[1]>u)return NaN;for(;v<m&&!d.get(o,v)&&y[2]<=u;)y[2]++,v++;if(y[2]>u)return NaN;const C=y[0]+y[1]+y[2];return 5*Math.abs(C-f)>=2*f?NaN:this.foundPatternCross(y)?vi.centerFromEnd(y,v):NaN}handlePossibleCenter(r,o,u){const f=r[0]+r[1]+r[2],d=vi.centerFromEnd(r,u),m=this.crossCheckVertical(o,d,2*r[1],f);if(!isNaN(m)){const y=(r[0]+r[1]+r[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(y,m,d))return C.combineEstimate(m,d,y);const v=new pr(d,m,y);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class yr extends Ht{constructor(r,o,u,f){super(r,o),this.estimatedModuleSize=u,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,o,u){if(Math.abs(o-this.getY())<=r&&Math.abs(u-this.getX())<=r){const f=Math.abs(r-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(r,o,u){const f=this.count+1,d=(this.count*this.getX()+o)/f,m=(this.count*this.getY()+r)/f,y=(this.count*this.estimatedModuleSize+u)/f;return new yr(d,m,y,f)}}class ss{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class bn{constructor(r,o){this.image=r,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const o=r!=null&&r.get(Lt.TRY_HARDER)!==void 0,u=r!=null&&r.get(Lt.PURE_BARCODE)!==void 0,f=this.image,d=f.getHeight(),m=f.getWidth();let y=Math.floor(3*d/(4*bn.MAX_MODULES));(y<bn.MIN_SKIP||o)&&(y=bn.MIN_SKIP);let v=!1;const C=new Int32Array(5);for(let O=y-1;O<d&&!v;O+=y){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let P=0;for(let H=0;H<m;H++)if(f.get(H,O))(P&1)===1&&P++,C[P]++;else if((P&1)===0)if(P===4)if(bn.foundPatternCross(C)){if(this.handlePossibleCenter(C,O,H,u)===!0)if(y=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const et=this.findRowSkip();et>C[2]&&(O+=et-C[2]-y,H=m-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,P=3;continue}P=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,P=3;else C[++P]++;else C[P]++;bn.foundPatternCross(C)&&this.handlePossibleCenter(C,O,m,u)===!0&&(y=C[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Ht.orderBestPatterns(R),new ss(R)}static centerFromEnd(r,o){return o-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let o=0;for(let d=0;d<5;d++){const m=r[d];if(m===0)return!1;o+=m}if(o<7)return!1;const u=o/7,f=u/2;return Math.abs(u-r[0])<f&&Math.abs(u-r[1])<f&&Math.abs(3*u-r[2])<3*f&&Math.abs(u-r[3])<f&&Math.abs(u-r[4])<f}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,o,u,f){const d=this.getCrossCheckStateCount();let m=0;const y=this.image;for(;r>=m&&o>=m&&y.get(o-m,r-m);)d[2]++,m++;if(r<m||o<m)return!1;for(;r>=m&&o>=m&&!y.get(o-m,r-m)&&d[1]<=u;)d[1]++,m++;if(r<m||o<m||d[1]>u)return!1;for(;r>=m&&o>=m&&y.get(o-m,r-m)&&d[0]<=u;)d[0]++,m++;if(d[0]>u)return!1;const v=y.getHeight(),C=y.getWidth();for(m=1;r+m<v&&o+m<C&&y.get(o+m,r+m);)d[2]++,m++;if(r+m>=v||o+m>=C)return!1;for(;r+m<v&&o+m<C&&!y.get(o+m,r+m)&&d[3]<u;)d[3]++,m++;if(r+m>=v||o+m>=C||d[3]>=u)return!1;for(;r+m<v&&o+m<C&&y.get(o+m,r+m)&&d[4]<u;)d[4]++,m++;if(d[4]>=u)return!1;const R=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(R-f)<2*f&&bn.foundPatternCross(d)}crossCheckVertical(r,o,u,f){const d=this.image,m=d.getHeight(),y=this.getCrossCheckStateCount();let v=r;for(;v>=0&&d.get(o,v);)y[2]++,v--;if(v<0)return NaN;for(;v>=0&&!d.get(o,v)&&y[1]<=u;)y[1]++,v--;if(v<0||y[1]>u)return NaN;for(;v>=0&&d.get(o,v)&&y[0]<=u;)y[0]++,v--;if(y[0]>u)return NaN;for(v=r+1;v<m&&d.get(o,v);)y[2]++,v++;if(v===m)return NaN;for(;v<m&&!d.get(o,v)&&y[3]<u;)y[3]++,v++;if(v===m||y[3]>=u)return NaN;for(;v<m&&d.get(o,v)&&y[4]<u;)y[4]++,v++;if(y[4]>=u)return NaN;const C=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(C-f)>=2*f?NaN:bn.foundPatternCross(y)?bn.centerFromEnd(y,v):NaN}crossCheckHorizontal(r,o,u,f){const d=this.image,m=d.getWidth(),y=this.getCrossCheckStateCount();let v=r;for(;v>=0&&d.get(v,o);)y[2]++,v--;if(v<0)return NaN;for(;v>=0&&!d.get(v,o)&&y[1]<=u;)y[1]++,v--;if(v<0||y[1]>u)return NaN;for(;v>=0&&d.get(v,o)&&y[0]<=u;)y[0]++,v--;if(y[0]>u)return NaN;for(v=r+1;v<m&&d.get(v,o);)y[2]++,v++;if(v===m)return NaN;for(;v<m&&!d.get(v,o)&&y[3]<u;)y[3]++,v++;if(v===m||y[3]>=u)return NaN;for(;v<m&&d.get(v,o)&&y[4]<u;)y[4]++,v++;if(y[4]>=u)return NaN;const C=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(C-f)>=f?NaN:bn.foundPatternCross(y)?bn.centerFromEnd(y,v):NaN}handlePossibleCenter(r,o,u,f){const d=r[0]+r[1]+r[2]+r[3]+r[4];let m=bn.centerFromEnd(r,u),y=this.crossCheckVertical(o,Math.floor(m),r[2],d);if(!isNaN(y)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(y),r[2],d),!isNaN(m)&&(!f||this.crossCheckDiagonal(Math.floor(y),Math.floor(m),r[2],d)))){const v=d/7;let C=!1;const R=this.possibleCenters;for(let O=0,P=R.length;O<P;O++){const H=R[O];if(H.aboutEquals(v,y,m)){R[O]=H.combineEstimate(y,m,v),C=!0;break}}if(!C){const O=new yr(m,y,v);R.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const u of this.possibleCenters)if(u.getCount()>=bn.CENTER_QUORUM)if(o==null)o=u;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-u.getX())-Math.abs(o.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,o=0;const u=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=bn.CENTER_QUORUM&&(r++,o+=m.getEstimatedModuleSize());if(r<3)return!1;const f=o/u;let d=0;for(const m of this.possibleCenters)d+=Math.abs(m.getEstimatedModuleSize()-f);return d<=.05*o}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new mt;const o=this.possibleCenters;let u;if(r>3){let f=0,d=0;for(const v of this.possibleCenters){const C=v.getEstimatedModuleSize();f+=C,d+=C*C}u=f/r;let m=Math.sqrt(d/r-u*u);o.sort((v,C)=>{const R=Math.abs(C.getEstimatedModuleSize()-u),O=Math.abs(v.getEstimatedModuleSize()-u);return R<O?-1:R>O?1:0});const y=Math.max(.2*u,m);for(let v=0;v<o.length&&o.length>3;v++){const C=o[v];Math.abs(C.getEstimatedModuleSize()-u)>y&&(o.splice(v,1),v--)}}if(o.length>3){let f=0;for(const d of o)f+=d.getEstimatedModuleSize();u=f/o.length,o.sort((d,m)=>{if(m.getCount()===d.getCount()){const y=Math.abs(m.getEstimatedModuleSize()-u),v=Math.abs(d.getEstimatedModuleSize()-u);return y<v?1:y>v?-1:0}else return m.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}bn.CENTER_QUORUM=2,bn.MIN_SKIP=3,bn.MAX_MODULES=57;class ki{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(Lt.NEED_RESULT_POINT_CALLBACK);const u=new bn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(u)}processFinderPatternInfo(r){const o=r.getTopLeft(),u=r.getTopRight(),f=r.getBottomLeft(),d=this.calculateModuleSize(o,u,f);if(d<1)throw new mt("No pattern found in proccess finder.");const m=ki.computeDimension(o,u,f,d),y=Ut.getProvisionalVersionForDimension(m),v=y.getDimensionForVersion()-7;let C=null;if(y.getAlignmentPatternCenters().length>0){const H=u.getX()-o.getX()+f.getX(),Z=u.getY()-o.getY()+f.getY(),et=1-3/v,ut=Math.floor(o.getX()+et*(H-o.getX())),gt=Math.floor(o.getY()+et*(Z-o.getY()));for(let Nt=4;Nt<=16;Nt<<=1)try{C=this.findAlignmentInRegion(d,ut,gt,Nt);break}catch(Pt){if(!(Pt instanceof mt))throw Pt}}const R=ki.createTransform(o,u,f,C,m),O=ki.sampleGrid(this.image,R,m);let P;return C===null?P=[f,o,u]:P=[f,o,u,C],new Ta(O,P)}static createTransform(r,o,u,f,d){const m=d-3.5;let y,v,C,R;return f!==null?(y=f.getX(),v=f.getY(),C=m-3,R=C):(y=o.getX()-r.getX()+u.getX(),v=o.getY()-r.getY()+u.getY(),C=m,R=m),Oe.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,C,R,3.5,m,r.getX(),r.getY(),o.getX(),o.getY(),y,v,u.getX(),u.getY())}static sampleGrid(r,o,u){return Un.getInstance().sampleGridWithTransform(r,u,u,o)}static computeDimension(r,o,u,f){const d=we.round(Ht.distance(r,o)/f),m=we.round(Ht.distance(r,u)/f);let y=Math.floor((d+m)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new mt("Dimensions could be not found.")}return y}calculateModuleSize(r,o,u){return(this.calculateModuleSizeOneWay(r,o)+this.calculateModuleSizeOneWay(r,u))/2}calculateModuleSizeOneWay(r,o){const u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(o.getX()),Math.floor(o.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(u)?f/7:isNaN(f)?u/7:(u+f)/14}sizeOfBlackWhiteBlackRunBothWays(r,o,u,f){let d=this.sizeOfBlackWhiteBlackRun(r,o,u,f),m=1,y=r-(u-r);y<0?(m=r/(r-y),y=0):y>=this.image.getWidth()&&(m=(this.image.getWidth()-1-r)/(y-r),y=this.image.getWidth()-1);let v=Math.floor(o-(f-o)*m);return m=1,v<0?(m=o/(o-v),v=0):v>=this.image.getHeight()&&(m=(this.image.getHeight()-1-o)/(v-o),v=this.image.getHeight()-1),y=Math.floor(r+(y-r)*m),d+=this.sizeOfBlackWhiteBlackRun(r,o,y,v),d-1}sizeOfBlackWhiteBlackRun(r,o,u,f){const d=Math.abs(f-o)>Math.abs(u-r);if(d){let H=r;r=o,o=H,H=u,u=f,f=H}const m=Math.abs(u-r),y=Math.abs(f-o);let v=-m/2;const C=r<u?1:-1,R=o<f?1:-1;let O=0;const P=u+C;for(let H=r,Z=o;H!==P;H+=C){const et=d?Z:H,ut=d?H:Z;if(O===1===this.image.get(et,ut)){if(O===2)return we.distance(H,Z,r,o);O++}if(v+=y,v>0){if(Z===f)break;Z+=R,v-=m}}return O===2?we.distance(u+C,f,r,o):NaN}findAlignmentInRegion(r,o,u,f){const d=Math.floor(f*r),m=Math.max(0,o-d),y=Math.min(this.image.getWidth()-1,o+d);if(y-m<r*3)throw new mt("Alignment top exceeds estimated module size.");const v=Math.max(0,u-d),C=Math.min(this.image.getHeight()-1,u+d);if(C-v<r*3)throw new mt("Alignment bottom exceeds estimated module size.");return new vi(this.image,m,v,y-m,C-v,r,this.resultPointCallback).find()}}class xr{constructor(){this.decoder=new Na}getDecoder(){return this.decoder}decode(r,o){let u,f;if(o!=null&&o.get(Lt.PURE_BARCODE)!==void 0){const v=xr.extractPureBits(r.getBlackMatrix());u=this.decoder.decodeBitMatrix(v,o),f=xr.NO_POINTS}else{const v=new ki(r.getBlackMatrix()).detect(o);u=this.decoder.decodeBitMatrix(v.getBits(),o),f=v.getPoints()}u.getOther()instanceof tl&&u.getOther().applyMirroredCorrection(f);const d=new zt(u.getText(),u.getRawBytes(),void 0,f,Mt.QR_CODE,void 0),m=u.getByteSegments();m!==null&&d.putMetadata(ae.BYTE_SEGMENTS,m);const y=u.getECLevel();return y!==null&&d.putMetadata(ae.ERROR_CORRECTION_LEVEL,y),u.hasStructuredAppend()&&(d.putMetadata(ae.STRUCTURED_APPEND_SEQUENCE,u.getStructuredAppendSequenceNumber()),d.putMetadata(ae.STRUCTURED_APPEND_PARITY,u.getStructuredAppendParity())),d}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),u=r.getBottomRightOnBit();if(o===null||u===null)throw new mt;const f=this.moduleSize(o,r);let d=o[1],m=u[1],y=o[0],v=u[0];if(y>=v||d>=m)throw new mt;if(m-d!==v-y&&(v=y+(m-d),v>=r.getWidth()))throw new mt;const C=Math.round((v-y+1)/f),R=Math.round((m-d+1)/f);if(C<=0||R<=0)throw new mt;if(R!==C)throw new mt;const O=Math.floor(f/2);d+=O,y+=O;const P=y+Math.floor((C-1)*f)-v;if(P>0){if(P>O)throw new mt;y-=P}const H=d+Math.floor((R-1)*f)-m;if(H>0){if(H>O)throw new mt;d-=H}const Z=new Ee(C,R);for(let et=0;et<R;et++){const ut=d+Math.floor(et*f);for(let gt=0;gt<C;gt++)r.get(y+Math.floor(gt*f),ut)&&Z.set(gt,et)}return Z}static moduleSize(r,o){const u=o.getHeight(),f=o.getWidth();let d=r[0],m=r[1],y=!0,v=0;for(;d<f&&m<u;){if(y!==o.get(d,m)){if(++v===5)break;y=!y}d++,m++}if(d===f||m===u)throw new mt;return(d-r[0])/7}}xr.NO_POINTS=new Array;class Wt{PDF417Common(){}static getBitCountSum(r){return we.sum(r)}static toIntArray(r){if(r==null||!r.length)return Wt.EMPTY_INT_ARRAY;const o=new Int32Array(r.length);let u=0;for(const f of r)o[u++]=f;return o}static getCodeword(r){const o=rt.binarySearch(Wt.SYMBOL_TABLE,r&262143);return o<0?-1:(Wt.CODEWORD_TABLE[o]-1)%Wt.NUMBER_OF_CODEWORDS}}Wt.NUMBER_OF_CODEWORDS=929,Wt.MAX_CODEWORDS_IN_BARCODE=Wt.NUMBER_OF_CODEWORDS-1,Wt.MIN_ROWS_IN_BARCODE=3,Wt.MAX_ROWS_IN_BARCODE=90,Wt.MODULES_IN_CODEWORD=17,Wt.MODULES_IN_STOP_PATTERN=18,Wt.BARS_IN_MODULE=8,Wt.EMPTY_INT_ARRAY=new Int32Array([]),Wt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Wt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Er{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Jt{static detectMultiple(r,o,u){let f=r.getBlackMatrix(),d=Jt.detect(u,f);return d.length||(f=f.clone(),f.rotate180(),d=Jt.detect(u,f)),new Er(f,d)}static detect(r,o){const u=new Array;let f=0,d=0,m=!1;for(;f<o.getHeight();){const y=Jt.findVertices(o,f,d);if(y[0]==null&&y[3]==null){if(!m)break;m=!1,d=0;for(const v of u)v[1]!=null&&(f=Math.trunc(Math.max(f,v[1].getY()))),v[3]!=null&&(f=Math.max(f,Math.trunc(v[3].getY())));f+=Jt.ROW_STEP;continue}if(m=!0,u.push(y),!r)break;y[2]!=null?(d=Math.trunc(y[2].getX()),f=Math.trunc(y[2].getY())):(d=Math.trunc(y[4].getX()),f=Math.trunc(y[4].getY()))}return u}static findVertices(r,o,u){const f=r.getHeight(),d=r.getWidth(),m=new Array(8);return Jt.copyToResult(m,Jt.findRowsWithPattern(r,f,d,o,u,Jt.START_PATTERN),Jt.INDEXES_START_PATTERN),m[4]!=null&&(u=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY())),Jt.copyToResult(m,Jt.findRowsWithPattern(r,f,d,o,u,Jt.STOP_PATTERN),Jt.INDEXES_STOP_PATTERN),m}static copyToResult(r,o,u){for(let f=0;f<u.length;f++)r[u[f]]=o[f]}static findRowsWithPattern(r,o,u,f,d,m){const y=new Array(4);let v=!1;const C=new Int32Array(m.length);for(;f<o;f+=Jt.ROW_STEP){let O=Jt.findGuardPattern(r,d,f,u,!1,m,C);if(O!=null){for(;f>0;){const P=Jt.findGuardPattern(r,d,--f,u,!1,m,C);if(P!=null)O=P;else{f++;break}}y[0]=new Ht(O[0],f),y[1]=new Ht(O[1],f),v=!0;break}}let R=f+1;if(v){let O=0,P=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;R<o;R++){const H=Jt.findGuardPattern(r,P[0],R,u,!1,m,C);if(H!=null&&Math.abs(P[0]-H[0])<Jt.MAX_PATTERN_DRIFT&&Math.abs(P[1]-H[1])<Jt.MAX_PATTERN_DRIFT)P=H,O=0;else{if(O>Jt.SKIPPED_ROW_COUNT_MAX)break;O++}}R-=O+1,y[2]=new Ht(P[0],R),y[3]=new Ht(P[1],R)}return R-f<Jt.BARCODE_MIN_HEIGHT&&rt.fill(y,null),y}static findGuardPattern(r,o,u,f,d,m,y){rt.fillWithin(y,0,y.length,0);let v=o,C=0;for(;r.get(v,u)&&v>0&&C++<Jt.MAX_PIXEL_DRIFT;)v--;let R=v,O=0,P=m.length;for(let H=d;R<f;R++)if(r.get(R,u)!==H)y[O]++;else{if(O===P-1){if(Jt.patternMatchVariance(y,m,Jt.MAX_INDIVIDUAL_VARIANCE)<Jt.MAX_AVG_VARIANCE)return new Int32Array([v,R]);v+=y[0]+y[1],W.arraycopy(y,2,y,0,O-1),y[O-1]=0,y[O]=0,O--}else O++;y[O]=1,H=!H}return O===P-1&&Jt.patternMatchVariance(y,m,Jt.MAX_INDIVIDUAL_VARIANCE)<Jt.MAX_AVG_VARIANCE?new Int32Array([v,R-1]):null}static patternMatchVariance(r,o,u){let f=r.length,d=0,m=0;for(let C=0;C<f;C++)d+=r[C],m+=o[C];if(d<m)return 1/0;let y=d/m;u*=y;let v=0;for(let C=0;C<f;C++){let R=r[C],O=o[C]*y,P=R>O?R-O:O-R;if(P>u)return 1/0;v+=P}return v/d}}Jt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Jt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Jt.MAX_AVG_VARIANCE=.42,Jt.MAX_INDIVIDUAL_VARIANCE=.8,Jt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Jt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Jt.MAX_PIXEL_DRIFT=3,Jt.MAX_PATTERN_DRIFT=5,Jt.SKIPPED_ROW_COUNT_MAX=25,Jt.ROW_STEP=5,Jt.BARCODE_MIN_HEIGHT=10;class wn{constructor(r,o){if(o.length===0)throw new I;this.field=r;let u=o.length;if(u>1&&o[0]===0){let f=1;for(;f<u&&o[f]===0;)f++;f===u?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(u-f),W.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let f=0;for(let d of this.coefficients)f=this.field.add(f,d);return f}let o=this.coefficients[0],u=this.coefficients.length;for(let f=1;f<u;f++)o=this.field.add(this.field.multiply(r,o),this.coefficients[f]);return o}add(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,u=r.coefficients;if(o.length>u.length){let m=o;o=u,u=m}let f=new Int32Array(u.length),d=u.length-o.length;W.arraycopy(u,0,f,0,d);for(let m=d;m<u.length;m++)f[m]=this.field.add(o[m-d],u[m]);return new wn(this.field,f)}subtract(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof wn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new wn(this.field,new Int32Array([0]));let o=this.coefficients,u=o.length,f=r.coefficients,d=f.length,m=new Int32Array(u+d-1);for(let y=0;y<u;y++){let v=o[y];for(let C=0;C<d;C++)m[y+C]=this.field.add(m[y+C],this.field.multiply(v,f[C]))}return new wn(this.field,m)}negative(){let r=this.coefficients.length,o=new Int32Array(r);for(let u=0;u<r;u++)o[u]=this.field.subtract(0,this.coefficients[u]);return new wn(this.field,o)}multiplyScalar(r){if(r===0)return new wn(this.field,new Int32Array([0]));if(r===1)return this;let o=this.coefficients.length,u=new Int32Array(o);for(let f=0;f<o;f++)u[f]=this.field.multiply(this.coefficients[f],r);return new wn(this.field,u)}multiplyByMonomial(r,o){if(r<0)throw new I;if(o===0)return new wn(this.field,new Int32Array([0]));let u=this.coefficients.length,f=new Int32Array(u+r);for(let d=0;d<u;d++)f[d]=this.field.multiply(this.coefficients[d],o);return new wn(this.field,f)}toString(){let r=new q;for(let o=this.getDegree();o>=0;o--){let u=this.getCoefficient(o);u!==0&&(u<0?(r.append(" - "),u=-u):r.length()>0&&r.append(" + "),(o===0||u!==1)&&r.append(u),o!==0&&(o===1?r.append("x"):(r.append("x^"),r.append(o))))}return r.toString()}}class Ur{add(r,o){return(r+o)%this.modulus}subtract(r,o){return(this.modulus+r-o)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new I;return this.logTable[r]}inverse(r){if(r===0)throw new Lr;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Fr extends Ur{constructor(r,o){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let u=1;for(let f=0;f<r;f++)this.expTable[f]=u,u=u*o%r;for(let f=0;f<r-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new wn(this,new Int32Array([0])),this.one=new wn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new I;if(o===0)return this.zero;let u=new Int32Array(r+1);return u[0]=o,new wn(this,u)}}Fr.PDF417_GF=new Fr(Wt.NUMBER_OF_CODEWORDS,3);class jr{constructor(){this.field=Fr.PDF417_GF}decode(r,o,u){let f=new wn(this.field,r),d=new Int32Array(o),m=!1;for(let Z=o;Z>0;Z--){let et=f.evaluateAt(this.field.exp(Z));d[o-Z]=et,et!==0&&(m=!0)}if(!m)return 0;let y=this.field.getOne();if(u!=null)for(const Z of u){let et=this.field.exp(r.length-1-Z),ut=new wn(this.field,new Int32Array([this.field.subtract(0,et),1]));y=y.multiply(ut)}let v=new wn(this.field,d),C=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),v,o),R=C[0],O=C[1],P=this.findErrorLocations(R),H=this.findErrorMagnitudes(O,R,P);for(let Z=0;Z<P.length;Z++){let et=r.length-1-this.field.log(P[Z]);if(et<0)throw k.getChecksumInstance();r[et]=this.field.subtract(r[et],H[Z])}return P.length}runEuclideanAlgorithm(r,o,u){if(r.getDegree()<o.getDegree()){let P=r;r=o,o=P}let f=r,d=o,m=this.field.getZero(),y=this.field.getOne();for(;d.getDegree()>=Math.round(u/2);){let P=f,H=m;if(f=d,m=y,f.isZero())throw k.getChecksumInstance();d=P;let Z=this.field.getZero(),et=f.getCoefficient(f.getDegree()),ut=this.field.inverse(et);for(;d.getDegree()>=f.getDegree()&&!d.isZero();){let gt=d.getDegree()-f.getDegree(),Nt=this.field.multiply(d.getCoefficient(d.getDegree()),ut);Z=Z.add(this.field.buildMonomial(gt,Nt)),d=d.subtract(f.multiplyByMonomial(gt,Nt))}y=Z.multiply(m).subtract(H).negative()}let v=y.getCoefficient(0);if(v===0)throw k.getChecksumInstance();let C=this.field.inverse(v),R=y.multiply(C),O=d.multiply(C);return[R,O]}findErrorLocations(r){let o=r.getDegree(),u=new Int32Array(o),f=0;for(let d=1;d<this.field.getSize()&&f<o;d++)r.evaluateAt(d)===0&&(u[f]=this.field.inverse(d),f++);if(f!==o)throw k.getChecksumInstance();return u}findErrorMagnitudes(r,o,u){let f=o.getDegree(),d=new Int32Array(f);for(let C=1;C<=f;C++)d[f-C]=this.field.multiply(C,o.getCoefficient(C));let m=new wn(this.field,d),y=u.length,v=new Int32Array(y);for(let C=0;C<y;C++){let R=this.field.inverse(u[C]),O=this.field.subtract(0,r.evaluateAt(R)),P=this.field.inverse(m.evaluateAt(R));v[C]=this.field.multiply(O,P)}return v}}class Ar{constructor(r,o,u,f,d){r instanceof Ar?this.constructor_2(r):this.constructor_1(r,o,u,f,d)}constructor_1(r,o,u,f,d){const m=o==null||u==null,y=f==null||d==null;if(m&&y)throw new mt;m?(o=new Ht(0,f.getY()),u=new Ht(0,d.getY())):y&&(f=new Ht(r.getWidth()-1,o.getY()),d=new Ht(r.getWidth()-1,u.getY())),this.image=r,this.topLeft=o,this.bottomLeft=u,this.topRight=f,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),u.getX())),this.maxX=Math.trunc(Math.max(f.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),f.getY())),this.maxY=Math.trunc(Math.max(u.getY(),d.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,o){return r==null?o:o==null?r:new Ar(r.image,r.topLeft,r.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(r,o,u){let f=this.topLeft,d=this.bottomLeft,m=this.topRight,y=this.bottomRight;if(r>0){let v=u?this.topLeft:this.topRight,C=Math.trunc(v.getY()-r);C<0&&(C=0);let R=new Ht(v.getX(),C);u?f=R:m=R}if(o>0){let v=u?this.bottomLeft:this.bottomRight,C=Math.trunc(v.getY()+o);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let R=new Ht(v.getX(),C);u?d=R:y=R}return new Ar(this.image,f,d,m,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class zr{constructor(r,o,u,f){this.columnCount=r,this.errorCorrectionLevel=f,this.rowCountUpperPart=o,this.rowCountLowerPart=u,this.rowCount=o+u}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ui{constructor(){this.buffer=""}static form(r,o){let u=-1;function f(m,y,v,C,R,O){if(m==="%%")return"%";if(o[++u]===void 0)return;m=C?parseInt(C.substr(1)):void 0;let P=R?parseInt(R.substr(1)):void 0,H;switch(O){case"s":H=o[u];break;case"c":H=o[u][0];break;case"f":H=parseFloat(o[u]).toFixed(m);break;case"p":H=parseFloat(o[u]).toPrecision(m);break;case"e":H=parseFloat(o[u]).toExponential(m);break;case"x":H=parseInt(o[u]).toString(P||16);break;case"d":H=parseFloat(parseInt(o[u],P||10).toPrecision(m)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(P);let Z=parseInt(v),et=v&&v[0]+""=="0"?"0":" ";for(;H.length<Z;)H=y!==void 0?H+et:et+H;return H}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,f)}format(r,...o){this.buffer+=Ui.form(r,o)}toString(){return this.buffer}}class as{constructor(r){this.boundingBox=new Ar(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let o=this.getCodeword(r);if(o!=null)return o;for(let u=1;u<as.MAX_NEARBY_DISTANCE;u++){let f=this.imageRowToCodewordIndex(r)-u;if(f>=0&&(o=this.codewords[f],o!=null)||(f=this.imageRowToCodewordIndex(r)+u,f<this.codewords.length&&(o=this.codewords[f],o!=null)))return o}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,o){this.codewords[this.imageRowToCodewordIndex(r)]=o}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Ui;let o=0;for(const u of this.codewords){if(u==null){r.format("%3d:    |   %n",o++);continue}r.format("%3d: %3d|%3d%n",o++,u.getRowNumber(),u.getValue())}return r.toString()}}as.MAX_NEARBY_DISTANCE=5;class In{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let o=this.values.get(r);o==null&&(o=0),o++,this.values.set(r,o)}getValue(){let r=-1,o=new Array;for(const[u,f]of this.values.entries()){const d={getKey:()=>u,getValue:()=>f};d.getValue()>r?(r=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===r&&o.push(d.getKey())}return Wt.toIntArray(o)}getConfidence(r){return this.values.get(r)}}class ke extends as{constructor(r,o){super(r),this._isLeft=o}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,r);let u=this.getBoundingBox(),f=this._isLeft?u.getTopLeft():u.getTopRight(),d=this._isLeft?u.getBottomLeft():u.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(f.getY())),y=this.imageRowToCodewordIndex(Math.trunc(d.getY())),v=-1,C=1,R=0;for(let O=m;O<y;O++){if(o[O]==null)continue;let P=o[O],H=P.getRowNumber()-v;if(H===0)R++;else if(H===1)C=Math.max(C,R),R=1,v=P.getRowNumber();else if(H<0||P.getRowNumber()>=r.getRowCount()||H>O)o[O]=null;else{let Z;C>2?Z=(C-2)*H:Z=H;let et=Z>=O;for(let ut=1;ut<=Z&&!et;ut++)et=o[O-ut]!=null;et?o[O]=null:(v=P.getRowNumber(),R=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let o=new Int32Array(r.getRowCount());for(let u of this.getCodewords())if(u!=null){let f=u.getRowNumber();if(f>=o.length)continue;o[f]++}return o}adjustIncompleteIndicatorColumnRowNumbers(r){let o=this.getBoundingBox(),u=this._isLeft?o.getTopLeft():o.getTopRight(),f=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),m=this.imageRowToCodewordIndex(Math.trunc(f.getY())),y=this.getCodewords(),v=-1;for(let C=d;C<m;C++){if(y[C]==null)continue;let R=y[C];R.setRowNumberAsRowIndicatorColumn();let O=R.getRowNumber()-v;O===0||(O===1?v=R.getRowNumber():R.getRowNumber()>=r.getRowCount()?y[C]=null:v=R.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),o=new In,u=new In,f=new In,d=new In;for(let y of r){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let v=y.getValue()%30,C=y.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:u.setValue(v*3+1);break;case 1:d.setValue(v/3),f.setValue(v%3);break;case 2:o.setValue(v+1);break}}if(o.getValue().length===0||u.getValue().length===0||f.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||u.getValue()[0]+f.getValue()[0]<Wt.MIN_ROWS_IN_BARCODE||u.getValue()[0]+f.getValue()[0]>Wt.MAX_ROWS_IN_BARCODE)return null;let m=new zr(o.getValue()[0],u.getValue()[0],f.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(r,m),m}removeIncorrectCodewords(r,o){for(let u=0;u<r.length;u++){let f=r[u];if(r[u]==null)continue;let d=f.getValue()%30,m=f.getRowNumber();if(m>o.getRowCount()){r[u]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(r[u]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(r[u]=null);break;case 2:d+1!==o.getColumnCount()&&(r[u]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Hr{constructor(r,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Wt.MAX_CODEWORDS_IN_BARCODE,o;do o=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let u=this.detectionResultColumns[o].getCodewords();for(let f=0;f<u.length;f++)u[f]!=null&&(u[f].hasValidRowNumber()||this.adjustRowNumbers(o,f,u))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<r.length;u++)if(r[u]!=null&&o[u]!=null&&r[u].getRowNumber()===o[u].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let d=this.detectionResultColumns[f].getCodewords()[u];d!=null&&(d.setRowNumber(r[u].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[u]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<o.length;u++){if(o[u]==null)continue;let f=o[u].getRowNumber(),d=0;for(let m=this.barcodeColumnCount+1;m>0&&d<this.ADJUST_ROW_NUMBER_SKIP;m--){let y=this.detectionResultColumns[m].getCodewords()[u];y!=null&&(d=Hr.adjustRowNumberIfValid(f,d,y),y.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,o=this.detectionResultColumns[0].getCodewords();for(let u=0;u<o.length;u++){if(o[u]==null)continue;let f=o[u].getRowNumber(),d=0;for(let m=1;m<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;m++){let y=this.detectionResultColumns[m].getCodewords()[u];y!=null&&(d=Hr.adjustRowNumberIfValid(f,d,y),y.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,o,u){return u==null||u.hasValidRowNumber()||(u.isValidRowNumber(r)?(u.setRowNumber(r),o=0):++o),o}adjustRowNumbers(r,o,u){if(!this.detectionResultColumns[r-1])return;let f=u[o],d=this.detectionResultColumns[r-1].getCodewords(),m=d;this.detectionResultColumns[r+1]!=null&&(m=this.detectionResultColumns[r+1].getCodewords());let y=new Array(14);y[2]=d[o],y[3]=m[o],o>0&&(y[0]=u[o-1],y[4]=d[o-1],y[5]=m[o-1]),o>1&&(y[8]=u[o-2],y[10]=d[o-2],y[11]=m[o-2]),o<u.length-1&&(y[1]=u[o+1],y[6]=d[o+1],y[7]=m[o+1]),o<u.length-2&&(y[9]=u[o+2],y[12]=d[o+2],y[13]=m[o+2]);for(let v of y)if(Hr.adjustRowNumber(f,v))return}static adjustRowNumber(r,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===r.getBucket()?(r.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,o){this.detectionResultColumns[r]=o}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new Ui;for(let u=0;u<r.getCodewords().length;u++){o.format("CW %3d:",u);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[f].getCodewords()[u];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class wr{constructor(r,o,u,f){this.rowNumber=wr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(o),this.bucket=Math.trunc(u),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==wr.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}wr.BARCODE_ROW_UNKNOWN=-1;class li{static initialize(){for(let r=0;r<Wt.SYMBOL_TABLE.length;r++){let o=Wt.SYMBOL_TABLE[r],u=o&1;for(let f=0;f<Wt.BARS_IN_MODULE;f++){let d=0;for(;(o&1)===u;)d+=1,o>>=1;u=o&1,li.RATIOS_TABLE[r]||(li.RATIOS_TABLE[r]=new Array(Wt.BARS_IN_MODULE)),li.RATIOS_TABLE[r][Wt.BARS_IN_MODULE-f-1]=Math.fround(d/Wt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let o=li.getDecodedCodewordValue(li.sampleBitCounts(r));return o!==-1?o:li.getClosestDecodedValue(r)}static sampleBitCounts(r){let o=we.sum(r),u=new Int32Array(Wt.BARS_IN_MODULE),f=0,d=0;for(let m=0;m<Wt.MODULES_IN_CODEWORD;m++){let y=o/(2*Wt.MODULES_IN_CODEWORD)+m*o/Wt.MODULES_IN_CODEWORD;d+r[f]<=y&&(d+=r[f],f++),u[f]++}return u}static getDecodedCodewordValue(r){let o=li.getBitValue(r);return Wt.getCodeword(o)===-1?-1:o}static getBitValue(r){let o=0;for(let u=0;u<r.length;u++)for(let f=0;f<r[u];f++)o=o<<1|(u%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(r){let o=we.sum(r),u=new Array(Wt.BARS_IN_MODULE);if(o>1)for(let m=0;m<u.length;m++)u[m]=Math.fround(r[m]/o);let f=ns.MAX_VALUE,d=-1;this.bSymbolTableReady||li.initialize();for(let m=0;m<li.RATIOS_TABLE.length;m++){let y=0,v=li.RATIOS_TABLE[m];for(let C=0;C<Wt.BARS_IN_MODULE;C++){let R=Math.fround(v[C]-u[C]);if(y+=Math.fround(R*R),y>=f)break}y<f&&(f=y,d=Wt.SYMBOL_TABLE[m])}return d}}li.bSymbolTableReady=!1,li.RATIOS_TABLE=new Array(Wt.SYMBOL_TABLE.length).map(M=>new Array(Wt.BARS_IN_MODULE));class Xs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Ws{static parseLong(r,o=void 0){return parseInt(r,o)}}class Tr extends E{}Tr.kind="NullPointerException";class Qs{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,o,u){if(r==null)throw new Tr;if(o<0||o>r.length||u<0||o+u>r.length||o+u<0)throw new Y;if(u===0)return;for(let f=0;f<u;f++)this.write(r[o+f])}flush(){}close(){}}class sr extends E{}class el extends Qs{constructor(r=32){if(super(),this.count=0,r<0)throw new I("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let u=this.buf.length<<1;if(u-r<0&&(u=r),u<0){if(r<0)throw new sr;u=nt.MAX_VALUE}this.buf=rt.copyOfUint8Array(this.buf,u)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,o,u){if(o<0||o>r.length||u<0||o+u-r.length>0)throw new Y;this.ensureCapacity(this.count+u),W.arraycopy(r,o,this.buf,this.count,u),this.count+=u}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return rt.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var ze;(function(M){M[M.ALPHA=0]="ALPHA",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.PUNCT=3]="PUNCT",M[M.ALPHA_SHIFT=4]="ALPHA_SHIFT",M[M.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ze||(ze={}));function xs(){if(typeof window<"u")return window.BigInt||null;if(typeof tf<"u")return tf.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let os;function ar(M){if(typeof os>"u"&&(os=xs()),os===null)throw new Error("BigInt is not supported!");return os(M)}function Ma(){let M=[];M[0]=ar(1);let r=ar(900);M[1]=r;for(let o=2;o<16;o++)M[o]=M[o-1]*r;return M}class pt{static decode(r,o){let u=new q(""),f=V.ISO8859_1;u.enableDecoding(f);let d=1,m=r[d++],y=new Xs;for(;d<r[0];){switch(m){case pt.TEXT_COMPACTION_MODE_LATCH:d=pt.textCompaction(r,d,u);break;case pt.BYTE_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH_6:d=pt.byteCompaction(m,r,f,d,u);break;case pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(r[d++]);break;case pt.NUMERIC_COMPACTION_MODE_LATCH:d=pt.numericCompaction(r,d,u);break;case pt.ECI_CHARSET:V.getCharacterSetECIByValue(r[d++]);break;case pt.ECI_GENERAL_PURPOSE:d+=2;break;case pt.ECI_USER_DEFINED:d++;break;case pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=pt.decodeMacroBlock(r,d,y);break;case pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pt.MACRO_PDF417_TERMINATOR:throw new z;default:d--,d=pt.textCompaction(r,d,u);break}if(d<r.length)m=r[d++];else throw z.getFormatInstance()}if(u.length()===0)throw z.getFormatInstance();let v=new Oi(null,u.toString(),null,o);return v.setOther(y),v}static decodeMacroBlock(r,o,u){if(o+pt.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw z.getFormatInstance();let f=new Int32Array(pt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<pt.NUMBER_OF_SEQUENCE_CODEWORDS;y++,o++)f[y]=r[o];u.setSegmentIndex(nt.parseInt(pt.decodeBase900toBase10(f,pt.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new q;o=pt.textCompaction(r,o,d),u.setFileId(d.toString());let m=-1;for(r[o]===pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=o+1);o<r[0];)switch(r[o]){case pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,r[o]){case pt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new q;o=pt.textCompaction(r,o+1,y),u.setFileName(y.toString());break;case pt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new q;o=pt.textCompaction(r,o+1,v),u.setSender(v.toString());break;case pt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new q;o=pt.textCompaction(r,o+1,C),u.setAddressee(C.toString());break;case pt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new q;o=pt.numericCompaction(r,o+1,R),u.setSegmentCount(nt.parseInt(R.toString()));break;case pt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let O=new q;o=pt.numericCompaction(r,o+1,O),u.setTimestamp(Ws.parseLong(O.toString()));break;case pt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let P=new q;o=pt.numericCompaction(r,o+1,P),u.setChecksum(nt.parseInt(P.toString()));break;case pt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let H=new q;o=pt.numericCompaction(r,o+1,H),u.setFileSize(Ws.parseLong(H.toString()));break;default:throw z.getFormatInstance()}break;case pt.MACRO_PDF417_TERMINATOR:o++,u.setLastSegment(!0);break;default:throw z.getFormatInstance()}if(m!==-1){let y=o-m;u.isLastSegment()&&y--,u.setOptionalData(rt.copyOfRange(r,m,m+y))}return o}static textCompaction(r,o,u){let f=new Int32Array((r[0]-o)*2),d=new Int32Array((r[0]-o)*2),m=0,y=!1;for(;o<r[0]&&!y;){let v=r[o++];if(v<pt.TEXT_COMPACTION_MODE_LATCH)f[m]=v/30,f[m+1]=v%30,m+=2;else switch(v){case pt.TEXT_COMPACTION_MODE_LATCH:f[m++]=pt.TEXT_COMPACTION_MODE_LATCH;break;case pt.BYTE_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH_6:case pt.NUMERIC_COMPACTION_MODE_LATCH:case pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pt.MACRO_PDF417_TERMINATOR:o--,y=!0;break;case pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[m]=pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=r[o++],d[m]=v,m++;break}}return pt.decodeTextCompaction(f,d,m,u),o}static decodeTextCompaction(r,o,u,f){let d=ze.ALPHA,m=ze.ALPHA,y=0;for(;y<u;){let v=r[y],C="";switch(d){case ze.ALPHA:if(v<26)C=String.fromCharCode(65+v);else switch(v){case 26:C=" ";break;case pt.LL:d=ze.LOWER;break;case pt.ML:d=ze.MIXED;break;case pt.PS:m=d,d=ze.PUNCT_SHIFT;break;case pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case pt.TEXT_COMPACTION_MODE_LATCH:d=ze.ALPHA;break}break;case ze.LOWER:if(v<26)C=String.fromCharCode(97+v);else switch(v){case 26:C=" ";break;case pt.AS:m=d,d=ze.ALPHA_SHIFT;break;case pt.ML:d=ze.MIXED;break;case pt.PS:m=d,d=ze.PUNCT_SHIFT;break;case pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case pt.TEXT_COMPACTION_MODE_LATCH:d=ze.ALPHA;break}break;case ze.MIXED:if(v<pt.PL)C=pt.MIXED_CHARS[v];else switch(v){case pt.PL:d=ze.PUNCT;break;case 26:C=" ";break;case pt.LL:d=ze.LOWER;break;case pt.AL:d=ze.ALPHA;break;case pt.PS:m=d,d=ze.PUNCT_SHIFT;break;case pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case pt.TEXT_COMPACTION_MODE_LATCH:d=ze.ALPHA;break}break;case ze.PUNCT:if(v<pt.PAL)C=pt.PUNCT_CHARS[v];else switch(v){case pt.PAL:d=ze.ALPHA;break;case pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case pt.TEXT_COMPACTION_MODE_LATCH:d=ze.ALPHA;break}break;case ze.ALPHA_SHIFT:if(d=m,v<26)C=String.fromCharCode(65+v);else switch(v){case 26:C=" ";break;case pt.TEXT_COMPACTION_MODE_LATCH:d=ze.ALPHA;break}break;case ze.PUNCT_SHIFT:if(d=m,v<pt.PAL)C=pt.PUNCT_CHARS[v];else switch(v){case pt.PAL:d=ze.ALPHA;break;case pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case pt.TEXT_COMPACTION_MODE_LATCH:d=ze.ALPHA;break}break}C!==""&&f.append(C),y++}}static byteCompaction(r,o,u,f,d){let m=new el,y=0,v=0,C=!1;switch(r){case pt.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),O=o[f++];for(;f<o[0]&&!C;)switch(R[y++]=O,v=900*v+O,O=o[f++],O){case pt.TEXT_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH:case pt.NUMERIC_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH_6:case pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pt.MACRO_PDF417_TERMINATOR:f--,C=!0;break;default:if(y%5===0&&y>0){for(let P=0;P<6;++P)m.write(Number(ar(v)>>ar(8*(5-P))));v=0,y=0}break}f===o[0]&&O<pt.TEXT_COMPACTION_MODE_LATCH&&(R[y++]=O);for(let P=0;P<y;P++)m.write(R[P]);break;case pt.BYTE_COMPACTION_MODE_LATCH_6:for(;f<o[0]&&!C;){let P=o[f++];if(P<pt.TEXT_COMPACTION_MODE_LATCH)y++,v=900*v+P;else switch(P){case pt.TEXT_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH:case pt.NUMERIC_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH_6:case pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pt.MACRO_PDF417_TERMINATOR:f--,C=!0;break}if(y%5===0&&y>0){for(let H=0;H<6;++H)m.write(Number(ar(v)>>ar(8*(5-H))));v=0,y=0}}break}return d.append(tt.decode(m.toByteArray(),u)),f}static numericCompaction(r,o,u){let f=0,d=!1,m=new Int32Array(pt.MAX_NUMERIC_CODEWORDS);for(;o<r[0]&&!d;){let y=r[o++];if(o===r[0]&&(d=!0),y<pt.TEXT_COMPACTION_MODE_LATCH)m[f]=y,f++;else switch(y){case pt.TEXT_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH:case pt.BYTE_COMPACTION_MODE_LATCH_6:case pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pt.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(f%pt.MAX_NUMERIC_CODEWORDS===0||y===pt.NUMERIC_COMPACTION_MODE_LATCH||d)&&f>0&&(u.append(pt.decodeBase900toBase10(m,f)),f=0)}return o}static decodeBase900toBase10(r,o){let u=ar(0);for(let d=0;d<o;d++)u+=pt.EXP900[o-d-1]*ar(r[d]);let f=u.toString();if(f.charAt(0)!=="1")throw new z;return f.substring(1)}}pt.TEXT_COMPACTION_MODE_LATCH=900,pt.BYTE_COMPACTION_MODE_LATCH=901,pt.NUMERIC_COMPACTION_MODE_LATCH=902,pt.BYTE_COMPACTION_MODE_LATCH_6=924,pt.ECI_USER_DEFINED=925,pt.ECI_GENERAL_PURPOSE=926,pt.ECI_CHARSET=927,pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,pt.MACRO_PDF417_TERMINATOR=922,pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,pt.MAX_NUMERIC_CODEWORDS=15,pt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,pt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,pt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,pt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,pt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,pt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,pt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,pt.PL=25,pt.LL=27,pt.AS=27,pt.ML=28,pt.AL=28,pt.PS=29,pt.PAL=29,pt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,pt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",pt.EXP900=xs()?Ma():[],pt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class se{constructor(){}static decode(r,o,u,f,d,m,y){let v=new Ar(r,o,u,f,d),C=null,R=null,O;for(let Z=!0;;Z=!1){if(o!=null&&(C=se.getRowIndicatorColumn(r,v,o,!0,m,y)),f!=null&&(R=se.getRowIndicatorColumn(r,v,f,!1,m,y)),O=se.merge(C,R),O==null)throw mt.getNotFoundInstance();let et=O.getBoundingBox();if(Z&&et!=null&&(et.getMinY()<v.getMinY()||et.getMaxY()>v.getMaxY()))v=et;else break}O.setBoundingBox(v);let P=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,C),O.setDetectionResultColumn(P,R);let H=C!=null;for(let Z=1;Z<=P;Z++){let et=H?Z:P-Z;if(O.getDetectionResultColumn(et)!==void 0)continue;let ut;et===0||et===P?ut=new ke(v,et===0):ut=new as(v),O.setDetectionResultColumn(et,ut);let gt=-1,Nt=gt;for(let Pt=v.getMinY();Pt<=v.getMaxY();Pt++){if(gt=se.getStartColumn(O,et,Pt,H),gt<0||gt>v.getMaxX()){if(Nt===-1)continue;gt=Nt}let Rt=se.detectCodeword(r,v.getMinX(),v.getMaxX(),H,gt,Pt,m,y);Rt!=null&&(ut.setCodeword(Pt,Rt),Nt=gt,m=Math.min(m,Rt.getWidth()),y=Math.max(y,Rt.getWidth()))}}return se.createDecoderResult(O)}static merge(r,o){if(r==null&&o==null)return null;let u=se.getBarcodeMetadata(r,o);if(u==null)return null;let f=Ar.merge(se.adjustBoundingBox(r),se.adjustBoundingBox(o));return new Hr(u,f)}static adjustBoundingBox(r){if(r==null)return null;let o=r.getRowHeights();if(o==null)return null;let u=se.getMax(o),f=0;for(let y of o)if(f+=u-y,y>0)break;let d=r.getCodewords();for(let y=0;f>0&&d[y]==null;y++)f--;let m=0;for(let y=o.length-1;y>=0&&(m+=u-o[y],!(o[y]>0));y--);for(let y=d.length-1;m>0&&d[y]==null;y--)m--;return r.getBoundingBox().addMissingRows(f,m,r.isLeft())}static getMax(r){let o=-1;for(let u of r)o=Math.max(o,u);return o}static getBarcodeMetadata(r,o){let u;if(r==null||(u=r.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let f;return o==null||(f=o.getBarcodeMetadata())==null?u:u.getColumnCount()!==f.getColumnCount()&&u.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&u.getRowCount()!==f.getRowCount()?null:u}static getRowIndicatorColumn(r,o,u,f,d,m){let y=new ke(o,f);for(let v=0;v<2;v++){let C=v===0?1:-1,R=Math.trunc(Math.trunc(u.getX()));for(let O=Math.trunc(Math.trunc(u.getY()));O<=o.getMaxY()&&O>=o.getMinY();O+=C){let P=se.detectCodeword(r,0,r.getWidth(),f,R,O,d,m);P!=null&&(y.setCodeword(O,P),f?R=P.getStartX():R=P.getEndX())}}return y}static adjustCodewordCount(r,o){let u=o[0][1],f=u.getValue(),d=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-se.getNumberOfECCodeWords(r.getBarcodeECLevel());if(f.length===0){if(d<1||d>Wt.MAX_CODEWORDS_IN_BARCODE)throw mt.getNotFoundInstance();u.setValue(d)}else f[0]!==d&&u.setValue(d)}static createDecoderResult(r){let o=se.createBarcodeMatrix(r);se.adjustCodewordCount(r,o);let u=new Array,f=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),d=[],m=new Array;for(let v=0;v<r.getBarcodeRowCount();v++)for(let C=0;C<r.getBarcodeColumnCount();C++){let R=o[v][C+1].getValue(),O=v*r.getBarcodeColumnCount()+C;R.length===0?u.push(O):R.length===1?f[O]=R[0]:(m.push(O),d.push(R))}let y=new Array(d.length);for(let v=0;v<y.length;v++)y[v]=d[v];return se.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),f,Wt.toIntArray(u),Wt.toIntArray(m),y)}static createDecoderResultFromAmbiguousValues(r,o,u,f,d){let m=new Int32Array(f.length),y=100;for(;y-- >0;){for(let v=0;v<m.length;v++)o[f[v]]=d[v][m[v]];try{return se.decodeCodewords(o,r,u)}catch(v){if(!(v instanceof k))throw v}if(m.length===0)throw k.getChecksumInstance();for(let v=0;v<m.length;v++)if(m[v]<d[v].length-1){m[v]++;break}else if(m[v]=0,v===m.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(r){let o=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let f=0;f<o.length;f++)for(let d=0;d<o[f].length;d++)o[f][d]=new In;let u=0;for(let f of r.getDetectionResultColumns()){if(f!=null){for(let d of f.getCodewords())if(d!=null){let m=d.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][u].setValue(d.getValue())}}}u++}return o}static isValidBarcodeColumn(r,o){return o>=0&&o<=r.getBarcodeColumnCount()+1}static getStartColumn(r,o,u,f){let d=f?1:-1,m=null;if(se.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodeword(u)),m!=null)return f?m.getEndX():m.getStartX();if(m=r.getDetectionResultColumn(o).getCodewordNearby(u),m!=null)return f?m.getStartX():m.getEndX();if(se.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodewordNearby(u)),m!=null)return f?m.getEndX():m.getStartX();let y=0;for(;se.isValidBarcodeColumn(r,o-d);){o-=d;for(let v of r.getDetectionResultColumn(o).getCodewords())if(v!=null)return(f?v.getEndX():v.getStartX())+d*y*(v.getEndX()-v.getStartX());y++}return f?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,o,u,f,d,m,y,v){d=se.adjustCodewordStartColumn(r,o,u,f,d,m);let C=se.getModuleBitCount(r,o,u,f,d,m);if(C==null)return null;let R,O=we.sum(C);if(f)R=d+O;else{for(let Z=0;Z<C.length/2;Z++){let et=C[Z];C[Z]=C[C.length-1-Z],C[C.length-1-Z]=et}R=d,d=R-O}if(!se.checkCodewordSkew(O,y,v))return null;let P=li.getDecodedValue(C),H=Wt.getCodeword(P);return H===-1?null:new wr(d,R,se.getCodewordBucketNumber(P),H)}static getModuleBitCount(r,o,u,f,d,m){let y=d,v=new Int32Array(8),C=0,R=f?1:-1,O=f;for(;(f?y<u:y>=o)&&C<v.length;)r.get(y,m)===O?(v[C]++,y+=R):(C++,O=!O);return C===v.length||y===(f?u:o)&&C===v.length-1?v:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,o,u,f,d,m){let y=d,v=f?-1:1;for(let C=0;C<2;C++){for(;(f?y>=o:y<u)&&f===r.get(y,m);){if(Math.abs(d-y)>se.CODEWORD_SKEW_SIZE)return d;y+=v}v=-v,f=!f}return y}static checkCodewordSkew(r,o,u){return o-se.CODEWORD_SKEW_SIZE<=r&&r<=u+se.CODEWORD_SKEW_SIZE}static decodeCodewords(r,o,u){if(r.length===0)throw z.getFormatInstance();let f=1<<o+1,d=se.correctErrors(r,u,f);se.verifyCodewordCount(r,f);let m=pt.decode(r,""+o);return m.setErrorsCorrected(d),m.setErasures(u.length),m}static correctErrors(r,o,u){if(o!=null&&o.length>u/2+se.MAX_ERRORS||u<0||u>se.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return se.errorCorrection.decode(r,u,o)}static verifyCodewordCount(r,o){if(r.length<4)throw z.getFormatInstance();let u=r[0];if(u>r.length)throw z.getFormatInstance();if(u===0)if(o<r.length)r[0]=r.length-o;else throw z.getFormatInstance()}static getBitCountForCodeword(r){let o=new Int32Array(8),u=0,f=o.length-1;for(;!((r&1)!==u&&(u=r&1,f--,f<0));)o[f]++,r>>=1;return o}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return se.getCodewordBucketNumber(se.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let o=new Ui;for(let u=0;u<r.length;u++){o.format("Row %2d: ",u);for(let f=0;f<r[u].length;f++){let d=r[u][f];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}se.CODEWORD_SKEW_SIZE=2,se.MAX_ERRORS=3,se.MAX_EC_CODEWORDS=512,se.errorCorrection=new jr;class Qn{decode(r,o=null){let u=Qn.decode(r,o,!1);if(u==null||u.length===0||u[0]==null)throw mt.getNotFoundInstance();return u[0]}decodeMultiple(r,o=null){try{return Qn.decode(r,o,!0)}catch(u){throw u instanceof z||u instanceof k?mt.getNotFoundInstance():u}}static decode(r,o,u){const f=new Array,d=Jt.detectMultiple(r,o,u);for(const m of d.getPoints()){const y=se.decode(d.getBits(),m[4],m[5],m[6],m[7],Qn.getMinCodewordWidth(m),Qn.getMaxCodewordWidth(m)),v=new zt(y.getText(),y.getRawBytes(),void 0,m,Mt.PDF_417);v.putMetadata(ae.ERROR_CORRECTION_LEVEL,y.getECLevel());const C=y.getOther();C!=null&&v.putMetadata(ae.PDF417_EXTRA_METADATA,C),f.push(v)}return f.map(m=>m)}static getMaxWidth(r,o){return r==null||o==null?0:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMinWidth(r,o){return r==null||o==null?nt.MAX_VALUE:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Qn.getMaxWidth(r[0],r[4]),Qn.getMaxWidth(r[6],r[2])*Wt.MODULES_IN_CODEWORD/Wt.MODULES_IN_STOP_PATTERN),Math.max(Qn.getMaxWidth(r[1],r[5]),Qn.getMaxWidth(r[7],r[3])*Wt.MODULES_IN_CODEWORD/Wt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Qn.getMinWidth(r[0],r[4]),Qn.getMinWidth(r[6],r[2])*Wt.MODULES_IN_CODEWORD/Wt.MODULES_IN_STOP_PATTERN),Math.min(Qn.getMinWidth(r[1],r[5]),Qn.getMinWidth(r[7],r[3])*Wt.MODULES_IN_CODEWORD/Wt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Es extends E{}Es.kind="ReaderException";class As{constructor(r,o){this.verbose=r===!0,o&&this.setHints(o)}decode(r,o){return o&&this.setHints(o),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const o=!s(r)&&r.get(Lt.TRY_HARDER)===!0,u=s(r)?null:r.get(Lt.POSSIBLE_FORMATS),f=new Array;if(!s(u)){const d=u.some(m=>m===Mt.UPC_A||m===Mt.UPC_E||m===Mt.EAN_13||m===Mt.EAN_8||m===Mt.CODABAR||m===Mt.CODE_39||m===Mt.CODE_93||m===Mt.CODE_128||m===Mt.ITF||m===Mt.RSS_14||m===Mt.RSS_EXPANDED);d&&!o&&f.push(new rr(r,this.verbose)),u.includes(Mt.QR_CODE)&&f.push(new xr),u.includes(Mt.DATA_MATRIX)&&f.push(new Vi),u.includes(Mt.AZTEC)&&f.push(new _a),u.includes(Mt.PDF_417)&&f.push(new Qn),d&&o&&f.push(new rr(r,this.verbose))}f.length===0&&(o||f.push(new rr(r,this.verbose)),f.push(new xr),f.push(new Vi),f.push(new _a),f.push(new Qn),o&&f.push(new rr(r,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Es("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(r,this.hints)}catch(u){if(u instanceof Es)continue}throw new mt("No MultiFormat Readers were able to detect the code.")}}class nl extends Ot{constructor(r=null,o=500){const u=new As;u.setHints(r),super(u,o)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class il extends Ot{constructor(r=500){super(new Qn,r)}}class vo extends Ot{constructor(r=500){super(new xr,r)}}var ls;(function(M){M[M.ERROR_CORRECTION=0]="ERROR_CORRECTION",M[M.CHARACTER_SET=1]="CHARACTER_SET",M[M.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",M[M.MIN_SIZE=3]="MIN_SIZE",M[M.MAX_SIZE=4]="MAX_SIZE",M[M.MARGIN=5]="MARGIN",M[M.PDF417_COMPACT=6]="PDF417_COMPACT",M[M.PDF417_COMPACTION=7]="PDF417_COMPACTION",M[M.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",M[M.AZTEC_LAYERS=9]="AZTEC_LAYERS",M[M.QR_VERSION=10]="QR_VERSION"})(ls||(ls={}));var Rn=ls;class ws{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new _n(r,Int32Array.from([1])))}buildGenerator(r){const o=this.cachedGenerators;if(r>=o.length){let u=o[o.length-1];const f=this.field;for(let d=o.length;d<=r;d++){const m=u.multiply(new _n(f,Int32Array.from([1,f.exp(d-1+f.getGeneratorBase())])));o.push(m),u=m}}return o[r]}encode(r,o){if(o===0)throw new I("No error correction bytes");const u=r.length-o;if(u<=0)throw new I("No data bytes provided");const f=this.buildGenerator(o),d=new Int32Array(u);W.arraycopy(r,0,d,0,u);let m=new _n(this.field,d);m=m.multiplyByMonomial(o,1);const v=m.divide(f)[1].getCoefficients(),C=o-v.length;for(let R=0;R<C;R++)r[u+R]=0;W.arraycopy(v,0,r,u+C,v.length)}}class fn{constructor(){}static applyMaskPenaltyRule1(r){return fn.applyMaskPenaltyRule1Internal(r,!0)+fn.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let o=0;const u=r.getArray(),f=r.getWidth(),d=r.getHeight();for(let m=0;m<d-1;m++){const y=u[m];for(let v=0;v<f-1;v++){const C=y[v];C===y[v+1]&&C===u[m+1][v]&&C===u[m+1][v+1]&&o++}}return fn.N2*o}static applyMaskPenaltyRule3(r){let o=0;const u=r.getArray(),f=r.getWidth(),d=r.getHeight();for(let m=0;m<d;m++)for(let y=0;y<f;y++){const v=u[m];y+6<f&&v[y]===1&&v[y+1]===0&&v[y+2]===1&&v[y+3]===1&&v[y+4]===1&&v[y+5]===0&&v[y+6]===1&&(fn.isWhiteHorizontal(v,y-4,y)||fn.isWhiteHorizontal(v,y+7,y+11))&&o++,m+6<d&&u[m][y]===1&&u[m+1][y]===0&&u[m+2][y]===1&&u[m+3][y]===1&&u[m+4][y]===1&&u[m+5][y]===0&&u[m+6][y]===1&&(fn.isWhiteVertical(u,y,m-4,m)||fn.isWhiteVertical(u,y,m+7,m+11))&&o++}return o*fn.N3}static isWhiteHorizontal(r,o,u){o=Math.max(o,0),u=Math.min(u,r.length);for(let f=o;f<u;f++)if(r[f]===1)return!1;return!0}static isWhiteVertical(r,o,u,f){u=Math.max(u,0),f=Math.min(f,r.length);for(let d=u;d<f;d++)if(r[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let o=0;const u=r.getArray(),f=r.getWidth(),d=r.getHeight();for(let v=0;v<d;v++){const C=u[v];for(let R=0;R<f;R++)C[R]===1&&o++}const m=r.getHeight()*r.getWidth();return Math.floor(Math.abs(o*2-m)*10/m)*fn.N4}static getDataMaskBit(r,o,u){let f,d;switch(r){case 0:f=u+o&1;break;case 1:f=u&1;break;case 2:f=o%3;break;case 3:f=(u+o)%3;break;case 4:f=Math.floor(u/2)+Math.floor(o/3)&1;break;case 5:d=u*o,f=(d&1)+d%3;break;case 6:d=u*o,f=(d&1)+d%3&1;break;case 7:d=u*o,f=d%3+(u+o&1)&1;break;default:throw new I("Invalid mask pattern: "+r)}return f===0}static applyMaskPenaltyRule1Internal(r,o){let u=0;const f=o?r.getHeight():r.getWidth(),d=o?r.getWidth():r.getHeight(),m=r.getArray();for(let y=0;y<f;y++){let v=0,C=-1;for(let R=0;R<d;R++){const O=o?m[y][R]:m[R][y];O===C?v++:(v>=5&&(u+=fn.N1+(v-5)),v=1,C=O)}v>=5&&(u+=fn.N1+(v-5))}return u}}fn.N1=3,fn.N2=3,fn.N3=40,fn.N4=10;class Ts{constructor(r,o){this.width=r,this.height=o;const u=new Array(o);for(let f=0;f!==o;f++)u[f]=new Uint8Array(r);this.bytes=u}getHeight(){return this.height}getWidth(){return this.width}get(r,o){return this.bytes[o][r]}getArray(){return this.bytes}setNumber(r,o,u){this.bytes[o][r]=u}setBoolean(r,o,u){this.bytes[o][r]=u?1:0}clear(r){for(const o of this.bytes)rt.fill(o,r)}equals(r){if(!(r instanceof Ts))return!1;const o=r;if(this.width!==o.width||this.height!==o.height)return!1;for(let u=0,f=this.height;u<f;++u){const d=this.bytes[u],m=o.bytes[u];for(let y=0,v=this.width;y<v;++y)if(d[y]!==m[y])return!1}return!0}toString(){const r=new q;for(let o=0,u=this.height;o<u;++o){const f=this.bytes[o];for(let d=0,m=this.width;d<m;++d)switch(f[d]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class _i{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new q;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<_i.NUM_MASK_PATTERNS}}_i.NUM_MASK_PATTERNS=8;class He extends E{}He.kind="WriterException";class Kt{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,o,u,f,d){Kt.clearMatrix(d),Kt.embedBasicPatterns(u,d),Kt.embedTypeInfo(o,f,d),Kt.maybeEmbedVersionInfo(u,d),Kt.embedDataBits(r,f,d)}static embedBasicPatterns(r,o){Kt.embedPositionDetectionPatternsAndSeparators(o),Kt.embedDarkDotAtLeftBottomCorner(o),Kt.maybeEmbedPositionAdjustmentPatterns(r,o),Kt.embedTimingPatterns(o)}static embedTypeInfo(r,o,u){const f=new _t;Kt.makeTypeInfoBits(r,o,f);for(let d=0,m=f.getSize();d<m;++d){const y=f.get(f.getSize()-1-d),v=Kt.TYPE_INFO_COORDINATES[d],C=v[0],R=v[1];if(u.setBoolean(C,R,y),d<8){const O=u.getWidth()-d-1;u.setBoolean(O,8,y)}else{const P=u.getHeight()-7+(d-8);u.setBoolean(8,P,y)}}}static maybeEmbedVersionInfo(r,o){if(r.getVersionNumber()<7)return;const u=new _t;Kt.makeVersionInfoBits(r,u);let f=6*3-1;for(let d=0;d<6;++d)for(let m=0;m<3;++m){const y=u.get(f);f--,o.setBoolean(d,o.getHeight()-11+m,y),o.setBoolean(o.getHeight()-11+m,d,y)}}static embedDataBits(r,o,u){let f=0,d=-1,m=u.getWidth()-1,y=u.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);y>=0&&y<u.getHeight();){for(let v=0;v<2;++v){const C=m-v;if(!Kt.isEmpty(u.get(C,y)))continue;let R;f<r.getSize()?(R=r.get(f),++f):R=!1,o!==255&&fn.getDataMaskBit(o,C,y)&&(R=!R),u.setBoolean(C,y,R)}y+=d}d=-d,y+=d,m-=2}if(f!==r.getSize())throw new He("Not all bits consumed: "+f+"/"+r.getSize())}static findMSBSet(r){return 32-nt.numberOfLeadingZeros(r)}static calculateBCHCode(r,o){if(o===0)throw new I("0 polynomial");const u=Kt.findMSBSet(o);for(r<<=u-1;Kt.findMSBSet(r)>=u;)r^=o<<Kt.findMSBSet(r)-u;return r}static makeTypeInfoBits(r,o,u){if(!_i.isValidMaskPattern(o))throw new He("Invalid mask pattern");const f=r.getBits()<<3|o;u.appendBits(f,5);const d=Kt.calculateBCHCode(f,Kt.TYPE_INFO_POLY);u.appendBits(d,10);const m=new _t;if(m.appendBits(Kt.TYPE_INFO_MASK_PATTERN,15),u.xor(m),u.getSize()!==15)throw new He("should not happen but we got: "+u.getSize())}static makeVersionInfoBits(r,o){o.appendBits(r.getVersionNumber(),6);const u=Kt.calculateBCHCode(r.getVersionNumber(),Kt.VERSION_INFO_POLY);if(o.appendBits(u,12),o.getSize()!==18)throw new He("should not happen but we got: "+o.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let o=8;o<r.getWidth()-8;++o){const u=(o+1)%2;Kt.isEmpty(r.get(o,6))&&r.setNumber(o,6,u),Kt.isEmpty(r.get(6,o))&&r.setNumber(6,o,u)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new He;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,o,u){for(let f=0;f<8;++f){if(!Kt.isEmpty(u.get(r+f,o)))throw new He;u.setNumber(r+f,o,0)}}static embedVerticalSeparationPattern(r,o,u){for(let f=0;f<7;++f){if(!Kt.isEmpty(u.get(r,o+f)))throw new He;u.setNumber(r,o+f,0)}}static embedPositionAdjustmentPattern(r,o,u){for(let f=0;f<5;++f){const d=Kt.POSITION_ADJUSTMENT_PATTERN[f];for(let m=0;m<5;++m)u.setNumber(r+m,o+f,d[m])}}static embedPositionDetectionPattern(r,o,u){for(let f=0;f<7;++f){const d=Kt.POSITION_DETECTION_PATTERN[f];for(let m=0;m<7;++m)u.setNumber(r+m,o+f,d[m])}}static embedPositionDetectionPatternsAndSeparators(r){const o=Kt.POSITION_DETECTION_PATTERN[0].length;Kt.embedPositionDetectionPattern(0,0,r),Kt.embedPositionDetectionPattern(r.getWidth()-o,0,r),Kt.embedPositionDetectionPattern(0,r.getWidth()-o,r);const u=8;Kt.embedHorizontalSeparationPattern(0,u-1,r),Kt.embedHorizontalSeparationPattern(r.getWidth()-u,u-1,r),Kt.embedHorizontalSeparationPattern(0,r.getWidth()-u,r);const f=7;Kt.embedVerticalSeparationPattern(f,0,r),Kt.embedVerticalSeparationPattern(r.getHeight()-f-1,0,r),Kt.embedVerticalSeparationPattern(f,r.getHeight()-f,r)}static maybeEmbedPositionAdjustmentPatterns(r,o){if(r.getVersionNumber()<2)return;const u=r.getVersionNumber()-1,f=Kt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[u];for(let d=0,m=f.length;d!==m;d++){const y=f[d];if(y>=0)for(let v=0;v!==m;v++){const C=f[v];C>=0&&Kt.isEmpty(o.get(C,y))&&Kt.embedPositionAdjustmentPattern(C-2,y-2,o)}}}}Kt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Kt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Kt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Kt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Kt.VERSION_INFO_POLY=7973,Kt.TYPE_INFO_POLY=1335,Kt.TYPE_INFO_MASK_PATTERN=21522;class rl{constructor(r,o){this.dataBytes=r,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ke{constructor(){}static calculateMaskPenalty(r){return fn.applyMaskPenaltyRule1(r)+fn.applyMaskPenaltyRule2(r)+fn.applyMaskPenaltyRule3(r)+fn.applyMaskPenaltyRule4(r)}static encode(r,o,u=null){let f=Ke.DEFAULT_BYTE_MODE_ENCODING;const d=u!==null&&u.get(Rn.CHARACTER_SET)!==void 0;d&&(f=u.get(Rn.CHARACTER_SET).toString());const m=this.chooseMode(r,f),y=new _t;if(m===Xt.BYTE&&(d||Ke.DEFAULT_BYTE_MODE_ENCODING!==f)){const Pt=V.getCharacterSetECIByName(f);Pt!==void 0&&this.appendECI(Pt,y)}this.appendModeInfo(m,y);const v=new _t;this.appendBytes(r,m,v,f);let C;if(u!==null&&u.get(Rn.QR_VERSION)!==void 0){const Pt=Number.parseInt(u.get(Rn.QR_VERSION).toString(),10);C=Ut.getVersionForNumber(Pt);const Rt=this.calculateBitsNeeded(m,y,v,C);if(!this.willFit(Rt,C,o))throw new He("Data too big for requested version")}else C=this.recommendVersion(o,m,y,v);const R=new _t;R.appendBitArray(y);const O=m===Xt.BYTE?v.getSizeInBytes():r.length;this.appendLengthInfo(O,C,m,R),R.appendBitArray(v);const P=C.getECBlocksForLevel(o),H=C.getTotalCodewords()-P.getTotalECCodewords();this.terminateBits(H,R);const Z=this.interleaveWithECBytes(R,C.getTotalCodewords(),H,P.getNumBlocks()),et=new _i;et.setECLevel(o),et.setMode(m),et.setVersion(C);const ut=C.getDimensionForVersion(),gt=new Ts(ut,ut),Nt=this.chooseMaskPattern(Z,o,C,gt);return et.setMaskPattern(Nt),Kt.buildMatrix(Z,o,C,Nt,gt),et.setMatrix(gt),et}static recommendVersion(r,o,u,f){const d=this.calculateBitsNeeded(o,u,f,Ut.getVersionForNumber(1)),m=this.chooseVersion(d,r),y=this.calculateBitsNeeded(o,u,f,m);return this.chooseVersion(y,r)}static calculateBitsNeeded(r,o,u,f){return o.getSize()+r.getCharacterCountBits(f)+u.getSize()}static getAlphanumericCode(r){return r<Ke.ALPHANUMERIC_TABLE.length?Ke.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,o=null){if(V.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(r))return Xt.KANJI;let u=!1,f=!1;for(let d=0,m=r.length;d<m;++d){const y=r.charAt(d);if(Ke.isDigit(y))u=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)f=!0;else return Xt.BYTE}return f?Xt.ALPHANUMERIC:u?Xt.NUMERIC:Xt.BYTE}static isOnlyDoubleByteKanji(r){let o;try{o=tt.encode(r,V.SJIS)}catch{return!1}const u=o.length;if(u%2!==0)return!1;for(let f=0;f<u;f+=2){const d=o[f]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(r,o,u,f){let d=Number.MAX_SAFE_INTEGER,m=-1;for(let y=0;y<_i.NUM_MASK_PATTERNS;y++){Kt.buildMatrix(r,o,u,y,f);let v=this.calculateMaskPenalty(f);v<d&&(d=v,m=y)}return m}static chooseVersion(r,o){for(let u=1;u<=40;u++){const f=Ut.getVersionForNumber(u);if(Ke.willFit(r,f,o))return f}throw new He("Data too big")}static willFit(r,o,u){const f=o.getTotalCodewords(),m=o.getECBlocksForLevel(u).getTotalECCodewords(),y=f-m,v=(r+7)/8;return y>=v}static terminateBits(r,o){const u=r*8;if(o.getSize()>u)throw new He("data bits cannot fit in the QR Code"+o.getSize()+" > "+u);for(let m=0;m<4&&o.getSize()<u;++m)o.appendBit(!1);const f=o.getSize()&7;if(f>0)for(let m=f;m<8;m++)o.appendBit(!1);const d=r-o.getSizeInBytes();for(let m=0;m<d;++m)o.appendBits((m&1)===0?236:17,8);if(o.getSize()!==u)throw new He("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,o,u,f,d,m){if(f>=u)throw new He("Block ID too large");const y=r%u,v=u-y,C=Math.floor(r/u),R=C+1,O=Math.floor(o/u),P=O+1,H=C-O,Z=R-P;if(H!==Z)throw new He("EC bytes mismatch");if(u!==v+y)throw new He("RS blocks mismatch");if(r!==(O+H)*v+(P+Z)*y)throw new He("Total bytes mismatch");f<v?(d[0]=O,m[0]=H):(d[0]=P,m[0]=Z)}static interleaveWithECBytes(r,o,u,f){if(r.getSizeInBytes()!==u)throw new He("Number of bits and data bytes does not match");let d=0,m=0,y=0;const v=new Array;for(let R=0;R<f;++R){const O=new Int32Array(1),P=new Int32Array(1);Ke.getNumDataBytesAndNumECBytesForBlockID(o,u,f,R,O,P);const H=O[0],Z=new Uint8Array(H);r.toBytes(8*d,Z,0,H);const et=Ke.generateECBytes(Z,P[0]);v.push(new rl(Z,et)),m=Math.max(m,H),y=Math.max(y,et.length),d+=O[0]}if(u!==d)throw new He("Data bytes does not match offset");const C=new _t;for(let R=0;R<m;++R)for(const O of v){const P=O.getDataBytes();R<P.length&&C.appendBits(P[R],8)}for(let R=0;R<y;++R)for(const O of v){const P=O.getErrorCorrectionBytes();R<P.length&&C.appendBits(P[R],8)}if(o!==C.getSizeInBytes())throw new He("Interleaving error: "+o+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(r,o){const u=r.length,f=new Int32Array(u+o);for(let m=0;m<u;m++)f[m]=r[m]&255;new ws(Ae.QR_CODE_FIELD_256).encode(f,o);const d=new Uint8Array(o);for(let m=0;m<o;m++)d[m]=f[u+m];return d}static appendModeInfo(r,o){o.appendBits(r.getBits(),4)}static appendLengthInfo(r,o,u,f){const d=u.getCharacterCountBits(o);if(r>=1<<d)throw new He(r+" is bigger than "+((1<<d)-1));f.appendBits(r,d)}static appendBytes(r,o,u,f){switch(o){case Xt.NUMERIC:Ke.appendNumericBytes(r,u);break;case Xt.ALPHANUMERIC:Ke.appendAlphanumericBytes(r,u);break;case Xt.BYTE:Ke.append8BitBytes(r,u,f);break;case Xt.KANJI:Ke.appendKanjiBytes(r,u);break;default:throw new He("Invalid mode: "+o)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const o=Ke.getDigit(r);return o>=0&&o<=9}static appendNumericBytes(r,o){const u=r.length;let f=0;for(;f<u;){const d=Ke.getDigit(r.charAt(f));if(f+2<u){const m=Ke.getDigit(r.charAt(f+1)),y=Ke.getDigit(r.charAt(f+2));o.appendBits(d*100+m*10+y,10),f+=3}else if(f+1<u){const m=Ke.getDigit(r.charAt(f+1));o.appendBits(d*10+m,7),f+=2}else o.appendBits(d,4),f++}}static appendAlphanumericBytes(r,o){const u=r.length;let f=0;for(;f<u;){const d=Ke.getAlphanumericCode(r.charCodeAt(f));if(d===-1)throw new He;if(f+1<u){const m=Ke.getAlphanumericCode(r.charCodeAt(f+1));if(m===-1)throw new He;o.appendBits(d*45+m,11),f+=2}else o.appendBits(d,6),f++}}static append8BitBytes(r,o,u){let f;try{f=tt.encode(r,u)}catch(d){throw new He(d)}for(let d=0,m=f.length;d!==m;d++){const y=f[d];o.appendBits(y,8)}}static appendKanjiBytes(r,o){let u;try{u=tt.encode(r,V.SJIS)}catch(d){throw new He(d)}const f=u.length;for(let d=0;d<f;d+=2){const m=u[d]&255,y=u[d+1]&255,v=m<<8&4294967295|y;let C=-1;if(v>=33088&&v<=40956?C=v-33088:v>=57408&&v<=60351&&(C=v-49472),C===-1)throw new He("Invalid byte sequence");const R=(C>>8)*192+(C&255);o.appendBits(R,13)}}static appendECI(r,o){o.appendBits(Xt.ECI.getBits(),4),o.appendBits(r.getValue(),8)}}Ke.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ke.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class or{write(r,o,u,f=null){if(r.length===0)throw new I("Found empty contents");if(o<0||u<0)throw new I("Requested dimensions are too small: "+o+"x"+u);let d=xe.L,m=or.QUIET_ZONE_SIZE;f!==null&&(f.get(Rn.ERROR_CORRECTION)!==void 0&&(d=xe.fromString(f.get(Rn.ERROR_CORRECTION).toString())),f.get(Rn.MARGIN)!==void 0&&(m=Number.parseInt(f.get(Rn.MARGIN).toString(),10)));const y=Ke.encode(r,d,f);return this.renderResult(y,o,u,m)}writeToDom(r,o,u,f,d=null){typeof r=="string"&&(r=document.querySelector(r));const m=this.write(o,u,f,d);r&&r.appendChild(m)}renderResult(r,o,u,f){const d=r.getMatrix();if(d===null)throw new Li;const m=d.getWidth(),y=d.getHeight(),v=m+f*2,C=y+f*2,R=Math.max(o,v),O=Math.max(u,C),P=Math.min(Math.floor(R/v),Math.floor(O/C)),H=Math.floor((R-m*P)/2),Z=Math.floor((O-y*P)/2),et=this.createSVGElement(R,O);for(let ut=0,gt=Z;ut<y;ut++,gt+=P)for(let Nt=0,Pt=H;Nt<m;Nt++,Pt+=P)if(d.get(Nt,ut)===1){const Rt=this.createSvgRectElement(Pt,gt,P,P);et.appendChild(Rt)}return et}createSVGElement(r,o){const u=document.createElementNS(or.SVG_NS,"svg");return u.setAttributeNS(null,"height",r.toString()),u.setAttributeNS(null,"width",o.toString()),u}createSvgRectElement(r,o,u,f){const d=document.createElementNS(or.SVG_NS,"rect");return d.setAttributeNS(null,"x",r.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",u.toString()),d.setAttributeNS(null,"width",f.toString()),d.setAttributeNS(null,"fill","#000000"),d}}or.QUIET_ZONE_SIZE=4,or.SVG_NS="http://www.w3.org/2000/svg";class jn{encode(r,o,u,f,d){if(r.length===0)throw new I("Found empty contents");if(o!==Mt.QR_CODE)throw new I("Can only encode QR_CODE, but got "+o);if(u<0||f<0)throw new I(`Requested dimensions are too small: ${u}x${f}`);let m=xe.L,y=jn.QUIET_ZONE_SIZE;d!==null&&(d.get(Rn.ERROR_CORRECTION)!==void 0&&(m=xe.fromString(d.get(Rn.ERROR_CORRECTION).toString())),d.get(Rn.MARGIN)!==void 0&&(y=Number.parseInt(d.get(Rn.MARGIN).toString(),10)));const v=Ke.encode(r,m,d);return jn.renderResult(v,u,f,y)}static renderResult(r,o,u,f){const d=r.getMatrix();if(d===null)throw new Li;const m=d.getWidth(),y=d.getHeight(),v=m+f*2,C=y+f*2,R=Math.max(o,v),O=Math.max(u,C),P=Math.min(Math.floor(R/v),Math.floor(O/C)),H=Math.floor((R-m*P)/2),Z=Math.floor((O-y*P)/2),et=new Ee(R,O);for(let ut=0,gt=Z;ut<y;ut++,gt+=P)for(let Nt=0,Pt=H;Nt<m;Nt++,Pt+=P)d.get(Nt,ut)===1&&et.setRegion(Pt,gt,P,P);return et}}jn.QUIET_ZONE_SIZE=4;class sl{encode(r,o,u,f,d){let m;switch(o){case Mt.QR_CODE:m=new jn;break;default:throw new I("No encoder available for format "+o)}return m.encode(r,o,u,f,d)}}class Ji extends jt{constructor(r,o,u,f,d,m,y,v){if(super(m,y),this.yuvData=r,this.dataWidth=o,this.dataHeight=u,this.left=f,this.top=d,f+m>o||d+y>u)throw new I("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(m,y)}getRow(r,o){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const u=this.getWidth();(o==null||o.length<u)&&(o=new Uint8ClampedArray(u));const f=(r+this.top)*this.dataWidth+this.left;return W.arraycopy(this.yuvData,f,o,0,u),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.yuvData;const u=r*o,f=new Uint8ClampedArray(u);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return W.arraycopy(this.yuvData,d,f,0,u),f;for(let m=0;m<o;m++){const y=m*r;W.arraycopy(this.yuvData,d,f,y,r),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(r,o,u,f){return new Ji(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+o,u,f,!1)}renderThumbnail(){const r=this.getWidth()/Ji.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Ji.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(r*o),f=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let m=0;m<o;m++){const y=m*r;for(let v=0;v<r;v++){const C=f[d+v*Ji.THUMBNAIL_SCALE_FACTOR]&255;u[y+v]=4278190080|C*65793}d+=this.dataWidth*Ji.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/Ji.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ji.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,o){const u=this.yuvData;for(let f=0,d=this.top*this.dataWidth+this.left;f<o;f++,d+=this.dataWidth){const m=d+r/2;for(let y=d,v=d+r-1;y<m;y++,v--){const C=u[y];u[y]=u[v],u[v]=C}}}invert(){return new ue(this)}}Ji.THUMBNAIL_SCALE_FACTOR=2;class lr extends jt{constructor(r,o,u,f,d,m,y){if(super(o,u),this.dataWidth=f,this.dataHeight=d,this.left=m,this.top=y,r.BYTES_PER_ELEMENT===4){const v=o*u,C=new Uint8ClampedArray(v);for(let R=0;R<v;R++){const O=r[R],P=O>>16&255,H=O>>7&510,Z=O&255;C[R]=(P+H+Z)/4&255}this.luminances=C}else this.luminances=r;if(f===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=u),m===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+u>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(r,o){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const u=this.getWidth();(o==null||o.length<u)&&(o=new Uint8ClampedArray(u));const f=(r+this.top)*this.dataWidth+this.left;return W.arraycopy(this.luminances,f,o,0,u),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.luminances;const u=r*o,f=new Uint8ClampedArray(u);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return W.arraycopy(this.luminances,d,f,0,u),f;for(let m=0;m<o;m++){const y=m*r;W.arraycopy(this.luminances,d,f,y,r),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(r,o,u,f){return new lr(this.luminances,u,f,this.dataWidth,this.dataHeight,this.left+r,this.top+o)}invert(){return new ue(this)}}class x extends V{static forName(r){return this.getCharacterSetECIByName(r)}}class b{}b.ISO_8859_1=V.ISO8859_1;class D{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class U{static singletonList(r){return[r]}static min(r,o){return r.sort(o)[0]}}class ot{constructor(r){this.previous=r}getPrevious(){return this.previous}}class xt extends ot{constructor(r,o,u){super(r),this.value=o,this.bitCount=u}appendTo(r,o){r.appendBits(this.value,this.bitCount)}add(r,o){return new xt(this,r,o)}addBinaryShift(r,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new xt(this,r,o)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+nt.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class kt extends xt{constructor(r,o,u){super(r,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=u}appendTo(r,o){for(let u=0;u<this.binaryShiftByteCount;u++)(u===0||u===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):u===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(o[this.binaryShiftStart+u],8)}addBinaryShift(r,o){return new kt(this,r,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Ie(M,r,o){return new kt(M,r,o)}function Tn(M,r,o){return new xt(M,r,o)}const Re=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],dn=0,Dn=1,zn=2,ii=3,Kn=4,_o=new xt(null,0,0),Oa=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function $c(M){for(let r of M)rt.fill(r,-1);return M[dn][Kn]=0,M[Dn][Kn]=0,M[Dn][dn]=28,M[ii][Kn]=0,M[zn][Kn]=0,M[zn][dn]=15,M}const mu=$c(rt.createInt32Array(6,6));class ur{constructor(r,o,u,f){this.token=r,this.mode=o,this.binaryShiftByteCount=u,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,o){let u=this.bitCount,f=this.token;if(r!==this.mode){let m=Oa[this.mode][r];f=Tn(f,m&65535,m>>16),u+=m>>16}let d=r===zn?4:5;return f=Tn(f,o,d),new ur(f,r,0,u+d)}shiftAndAppend(r,o){let u=this.token,f=this.mode===zn?4:5;return u=Tn(u,mu[this.mode][r],f),u=Tn(u,o,5),new ur(u,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(r){let o=this.token,u=this.mode,f=this.bitCount;if(this.mode===Kn||this.mode===zn){let y=Oa[u][dn];o=Tn(o,y&65535,y>>16),f+=y>>16,u=dn}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new ur(o,u,this.binaryShiftByteCount+1,f+d);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(r+1)),m}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=Ie(o,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new ur(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let o=this.bitCount+(Oa[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?o+=ur.calculateBinaryShiftCost(r)-ur.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(o+=10),o<=r.bitCount}toBitArray(r){let o=[];for(let f=this.endBinaryShift(r.length).token;f!==null;f=f.getPrevious())o.unshift(f);let u=new _t;for(const f of o)f.appendTo(u,r);return u}toString(){return K.format("%s bits=%d bytes=%d",Re[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}ur.INITIAL_STATE=new ur(_o,dn,0,0);function pu(M){const r=K.getCharCode(" "),o=K.getCharCode("."),u=K.getCharCode(",");M[dn][r]=1;const f=K.getCharCode("Z"),d=K.getCharCode("A");for(let P=d;P<=f;P++)M[dn][P]=P-d+2;M[Dn][r]=1;const m=K.getCharCode("z"),y=K.getCharCode("a");for(let P=y;P<=m;P++)M[Dn][P]=P-y+2;M[zn][r]=1;const v=K.getCharCode("9"),C=K.getCharCode("0");for(let P=C;P<=v;P++)M[zn][P]=P-C+2;M[zn][u]=12,M[zn][o]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let P=0;P<R.length;P++)M[ii][K.getCharCode(R[P])]=P;const O=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let P=0;P<O.length;P++)K.getCharCode(O[P])>0&&(M[Kn][K.getCharCode(O[P])]=P);return M}const al=pu(rt.createInt32Array(5,256));class La{constructor(r){this.text=r}encode(){const r=K.getCharCode(" "),o=K.getCharCode(`
`);let u=U.singletonList(ur.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let m,y=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case K.getCharCode("\r"):m=y===o?2:0;break;case K.getCharCode("."):m=y===r?3:0;break;case K.getCharCode(","):m=y===r?4:0;break;case K.getCharCode(":"):m=y===r?5:0;break;default:m=0}m>0?(u=La.updateStateListForPair(u,d,m),d++):u=this.updateStateListForChar(u,d)}return U.min(u,(d,m)=>d.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,o){const u=[];for(let f of r)this.updateStateForChar(f,o,u);return La.simplifyStates(u)}updateStateForChar(r,o,u){let f=this.text[o]&255,d=al[r.getMode()][f]>0,m=null;for(let y=0;y<=Kn;y++){let v=al[y][f];if(v>0){if(m==null&&(m=r.endBinaryShift(o)),!d||y===r.getMode()||y===zn){const C=m.latchAndAppend(y,v);u.push(C)}if(!d&&mu[r.getMode()][y]>=0){const C=m.shiftAndAppend(y,v);u.push(C)}}}if(r.getBinaryShiftByteCount()>0||al[r.getMode()][f]===0){let y=r.addBinaryShiftChar(o);u.push(y)}}static updateStateListForPair(r,o,u){const f=[];for(let d of r)this.updateStateForPair(d,o,u,f);return this.simplifyStates(f)}static updateStateForPair(r,o,u,f){let d=r.endBinaryShift(o);if(f.push(d.latchAndAppend(Kn,u)),r.getMode()!==Kn&&f.push(d.shiftAndAppend(Kn,u)),u===3||u===4){let m=d.latchAndAppend(zn,16-u).latchAndAppend(zn,1);f.push(m)}if(r.getBinaryShiftByteCount()>0){let m=r.addBinaryShiftChar(o).addBinaryShiftChar(o+1);f.push(m)}}static simplifyStates(r){let o=[];for(const u of r){let f=!0;for(const d of o){if(d.isBetterThanOrEqualTo(u)){f=!1;break}u.isBetterThanOrEqualTo(d)&&(o=o.filter(m=>m!==d))}f&&o.push(u)}return o}}class De{constructor(){}static encodeBytes(r){return De.encode(r,De.DEFAULT_EC_PERCENT,De.DEFAULT_AZTEC_LAYERS)}static encode(r,o,u){let f=new La(r).encode(),d=nt.truncDivision(f.getSize()*o,100)+11,m=f.getSize()+d,y,v,C,R,O;if(u!==De.DEFAULT_AZTEC_LAYERS){if(y=u<0,v=Math.abs(u),v>(y?De.MAX_NB_BITS_COMPACT:De.MAX_NB_BITS))throw new I(K.format("Illegal value %s for layers",u));C=De.totalBitsInLayer(v,y),R=De.WORD_SIZE[v];let Rt=C-C%R;if(O=De.stuffBits(f,R),O.getSize()+d>Rt)throw new I("Data to large for user specified layer");if(y&&O.getSize()>R*64)throw new I("Data to large for user specified layer")}else{R=0,O=null;for(let Rt=0;;Rt++){if(Rt>De.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(y=Rt<=3,v=y?Rt+1:Rt,C=De.totalBitsInLayer(v,y),m>C)continue;(O==null||R!==De.WORD_SIZE[v])&&(R=De.WORD_SIZE[v],O=De.stuffBits(f,R));let ce=C-C%R;if(!(y&&O.getSize()>R*64)&&O.getSize()+d<=ce)break}}let P=De.generateCheckWords(O,C,R),H=O.getSize()/R,Z=De.generateModeMessage(y,v,H),et=(y?11:14)+v*4,ut=new Int32Array(et),gt;if(y){gt=et;for(let Rt=0;Rt<ut.length;Rt++)ut[Rt]=Rt}else{gt=et+1+2*nt.truncDivision(nt.truncDivision(et,2)-1,15);let Rt=nt.truncDivision(et,2),ce=nt.truncDivision(gt,2);for(let oe=0;oe<Rt;oe++){let Ci=oe+nt.truncDivision(oe,15);ut[Rt-oe-1]=ce-Ci-1,ut[Rt+oe]=ce+Ci+1}}let Nt=new Ee(gt);for(let Rt=0,ce=0;Rt<v;Rt++){let oe=(v-Rt)*4+(y?9:12);for(let Ci=0;Ci<oe;Ci++){let cr=Ci*2;for(let Fi=0;Fi<2;Fi++)P.get(ce+cr+Fi)&&Nt.set(ut[Rt*2+Fi],ut[Rt*2+Ci]),P.get(ce+oe*2+cr+Fi)&&Nt.set(ut[Rt*2+Ci],ut[et-1-Rt*2-Fi]),P.get(ce+oe*4+cr+Fi)&&Nt.set(ut[et-1-Rt*2-Fi],ut[et-1-Rt*2-Ci]),P.get(ce+oe*6+cr+Fi)&&Nt.set(ut[et-1-Rt*2-Ci],ut[Rt*2+Fi])}ce+=oe*8}if(De.drawModeMessage(Nt,y,gt,Z),y)De.drawBullsEye(Nt,nt.truncDivision(gt,2),5);else{De.drawBullsEye(Nt,nt.truncDivision(gt,2),7);for(let Rt=0,ce=0;Rt<nt.truncDivision(et,2)-1;Rt+=15,ce+=16)for(let oe=nt.truncDivision(gt,2)&1;oe<gt;oe+=2)Nt.set(nt.truncDivision(gt,2)-ce,oe),Nt.set(nt.truncDivision(gt,2)+ce,oe),Nt.set(oe,nt.truncDivision(gt,2)-ce),Nt.set(oe,nt.truncDivision(gt,2)+ce)}let Pt=new D;return Pt.setCompact(y),Pt.setSize(gt),Pt.setLayers(v),Pt.setCodeWords(H),Pt.setMatrix(Nt),Pt}static drawBullsEye(r,o,u){for(let f=0;f<u;f+=2)for(let d=o-f;d<=o+f;d++)r.set(d,o-f),r.set(d,o+f),r.set(o-f,d),r.set(o+f,d);r.set(o-u,o-u),r.set(o-u+1,o-u),r.set(o-u,o-u+1),r.set(o+u,o-u),r.set(o+u,o-u+1),r.set(o+u,o+u-1)}static generateModeMessage(r,o,u){let f=new _t;return r?(f.appendBits(o-1,2),f.appendBits(u-1,6),f=De.generateCheckWords(f,28,4)):(f.appendBits(o-1,5),f.appendBits(u-1,11),f=De.generateCheckWords(f,40,4)),f}static drawModeMessage(r,o,u,f){let d=nt.truncDivision(u,2);if(o)for(let m=0;m<7;m++){let y=d-3+m;f.get(m)&&r.set(y,d-5),f.get(m+7)&&r.set(d+5,y),f.get(20-m)&&r.set(y,d+5),f.get(27-m)&&r.set(d-5,y)}else for(let m=0;m<10;m++){let y=d-5+m+nt.truncDivision(m,5);f.get(m)&&r.set(y,d-7),f.get(m+10)&&r.set(d+7,y),f.get(29-m)&&r.set(y,d+7),f.get(39-m)&&r.set(d-7,y)}}static generateCheckWords(r,o,u){let f=r.getSize()/u,d=new ws(De.getGF(u)),m=nt.truncDivision(o,u),y=De.bitsToWords(r,u,m);d.encode(y,m-f);let v=o%u,C=new _t;C.appendBits(0,v);for(const R of Array.from(y))C.appendBits(R,u);return C}static bitsToWords(r,o,u){let f=new Int32Array(u),d,m;for(d=0,m=r.getSize()/o;d<m;d++){let y=0;for(let v=0;v<o;v++)y|=r.get(d*o+v)?1<<o-v-1:0;f[d]=y}return f}static getGF(r){switch(r){case 4:return Ae.AZTEC_PARAM;case 6:return Ae.AZTEC_DATA_6;case 8:return Ae.AZTEC_DATA_8;case 10:return Ae.AZTEC_DATA_10;case 12:return Ae.AZTEC_DATA_12;default:throw new I("Unsupported word size "+r)}}static stuffBits(r,o){let u=new _t,f=r.getSize(),d=(1<<o)-2;for(let m=0;m<f;m+=o){let y=0;for(let v=0;v<o;v++)(m+v>=f||r.get(m+v))&&(y|=1<<o-1-v);(y&d)===d?(u.appendBits(y&d,o),m--):(y&d)===0?(u.appendBits(y|1,o),m--):u.appendBits(y,o)}return u}static totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}De.DEFAULT_EC_PERCENT=33,De.DEFAULT_AZTEC_LAYERS=0,De.MAX_NB_BITS=32,De.MAX_NB_BITS_COMPACT=4,De.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ol{encode(r,o,u,f){return this.encodeWithHints(r,o,u,f,null)}encodeWithHints(r,o,u,f,d){let m=b.ISO_8859_1,y=De.DEFAULT_EC_PERCENT,v=De.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Rn.CHARACTER_SET)&&(m=x.forName(d.get(Rn.CHARACTER_SET).toString())),d.has(Rn.ERROR_CORRECTION)&&(y=nt.parseInt(d.get(Rn.ERROR_CORRECTION).toString())),d.has(Rn.AZTEC_LAYERS)&&(v=nt.parseInt(d.get(Rn.AZTEC_LAYERS).toString()))),ol.encodeLayers(r,o,u,f,m,y,v)}static encodeLayers(r,o,u,f,d,m,y){if(o!==Mt.AZTEC)throw new I("Can only encode AZTEC, but got "+o);let v=De.encode(K.getBytes(r,d),m,y);return ol.renderResult(v,u,f)}static renderResult(r,o,u){let f=r.getMatrix();if(f==null)throw new Li;let d=f.getWidth(),m=f.getHeight(),y=Math.max(o,d),v=Math.max(u,m),C=Math.min(y/d,v/m),R=(y-d*C)/2,O=(v-m*C)/2,P=new Ee(y,v);for(let H=0,Z=O;H<m;H++,Z+=C)for(let et=0,ut=R;et<d;et++,ut+=C)f.get(et,H)&&P.setRegion(ut,Z,C,C);return P}}n.AbstractExpandedDecoder=Br,n.ArgumentException=S,n.ArithmeticException=Lr,n.AztecCode=D,n.AztecCodeReader=_a,n.AztecCodeWriter=ol,n.AztecDecoder=We,n.AztecDetector=Ao,n.AztecDetectorResult=js,n.AztecEncoder=De,n.AztecHighLevelEncoder=La,n.AztecPoint=Fe,n.BarcodeFormat=Mt,n.Binarizer=G,n.BinaryBitmap=L,n.BitArray=_t,n.BitMatrix=Ee,n.BitSource=oi,n.BrowserAztecCodeReader=zs,n.BrowserBarcodeReader=$o,n.BrowserCodeReader=Ot,n.BrowserDatamatrixCodeReader=gu,n.BrowserMultiFormatReader=nl,n.BrowserPDF417Reader=il,n.BrowserQRCodeReader=vo,n.BrowserQRCodeSvgWriter=or,n.CharacterSetECI=V,n.ChecksumException=k,n.Code128Reader=Vt,n.Code39Reader=Ye,n.DataMatrixDecodedBitStreamParser=kr,n.DataMatrixReader=Vi,n.DecodeHintType=Lt,n.DecoderResult=Oi,n.DefaultGridSampler=Ue,n.DetectorResult=Ta,n.EAN13Reader=Ai,n.EncodeHintType=Rn,n.Exception=E,n.FormatException=z,n.GenericGF=Ae,n.GenericGFPoly=_n,n.GlobalHistogramBinarizer=Et,n.GridSampler=va,n.GridSamplerInstance=Un,n.HTMLCanvasElementLuminanceSource=$,n.HybridBinarizer=At,n.ITFReader=Le,n.IllegalArgumentException=I,n.IllegalStateException=Li,n.InvertedLuminanceSource=ue,n.LuminanceSource=jt,n.MathUtils=we,n.MultiFormatOneDReader=rr,n.MultiFormatReader=As,n.MultiFormatWriter=sl,n.NotFoundException=mt,n.OneDReader=rn,n.PDF417DecodedBitStreamParser=pt,n.PDF417DecoderErrorCorrection=jr,n.PDF417Reader=Qn,n.PDF417ResultMetadata=Xs,n.PerspectiveTransform=Oe,n.PlanarYUVLuminanceSource=Ji,n.QRCodeByteMatrix=Ts,n.QRCodeDataMask=An,n.QRCodeDecodedBitStreamParser=hn,n.QRCodeDecoderErrorCorrectionLevel=xe,n.QRCodeDecoderFormatInformation=Sn,n.QRCodeEncoder=Ke,n.QRCodeEncoderQRCode=_i,n.QRCodeMaskUtil=fn,n.QRCodeMatrixUtil=Kt,n.QRCodeMode=Xt,n.QRCodeReader=xr,n.QRCodeVersion=Ut,n.QRCodeWriter=jn,n.RGBLuminanceSource=lr,n.RSS14Reader=pe,n.RSSExpandedReader=vt,n.ReaderException=Es,n.ReedSolomonDecoder=ps,n.ReedSolomonEncoder=ws,n.ReedSolomonException=nr,n.Result=zt,n.ResultMetadataType=ae,n.ResultPoint=Ht,n.StringUtils=K,n.UnsupportedOperationException=J,n.VideoInputDevice=It,n.WhiteRectangleDetector=Qi,n.WriterException=He,n.ZXingArrays=rt,n.ZXingCharset=x,n.ZXingInteger=nt,n.ZXingStandardCharsets=b,n.ZXingStringBuilder=q,n.ZXingStringEncoding=tt,n.ZXingSystem=W,n.createAbstractExpandedDecoder=To,Object.defineProperty(n,"__esModule",{value:!0})})}(fc,fc.exports)),fc.exports}var vn=IO();const RO=GA(vn),DO=aS({__proto__:null,default:RO},[vn]);var RA=function(){function e(t,n,s){if(this.formatMap=new Map([[Yt.QR_CODE,vn.BarcodeFormat.QR_CODE],[Yt.AZTEC,vn.BarcodeFormat.AZTEC],[Yt.CODABAR,vn.BarcodeFormat.CODABAR],[Yt.CODE_39,vn.BarcodeFormat.CODE_39],[Yt.CODE_93,vn.BarcodeFormat.CODE_93],[Yt.CODE_128,vn.BarcodeFormat.CODE_128],[Yt.DATA_MATRIX,vn.BarcodeFormat.DATA_MATRIX],[Yt.MAXICODE,vn.BarcodeFormat.MAXICODE],[Yt.ITF,vn.BarcodeFormat.ITF],[Yt.EAN_13,vn.BarcodeFormat.EAN_13],[Yt.EAN_8,vn.BarcodeFormat.EAN_8],[Yt.PDF_417,vn.BarcodeFormat.PDF_417],[Yt.RSS_14,vn.BarcodeFormat.RSS_14],[Yt.RSS_EXPANDED,vn.BarcodeFormat.RSS_EXPANDED],[Yt.UPC_A,vn.BarcodeFormat.UPC_A],[Yt.UPC_E,vn.BarcodeFormat.UPC_E],[Yt.UPC_EAN_EXTENSION,vn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!DO)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=s;var l=this.createZXingFormats(t),h=new Map;h.set(vn.DecodeHintType.POSSIBLE_FORMATS,l),h.set(vn.DecodeHintType.TRY_HARDER,!1),this.hints=h}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(s,l){try{s(n.decode(t))}catch(h){l(h)}})},e.prototype.decode=function(t){var n=new vn.MultiFormatReader(this.verbose,this.hints),s=new vn.HTMLCanvasElementLuminanceSource(t),l=new vn.BinaryBitmap(new vn.HybridBinarizer(s)),h=n.decode(l);return{text:h.text,format:D_.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,s,l){t.set(n,s)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],s=0,l=t;s<l.length;s++){var h=l[s];this.formatMap.has(h)?n.push(this.formatMap.get(h)):this.logger.logError("".concat(h," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),NO=function(e,t,n,s){function l(h){return h instanceof n?h:new n(function(p){p(h)})}return new(n||(n=Promise))(function(h,p){function A(S){try{E(s.next(S))}catch(I){p(I)}}function T(S){try{E(s.throw(S))}catch(I){p(I)}}function E(S){S.done?h(S.value):l(S.value).then(A,T)}E((s=s.apply(e,t||[])).next())})},MO=function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,l,h,p;return p={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function A(E){return function(S){return T([E,S])}}function T(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(n=0)),n;)try{if(s=1,l&&(h=E[0]&2?l.return:E[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,E[1])).done)return h;switch(l=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,l=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){n.label=E[1];break}if(E[0]===6&&n.label<h[1]){n.label=h[1],h=E;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(E);break}h[2]&&n.ops.pop(),n.trys.pop();continue}E=t.call(e,n)}catch(S){E=[6,S],l=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},DA=function(){function e(t,n,s){if(this.formatMap=new Map([[Yt.QR_CODE,"qr_code"],[Yt.AZTEC,"aztec"],[Yt.CODABAR,"codabar"],[Yt.CODE_39,"code_39"],[Yt.CODE_93,"code_93"],[Yt.CODE_128,"code_128"],[Yt.DATA_MATRIX,"data_matrix"],[Yt.ITF,"itf"],[Yt.EAN_13,"ean_13"],[Yt.EAN_8,"ean_8"],[Yt.PDF_417,"pdf417"],[Yt.UPC_A,"upc_a"],[Yt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=s;var l=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return NO(this,void 0,void 0,function(){var n,s;return MO(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=l.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(n),[2,{text:s.rawValue,format:D_.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,s=0,l=0,h=t;l<h.length;l++){var p=h[l],A=p.boundingBox.width*p.boundingBox.height;A>s&&(s=A,n=p)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],s=0,l=t;s<l.length;s++){var h=l[s];this.formatMap.has(h)?n.push(this.formatMap.get(h)):this.logger.warn("".concat(h," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,s,l){t.set(n,s)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),NA=function(e,t,n,s){function l(h){return h instanceof n?h:new n(function(p){p(h)})}return new(n||(n=Promise))(function(h,p){function A(S){try{E(s.next(S))}catch(I){p(I)}}function T(S){try{E(s.throw(S))}catch(I){p(I)}}function E(S){S.done?h(S.value):l(S.value).then(A,T)}E((s=s.apply(e,t||[])).next())})},MA=function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,l,h,p;return p={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function A(E){return function(S){return T([E,S])}}function T(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(n=0)),n;)try{if(s=1,l&&(h=E[0]&2?l.return:E[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,E[1])).done)return h;switch(l=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,l=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){n.label=E[1];break}if(E[0]===6&&n.label<h[1]){n.label=h[1],h=E;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(E);break}h[2]&&n.ops.pop(),n.trys.pop();continue}E=t.call(e,n)}catch(S){E=[6,S],l=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},OO=function(){function e(t,n,s,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,n&&DA.isSupported()?(this.primaryDecoder=new DA(t,s,l),this.secondaryDecoder=new RA(t,s,l)):this.primaryDecoder=new RA(t,s,l)}return e.prototype.decodeAsync=function(t){return NA(this,void 0,void 0,function(){var n;return MA(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return NA(this,void 0,void 0,function(){var n,s;return MA(this,function(l){switch(l.label){case 0:n=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,l.sent()];case 3:if(s=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw s;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,s=this.executionResults;n<s.length;n++){var l=s[n];t+=l}var h=t/this.executionResults.length;console.log("".concat(h," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),zm=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(s[h]=l[h])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),Kf=function(e,t,n,s){function l(h){return h instanceof n?h:new n(function(p){p(h)})}return new(n||(n=Promise))(function(h,p){function A(S){try{E(s.next(S))}catch(I){p(I)}}function T(S){try{E(s.throw(S))}catch(I){p(I)}}function E(S){S.done?h(S.value):l(S.value).then(A,T)}E((s=s.apply(e,t||[])).next())})},Zf=function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,l,h,p;return p={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function A(E){return function(S){return T([E,S])}}function T(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(n=0)),n;)try{if(s=1,l&&(h=E[0]&2?l.return:E[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,E[1])).done)return h;switch(l=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,l=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){n.label=E[1];break}if(E[0]===6&&n.label<h[1]){n.label=h[1],h=E;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(E);break}h[2]&&n.ops.pop(),n.trys.pop();continue}E=t.call(e,n)}catch(S){E=[6,S],l=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},L_=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var s={advanced:[n]};return this.track.applyConstraints(s)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),LO=function(e){zm(t,e);function t(n,s){return e.call(this,n,s)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var s={};s[this.name]=n;var l={advanced:[s]};return this.track.applyConstraints(l)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),s=n[this.name];return{min:s.min,max:s.max,step:s.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(L_),PO=function(e){zm(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(LO),BO=function(e){zm(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(L_),VO=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new PO(this.track)},e.prototype.torchFeature=function(){return new BO(this.track)},e}(),kO=function(){function e(t,n,s){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var s=t.surface.clientWidth,l=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(s,l),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,s,l){return Kf(this,void 0,void 0,function(){var h,p;return Zf(this,function(A){switch(A.label){case 0:return h=new e(t,n,l),s.aspectRatio?(p={aspectRatio:s.aspectRatio},[4,h.getFirstTrackOrFail().applyConstraints(p)]):[3,2];case 1:A.sent(),A.label=2;case 2:return h.setupSurface(),[2,h]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,s=function(){setTimeout(t,200),n.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Kf(this,void 0,void 0,function(){return Zf(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,s){var l=t.mediaStream.getVideoTracks(),h=l.length,p=0;t.mediaStream.getVideoTracks().forEach(function(A){t.mediaStream.removeTrack(A),A.stop(),++p,p>=h&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new VO(this.getFirstTrackOrFail())},e}(),UO=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,s){return Kf(this,void 0,void 0,function(){return Zf(this,function(l){return[2,kO.create(t,this.mediaStream,n,s)]})})},e.create=function(t){return Kf(this,void 0,void 0,function(){var n,s;return Zf(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return s=l.sent(),[2,new e(s)]}})})},e}(),OA=function(e,t,n,s){function l(h){return h instanceof n?h:new n(function(p){p(h)})}return new(n||(n=Promise))(function(h,p){function A(S){try{E(s.next(S))}catch(I){p(I)}}function T(S){try{E(s.throw(S))}catch(I){p(I)}}function E(S){S.done?h(S.value):l(S.value).then(A,T)}E((s=s.apply(e,t||[])).next())})},LA=function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,l,h,p;return p={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function A(E){return function(S){return T([E,S])}}function T(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(n=0)),n;)try{if(s=1,l&&(h=E[0]&2?l.return:E[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,E[1])).done)return h;switch(l=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,l=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){n.label=E[1];break}if(E[0]===6&&n.label<h[1]){n.label=h[1],h=E;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(E);break}h[2]&&n.ops.pop(),n.trys.pop();continue}E=t.call(e,n)}catch(S){E=[6,S],l=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},FO=function(){function e(){}return e.failIfNotSupported=function(){return OA(this,void 0,void 0,function(){return LA(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return OA(this,void 0,void 0,function(){return LA(this,function(n){return[2,UO.create(t)]})})},e}(),jO=function(e,t,n,s){function l(h){return h instanceof n?h:new n(function(p){p(h)})}return new(n||(n=Promise))(function(h,p){function A(S){try{E(s.next(S))}catch(I){p(I)}}function T(S){try{E(s.throw(S))}catch(I){p(I)}}function E(S){S.done?h(S.value):l(S.value).then(A,T)}E((s=s.apply(e,t||[])).next())})},zO=function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,l,h,p;return p={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function A(E){return function(S){return T([E,S])}}function T(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(n=0)),n;)try{if(s=1,l&&(h=E[0]&2?l.return:E[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,E[1])).done)return h;switch(l=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,l=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){n.label=E[1];break}if(E[0]===6&&n.label<h[1]){n.label=h[1],h=E;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(E);break}h[2]&&n.ops.pop(),n.trys.pop();continue}E=t.call(e,n)}catch(S){E=[6,S],l=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},HO=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Yl.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Yl.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return jO(this,void 0,void 0,function(){var t,n,s,l,h,p,A;return zO(this,function(T){switch(T.label){case 0:return t=function(E){for(var S=E.getVideoTracks(),I=0,L=S;I<L.length;I++){var k=L[I];k.enabled=!1,k.stop(),E.removeTrack(k)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=T.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=T.sent(),l=[],h=0,p=s;h<p.length;h++)A=p[h],A.kind==="videoinput"&&l.push({id:A.deviceId,label:A.label});return t(n),[2,l]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var s=function(h){for(var p=[],A=0,T=h;A<T.length;A++){var E=T[A];E.kind==="video"&&p.push({id:E.id,label:E.label})}t(p)},l=MediaStreamTrack;l.getSources(s)})},e}(),Yn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Yn||(Yn={}));var GO=function(){function e(){this.state=Yn.NOT_STARTED,this.onGoingTransactionNewState=Yn.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Yn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Yn.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Yn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Yn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Yn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Yn.UNKNOWN:throw"Transition from unknown is not allowed";case Yn.NOT_STARTED:this.failIfNewStateIs(t,[Yn.PAUSED]);break;case Yn.SCANNING:break;case Yn.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var s=0,l=n;s<l.length;s++){var h=l[s];if(t===h)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),YO=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Yn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Yn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Yn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Yn.PAUSED},e}(),qO=function(){function e(){}return e.create=function(){return new YO(new GO)},e}(),XO=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(s[h]=l[h])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function s(){this.constructor=t}t.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),Dr=function(e){XO(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(fs),WO=function(){function e(t,n){this.logger=n,this.fps=Dr.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Dr.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?O_.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Rs(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),PA=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var s;typeof n=="boolean"?this.verbose=n===!0:n&&(s=n,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new M_(this.verbose),this.qrcode=new OO(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=qO.create()}return e.prototype.start=function(t,n,s,l){var h=this;if(!t)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var p;l?p=l:p=this.verbose?this.logger.log:function(){};var A=WO.create(n,this.logger);this.clearElement();var T=!1;A.videoConstraints&&(A.isMediaStreamConstraintsValid()?T=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var E=T,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:Dr.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var I=this,L=this.stateManagerProxy.startTransition(Yn.SCANNING);return new Promise(function(k,G){var W=E?A.videoConstraints:I.createVideoConstraints(t);if(!W){L.cancel(),G("videoConstraints should be defined");return}var Y={};(!E||A.aspectRatio)&&(Y.aspectRatio=A.aspectRatio);var Q={onRenderSurfaceReady:function(rt,nt){I.setupUi(rt,nt,A),I.isScanning=!0,I.foreverScan(A,s,p)}};FO.failIfNotSupported().then(function(rt){rt.create(W).then(function(nt){return nt.render(h.element,Y,Q).then(function(_t){I.renderedCamera=_t,L.execute(),k(null)}).catch(function(_t){L.cancel(),G(_t)})}).catch(function(nt){L.cancel(),G(Yl.errorGettingUserMedia(nt))})}).catch(function(rt){L.cancel(),G(Yl.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Yn.PAUSED),this.showPausedState(),(Rs(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Yn.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Yn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(t.element){var h=document.getElementById(Dr.SHADED_REGION_ELEMENT_ID);h&&t.element.removeChild(h)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),s(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),n.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(s){return s.decodedText})},e.prototype.scanFileV2=function(t,n){var s=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Rs(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,h){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(t);var p=new Image;p.onload=function(){var A=p.width,T=p.height,E=document.getElementById(s.elementId),S=E.clientWidth?E.clientWidth:Dr.DEFAULT_WIDTH,I=Math.max(E.clientHeight?E.clientHeight:T,Dr.FILE_SCAN_MIN_HEIGHT),L=s.computeCanvasDrawConfig(A,T,S,I);if(n){var k=s.createCanvasElement(S,I,"qr-canvas-visible");k.style.display="inline-block",E.appendChild(k);var G=k.getContext("2d");if(!G)throw"Unable to get 2d context from canvas";G.canvas.width=S,G.canvas.height=I,G.drawImage(p,0,0,A,T,L.x,L.y,L.width,L.height)}var W=Dr.FILE_SCAN_HIDDEN_CANVAS_PADDING,Y=Math.max(p.width,L.width),Q=Math.max(p.height,L.height),rt=Y+2*W,nt=Q+2*W,_t=s.createCanvasElement(rt,nt);E.appendChild(_t);var St=_t.getContext("2d");if(!St)throw"Unable to get 2d context from canvas";St.canvas.width=rt,St.canvas.height=nt,St.drawImage(p,0,0,A,T,W,W,Y,Q);try{s.qrcode.decodeRobustlyAsync(_t).then(function(Lt){l(SA.createFromQrcodeResult(Lt))}).catch(h)}catch(Lt){h("QR code parse error, error = ".concat(Lt))}},p.onerror=h,p.onabort=h,p.onstalled=h,p.onsuspend=h,p.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return HO.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!O_.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[Yt.QR_CODE,Yt.AZTEC,Yt.CODABAR,Yt.CODE_39,Yt.CODE_93,Yt.CODE_128,Yt.DATA_MATRIX,Yt.MAXICODE,Yt.ITF,Yt.EAN_13,Yt.EAN_8,Yt.PDF_417,Yt.RSS_14,Yt.RSS_EXPANDED,Yt.UPC_A,Yt.UPC_E,Yt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],l=0,h=t.formatsToSupport;l<h.length;l++){var p=h[l];CO(p)?s.push(p):this.logger.warn("Invalid format: ".concat(p," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Rs(t))return!0;if(!Rs(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Rs(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Rs(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,s){var l=this,h=s.qrbox;this.validateQrboxConfig(h);var p=this.toQrdimensions(t,n,h),A=function(E){if(E<Dr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Dr.MIN_QR_BOX_SIZE,"px.")},T=function(E){return E>t&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),E=t),E};A(p.width),A(p.height),p.width=T(p.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(t,n)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return s},e.prototype.setupUi=function(t,n,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,s);var l=Rs(s.qrbox)?{width:t,height:n}:s.qrbox;this.validateQrboxConfig(l);var h=this.toQrdimensions(t,n,l);h.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var p=s.isShadedBoxEnabled()&&h.height<=n,A={x:0,y:0,width:t,height:n},T=p?this.getShadedRegionBounds(t,n,h):A,E=this.createCanvasElement(T.width,T.height),S={willReadFrequently:!0},I=E.getContext("2d",S);I.canvas.width=T.width,I.canvas.height=T.height,this.element.append(E),p&&this.possiblyInsertShadingElement(this.element,t,n,h),this.createScannerPausedUiElement(this.element),this.qrRegion=T,this.context=I,this.canvasElement=E},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Yl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return t(l.text,SA.createFromQrcodeResult(l)),s.possiblyUpdateShaders(!0),!0}).catch(function(l){s.possiblyUpdateShaders(!1);var h=Yl.codeParseError(l);return n(h,N_.createFrom(h)),!1})},e.prototype.foreverScan=function(t,n,s){var l=this;if(this.shouldScan&&this.renderedCamera){var h=this.renderedCamera.getSurface(),p=h.videoWidth/h.clientWidth,A=h.videoHeight/h.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var T=this.qrRegion.width*p,E=this.qrRegion.height*A,S=this.qrRegion.x*p,I=this.qrRegion.y*A;this.context.drawImage(h,S,I,T,E,0,0,this.qrRegion.width,this.qrRegion.height);var L=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(t,n,s)},l.getTimeoutFps(t.fps))};this.scanContext(n,s).then(function(k){!k&&t.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(n,s).finally(function(){L()})):L()}).catch(function(k){l.logger.logError("Error happend while scanning context",k),L()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",s="deviceId",l={user:!0,environment:!0},h="exact",p=function(G){if(G in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(G,"'")},A=Object.keys(t);if(A.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(A.length," keys");var T=Object.keys(t)[0];if(T!==n&&T!==s)throw"Only '".concat(n,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(T===n){var E=t.facingMode;if(typeof E=="string"){if(p(E))return{facingMode:E}}else if(typeof E=="object")if(h in E){if(p(E["".concat(h)]))return{facingMode:{exact:E["".concat(h)]}}}else throw"'facingMode' should be string or object with"+" ".concat(h," as key.");else{var S=typeof E;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var I=t.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(h in I)return{deviceId:{exact:I["".concat(h)]}};throw"'deviceId' should be string or object with"+" ".concat(h," as key.")}else{var L=typeof I;throw"Invalid type of 'deviceId' = ".concat(L)}}}var k=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(k)},e.prototype.computeCanvasDrawConfig=function(t,n,s,l){if(t<=s&&n<=l){var h=(s-t)/2,p=(l-n)/2;return{x:h,y:p,width:t,height:n}}else{var A=t,T=n;return t>s&&(n=s/t*n,t=s),n>l&&(t=l/n*t,n=l),this.logger.log("Image downsampled from "+"".concat(A,"X").concat(T)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,s,l)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Dr.BORDER_SHADER_MATCH_COLOR:Dr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,s){var l=t,h=n,p=document.createElement("canvas");return p.style.width="".concat(l,"px"),p.style.height="".concat(h,"px"),p.style.display="none",p.id=Rs(s)?"qr-canvas":s,p},e.prototype.getShadedRegionBounds=function(t,n,s){if(s.width>t||s.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-s.width)/2,y:(n-s.height)/2,width:s.width,height:s.height}},e.prototype.possiblyInsertShadingElement=function(t,n,s,l){if(!(n-l.width<1||s-l.height<1)){var h=document.createElement("div");h.style.position="absolute";var p=(n-l.width)/2,A=(s-l.height)/2;if(h.style.borderLeft="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderRight="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderTop="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderBottom="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),h.style.boxSizing="border-box",h.style.top="0px",h.style.bottom="0px",h.style.left="0px",h.style.right="0px",h.id="".concat(Dr.SHADED_REGION_ELEMENT_ID),n-l.width<11||s-l.height<11)this.hasBorderShaders=!1;else{var T=5,E=40;this.insertShaderBorders(h,E,T,-T,null,0,!0),this.insertShaderBorders(h,E,T,-T,null,0,!1),this.insertShaderBorders(h,E,T,null,-T,0,!0),this.insertShaderBorders(h,E,T,null,-T,0,!1),this.insertShaderBorders(h,T,E+T,-T,null,-T,!0),this.insertShaderBorders(h,T,E+T,null,-T,-T,!0),this.insertShaderBorders(h,T,E+T,-T,null,-T,!1),this.insertShaderBorders(h,T,E+T,null,-T,-T,!1),this.hasBorderShaders=!0}t.append(h)}},e.prototype.insertShaderBorders=function(t,n,s,l,h,p,A){var T=document.createElement("div");T.style.position="absolute",T.style.backgroundColor=Dr.BORDER_SHADER_DEFAULT_COLOR,T.style.width="".concat(n,"px"),T.style.height="".concat(s,"px"),l!==null&&(T.style.top="".concat(l,"px")),h!==null&&(T.style.bottom="".concat(h,"px")),A?T.style.left="".concat(p,"px"):T.style.right="".concat(p,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(T),t.appendChild(T)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),Hm="data:image/svg+xml;base64,",QO=Hm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",KO=Hm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",BA=Hm+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",ZO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",VA=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),JO=function(){function e(){this.data=VA.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=VA.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),$O=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=bA.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var s=document.createElement("br"),l=document.createElement("br");this.infoDiv.appendChild(s),this.infoDiv.appendChild(l);var h=document.createElement("a");h.innerText=bA.reportIssues(),h.href="https://github.com/mebjas/html5-qrcode/issues",h.target="new",h.style.color="white",this.infoDiv.appendChild(h),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),t5=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=BA,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(s){return n.onHoverIn()},this.infoIcon.onmouseout=function(s){return n.onHoverOut()},this.infoIcon.onclick=function(s){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=ZO,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=BA,this.infoIcon.style.opacity="0.6")},e}(),e5=function(){function e(){var t=this;this.infoDiv=new $O,this.infoIcon=new t5(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),n5=function(e,t,n,s){function l(h){return h instanceof n?h:new n(function(p){p(h)})}return new(n||(n=Promise))(function(h,p){function A(S){try{E(s.next(S))}catch(I){p(I)}}function T(S){try{E(s.throw(S))}catch(I){p(I)}}function E(S){S.done?h(S.value):l(S.value).then(A,T)}E((s=s.apply(e,t||[])).next())})},i5=function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,l,h,p;return p={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function A(E){return function(S){return T([E,S])}}function T(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(n=0)),n;)try{if(s=1,l&&(h=E[0]&2?l.return:E[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,E[1])).done)return h;switch(l=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,l=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){n.label=E[1];break}if(E[0]===6&&n.label<h[1]){n.label=h[1],h=E;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(E);break}h[2]&&n.ops.pop(),n.trys.pop();continue}E=t.call(e,n)}catch(S){E=[6,S],l=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},kA=function(){function e(){}return e.hasPermissions=function(){return n5(this,void 0,void 0,function(){var t,n,s,l;return i5(this,function(h){switch(h.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=h.sent(),n=0,s=t;n<s.length;n++)if(l=s[n],l.kind==="videoinput"&&l.label)return[2,!0];return[2,!1]}})})},e}(),no=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var s=n[t];if(e.isCameraScanType(s))return!0}return!1},e.isCameraScanType=function(t){return t===xo.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===xo.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return fs.DEFAULT_SUPPORTED_SCAN_TYPE;var n=fs.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var s=0,l=t;s<l.length;s++){var h=l[s];if(!fs.DEFAULT_SUPPORTED_SCAN_TYPE.includes(h))throw"Unsupported scan type ".concat(h)}return t},e}(),Mr=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),ha=function(){function e(){}return e.createElement=function(t,n){var s=document.createElement(t);return s.id=n,s.classList.add(Mr.ALL_ELEMENT_CLASS),t==="button"&&s.setAttribute("type","button"),s},e}(),P_=function(e,t,n,s){function l(h){return h instanceof n?h:new n(function(p){p(h)})}return new(n||(n=Promise))(function(h,p){function A(S){try{E(s.next(S))}catch(I){p(I)}}function T(S){try{E(s.throw(S))}catch(I){p(I)}}function E(S){S.done?h(S.value):l(S.value).then(A,T)}E((s=s.apply(e,t||[])).next())})},B_=function(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,l,h,p;return p={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function A(E){return function(S){return T([E,S])}}function T(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(n=0)),n;)try{if(s=1,l&&(h=E[0]&2?l.return:E[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,E[1])).done)return h;switch(l=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,l=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){n.label=E[1];break}if(E[0]===6&&n.label<h[1]){n.label=h[1],h=E;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(E);break}h[2]&&n.ops.pop(),n.trys.pop();continue}E=t.call(e,n)}catch(S){E=[6,S],l=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},UA=function(){function e(t,n,s){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=s}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return P_(this,void 0,void 0,function(){var t,n;return B_(this,function(s){switch(s.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return s.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=s.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?nn.torchOffButton():nn.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var s=t?nn.torchOnFailedMessage():nn.torchOffFailedMessage();n&&(s+="; Error = "+n),this.onTorchActionFailureCallback(s)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),r5=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=ha.createElement("button",Mr.TORCH_BUTTON_ID),this.torchController=new UA(t,this,n)}return e.prototype.render=function(t,n){var s=this;this.torchButton.innerText=nn.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var l=this;this.torchButton.addEventListener("click",function(h){return P_(s,void 0,void 0,function(){return B_(this,function(p){switch(p.label){case 0:return[4,l.torchController.flipState()];case 1:return p.sent(),l.torchController.isTorchEnabled()?(l.torchButton.classList.remove(Mr.TORCH_BUTTON_CLASS_TORCH_OFF),l.torchButton.classList.add(Mr.TORCH_BUTTON_CLASS_TORCH_ON)):(l.torchButton.classList.remove(Mr.TORCH_BUTTON_CLASS_TORCH_ON),l.torchButton.classList.add(Mr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new UA(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=nn.torchOnButton(),this.torchController.reset()},e.create=function(t,n,s,l){var h=new e(n,l);return h.render(t,s),h},e}(),s5=function(){function e(t,n,s){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var l=document.createElement("label");l.setAttribute("for",this.getFileScanInputId()),l.style.display="inline-block",this.fileBasedScanRegion.appendChild(l),this.fileSelectionButton=ha.createElement("button",Mr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(A){l.click()}),l.append(this.fileSelectionButton),this.fileScanInput=ha.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",l.appendChild(this.fileScanInput);var h=this;this.fileScanInput.addEventListener("change",function(A){if(!(A==null||A.target==null)){var T=A.target;if(!(T.files&&T.files.length===0)){var E=T.files,S=E[0],I=S.name;h.setImageNameToButton(I),s(S)}}});var p=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(p),this.fileBasedScanRegion.addEventListener("dragenter",function(A){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionActiveBorder(),A.stopPropagation(),A.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(A){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionDefaultBorder(),A.stopPropagation(),A.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(A){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionActiveBorder(),A.stopPropagation(),A.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(A){A.stopPropagation(),A.preventDefault(),h.fileBasedScanRegion.style.border=h.fileBasedScanRegionDefaultBorder();var T=A.dataTransfer;if(T){var E=T.files;if(!E||E.length===0)return;for(var S=!1,I=0;I<E.length;++I){var L=E.item(I);if(L){var k=/image.*/;if(L.type.match(k)){S=!0;var G=L.name;h.setImageNameToButton(G),s(L),p.innerText=nn.dragAndDropMessage();break}}}S||(p.innerText=nn.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=nn.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var s=t.substring(0,8),l=t.length,h=t.substring(l-8,l);t="".concat(s,"....").concat(h)}var p=nn.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=p},e.prototype.setInitialValueToButton=function(){var t=nn.fileSelectionChooseImage()+" - "+nn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,s){var l=new e(t,n,s);return l},e}(),a5=function(){function e(t){this.selectElement=ha.createElement("select",Mr.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var s=this.cameras.length;if(s===0)throw new Error("No cameras found");if(s===1)n.style.display="none";else{var l=nn.selectCamera();n.innerText="".concat(l," (").concat(this.cameras.length,")  ")}for(var h=1,p=0,A=this.cameras;p<A.length;p++){var T=A[p],E=T.id,S=T.label==null?E:T.label;(!S||S==="")&&(S=[nn.anonymousCameraPrefix(),h++].join(" "));var I=document.createElement("option");I.value=E,I.innerText=S,this.options.push(I),this.selectElement.appendChild(I)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,s=this.options;n<s.length;n++){var l=s[n];if(l.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var s=new e(n);return s.render(t),s},e}(),o5=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ha.createElement("input",Mr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var s=nn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(s),this.rangeText.style.marginRight="10px";var l=this;this.rangeInput.addEventListener("input",function(){return l.onValueChange()}),this.rangeInput.addEventListener("change",function(){return l.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=nn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,s,l){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=l.toString(),this.rangeInput.value=s.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var s=new e;return s.render(t,n),s},e}(),Nr;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Nr||(Nr={}));function l5(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function u5(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var c5=function(){function e(t,n,s){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=s===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new no(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new M_(this.verbose),this.persistedDataManager=new JO,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var s=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(h,p){if(t)t(h,p);else{if(s.lastMatchFound===h)return;s.lastMatchFound=h,s.setHeaderMessage(nn.lastMatch(h),Nr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(h,p){n&&n(h,p)};var l=document.getElementById(this.elementId);if(!l)throw"HTML Element with id=".concat(this.elementId," not found");l.innerHTML="",this.createBasicLayout(l),this.html5Qrcode=new PA(this.getScanRegionId(),u5(this.config,this.verbose))},e.prototype.pause=function(t){(Rs(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var s=document.getElementById(t.elementId);s&&(s.innerHTML="",t.resetBasicLayout(s))};return this.html5Qrcode?new Promise(function(s,l){if(!t.html5Qrcode){s();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(h){if(!t.html5Qrcode){s();return}t.html5Qrcode.clear(),n(),s()}).catch(function(h){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",h),l(h)}):(t.html5Qrcode.clear(),n(),s())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=fs.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!fs.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=fs.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=fs.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:fs.SCAN_DEFAULT_FPS,rememberLastUsedCamera:fs.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:fs.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),s=this.getScanRegionId();n.id=s,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),no.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var l=document.createElement("div"),h=this.getDashboardId();l.id=h,l.style.width="100%",t.appendChild(l),this.setupInitialDashboard(l)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var s=new e5;s.renderInto(n);var l=document.createElement("div");l.id=this.getHeaderMessageContainerId(),l.style.display="none",l.style.textAlign="center",l.style.fontSize="14px",l.style.padding="2px 10px",l.style.margin="4px",l.style.borderTop="1px solid #f6f6f6",n.appendChild(l)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,s){var l=this;l.showHideScanTypeSwapLink(!1),l.setHeaderMessage(nn.cameraPermissionRequesting());var h=function(){s||l.createPermissionButton(t,n)};PA.getCameras().then(function(p){l.persistedDataManager.setHasPermission(!0),l.showHideScanTypeSwapLink(!0),l.resetHeaderMessage(),p&&p.length>0?(t.removeChild(n),l.renderCameraSelection(p)):(l.setHeaderMessage(nn.noCameraFound(),Nr.STATUS_WARNING),h())}).catch(function(p){l.persistedDataManager.setHasPermission(!1),s?s.disabled=!1:h(),l.setHeaderMessage(p,Nr.STATUS_WARNING),l.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var s=this,l=ha.createElement("button",this.getCameraPermissionButtonId());l.innerText=nn.cameraPermissionTitle(),l.addEventListener("click",function(){l.disabled=!0,s.createCameraListUi(t,n,l)}),n.appendChild(l)},e.prototype.createPermissionsUi=function(t,n){var s=this;if(no.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){kA.hasPermissions().then(function(l){l?s.createCameraListUi(t,n):(s.persistedDataManager.setHasPermission(!1),s.createPermissionButton(t,n))}).catch(function(l){s.persistedDataManager.setHasPermission(!1),s.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var s=document.createElement("div");s.id=this.getDashboardSectionCameraScanRegionId(),s.style.display=no.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(s);var l=document.createElement("div");l.style.textAlign="center",s.appendChild(l),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(s,l),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=no.isFileScanType(this.currentScanType),s=this,l=function(h){if(!s.html5Qrcode)throw"html5Qrcode not defined";no.isFileScanType(s.currentScanType)&&(s.setHeaderMessage(nn.loadingImage()),s.html5Qrcode.scanFileV2(h,!0).then(function(p){s.resetHeaderMessage(),s.qrCodeSuccessCallback(p.decodedText,p)}).catch(function(p){s.setHeaderMessage(p,Nr.STATUS_WARNING),s.qrCodeErrorCallback(p,N_.createFrom(p))}))};this.fileSelectionUi=s5.create(t,n,l)},e.prototype.renderCameraSelection=function(t){var n=this,s=this,l=document.getElementById(this.getDashboardSectionCameraScanRegionId());l.style.textAlign="center";var h=o5.create(l,!1),p=function(W){var Y=W.zoomFeature();if(Y.isSupported()){h.setOnCameraZoomValueChangeCallback(function(rt){Y.apply(rt)});var Q=1;n.config.defaultZoomValueIfSupported&&(Q=n.config.defaultZoomValueIfSupported),Q=SO(Q,Y.min(),Y.max()),h.setValues(Y.min(),Y.max(),Q,Y.step()),h.show()}},A=a5.create(l,t),T=document.createElement("span"),E=ha.createElement("button",Mr.CAMERA_START_BUTTON_ID);E.innerText=nn.scanButtonStartScanningText(),T.appendChild(E);var S=ha.createElement("button",Mr.CAMERA_STOP_BUTTON_ID);S.innerText=nn.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,T.appendChild(S);var I,L=function(W){if(!W.torchFeature().isSupported()){I&&I.hide();return}I?I.updateTorchCapability(W.torchFeature()):I=r5.create(T,W.torchFeature(),{display:"none",marginLeft:"5px"},function(Y){s.setHeaderMessage(Y,Nr.STATUS_WARNING)}),I.show()};l.appendChild(T);var k=function(W){W||(E.style.display="none"),E.innerText=nn.scanButtonStartScanningText(),E.style.opacity="1",E.disabled=!1,W&&(E.style.display="inline-block")};if(E.addEventListener("click",function(W){E.innerText=nn.scanButtonScanningStarting(),A.disable(),E.disabled=!0,E.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&s.showHideScanTypeSwapLink(!1),s.resetHeaderMessage();var Y=A.getValue();s.persistedDataManager.setLastUsedCameraId(Y),s.html5Qrcode.start(Y,l5(s.config),s.qrCodeSuccessCallback,s.qrCodeErrorCallback).then(function(Q){S.disabled=!1,S.style.display="inline-block",k(!1);var rt=s.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&L(rt),n.config.showZoomSliderIfSupported===!0&&p(rt)}).catch(function(Q){s.showHideScanTypeSwapLink(!0),A.enable(),k(!0),s.setHeaderMessage(Q,Nr.STATUS_WARNING)})}),A.hasSingleItem()&&E.click(),S.addEventListener("click",function(W){if(!s.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,s.html5Qrcode.stop().then(function(Y){n.scanTypeSelector.hasMoreThanOneScanType()&&s.showHideScanTypeSwapLink(!0),A.enable(),E.disabled=!1,S.style.display="none",E.style.display="inline-block",I&&(I.reset(),I.hide()),h.removeOnCameraZoomValueChangeCallback(),h.hide(),s.insertCameraScanImageToScanRegion()}).catch(function(Y){S.disabled=!1,s.setHeaderMessage(Y,Nr.STATUS_WARNING)})}),s.persistedDataManager.getLastUsedCameraId()){var G=s.persistedDataManager.getLastUsedCameraId();A.hasValue(G)?(A.setValue(G),E.click()):s.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=nn.textIfCameraScanSelected(),s=nn.textIfFileScanSelected(),l=document.getElementById(this.getDashboardSectionId()),h=document.createElement("div");h.style.textAlign="center";var p=ha.createElement("span",this.getDashboardSectionSwapLinkId());p.style.textDecoration="underline",p.style.cursor="pointer",p.innerText=no.isCameraScanType(this.currentScanType)?n:s,p.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,no.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),p.innerText=s,t.currentScanType=xo.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),p.innerText=n,t.currentScanType=xo.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),h.appendChild(p),l.appendChild(h)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){kA.hasPermissions().then(function(s){if(s){var l=document.getElementById(n.getCameraPermissionButtonId());if(!l)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";l.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(s){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=Nr.STATUS_DEFAULT);var s=this.getHeaderMessageDiv();switch(s.innerText=t,s.style.display="block",n){case Nr.STATUS_SUCCESS:s.style.background="rgba(106, 175, 80, 0.26)",s.style.color="#477735";break;case Nr.STATUS_WARNING:s.style.background="rgba(203, 36, 49, 0.14)",s.style.color="#cb2431";break;case Nr.STATUS_DEFAULT:default:s.style.background="rgba(0, 0, 0, 0)",s.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(s){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=QO,this.cameraScanImage.alt=nn.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(s){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=KO,this.fileScanImage.alt=nn.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return Mr.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return Mr.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();const h5=()=>{const e=zc(),[t,n]=ct.useState(0),s=5;return ct.useEffect(()=>{const l=new c5("reader",{fps:10,qrbox:250});return l.render(h=>{l.clear(),n(p=>p+1),e(`/quiz/${h}`),t+1===s&&e("/celebration")},h=>{console.warn("QR Scan Error:",h)}),()=>{l.clear().catch(h=>console.error("Clear error:",h))}},[e,t]),lt.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-yellow-100 p-4",children:lt.jsxs(ds.div,{className:"w-full max-w-sm bg-white/20 backdrop-blur-lg rounded-2xl shadow-xl p-6 flex flex-col items-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[lt.jsx(ds.h1,{className:"text-xl font-bold text-green-800 mb-4 text-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},children:"📸 Scan Your QR Clue"}),lt.jsx("div",{id:"reader",className:"w-full aspect-square bg-black rounded-lg overflow-hidden shadow-lg"}),lt.jsx("p",{className:"text-sm text-gray-800 mt-4 text-center",children:"Align the clue in view to scan and unlock your next challenge."}),lt.jsx("button",{onClick:()=>e("/"),className:"mt-5 px-4 py-2 rounded-lg bg-green-600 text-white font-semibold hover:bg-green-700 transition",children:"⬅️ Back to Home"})]})})},f5=["stage1","stage2","stage3","stage4","stage5"];function d5(){const[e,t]=ct.useState("stage1"),[n,s]=ct.useState(null),[l,h]=ct.useState([]),[p,A]=ct.useState(!1),T=zc(),E=async Y=>{A(!0);const Q=Tf(Gl,"questions",Y),rt=await mO(Q);rt.exists()?s(rt.data()):s({questions:[{question:"",options:["","","",""],answer:""},{question:"",options:["","","",""],answer:""}],hint:""}),A(!1)},S=async()=>{const Y=await R_(Pm(Gl,"teams")),Q=[];Y.forEach(rt=>{Q.push({id:rt.id,...rt.data()})}),h(Q)};ct.useEffect(()=>{E(e),S()},[e]);const I=async()=>{await pO(Tf(Gl,"questions",e),n),alert("✅ Saved Successfully")},L=async Y=>{window.confirm("Are you sure you want to delete this team?")&&(await yO(Tf(Gl,"teams",Y)),S())},k=(Y,Q,rt)=>{const nt=[...n.questions];nt[Y][Q]=rt,s({...n,questions:nt})},G=(Y,Q,rt)=>{const nt=[...n.questions];nt[Y].options[Q]=rt,s({...n,questions:nt})},W=Y=>{if(typeof Y!="number"||isNaN(Y))return"-";const Q=Math.floor(Y/60),rt=Y%60;return`${Q}m ${rt}s`};return lt.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[lt.jsx(Gc,{}),lt.jsxs("main",{className:"flex-1 p-6 max-w-6xl mx-auto w-full",children:[lt.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"🛠 Admin Dashboard"}),lt.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-6",children:f5.map(Y=>lt.jsx("button",{onClick:()=>t(Y),className:`px-4 py-2 rounded-lg font-medium ${Y===e?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:Y.toUpperCase()},Y))}),p||!n?lt.jsx("p",{className:"text-center text-gray-500",children:"Loading stage..."}):lt.jsxs("div",{className:"space-y-6",children:[n.questions.map((Y,Q)=>lt.jsxs("div",{className:"p-5 bg-white rounded-2xl shadow space-y-3 border",children:[lt.jsxs("h2",{className:"font-semibold text-lg text-blue-800",children:["Question ",Q+1]}),lt.jsx("input",{className:"w-full p-2 border rounded",value:Y.question,onChange:rt=>k(Q,"question",rt.target.value),placeholder:"Question"}),Y.options.map((rt,nt)=>lt.jsx("input",{className:"w-full p-2 border rounded",value:rt,onChange:_t=>G(Q,nt,_t.target.value),placeholder:`Option ${nt+1}`},nt)),lt.jsx("input",{className:"w-full p-2 border rounded",value:Y.answer,onChange:rt=>k(Q,"answer",rt.target.value),placeholder:"Correct Answer"})]},Q)),lt.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow border",children:[lt.jsx("h2",{className:"font-semibold text-lg text-green-700",children:"Hint for Next QR"}),lt.jsx("input",{className:"w-full p-2 border rounded",value:n.hint,onChange:Y=>s({...n,hint:Y.target.value}),placeholder:"Hint for next QR"})]}),lt.jsx("button",{onClick:I,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-xl transition-all duration-200",children:"💾 Save Changes"})]}),lt.jsx("h2",{className:"text-2xl font-bold mt-12 mb-4 text-center text-green-800",children:"🏆 Leaderboard (Admin Access)"}),lt.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-xl",children:lt.jsxs("table",{className:"min-w-full table-auto",children:[lt.jsx("thead",{className:"bg-green-600 text-white",children:lt.jsxs("tr",{children:[lt.jsx("th",{className:"py-3 px-4 text-left",children:"#"}),lt.jsx("th",{className:"py-3 px-4 text-left",children:"Team"}),lt.jsx("th",{className:"py-3 px-4 text-left",children:"Players"}),lt.jsx("th",{className:"py-3 px-4 text-left",children:"Score"}),lt.jsx("th",{className:"py-3 px-4 text-left",children:"Time"}),lt.jsx("th",{className:"py-3 px-4 text-left",children:"Actions"})]})}),lt.jsx("tbody",{children:l.map((Y,Q)=>lt.jsxs("tr",{className:Q%2===0?"bg-green-50":"bg-white",children:[lt.jsx("td",{className:"py-3 px-4",children:Q+1}),lt.jsx("td",{className:"py-3 px-4 font-bold text-green-700",children:Y.teamName}),lt.jsxs("td",{className:"py-3 px-4",children:[Y.player1," & ",Y.player2]}),lt.jsx("td",{className:"py-3 px-4 font-semibold",children:Y.score}),lt.jsx("td",{className:"py-3 px-4",children:W(Y.timeTaken)}),lt.jsx("td",{className:"py-3 px-4",children:lt.jsx("button",{onClick:()=>L(Y.id),className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",children:"🗑 Delete"})})]},Y.id))})]})}),lt.jsx("div",{className:"text-center mt-10",children:lt.jsx("button",{onClick:()=>T("/"),className:"px-6 py-3 bg-green-800 text-white rounded-xl hover:bg-green-900",children:"⬅️ Back to Home"})})]}),lt.jsx(su,{})]})}function g5(){const[e,t]=ct.useState(""),n=zc(),s=()=>{e==="admin123"?n("/admin"):alert("Wrong password 🚫")};return lt.jsx("div",{className:"min-h-screen flex flex-col justify-center items-center bg-gradient-to-r from-green-100 to-blue-100 px-4",children:lt.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl w-full max-w-md space-y-4",children:[lt.jsx("h2",{className:"text-2xl font-bold text-center",children:"🔐 Admin Login"}),lt.jsx("input",{type:"password",className:"w-full p-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-green-400",placeholder:"Enter Admin Password",value:e,onChange:l=>t(l.target.value)}),lt.jsx("button",{onClick:s,className:"w-full bg-green-600 text-white p-3 rounded-xl hover:bg-green-700 transition-all",children:"Login"})]})})}const m5=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),V_=e=>Array.isArray(e)&&e.every(t=>typeof t=="object"&&!(t instanceof Array)),p5=e=>Array.isArray(e)&&e.every(t=>Array.isArray(t)),y5=e=>Array.from(e.map(t=>Object.keys(t)).reduce((t,n)=>new Set([...t,...n]),[])),x5=(e,t)=>{t=t||y5(e);let n=t,s=t;V_(t)&&(n=t.map(h=>h.label),s=t.map(h=>h.key));const l=e.map(h=>s.map(p=>E5(p,h)));return[n,...l]},E5=(e,t)=>{const n=e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(s,l,h,p){const A=s[l];if(A==null)p.splice(1);else return A},t);return n===void 0?e in t?t[e]:"":n},A5=e=>typeof e>"u"||e===null?"":e,k_=(e,t=",",n='"')=>e.filter(s=>s).map(s=>s.map(l=>A5(l)).map(l=>`${n}${l}${n}`).join(t)).join(`
`),w5=(e,t,n,s)=>k_(t?[t,...e]:e,n,s),T5=(e,t,n,s)=>k_(x5(e,t),n,s),v5=(e,t,n,s)=>t?`${t.join(n)}
${e}`:e.replace(/"/g,'""'),U_=(e,t,n,s)=>{if(V_(e))return T5(e,t,n,s);if(p5(e))return w5(e,t,n,s);if(typeof e=="string")return v5(e,t,n);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},F_=(e,t,n,s,l)=>{const h=U_(e,n,s,l),p=m5()?"application/csv":"text/csv",A=new Blob([t?"\uFEFF":"",h],{type:p}),T=`data:${p};charset=utf-8,${t?"\uFEFF":""}${h}`,E=window.URL||window.webkitURL;return typeof E.createObjectURL>"u"?T:E.createObjectURL(A)};var R1={exports:{}},D1,FA;function _5(){if(FA)return D1;FA=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return D1=e,D1}var N1,jA;function C5(){if(jA)return N1;jA=1;var e=_5();function t(){}function n(){}return n.resetWarningCache=t,N1=function(){function s(p,A,T,E,S,I){if(I!==e){var L=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw L.name="Invariant Violation",L}}s.isRequired=s;function l(){return s}var h={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:l,element:s,elementType:s,instanceOf:l,node:s,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:n,resetWarningCache:t};return h.PropTypes=h,h},N1}var zA;function S5(){return zA||(zA=1,R1.exports=C5()()),R1.exports}var Jr=S5();const j_={data:Jr.oneOfType([Jr.string,Jr.array,Jr.func]).isRequired,headers:Jr.array,target:Jr.string,separator:Jr.string,filename:Jr.string,uFEFF:Jr.bool,onClick:Jr.func,asyncOnClick:Jr.bool,enclosingCharacter:Jr.string},z_={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},b5={target:"_blank"};class HA extends fa.Component{constructor(t){super(t),this.state={}}buildURI(){return F_(...arguments)}componentDidMount(){const{data:t,headers:n,separator:s,enclosingCharacter:l,uFEFF:h,target:p,specs:A,replace:T}=this.props;this.state.page=window.open(this.buildURI(t,h,n,s,l),p,A,T)}getWindow(){return this.state.page}render(){return null}}tc(HA,"defaultProps",Object.assign(z_,b5)),tc(HA,"propTypes",j_);var hf;let I5=(hf=class extends fa.Component{constructor(t){super(t),this.buildURI=this.buildURI.bind(this)}buildURI(){return F_(...arguments)}handleLegacy(t,n=!1){if(window.navigator.msSaveOrOpenBlob){t.preventDefault();const{data:s,headers:l,separator:h,filename:p,enclosingCharacter:A,uFEFF:T}=this.props,E=n&&typeof s=="function"?s():s;let S=new Blob([T?"\uFEFF":"",U_(E,l,h,A)]);return window.navigator.msSaveBlob(S,p),!1}}handleAsyncClick(t){const n=s=>{if(s===!1){t.preventDefault();return}this.handleLegacy(t,!0)};this.props.onClick(t,n)}handleSyncClick(t){if(this.props.onClick(t)===!1){t.preventDefault();return}this.handleLegacy(t)}handleClick(){return t=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(t):this.handleSyncClick(t);this.handleLegacy(t)}}render(){const{data:t,headers:n,separator:s,filename:l,uFEFF:h,children:p,onClick:A,asyncOnClick:T,enclosingCharacter:E,...S}=this.props,L=typeof window>"u"?"":this.buildURI(t,h,n,s,E);return lt.jsx("a",{download:l,...S,ref:k=>this.link=k,target:"_self",href:L,onClick:this.handleClick(),children:p})}},tc(hf,"defaultProps",z_),tc(hf,"propTypes",j_),hf);const R5=I5,D5=()=>{const[e,t]=ct.useState([]),[n,s]=ct.useState(""),[l,h]=ct.useState([]);ct.useEffect(()=>{(async()=>{const T=await R_(Pm(Gl,"teams")),E=[];T.forEach(S=>{E.push({id:S.id,...S.data()})}),E.sort((S,I)=>I.score-S.score||S.timeTaken-I.timeTaken),t(E),h(E)})()},[]),ct.useEffect(()=>{const A=e.filter(T=>T.teamName.toLowerCase().includes(n.toLowerCase())||T.player1.toLowerCase().includes(n.toLowerCase())||T.player2.toLowerCase().includes(n.toLowerCase()));h(A)},[n,e]);const p=A=>{if(isNaN(A))return"N/A";const T=Math.floor(A/60),E=A%60;return`${T}m ${E}s`};return lt.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-100 to-white flex flex-col",children:[lt.jsx(Gc,{}),lt.jsxs("main",{className:"flex-1 p-6 max-w-4xl mx-auto w-full",children:[lt.jsx("h1",{className:"text-3xl font-bold text-center text-green-700 mb-8",children:"🏆 Leaderboard"}),lt.jsx("div",{className:"flex justify-center mb-6",children:lt.jsx("input",{type:"text",className:"p-3 w-full sm:w-1/2 border border-green-600 rounded-xl",placeholder:"Search by team name or player",value:n,onChange:A=>s(A.target.value)})}),lt.jsx("div",{className:"flex justify-center mb-6",children:lt.jsx(R5,{data:l,filename:"leaderboard.csv",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-xl font-semibold shadow-md",children:"Export CSV"})}),lt.jsx("div",{className:"bg-white shadow-xl rounded-xl overflow-hidden",children:lt.jsxs("table",{className:"min-w-full table-auto",children:[lt.jsx("thead",{className:"bg-green-600 text-white",children:lt.jsxs("tr",{children:[lt.jsx("th",{className:"py-3 px-4 text-left",children:"#"}),lt.jsx("th",{className:"py-3 px-4 text-left",children:"Team"}),lt.jsx("th",{className:"py-3 px-4 text-left",children:"Players"}),lt.jsx("th",{className:"py-3 px-4 text-left",children:"Score"}),lt.jsx("th",{className:"py-3 px-4 text-left",children:"Time"})]})}),lt.jsx("tbody",{children:l.map((A,T)=>lt.jsxs("tr",{className:T%2===0?"bg-green-50":"bg-white",children:[lt.jsx("td",{className:"py-3 px-4",children:T+1}),lt.jsx("td",{className:"py-3 px-4 font-bold text-green-700",children:A.teamName}),lt.jsxs("td",{className:"py-3 px-4",children:[A.player1," & ",A.player2]}),lt.jsxs("td",{className:"py-3 px-4 font-semibold",children:[A.score,"/20"]}),lt.jsx("td",{className:"py-3 px-4",children:p(A.timeTaken)})]},A.id))})]})})]}),lt.jsx(su,{})]})},N5=()=>lt.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-100 to-white flex flex-col",children:[lt.jsx(Gc,{}),lt.jsxs("main",{className:"flex-1 p-6 max-w-4xl mx-auto w-full",children:[lt.jsx("h1",{className:"text-3xl font-bold text-center text-green-700 mb-8",children:"How to Play"}),lt.jsxs("section",{className:"bg-white p-6 rounded-xl shadow-lg mb-6",children:[lt.jsx("h2",{className:"text-2xl font-semibold text-green-700",children:"Step 1: Register Your Team"}),lt.jsx("p",{className:"text-lg text-gray-700",children:"Start by registering your team on the homepage. Each team should have 2 players to participate."})]}),lt.jsxs("section",{className:"bg-white p-6 rounded-xl shadow-lg mb-6",children:[lt.jsx("h2",{className:"text-2xl font-semibold text-green-700",children:"Step 2: Scan QR Codes"}),lt.jsx("p",{className:"text-lg text-gray-700",children:"Explore the campus and look for hidden QR codes. Scan these codes to unlock new challenges and questions."})]}),lt.jsxs("section",{className:"bg-white p-6 rounded-xl shadow-lg mb-6",children:[lt.jsx("h2",{className:"text-2xl font-semibold text-green-700",children:"Step 3: Solve the Challenges"}),lt.jsx("p",{className:"text-lg text-gray-700",children:"Answer 2 fun questions at each stage. Correct answers will help you advance to the next stage."})]}),lt.jsxs("section",{className:"bg-white p-6 rounded-xl shadow-lg mb-6",children:[lt.jsx("h2",{className:"text-2xl font-semibold text-green-700",children:"Step 4: Finish Fast!"}),lt.jsx("p",{className:"text-lg text-gray-700",children:"The team that completes all the stages first wins the game. Keep an eye on the time!"})]})]}),lt.jsx(su,{})]}),M5=()=>lt.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-100 to-white flex flex-col",children:[lt.jsx(Gc,{}),lt.jsx("main",{className:"flex-1 p-6 max-w-4xl mx-auto w-full",children:lt.jsxs("div",{className:"text-center",children:[lt.jsx("h1",{className:"text-4xl font-bold text-green-700 mb-4",children:"🎉 Congratulations!"}),lt.jsx("p",{className:"text-xl text-gray-700 mb-6",children:"You have successfully completed all the stages of the EcoQuest! 🌿"}),lt.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Thank you for playing, and remember, you're contributing to a more sustainable future."}),lt.jsx("p",{className:"text-2xl text-green-800 font-semibold",children:"Your Team is the Hero! 🏆"})]})}),lt.jsx(su,{})]});function O5(){return lt.jsx(Db,{children:lt.jsxs(ab,{children:[lt.jsx(ca,{path:"/",element:lt.jsx(C8,{})}),lt.jsx(ca,{path:"/register",element:lt.jsx(_O,{})}),lt.jsx(ca,{path:"/scan",element:lt.jsx(h5,{})}),lt.jsx(ca,{path:"/admin",element:lt.jsx(d5,{})}),lt.jsx(ca,{path:"/admin-login",element:lt.jsx(g5,{})}),lt.jsx(ca,{path:"/leaderboard",element:lt.jsx(D5,{})}),lt.jsx(ca,{path:"/how-to-play",element:lt.jsx(N5,{})}),lt.jsx(ca,{path:"/celebration",element:lt.jsx(M5,{})})]})})}pS.createRoot(document.getElementById("root")).render(lt.jsx(ct.StrictMode,{children:lt.jsx(O5,{})}));
